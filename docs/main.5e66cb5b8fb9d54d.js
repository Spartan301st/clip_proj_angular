var mL=Object.defineProperty,qC=Object.getOwnPropertySymbols,nR=Object.prototype.hasOwnProperty,rR=Object.prototype.propertyIsEnumerable,tR=(Me,oe,k)=>oe in Me?mL(Me,oe,{enumerable:!0,configurable:!0,writable:!0,value:k}):Me[oe]=k,ZC=(Me,oe)=>{for(var k in oe||(oe={}))nR.call(oe,k)&&tR(Me,k,oe[k]);if(qC)for(var k of qC(oe))rR.call(oe,k)&&tR(Me,k,oe[k]);return Me},iR=(Me,oe)=>{var k={};for(var c in Me)nR.call(Me,c)&&oe.indexOf(c)<0&&(k[c]=Me[c]);if(null!=Me&&qC)for(var c of qC(Me))oe.indexOf(c)<0&&rR.call(Me,c)&&(k[c]=Me[c]);return k};(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(Me,oe,k)=>{"use strict";k.d(oe,{Dh:()=>ne,GT:()=>te,cc:()=>Re,hO:()=>$e,on:()=>B,pX:()=>Z,xv:()=>ae});var c=k(5e3),q=k(127),N=k(5813);Me=k.hmd(Me);const Y=["ngOnDestroy"],Z=(pe,st,et,Ie={})=>new Proxy(pe,{get:(Ee,be)=>et.runOutsideAngular(()=>{var He;if(pe[be])return(null===(He=null==Ie?void 0:Ie.spy)||void 0===He?void 0:He.get)&&Ie.spy.get(be,pe[be]),pe[be];if(Y.indexOf(be)>-1)return()=>{};const Ge=st.toPromise().then(ue=>{const Q=ue&&ue[be];return"function"==typeof Q?Q.bind(ue):Q&&Q.then?Q.then(ce=>et.run(()=>ce)):et.run(()=>Q)});return new Proxy(()=>{},{get:(ue,Q)=>Ge[Q],apply:(ue,Q,ce)=>Ge.then(me=>{var de;const Le=me&&me(...ce);return(null===(de=null==Ie?void 0:Ie.spy)||void 0===de?void 0:de.apply)&&Ie.spy.apply(be,ce,Le),Le})})})}),te=(pe,st)=>{st.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Ie=>{Object.defineProperty(pe.prototype,Ie,Object.getOwnPropertyDescriptor(et.prototype||et,Ie))})})};class ee{constructor(st){return st}}const ne=new c.OlP("angularfire2.app.options"),ae=new c.OlP("angularfire2.app.name");function B(pe,st,et){const Ee="object"==typeof et&&et||{};Ee.name=Ee.name||"string"==typeof et&&et||"[DEFAULT]";const He=q.Z.apps.filter(Ge=>Ge&&Ge.name===Ee.name)[0]||st.runOutsideAngular(()=>q.Z.initializeApp(pe,Ee));try{JSON.stringify(pe)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${Me.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ge){}return new ee(He)}const $=(pe,...st)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[pe](...st)},W={provide:ee,useFactory:B,deps:[ne,c.R0b,[new c.FiY,ae]]};let $e=(()=>{class pe{constructor(et){q.Z.registerVersion("angularfire",N.q4.full,"core"),q.Z.registerVersion("angularfire",N.q4.full,"app-compat"),q.Z.registerVersion("angular",c.q4F.full,et.toString())}static initializeApp(et,Ie){return{ngModule:pe,providers:[{provide:ne,useValue:et},{provide:ae,useValue:Ie}]}}}return pe.\u0275fac=function(et){return new(et||pe)(c.LFG(c.Lbi))},pe.\u0275mod=c.oAB({type:pe}),pe.\u0275inj=c.cJS({providers:[W]}),pe})();function Re(pe,st,et,Ie,Ee){const[,be,He]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===pe)||[];if(be)return function Ce(pe,st){try{return pe.toString()===st.toString()}catch(et){return pe===st}}(Ee,He)||(we("error",`${st} was already initialized on the ${et} Firebase App with different settings.${Qe?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Ee,was:He})),be;{const Ge=Ie();return globalThis.\u0275AngularfireInstanceCache.push([pe,Ge,Ee]),Ge}}const Qe=!!Me.hot,we=(pe,...st)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[pe](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Me,oe,k)=>{"use strict";k.d(oe,{q4:()=>$l,iC:()=>zl,fc:()=>Vn,HU:()=>Au,vb:()=>gd,JM:()=>so});var c=k(5e3),q=k(5867),N=k(5861),Y=k(9681),Z=k(2090),te=k(4859),ee=k(1877);const ne="@firebase/installations",$="w:0.5.7",W="FIS_v2",pe=new Z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(C){return C instanceof Z.ZR&&C.code.includes("request-failed")}function et({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ie(C){return{token:C.token,requestStatus:2,expiresIn:ce(C.expiresIn),creationTime:Date.now()}}function Ee(C,D){return be.apply(this,arguments)}function be(){return(be=(0,N.Z)(function*(C,D){const F=(yield D.json()).error;return pe.create("request-failed",{requestName:C,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Ge(C,{refreshToken:D}){const R=He(C);return R.append("Authorization",function me(C){return`${W} ${C}`}(D)),R}function ue(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function ce(C){return Number(C.replace("s","000"))}function de(C,D){return Le.apply(this,arguments)}function Le(){return(Le=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:R}){const F=et(C),J=He(C),le=D.getImmediate({optional:!0});if(le){const Dt=yield le.getHeartbeatsHeader();Dt&&J.append("x-firebase-client",Dt)}const Fe={method:"POST",headers:J,body:JSON.stringify({fid:R,authVersion:W,appId:C.appId,sdkVersion:$})},it=yield ue(()=>fetch(F,Fe));if(it.ok){const Dt=yield it.json();return{fid:Dt.fid||R,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Ie(Dt.authToken)}}throw yield Ee("Create Installation",it)})).apply(this,arguments)}function V(C){return new Promise(D=>{setTimeout(D,C)})}const De=/^[cdef][\w-]{21}$/;function Te(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const R=function Ye(C){return function se(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return De.test(R)?R:""}catch(C){return""}}function wt(C){return`${C.appName}!${C.appId}`}const Rt=new Map;function pn(C,D){const R=wt(C);qt(R,D),function Pt(C,D){const R=function si(){return!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=C=>{qt(C.data.key,C.data.fid)}),ir}();R&&R.postMessage({key:C,fid:D}),function Fs(){0===Rt.size&&ir&&(ir.close(),ir=null)}()}(R,D)}function qt(C,D){const R=Rt.get(C);if(R)for(const F of R)F(D)}let ir=null;const Nr="firebase-installations-store";let rs=null;function is(){return rs||(rs=(0,Z.X3)("firebase-installations-database",1,(C,D)=>{0===D&&C.createObjectStore(Nr)})),rs}function pt(C,D){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,N.Z)(function*(C,D){const R=wt(C),J=(yield is()).transaction(Nr,"readwrite"),le=J.objectStore(Nr),Pe=yield le.get(R);return yield le.put(D,R),yield J.complete,(!Pe||Pe.fid!==D.fid)&&pn(C,D.fid),D})).apply(this,arguments)}function Xn(C){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,N.Z)(function*(C){const D=wt(C),F=(yield is()).transaction(Nr,"readwrite");yield F.objectStore(Nr).delete(D),yield F.complete})).apply(this,arguments)}function oi(C,D){return po.apply(this,arguments)}function po(){return(po=(0,N.Z)(function*(C,D){const R=wt(C),J=(yield is()).transaction(Nr,"readwrite"),le=J.objectStore(Nr),Pe=yield le.get(R),Fe=D(Pe);return void 0===Fe?yield le.delete(R):yield le.put(Fe,R),yield J.complete,Fe&&(!Pe||Pe.fid!==Fe.fid)&&pn(C,Fe.fid),Fe})).apply(this,arguments)}function gn(C){return er.apply(this,arguments)}function er(){return(er=(0,N.Z)(function*(C){let D;const R=yield oi(C.appConfig,F=>{const J=Ls(F),le=Ea(C,J);return D=le.registrationPromise,le.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function Ls(C){return zt(C||{fid:Te(),registrationStatus:0})}function Ea(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(pe.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function Wt(C,D){return ht.apply(this,arguments)}(C,R);return{installationEntry:R,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:It(C)}:{installationEntry:D}}function ht(){return(ht=(0,N.Z)(function*(C,D){try{const R=yield de(C,D);return pt(C.appConfig,R)}catch(R){throw st(R)&&409===R.customData.serverCode?yield Xn(C.appConfig):yield pt(C.appConfig,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function It(C){return sr.apply(this,arguments)}function sr(){return(sr=(0,N.Z)(function*(C){let D=yield ji(C.appConfig);for(;1===D.registrationStatus;)yield V(100),D=yield ji(C.appConfig);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:F}=yield gn(C);return F||R}return D})).apply(this,arguments)}function ji(C){return oi(C,D=>{if(!D)throw pe.create("installation-not-found");return zt(D)})}function zt(C){return function go(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function _r(C,D){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*({appConfig:C,heartbeatServiceProvider:D},R){const F=yt(C,R),J=Ge(C,R),le=D.getImmediate({optional:!0});if(le){const Dt=yield le.getHeartbeatsHeader();Dt&&J.append("x-firebase-client",Dt)}const Fe={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:$,appId:C.appId}})},it=yield ue(()=>fetch(F,Fe));if(it.ok)return Ie(yield it.json());throw yield Ee("Generate Auth Token",it)})).apply(this,arguments)}function yt(C,{fid:D}){return`${et(C)}/${D}/authTokens:generate`}function vr(C){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,N.Z)(function*(C,D=!1){let R;const F=yield oi(C.appConfig,le=>{if(!$t(le))throw pe.create("not-registered");const Pe=le.authToken;if(!D&&H(Pe))return le;if(1===Pe.requestStatus)return R=tt(C,D),le;{if(!navigator.onLine)throw pe.create("app-offline");const Fe=z(le);return R=_t(C,Fe),Fe}});return R?yield R:F.authToken})).apply(this,arguments)}function tt(C,D){return xe.apply(this,arguments)}function xe(){return(xe=(0,N.Z)(function*(C,D){let R=yield ot(C.appConfig);for(;1===R.authToken.requestStatus;)yield V(100),R=yield ot(C.appConfig);const F=R.authToken;return 0===F.requestStatus?vr(C,D):F})).apply(this,arguments)}function ot(C){return oi(C,D=>{if(!$t(D))throw pe.create("not-registered");return function ye(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function _t(C,D){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,N.Z)(function*(C,D){try{const R=yield _r(C,D),F=Object.assign(Object.assign({},D),{authToken:R});return yield pt(C.appConfig,F),R}catch(R){if(!st(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield pt(C.appConfig,F)}else yield Xn(C.appConfig);throw R}})).apply(this,arguments)}function $t(C){return void 0!==C&&2===C.registrationStatus}function H(C){return 2===C.requestStatus&&!function U(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function z(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function qe(){return(qe=(0,N.Z)(function*(C){const D=C,{installationEntry:R,registrationPromise:F}=yield gn(D);return F?F.catch(console.error):vr(D).catch(console.error),R.fid})).apply(this,arguments)}function Jt(){return(Jt=(0,N.Z)(function*(C,D=!1){const R=C;return yield wr(R),(yield vr(R,D)).token})).apply(this,arguments)}function wr(C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,N.Z)(function*(C){const{registrationPromise:D}=yield gn(C);D&&(yield D)})).apply(this,arguments)}function qn(C){return pe.create("missing-app-config-values",{valueName:C})}const Ca="installations",Ve=C=>{const D=C.getProvider("app").getImmediate(),R=function ss(C){if(!C||!C.options)throw qn("App Configuration");if(!C.name)throw qn("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!C.options[R])throw qn(R);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:R,heartbeatServiceProvider:(0,Y._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Bt=C=>{const D=C.getProvider("app").getImmediate(),R=(0,Y._getProvider)(D,Ca).getImmediate();return{getId:()=>function re(C){return qe.apply(this,arguments)}(R),getToken:J=>function Et(C){return Jt.apply(this,arguments)}(R,J)}};(function cn(){(0,Y._registerComponent)(new te.wA(Ca,Ve,"PUBLIC")),(0,Y._registerComponent)(new te.wA("installations-internal",Bt,"PRIVATE"))})(),(0,Y.registerVersion)(ne,"0.5.7"),(0,Y.registerVersion)(ne,"0.5.7","esm2017");const ar="@firebase/remote-config",kn=new Z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xh{constructor(D,R,F,J){this.client=D,this.storage=R,this.storageCache=F,this.logger=J}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-R,J=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var R=this;return(0,N.Z)(function*(){const[F,J]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(J&&R.isCachedDataFresh(D.cacheMaxAgeMillis,F))return J;D.eTag=J&&J.eTag;const le=yield R.client.fetch(D),Pe=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Pe.push(R.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Pe),le})()}}function Wc(C=navigator){return C.languages&&C.languages[0]||C.language}class au{constructor(D,R,F,J,le,Pe){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=F,this.projectId=J,this.apiKey=le,this.appId=Pe}fetch(D){var R=this;return(0,N.Z)(function*(){const[F,J]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Fe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},it={sdk_version:R.sdkVersion,app_instance_id:F,app_instance_id_token:J,app_id:R.appId,language_code:Wc()},Dt={method:"POST",headers:Fe,body:JSON.stringify(it)},Vt=fetch(Pe,Dt),kt=new Promise((mi,Ri)=>{D.signal.addEventListener(()=>{const So=new Error("The operation was aborted.");So.name="AbortError",Ri(So)})});let Bn;try{yield Promise.race([Vt,kt]),Bn=yield Vt}catch(mi){let Ri="fetch-client-network";throw"AbortError"===mi.name&&(Ri="fetch-timeout"),kn.create(Ri,{originalErrorMessage:mi.message})}let An=Bn.status;const ra=Bn.headers.get("ETag")||void 0;let Ao,Fr;if(200===Bn.status){let mi;try{mi=yield Bn.json()}catch(Ri){throw kn.create("fetch-client-parse",{originalErrorMessage:Ri.message})}Ao=mi.entries,Fr=mi.state}if("INSTANCE_STATE_UNSPECIFIED"===Fr?An=500:"NO_CHANGE"===Fr?An=304:("NO_TEMPLATE"===Fr||"EMPTY_CONFIG"===Fr)&&(Ao={}),304!==An&&200!==An)throw kn.create("fetch-status",{httpStatus:An});return{status:An,eTag:ra,config:Ao}})()}}class Op{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,N.Z)(function*(){const F=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:F}){var J=this;return(0,N.Z)(function*(){yield function Ln(C,D){return new Promise((R,F)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(R,J);C.addEventListener(()=>{clearTimeout(le),F(kn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const le=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),le}catch(le){if(!function Kc(C){if(!(C instanceof Z.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(le))throw le;const Pe={throttleEndTimeMillis:Date.now()+(0,Z.$s)(F),backoffCount:F+1};return yield J.storage.setThrottleMetadata(Pe),J.attemptFetch(D,Pe)}})()}}class uu{constructor(D,R,F,J,le){this.app=D,this._client=R,this._storageCache=F,this._storage=J,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yl(C,D){const R=C.target.error||void 0;return kn.create(D,{originalErrorMessage:R&&R.message})}const $s="app_namespace_store";class Up{constructor(D,R,F,J=function Lp(){return new Promise((C,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=F=>{D(yl(F,"storage-open"))},R.onsuccess=F=>{C(F.target.result)},R.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore($s,{keyPath:"compositeKey"})}}catch(R){D(kn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=F,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,N.Z)(function*(){const F=yield R.openDbPromise;return new Promise((J,le)=>{const Fe=F.transaction([$s],"readonly").objectStore($s),it=R.createCompositeKey(D);try{const Dt=Fe.get(it);Dt.onerror=Vt=>{le(yl(Vt,"storage-get"))},Dt.onsuccess=Vt=>{const kt=Vt.target.result;J(kt?kt.value:void 0)}}catch(Dt){le(kn.create("storage-get",{originalErrorMessage:Dt&&Dt.message}))}})})()}set(D,R){var F=this;return(0,N.Z)(function*(){const J=yield F.openDbPromise;return new Promise((le,Pe)=>{const it=J.transaction([$s],"readwrite").objectStore($s),Dt=F.createCompositeKey(D);try{const Vt=it.put({compositeKey:Dt,value:R});Vt.onerror=kt=>{Pe(yl(kt,"storage-set"))},Vt.onsuccess=()=>{le()}}catch(Vt){Pe(kn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(D){var R=this;return(0,N.Z)(function*(){const F=yield R.openDbPromise;return new Promise((J,le)=>{const Fe=F.transaction([$s],"readwrite").objectStore($s),it=R.createCompositeKey(D);try{const Dt=Fe.delete(it);Dt.onerror=Vt=>{le(yl(Vt,"storage-delete"))},Dt.onsuccess=()=>{J()}}catch(Dt){le(kn.create("storage-delete",{originalErrorMessage:Dt&&Dt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Qc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const R=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),le=yield R;le&&(D.lastFetchStatus=le);const Pe=yield F;Pe&&(D.lastSuccessfulFetchTimestampMillis=Pe);const Fe=yield J;Fe&&(D.activeConfig=Fe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function yo(){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,N.Z)(function*(){if(!(0,Z.hl)())return!1;try{return yield(0,Z.eu)()}catch(C){return!1}})).apply(this,arguments)}!function qo(){(0,Y._registerComponent)(new te.wA("remote-config",function C(D,{instanceIdentifier:R}){const F=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw kn.create("registration-window");if(!(0,Z.hl)())throw kn.create("indexed-db-unavailable");const{projectId:le,apiKey:Pe,appId:Fe}=F.options;if(!le)throw kn.create("registration-project-id");if(!Pe)throw kn.create("registration-api-key");if(!Fe)throw kn.create("registration-app-id");const it=new Up(Fe,F.name,R=R||"firebase"),Dt=new Qc(it),Vt=new ee.Yd(ar);Vt.logLevel=ee.in.ERROR;const kt=new au(J,Y.SDK_VERSION,R,le,Pe,Fe),Bn=new Op(kt,it),An=new xh(Bn,it,Dt,Vt),ra=new uu(F,An,Dt,it,Vt);return function zn(C){const D=(0,Z.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ra),ra},"PUBLIC").setMultipleInstances(!0)),(0,Y.registerVersion)(ar,"0.3.6"),(0,Y.registerVersion)(ar,"0.3.6","esm2017")}();const _l="/firebase-messaging-sw.js",Hs="/firebase-cloud-messaging-push-scope",Or="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_o="google.c.a.c_id",Da="google.c.a.c_l",Jc="google.c.a.ts",Vp="google.c.a.e";var Gs=(()=>{return(C=Gs||(Gs={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Gs;var C})();function ci(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cu(C){const R=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(R),J=new Uint8Array(F.length);for(let le=0;le<F.length;++le)J[le]=F.charCodeAt(le);return J}const du="fcm_token_details_db",ur="fcm_token_object_Store";function Rh(C){return hu.apply(this,arguments)}function hu(){return hu=(0,N.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(du))return null;let D=null;return(yield(0,Z.X3)(du,5,function(){var F=(0,N.Z)(function*(J,le,Pe,Fe){var it;if(le<2||!J.objectStoreNames.contains(ur))return;const Dt=Fe.objectStore(ur),Vt=yield Dt.index("fcmSenderId").get(C);if(yield Dt.clear(),Vt)if(2===le){const kt=Vt;if(!kt.auth||!kt.p256dh||!kt.endpoint)return;D={token:kt.fcmToken,createTime:null!==(it=kt.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:kt.auth,p256dh:kt.p256dh,endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:"string"==typeof kt.vapidKey?kt.vapidKey:ci(kt.vapidKey)}}}else if(3===le){const kt=Vt;D={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:ci(kt.auth),p256dh:ci(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:ci(kt.vapidKey)}}}else if(4===le){const kt=Vt;D={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:ci(kt.auth),p256dh:ci(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:ci(kt.vapidKey)}}}});return function(J,le,Pe,Fe){return F.apply(this,arguments)}}())).close(),yield(0,Z.Lj)(du),yield(0,Z.Lj)("fcm_vapid_details_db"),yield(0,Z.Lj)("undefined"),Xc(D)?D:null}),hu.apply(this,arguments)}function Xc(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const cs="firebase-messaging-store";let Ta=null;function vl(){return Ta||(Ta=(0,Z.X3)("firebase-messaging-database",1,(C,D)=>{0===D&&C.createObjectStore(cs)})),Ta}function hn(C){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(C){const D=wo(C),F=yield(yield vl()).transaction(cs).objectStore(cs).get(D);if(F)return F;{const J=yield Rh(C.appConfig.senderId);if(J)return yield qs(C,J),J}})).apply(this,arguments)}function qs(C,D){return an.apply(this,arguments)}function an(){return(an=(0,N.Z)(function*(C,D){const R=wo(C),J=(yield vl()).transaction(cs,"readwrite");return yield J.objectStore(cs).put(D,R),yield J.complete,D})).apply(this,arguments)}function ed(C){return vo.apply(this,arguments)}function vo(){return(vo=(0,N.Z)(function*(C){const D=wo(C),F=(yield vl()).transaction(cs,"readwrite");yield F.objectStore(cs).delete(D),yield F.complete})).apply(this,arguments)}function wo({appConfig:C}){return C.appId}const Nn=new Z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Aa(C,D){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,N.Z)(function*(C,D){const R=yield zs(C),F=vt(D),J={method:"POST",headers:R,body:JSON.stringify(F)};let le;try{le=yield(yield fetch(Kr(C.appConfig),J)).json()}catch(Pe){throw Nn.create("token-subscribe-failed",{errorInfo:Pe})}if(le.error)throw Nn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Nn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function br(C,D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,N.Z)(function*(C,D){const R=yield zs(C),F=vt(D.subscriptionOptions),J={method:"PATCH",headers:R,body:JSON.stringify(F)};let le;try{le=yield(yield fetch(`${Kr(C.appConfig)}/${D.token}`,J)).json()}catch(Pe){throw Nn.create("token-update-failed",{errorInfo:Pe})}if(le.error)throw Nn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Nn.create("token-update-no-token");return le.token})).apply(this,arguments)}function ds(C,D){return gu.apply(this,arguments)}function gu(){return(gu=(0,N.Z)(function*(C,D){const F={method:"DELETE",headers:yield zs(C)};try{const le=yield(yield fetch(`${Kr(C.appConfig)}/${D}`,F)).json();if(le.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(J){throw Nn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function Kr({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function zs(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,N.Z)(function*({appConfig:C,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function vt({p256dh:C,auth:D,endpoint:R,vapidKey:F}){const J={web:{endpoint:R,auth:D,p256dh:C}};return F!==Or&&(J.web.applicationPubKey=F),J}const mu=6048e5;function Sa(C){return yu.apply(this,arguments)}function yu(){return(yu=(0,N.Z)(function*(C){const D=yield bl(C.swRegistration,C.vapidKey),R={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:ci(D.getKey("auth")),p256dh:ci(D.getKey("p256dh"))},F=yield hn(C.firebaseDependencies);if(F){if(Wo(F.subscriptionOptions,R))return Date.now()>=F.createTime+mu?wl(C,{token:F.token,createTime:Date.now(),subscriptionOptions:R}):F.token;try{yield ds(C.firebaseDependencies,F.token)}catch(J){console.warn(J)}return Ae(C.firebaseDependencies,R)}return Ae(C.firebaseDependencies,R)})).apply(this,arguments)}function _u(C){return vu.apply(this,arguments)}function vu(){return(vu=(0,N.Z)(function*(C){const D=yield hn(C.firebaseDependencies);D&&(yield ds(C.firebaseDependencies,D.token),yield ed(C.firebaseDependencies));const R=yield C.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function wl(C,D){return El.apply(this,arguments)}function El(){return(El=(0,N.Z)(function*(C,D){try{const R=yield br(C.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield qs(C.firebaseDependencies,F),R}catch(R){throw yield _u(C),R}})).apply(this,arguments)}function Ae(C,D){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,N.Z)(function*(C,D){const F={token:yield Aa(C,D),createTime:Date.now(),subscriptionOptions:D};return yield qs(C,F),F.token})).apply(this,arguments)}function bl(C,D){return yn.apply(this,arguments)}function yn(){return(yn=(0,N.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:cu(D)})})).apply(this,arguments)}function Wo(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function Ko(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Yr(C,D){if(!D.notification)return;C.notification={};const R=D.notification.title;R&&(C.notification.title=R);const F=D.notification.body;F&&(C.notification.body=F);const J=D.notification.image;J&&(C.notification.image=J)}(D,C),function Cl(C,D){!D.data||(C.data=D.data)}(D,C),function Il(C,D){if(!D.fcmOptions)return;C.fcmOptions={};const R=D.fcmOptions.link;R&&(C.fcmOptions.link=R);const F=D.fcmOptions.analytics_label;F&&(C.fcmOptions.analyticsLabel=F)}(D,C),D}function td(C){return"object"==typeof C&&!!C&&_o in C}function Dl(C,D){const R=[];for(let F=0;F<C.length;F++)R.push(C.charAt(F)),F<D.length&&R.push(D.charAt(F));return R.join("")}function Ks(C){return Nn.create("missing-app-config-values",{valueName:C})}Dl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Dl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class lr{constructor(D,R,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function wu(C){if(!C||!C.options)throw Ks("App Configuration Object");if(!C.name)throw Ks("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=C;for(const F of D)if(!R[F])throw Ks(F);return{appName:C.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:R,analyticsProvider:F}}_delete(){return Promise.resolve()}}function di(C){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,N.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(_l,{scope:Hs}),C.swRegistration.update().catch(()=>{})}catch(D){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ys(C,D){return Di.apply(this,arguments)}function Di(){return(Di=(0,N.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield di(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Tl(C,D){return bu.apply(this,arguments)}function bu(){return(bu=(0,N.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=Or)})).apply(this,arguments)}function Al(){return(Al=(0,N.Z)(function*(C,D){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield Tl(C,null==D?void 0:D.vapidKey),yield Ys(C,null==D?void 0:D.serviceWorkerRegistration),Sa(C)})).apply(this,arguments)}function xa(C,D,R){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(C,D,R){const F=Sl(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:R[_o],message_name:R[Da],message_time:R[Jc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sl(C){switch(C){case Gs.NOTIFICATION_CLICKED:return"notification_open";case Gs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function nd(){return(nd=(0,N.Z)(function*(C,D){const R=D.data;if(!R.isFirebaseMessaging)return;C.onMessageHandler&&R.messageType===Gs.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ko(R)):C.onMessageHandler.next(Ko(R)));const F=R.data;td(F)&&"1"===F[Vp]&&(yield xa(C,R.messageType,F))})).apply(this,arguments)}const Ml="@firebase/messaging",rd=C=>{const D=new lr(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function xl(C,D){return nd.apply(this,arguments)}(D,R)),D},bo=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:F=>function Cu(C,D){return Al.apply(this,arguments)}(D,F)}};function sd(){return Co.apply(this,arguments)}function Co(){return(Co=(0,N.Z)(function*(){try{yield(0,Z.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,Z.hl)()&&(0,Z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function id(){(0,Y._registerComponent)(new te.wA("messaging",rd,"PUBLIC")),(0,Y._registerComponent)(new te.wA("messaging-internal",bo,"PRIVATE")),(0,Y.registerVersion)(Ml,"0.9.11"),(0,Y.registerVersion)(Ml,"0.9.11","esm2017")}();const kl="analytics",Ey="firebase_id",Ra="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Iu="https://www.googletagmanager.com/gtag/js",Un=new ee.Yd("@firebase/analytics");function ad(C){return Promise.all(C.map(D=>D.catch(R=>R)))}function Bp(C,D){const R=document.createElement("script");R.src=`${Iu}?l=${C}&id=${D}`,R.async=!0,document.head.appendChild(R)}function Yo(C,D,R,F,J,le){return ud.apply(this,arguments)}function ud(){return(ud=(0,N.Z)(function*(C,D,R,F,J,le){const Pe=F[J];try{if(Pe)yield D[Pe];else{const it=(yield ad(R)).find(Dt=>Dt.measurementId===J);it&&(yield D[it.appId])}}catch(Fe){Un.error(Fe)}C("config",J,le)})).apply(this,arguments)}function Ol(C,D,R,F,J){return ps.apply(this,arguments)}function ps(){return(ps=(0,N.Z)(function*(C,D,R,F,J){try{let le=[];if(J&&J.send_to){let Pe=J.send_to;Array.isArray(Pe)||(Pe=[Pe]);const Fe=yield ad(R);for(const it of Pe){const Dt=Fe.find(kt=>kt.measurementId===it),Vt=Dt&&D[Dt.appId];if(!Vt){le=[];break}le.push(Vt)}}0===le.length&&(le=Object.values(D)),yield Promise.all(le),C("event",F,J||{})}catch(le){Un.error(le)}})).apply(this,arguments)}function jp(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(Iu))return D;return null}const On=new Z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ir=new class Pr{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Qo(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function cd(C){return dn.apply(this,arguments)}function dn(){return(dn=(0,N.Z)(function*(C){var D;const{appId:R,apiKey:F}=C,J={method:"GET",headers:Qo(F)},le=Ra.replace("{app-id}",R),Pe=yield fetch(le,J);if(200!==Pe.status&&304!==Pe.status){let Fe="";try{const it=yield Pe.json();(null===(D=it.error)||void 0===D?void 0:D.message)&&(Fe=it.error.message)}catch(it){}throw On.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:Fe})}return Pe.json()})).apply(this,arguments)}function kh(C){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,N.Z)(function*(C,D=Ir,R){const{appId:F,apiKey:J,measurementId:le}=C.options;if(!F)throw On.create("no-app-id");if(!J){if(le)return{measurementId:le,appId:F};throw On.create("no-api-key")}const Pe=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new Fl;return setTimeout((0,N.Z)(function*(){Fe.abort()}),void 0!==R?R:6e4),Du({appId:F,apiKey:J,measurementId:le},Pe,Fe,D)})).apply(this,arguments)}function Du(C,D,R){return hi.apply(this,arguments)}function hi(){return(hi=(0,N.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:R},F,J=Ir){const{appId:le,measurementId:Pe}=C;try{yield xt(F,D)}catch(Fe){if(Pe)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${Fe.message}]`),{appId:le,measurementId:Pe};throw Fe}try{const Fe=yield cd(C);return J.deleteThrottleMetadata(le),Fe}catch(Fe){if(!dd(Fe)){if(J.deleteThrottleMetadata(le),Pe)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${Fe.message}]`),{appId:le,measurementId:Pe};throw Fe}const it=503===Number(Fe.customData.httpStatus)?(0,Z.$s)(R,J.intervalMillis,30):(0,Z.$s)(R,J.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+it,backoffCount:R+1};return J.setThrottleMetadata(le,Dt),Un.debug(`Calling attemptFetch again in ${it} millis`),Du(C,Dt,F,J)}})).apply(this,arguments)}function xt(C,D){return new Promise((R,F)=>{const J=Math.max(D-Date.now(),0),le=setTimeout(R,J);C.addEventListener(()=>{clearTimeout(le),F(On.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function dd(C){if(!(C instanceof Z.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Fl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function hd(){return Io.apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(){if(!(0,Z.hl)())return Un.warn(On.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Z.eu)()}catch(C){return Un.warn(On.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(C,D,R,F,J,le,Pe){var Fe;const it=kh(C);it.then(An=>{R[An.measurementId]=An.appId,C.options.measurementId&&An.measurementId!==C.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${An.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(An=>Un.error(An)),D.push(it);const Dt=hd().then(An=>{if(An)return F.getId()}),[Vt,kt]=yield Promise.all([it,Dt]);jp()||Bp(le,Vt.measurementId),J("js",new Date);const Bn=null!==(Fe=null==Pe?void 0:Pe.config)&&void 0!==Fe?Fe:{};return Bn.origin="firebase",Bn.update=!0,null!=kt&&(Bn[Ey]=kt),J("config",Vt.measurementId,Bn),Vt.measurementId})).apply(this,arguments)}class Xs{constructor(D){this.app=D}_delete(){return delete fi[this.app.options.appId],Promise.resolve()}}let fi={},eo=[];const ka={};let to,Gi,Hi="dataLayer",Ul=!1;function Ai(C,D,R){!function Jo(){const C=[];if((0,Z.ru)()&&C.push("This is a browser extension environment."),(0,Z.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((F,J)=>`(${J+1}) ${F}`).join(" "),R=On.create("invalid-analytics-context",{errorInfo:D});Un.warn(R.message)}}();const F=C.options.appId;if(!F)throw On.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw On.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fi[F])throw On.create("already-exists",{id:F});if(!Ul){!function fs(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(Hi);const{wrappedGtag:le,gtagCore:Pe}=function ld(C,D,R,F,J){let le=function(...Pe){window[F].push(arguments)};return window[J]&&"function"==typeof window[J]&&(le=window[J]),window[J]=function Pl(C,D,R,F){function le(){return(le=(0,N.Z)(function*(Pe,Fe,it){try{"event"===Pe?yield Ol(C,D,R,Fe,it):"config"===Pe?yield Yo(C,D,R,F,Fe,it):C("set",Fe)}catch(Dt){Un.error(Dt)}})).apply(this,arguments)}return function J(Pe,Fe,it){return le.apply(this,arguments)}}(le,C,D,R),{gtagCore:le,wrappedGtag:window[J]}}(fi,eo,ka,Hi,"gtag");Gi=le,to=Pe,Ul=!0}return fi[F]=function Dn(C,D,R,F,J,le,Pe){return gs.apply(this,arguments)}(C,eo,ka,D,to,Hi,R),new Xs(C)}function Na(){return(Na=(0,N.Z)(function*(C,D,R,F,J){if(J&&J.global)C("event",R,F);else{const le=yield D;C("event",R,Object.assign(Object.assign({},F),{send_to:le}))}})).apply(this,arguments)}function vn(){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(){if((0,Z.ru)()||!(0,Z.zI)()||!(0,Z.hl)())return!1;try{return yield(0,Z.eu)()}catch(C){return!1}})).apply(this,arguments)}const ro="@firebase/analytics";!function qp(){(0,Y._registerComponent)(new te.wA(kl,(D,{options:R})=>Ai(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,Y._registerComponent)(new te.wA("analytics-internal",function C(D){try{const R=D.getProvider(kl).getImmediate();return{logEvent:(F,J,le)=>function Gp(C,D,R,F){C=(0,Z.m9)(C),function Xo(C,D,R,F,J){return Na.apply(this,arguments)}(Gi,fi[C.app.options.appId],D,R,F).catch(J=>Un.error(J))}(R,F,J,le)}}catch(R){throw On.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,Y.registerVersion)(ro,"0.7.7"),(0,Y.registerVersion)(ro,"0.7.7","esm2017")}();var io=k(4408),Oa=k(7565);const Bl=new class wn extends Oa.v{}(class ys extends io.o{constructor(D,R){super(D,R),this.scheduler=D,this.work=R}schedule(D,R=0){return R>0?super.schedule(D,R):(this.delay=R,this.state=D,this.scheduler.flush(this),this)}execute(D,R){return R>0||this.closed?super.execute(D,R):this._execute(D,R)}requestAsyncId(D,R,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,R,F):D.flush(this)}});var Zp=k(4986),jl=k(8505),hr=k(5363),pi=k(9468);const $l=new c.GfV("7.3.0"),_s="__angularfire_symbol__analyticsIsSupportedValue",Mi="__angularfire_symbol__analyticsIsSupported",zi="__angularfire_symbol__remoteConfigIsSupportedValue",Pa="__angularfire_symbol__remoteConfigIsSupported",Hl="__angularfire_symbol__messagingIsSupportedValue",Gl="__angularfire_symbol__messagingIsSupported";function so(C,D,R){if(D){if(1===D.length)return D[0];const le=D.filter(Pe=>Pe.app===R);if(1===le.length)return le[0]}return R.container.getProvider(C).getImmediate({optional:!0})}globalThis[Mi]||(globalThis[Mi]=vn().then(C=>globalThis[_s]=C).catch(()=>globalThis[_s]=!1)),globalThis[Gl]||(globalThis[Gl]=sd().then(C=>globalThis[Hl]=C).catch(()=>globalThis[Hl]=!1)),globalThis[Pa]||(globalThis[Pa]=yo().then(C=>globalThis[zi]=C).catch(()=>globalThis[zi]=!1));const gd=(C,D)=>{const R=D?[D]:(0,q.C6)(),F=[];return R.forEach(J=>{J.container.getProvider(C).instances.forEach(Pe=>{F.includes(Pe)||F.push(Pe)})}),F};function Do(){}class Tu{constructor(D,R=Bl){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,F){const J=this.zone;return this.delegate.schedule(function(Pe){J.runGuarded(()=>{D.apply(this,[Pe])})},R,F)}}class Wi{constructor(D){this.zone=D,this.task=null}call(D,R){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Do,{},Do,Do)),R.pipe((0,jl.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Au=(()=>{class C{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new Tu(Zone.current)),this.insideAngular=R.run(()=>new Tu(Zone.current,Zp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(R){return new(R||C)(c.LFG(c.R0b))},C.\u0275prov=c.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ki(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Vn(C){return C.pipe((0,hr.Q)(Ki().outsideAngular))}function zl(C){return Ki(),function To(C){return function(R){return(R=R.lift(new Wi(C.ngZone))).pipe((0,pi.R)(C.outsideAngular),(0,hr.Q)(C.insideAngular))}}(Ki())(C)}},8292:(Me,oe,k)=>{k(5555);const{devDependencies:q}=k(3681);Me.exports={corePath:`https://unpkg.com/@ffmpeg/core@${q["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}},2187:(Me,oe,k)=>{var c=k(8926).default;const q=k(5555);Me.exports=function(){var Y=c(function*(Z){let te=Z;return void 0===Z?new Uint8Array:("string"==typeof Z?te=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(Z)?atob(Z.split(",")[1]).split("").map(ee=>ee.charCodeAt(0)):yield(yield fetch(q(Z))).arrayBuffer():(Z instanceof File||Z instanceof Blob)&&(te=yield(Y=>new Promise((Z,te)=>{const ee=new FileReader;ee.onload=()=>{Z(ee.result)},ee.onerror=({target:{error:{code:ne}}})=>{te(Error(`File could not be read! Code=${ne}`))},ee.readAsArrayBuffer(Y)}))(Z)),new Uint8Array(te))});return function(Z){return Y.apply(this,arguments)}}()},9965:(Me,oe,k)=>{var c=k(8926).default;const q=k(5555),{log:N}=k(6945),Y=function(){var Z=c(function*(te,ee){N("info",`fetch ${te}`);const ne=yield(yield fetch(te)).arrayBuffer();N("info",`${te} file size = ${ne.byteLength} bytes`);const ae=new Blob([ne],{type:ee}),B=URL.createObjectURL(ae);return N("info",`${te} blob URL = ${B}`),B});return function(ee,ne){return Z.apply(this,arguments)}}();Me.exports=function(){var Z=c(function*({corePath:te}){if("string"!=typeof te)throw Error("corePath should be a string!");const ee=q(te),ne=yield Y(ee,"application/javascript"),ae=yield Y(ee.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),B=yield Y(ee.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise($=>{const W=document.createElement("script"),$e=()=>{W.removeEventListener("load",$e),N("info","ffmpeg-core.js script loaded"),$({createFFmpegCore,corePath:ne,wasmPath:ae,workerPath:B})};W.src=ne,W.type="text/javascript",W.addEventListener("load",$e),document.getElementsByTagName("head")[0].appendChild(W)}):(N("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:ne,wasmPath:ae,workerPath:B}))});return function(te){return Z.apply(this,arguments)}}()},1346:(Me,oe,k)=>{const c=k(8292),q=k(9965),N=k(2187);Me.exports={defaultOptions:c,getCreateFFmpegCore:q,fetchFile:N}},6151:Me=>{Me.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(Me,oe,k)=>{var c=k(8926).default;const{defaultArgs:q,baseOptions:N}=k(6151),{setLogging:Y,setCustomLogger:Z,log:te}=k(6945),ee=k(5542),ne=k(8333),{defaultOptions:ae,getCreateFFmpegCore:B}=k(1346),{version:$}=k(3681),W=Error("ffmpeg.wasm is not ready, make sure you have completed load().");Me.exports=($e={})=>{const V=ZC(ZC(ZC({},N),ae),$e),{log:Re,logger:Ce,progress:Qe}=V,we=iR(V,["log","logger","progress"]);let pe=null,st=null,et=null,Ie=!1,Ee=Qe;const He=({type:se,message:De})=>{te(se,De),ee(De,Ee),(se=>{"FFMPEG_END"===se&&null!==et&&(et(),et=null,Ie=!1)})(De)},Ge=function(){var se=c(function*(){if(te("info","load ffmpeg-core"),null!==pe)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{te("info","loading ffmpeg-core");const{createFFmpegCore:De,corePath:We,workerPath:Te,wasmPath:Ye}=yield B(we);pe=yield De({mainScriptUrlOrBlob:We,printErr:wt=>He({type:"fferr",message:wt}),print:wt=>He({type:"ffout",message:wt}),locateFile:(wt,Rt)=>{if("undefined"!=typeof window){if(void 0!==Ye&&wt.endsWith("ffmpeg-core.wasm"))return Ye;if(void 0!==Te&&wt.endsWith("ffmpeg-core.worker.js"))return Te}return Rt+wt}}),st=pe.cwrap("proxy_main","number",["number","number"]),te("info","ffmpeg-core loaded")}});return function(){return se.apply(this,arguments)}}();return Y(Re),Z(Ce),te("info",`use ffmpeg.wasm v${$}`),{setProgress:se=>{Ee=se},setLogger:se=>{Z(se)},setLogging:Y,load:Ge,isLoaded:()=>null!==pe,run:(...se)=>{if(te("info",`run ffmpeg command: ${se.join(" ")}`),null===pe)throw W;if(Ie)throw Error("ffmpeg.wasm can only run one command at a time");return Ie=!0,new Promise(De=>{const We=[...q,...se].filter(Te=>0!==Te.length);et=De,st(...ne(pe,We))})},exit:()=>{if(null===pe)throw W;Ie=!1,pe.exit(1),pe=null,st=null,et=null},FS:(se,...De)=>{if(te("info",`run FS.${se} ${De.map(We=>"string"==typeof We?We:`<${We.length} bytes binary file>`).join(" ")}`),null===pe)throw W;{let We=null;try{We=pe.FS[se](...De)}catch(Te){throw Error("readdir"===se?`ffmpeg.FS('readdir', '${De[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===se?`ffmpeg.FS('readFile', '${De[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return We}}}}},260:(Me,oe,k)=>{k(7854);const c=k(9639),{fetchFile:q}=k(1346);Me.exports={createFFmpeg:c,fetchFile:q}},6945:Me=>{let oe=!1,k=()=>{};Me.exports={logging:oe,setLogging:Y=>{oe=Y},setCustomLogger:Y=>{k=Y},log:(Y,Z)=>{k({type:Y,message:Z}),oe&&console.log(`[${Y}] ${Z}`)}}},8333:Me=>{Me.exports=(oe,k)=>{const c=oe._malloc(k.length*Uint32Array.BYTES_PER_ELEMENT);return k.forEach((q,N)=>{const Y=oe._malloc(q.length+1);oe.writeAsciiToMemory(q,Y),oe.setValue(c+Uint32Array.BYTES_PER_ELEMENT*N,Y,"i32")}),[k.length,c]}},5542:Me=>{let oe=0,k=0;const c=q=>{const[N,Y,Z]=q.split(":");return 60*parseFloat(N)*60+60*parseFloat(Y)+parseFloat(Z)};Me.exports=(q,N)=>{if("string"==typeof q)if(q.startsWith("  Duration")){const Y=q.split(", ")[0].split(": ")[1],Z=c(Y);N({duration:Z,ratio:k}),(0===oe||oe>Z)&&(oe=Z)}else if(q.startsWith("frame")||q.startsWith("size")){const Y=q.split("time=")[1].split(" ")[0],Z=c(Y);k=Z/oe,N({ratio:k,time:Z})}else q.startsWith("video:")&&(N({ratio:1}),oe=0)}},2090:(Me,oe,k)=>{"use strict";k.d(oe,{$s:()=>go,BH:()=>Re,G6:()=>ue,L:()=>ae,LL:()=>se,Lj:()=>Zt,Mn:()=>He,Sg:()=>Ce,UG:()=>pe,US:()=>ee,X3:()=>_t,ZB:()=>W,ZR:()=>V,b$:()=>Ie,d:()=>Ee,eu:()=>ce,hl:()=>Q,jU:()=>st,m9:()=>yt,ne:()=>pt,pd:()=>rs,r3:()=>qt,ru:()=>et,tV:()=>B,uI:()=>we,vZ:()=>Fs,w1:()=>be,xO:()=>Bi,xb:()=>ir,z$:()=>Qe,zI:()=>me,zd:()=>Nr});var c=k(5861);const Z=function(H){const U=[];let z=0;for(let ye=0;ye<H.length;ye++){let re=H.charCodeAt(ye);re<128?U[z++]=re:re<2048?(U[z++]=re>>6|192,U[z++]=63&re|128):55296==(64512&re)&&ye+1<H.length&&56320==(64512&H.charCodeAt(ye+1))?(re=65536+((1023&re)<<10)+(1023&H.charCodeAt(++ye)),U[z++]=re>>18|240,U[z++]=re>>12&63|128,U[z++]=re>>6&63|128,U[z++]=63&re|128):(U[z++]=re>>12|224,U[z++]=re>>6&63|128,U[z++]=63&re|128)}return U},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,U){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let re=0;re<H.length;re+=3){const qe=H[re],Et=re+1<H.length,Jt=Et?H[re+1]:0,wr=re+2<H.length,Kt=wr?H[re+2]:0;let ln=(15&Jt)<<2|Kt>>6,tr=63&Kt;wr||(tr=64,Et||(ln=64)),ye.push(z[qe>>2],z[(3&qe)<<4|Jt>>4],z[ln],z[tr])}return ye.join("")},encodeString(H,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(H):this.encodeByteArray(Z(H),U)},decodeString(H,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(H):function(H){const U=[];let z=0,ye=0;for(;z<H.length;){const re=H[z++];if(re<128)U[ye++]=String.fromCharCode(re);else if(re>191&&re<224){const qe=H[z++];U[ye++]=String.fromCharCode((31&re)<<6|63&qe)}else if(re>239&&re<365){const wr=((7&re)<<18|(63&H[z++])<<12|(63&H[z++])<<6|63&H[z++])-65536;U[ye++]=String.fromCharCode(55296+(wr>>10)),U[ye++]=String.fromCharCode(56320+(1023&wr))}else{const qe=H[z++],Et=H[z++];U[ye++]=String.fromCharCode((15&re)<<12|(63&qe)<<6|63&Et)}}return U.join("")}(this.decodeStringToByteArray(H,U))},decodeStringToByteArray(H,U){this.init_();const z=U?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let re=0;re<H.length;){const qe=z[H.charAt(re++)],Jt=re<H.length?z[H.charAt(re)]:0;++re;const Kt=re<H.length?z[H.charAt(re)]:64;++re;const Ut=re<H.length?z[H.charAt(re)]:64;if(++re,null==qe||null==Jt||null==Kt||null==Ut)throw Error();ye.push(qe<<2|Jt>>4),64!==Kt&&(ye.push(Jt<<4&240|Kt>>2),64!==Ut&&ye.push(Kt<<6&192|Ut))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ae=function(H){return function(H){const U=Z(H);return ee.encodeByteArray(U,!0)}(H).replace(/\./g,"")},B=function(H){try{return ee.decodeString(H,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function W(H,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return U}for(const z in U)!U.hasOwnProperty(z)||!$e(z)||(H[z]=W(H[z],U[z]));return H}function $e(H){return"__proto__"!==H}class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,z)=>{this.resolve=U,this.reject=z})}wrapCallback(U){return(z,ye)=>{z?this.reject(z):this.resolve(ye),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(z):U(z,ye))}}}function Ce(H,U){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=U||"demo-project",re=H.iat||0,qe=H.sub||H.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:re,exp:re+3600,auth_time:re,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Et)),""].join(".")}function Qe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function st(){return"object"==typeof self&&self.self===self}function et(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ee(){return Qe().indexOf("Electron/")>=0}function be(){const H=Qe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function He(){return Qe().indexOf("MSAppHost/")>=0}function ue(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Q(){return"object"==typeof indexedDB}function ce(){return new Promise((H,U)=>{try{let z=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(ye);re.onsuccess=()=>{re.result.close(),z||self.indexedDB.deleteDatabase(ye),H(!0)},re.onupgradeneeded=()=>{z=!1},re.onerror=()=>{var qe;U((null===(qe=re.error)||void 0===qe?void 0:qe.message)||"")}}catch(z){U(z)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class V extends Error{constructor(U,z,ye){super(z),this.code=U,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(U,z,ye){this.service=U,this.serviceName=z,this.errors=ye}create(U,...z){const ye=z[0]||{},re=`${this.service}/${U}`,qe=this.errors[U],Et=qe?function De(H,U){return H.replace(We,(z,ye)=>{const re=U[ye];return null!=re?String(re):`<${ye}?>`})}(qe,ye):"Error";return new V(re,`${this.serviceName}: ${Et} (${re}).`,ye)}}const We=/\{\$([^}]+)}/g;function qt(H,U){return Object.prototype.hasOwnProperty.call(H,U)}function ir(H){for(const U in H)if(Object.prototype.hasOwnProperty.call(H,U))return!1;return!0}function Fs(H,U){if(H===U)return!0;const z=Object.keys(H),ye=Object.keys(U);for(const re of z){if(!ye.includes(re))return!1;const qe=H[re],Et=U[re];if(kr(qe)&&kr(Et)){if(!Fs(qe,Et))return!1}else if(qe!==Et)return!1}for(const re of ye)if(!z.includes(re))return!1;return!0}function kr(H){return null!==H&&"object"==typeof H}function Bi(H){const U=[];for(const[z,ye]of Object.entries(H))Array.isArray(ye)?ye.forEach(re=>{U.push(encodeURIComponent(z)+"="+encodeURIComponent(re))}):U.push(encodeURIComponent(z)+"="+encodeURIComponent(ye));return U.length?"&"+U.join("&"):""}function Nr(H){const U={};return H.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[re,qe]=ye.split("=");U[decodeURIComponent(re)]=decodeURIComponent(qe)}}),U}function rs(H){const U=H.indexOf("?");if(!U)return"";const z=H.indexOf("#",U);return H.substring(U,z>0?z:void 0)}function pt(H,U){const z=new Zr(H,U);return z.subscribe.bind(z)}class Zr{constructor(U,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{U(this)}).catch(ye=>{this.error(ye)})}next(U){this.forEachObserver(z=>{z.next(U)})}error(U){this.forEachObserver(z=>{z.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,z,ye){let re;if(void 0===U&&void 0===z&&void 0===ye)throw new Error("Missing Observer.");re=function Gn(H,U){if("object"!=typeof H||null===H)return!1;for(const z of U)if(z in H&&"function"==typeof H[z])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:z,complete:ye},void 0===re.next&&(re.next=oi),void 0===re.error&&(re.error=oi),void 0===re.complete&&(re.complete=oi);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch(Et){}}),this.observers.push(re),qe}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,U)}sendOne(U,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{z(this.observers[U])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oi(){}function go(H,U=1e3,z=2){const ye=U*Math.pow(z,H),re=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+re)}function yt(H){return H&&H._delegate?H._delegate:H}function vr(H,U){return new Promise((z,ye)=>{H.onsuccess=re=>{z(re.target.result)},H.onerror=re=>{var qe;ye(`${U}: ${null===(qe=re.target.error)||void 0===qe?void 0:qe.message}`)}})}class Gt{constructor(U){this._db=U,this.objectStoreNames=this._db.objectStoreNames}transaction(U,z){return new tt(this._db.transaction.call(this._db,U,z))}createObjectStore(U,z){return new xe(this._db.createObjectStore(U,z))}close(){this._db.close()}}class tt{constructor(U){this._transaction=U,this.complete=new Promise((z,ye)=>{this._transaction.oncomplete=function(){z()},this._transaction.onerror=()=>{ye(this._transaction.error)},this._transaction.onabort=()=>{ye(this._transaction.error)}})}objectStore(U){return new xe(this._transaction.objectStore(U))}}class xe{constructor(U){this._store=U}index(U){return new ot(this._store.index(U))}createIndex(U,z,ye){return new ot(this._store.createIndex(U,z,ye))}get(U){return vr(this._store.get(U),"Error reading from IndexedDB")}put(U,z){return vr(this._store.put(U,z),"Error writing to IndexedDB")}delete(U){return vr(this._store.delete(U),"Error deleting from IndexedDB")}clear(){return vr(this._store.clear(),"Error clearing IndexedDB object store")}}class ot{constructor(U){this._index=U}get(U){return vr(this._index.get(U),"Error reading from IndexedDB")}}function _t(H,U,z){return new Promise((ye,re)=>{try{const qe=indexedDB.open(H,U);qe.onsuccess=Et=>{ye(new Gt(Et.target.result))},qe.onerror=Et=>{var Jt;re(`Error opening indexedDB: ${null===(Jt=Et.target.error)||void 0===Jt?void 0:Jt.message}`)},qe.onupgradeneeded=Et=>{z(new Gt(qe.result),Et.oldVersion,Et.newVersion,new tt(qe.transaction))}}catch(qe){re(`Error opening indexedDB: ${qe.message}`)}})}function Zt(H){return $t.apply(this,arguments)}function $t(){return($t=(0,c.Z)(function*(H){return new Promise((U,z)=>{try{const ye=indexedDB.deleteDatabase(H);ye.onsuccess=()=>{U()},ye.onerror=re=>{var qe;z(`Error deleting indexedDB database "${H}": ${null===(qe=re.target.error)||void 0===qe?void 0:qe.message}`)}}catch(ye){z(`Error deleting indexedDB database "${H}": ${ye.message}`)}})})).apply(this,arguments)}},2666:(Me,oe,k)=>{"use strict";var c=k(5e3);let q=null;function N(){return q}const ee=new c.OlP("DocumentToken");let ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ae(){return(0,c.LFG)($)}()},providedIn:"platform"}),n})();const B=new c.OlP("Location Initialized");let $=(()=>{class n extends ne{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){W()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){W()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ee))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function $e(){return new $((0,c.LFG)(ee))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ce(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Qe(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function pe(n){const e=(0,c.LFG)(ee).location;return new et((0,c.LFG)(ne),e&&e.origin||"")}()},providedIn:"root"}),n})();const st=new c.OlP("appBaseHref");let et=(()=>{class n extends we{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Qe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+Qe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+Qe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne),c.LFG(st,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+Qe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ne),c.LFG(st,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ce(Ge(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qe(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qe(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Qe,n.joinWithSlash=Re,n.stripTrailingSlash=Ce,n.\u0275fac=function(t){return new(t||n)(c.LFG(we),c.LFG(ne))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function be(){return new Ee((0,c.LFG)(we),(0,c.LFG)(ne))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}var Q=(()=>((Q=Q||{})[Q.Decimal=0]="Decimal",Q[Q.Percent=1]="Percent",Q[Q.Currency=2]="Currency",Q[Q.Scientific=3]="Scientific",Q))(),V=(()=>((V=V||{})[V.Decimal=0]="Decimal",V[V.Group=1]="Group",V[V.List=2]="List",V[V.PercentSign=3]="PercentSign",V[V.PlusSign=4]="PlusSign",V[V.MinusSign=5]="MinusSign",V[V.Exponential=6]="Exponential",V[V.SuperscriptingExponent=7]="SuperscriptingExponent",V[V.PerMille=8]="PerMille",V[V.Infinity=9]="Infinity",V[V.NaN=10]="NaN",V[V.TimeSeparator=11]="TimeSeparator",V[V.CurrencyDecimal=12]="CurrencyDecimal",V[V.CurrencyGroup=13]="CurrencyGroup",V))();function Pt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===V.CurrencyDecimal)return t[c.wAp.NumberSymbols][V.Decimal];if(e===V.CurrencyGroup)return t[c.wAp.NumberSymbols][V.Group]}return r}const Cn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function $i(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let ui=(()=>{class n{constructor(t,r,s,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=s,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Bs{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zn=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Bs(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),os(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{os(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function os(n,e){n.context.$implicit=e.item}let zn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new on,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){iu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){iu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class on{constructor(){this.$implicit=null,this.ngIf=null}}function iu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function Ln(n,e){return new c.vHH(2100,"")}class Kc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Op{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const us=new Op,Pp=new Kc;let uu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return us;if((0,c.F4k)(t))return Pp;throw Ln()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),Or=(()=>{class n{constructor(t){this._locale=t}transform(t,r,s){if(!function _o(n){return!(null==n||""===n||n!=n)}(t))return null;s=s||this._locale;try{return function Ve(n,e,t){return function Ca(n,e,t,r,s,u,d=!1){let m="",w=!1;if(isFinite(n)){let I=function Us(n){let r,s,u,d,m,e=Math.abs(n)+"",t=0;for((s=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(s<0&&(s=u),s+=+e.slice(u+1),e=e.substring(0,u)):s<0&&(s=e.length),u=0;"0"===e.charAt(u);u++);if(u===(m=e.length))r=[0],s=1;else{for(m--;"0"===e.charAt(m);)m--;for(s-=u,r=[],d=0;u<=m;u++,d++)r[d]=Number(e.charAt(u))}return s>22&&(r=r.splice(0,21),t=s-1,s=1),{digits:r,exponent:t,integerLen:s}}(n);d&&(I=function ar(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let T=e.minInt,x=e.minFrac,L=e.maxFrac;if(u){const nt=u.match(Cn);if(null===nt)throw new Error(`${u} is not a valid digit info`);const Mt=nt[1],rt=nt[3],St=nt[5];null!=Mt&&(T=$i(Mt)),null!=rt&&(x=$i(rt)),null!=St?L=$i(St):null!=rt&&x>L&&(L=x)}!function Fn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,s=r.length-n.integerLen;const u=Math.min(Math.max(e,s),t);let d=u+n.integerLen,m=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let x=d;x<r.length;x++)r[x]=0}else{s=Math.max(0,s),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let x=1;x<d;x++)r[x]=0}if(m>=5)if(d-1<0){for(let x=0;x>d;x--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;s<Math.max(0,u);s++)r.push(0);let w=0!==u;const I=e+n.integerLen,T=r.reduceRight(function(x,L,G,ie){return ie[G]=(L+=x)<10?L:L-10,w&&(0===ie[G]&&G>=I?ie.pop():w=!1),L>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(I,x,L);let G=I.digits,ie=I.integerLen;const ke=I.exponent;let Oe=[];for(w=G.every(nt=>!nt);ie<T;ie++)G.unshift(0);for(;ie<0;ie++)G.unshift(0);ie>0?Oe=G.splice(ie,G.length):(Oe=G,G=[0]);const Ct=[];for(G.length>=e.lgSize&&Ct.unshift(G.splice(-e.lgSize,G.length).join(""));G.length>e.gSize;)Ct.unshift(G.splice(-e.gSize,G.length).join(""));G.length&&Ct.unshift(G.join("")),m=Ct.join(Pt(t,r)),Oe.length&&(m+=Pt(t,s)+Oe.join("")),ke&&(m+=Pt(t,V.Exponential)+"+"+ke)}else m=Pt(t,V.Infinity);return m=n<0&&!w?e.negPre+m+e.negSuf:e.posPre+m+e.posSuf,m}(n,function cn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),s=r[0],u=r[1],d=-1!==s.indexOf(".")?s.split("."):[s.substring(0,s.lastIndexOf("0")+1),s.substring(s.lastIndexOf("0")+1)],m=d[0],w=d[1]||"";t.posPre=m.substr(0,m.indexOf("#"));for(let T=0;T<w.length;T++){const x=w.charAt(T);"0"===x?t.minFrac=t.maxFrac=T+1:"#"===x?t.maxFrac=T+1:t.posSuf+=x}const I=m.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const T=s.length-t.posPre.length-t.posSuf.length,x=u.indexOf("#");t.negPre=u.substr(0,x).replace(/'/g,""),t.negSuf=u.substr(x+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function ir(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,Q.Percent),Pt(e,V.MinusSign)),e,V.Group,V.Decimal,t,!0).replace(new RegExp("%","g"),Pt(e,V.PercentSign))}(function Da(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),s,r)}catch(u){throw Ln()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16))},n.\u0275pipe=c.Yjl({name:"percent",type:n,pure:!0}),n})();let ls=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function ur(n){return"server"===n}let fu=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new pu((0,c.LFG)(ee),window)}),n})();class pu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ta(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=cs(this.window.history)||cs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function cs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class qs extends class zo extends class te{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Z(n){q||(q=n)}(new qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ed(){return an=an||document.querySelector("base"),an?an.getAttribute("href"):null}();return null==t?null:function wo(n){vo=vo||document.createElement("a"),vo.setAttribute("href",n);const e=vo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){an=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Go(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vo,an=null;const Er=new c.OlP("TRANSITION_ID"),Aa=[{provide:c.ip1,useFactory:function Nn(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=N(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Er,ee,c.zs3],multi:!0}];class Ii{static init(){(0,c.VLi)(new Ii)}addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let br=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Zs=new c.OlP("EventManagerPlugins");let ds=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const d=s[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zs),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=N().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,s.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ws),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ws))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ee))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ws(n){N().remove(n)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mu=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ae(n,s,t):(s=s.replace(mu,n),t.push(s))}return t}function Ht(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let yn=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Cl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new Il(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ds),c.LFG(zs),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=vt[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=vt[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ht(r)):this.eventManager.addEventListener(e,t,Ht(r))}}class Cl extends Wo{constructor(e,t,r,s){super(e),this.component=r;const u=Ae(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function wl(n){return"_ngcontent-%COMP%".replace(mu,n)}(s+"-"+r.id),this.hostAttr=function El(n){return"_nghost-%COMP%".replace(mu,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Il extends Wo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(s.id,s.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let td=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ee))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Dl=["alt","control","meta","shift"],Ks={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},di={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Eu=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="";if(Dl.forEach(w=>{const I=r.indexOf(w);I>-1&&(r.splice(I,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=s,m.fullKey=d,m}static getEventFullKey(t){let r="",s=function Ys(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&lr.hasOwnProperty(e)&&(e=lr[e]))}return Ks[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Dl.forEach(u=>{u!=s&&di[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ee))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Al=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Di(){qs.makeCurrent(),Ii.init()},multi:!0},{provide:ee,useFactory:function bu(){return(0,c.RDi)(document),document},deps:[]}]),xa=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Tl(){return new c.qLn},deps:[]},{provide:Zs,useClass:td,multi:!0,deps:[ee,c.R0b,c.Lbi]},{provide:Zs,useClass:Eu,multi:!0,deps:[ee]},{provide:yn,useClass:yn,deps:[ds,zs,c.AFp]},{provide:c.FYo,useExisting:yn},{provide:Kr,useExisting:zs},{provide:zs,useClass:zs,deps:[ee]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:ds,useClass:ds,deps:[Zs,c.R0b]},{provide:class hn{},useClass:br,deps:[]}];let Ma=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Er,useExisting:c.AFp},Aa]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:xa,imports:[ls,c.hGG]}),n})();"undefined"!=typeof window&&window;let ps=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(ld),r},providedIn:"root"}),n})(),ld=(()=>{class n extends ps{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ee))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Pl(n){return new ld(n.get(ee))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var mn=k(8996),On=k(3269);function gt(...n){const e=(0,On.yG)(n);return(0,mn.D)(n,e)}var cr=k(7579);class Pr extends cr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ir=k(9751);const{isArray:Qo}=Array,{getPrototypeOf:cd,prototype:dn,keys:kh}=Object;function Ti(n){if(1===n.length){const e=n[0];if(Qo(e))return{args:e,keys:null};if(function Du(n){return n&&"object"==typeof n&&cd(n)===dn}(e)){const t=kh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var hi=k(4671),xt=k(4004);const{isArray:dd}=Array;function hd(n){return(0,xt.U)(e=>function Fl(n,e){return dd(e)?n(...e):n(e)}(n,e))}function Io(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Dn=k(5403),gs=k(9672);function Xs(...n){const e=(0,On.yG)(n),t=(0,On.jO)(n),{args:r,keys:s}=Ti(n);if(0===r.length)return(0,mn.D)([],e);const u=new Ir.y(function fi(n,e,t=hi.y){return r=>{eo(e,()=>{const{length:s}=n,u=new Array(s);let d=s,m=s;for(let w=0;w<s;w++)eo(e,()=>{const I=(0,mn.D)(n[w],e);let T=!1;I.subscribe((0,Dn.x)(r,x=>{u[w]=x,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Io(s,d):hi.y));return t?u.pipe(hd(t)):u}function eo(n,e,t){n?(0,gs.f)(t,n,e):e()}var ka=k(576);function Hi(n,e){const t=(0,ka.m)(n)?n:()=>n,r=s=>s.error(t());return new Ir.y(e?s=>e.schedule(r,0,s):r)}const to=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Gi=k(8189);function Vl(...n){return function Ul(){return(0,Gi.J)(1)}()((0,mn.D)(n,(0,On.yG)(n)))}var Jo=k(8421);function Ai(n){return new Ir.y(e=>{(0,Jo.Xf)(n()).subscribe(e)})}var Xo=k(515),Na=k(727),dr=k(4482);function Si(){return(0,dr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Dn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class fd extends Ir.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,dr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Na.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Dn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Na.w0.EMPTY)}return e}refCount(){return Si()(this)}}function fn(n,e){return(0,dr.e)((t,r)=>{let s=null,u=0,d=!1;const m=()=>d&&!s&&r.complete();t.subscribe((0,Dn.x)(r,w=>{null==s||s.unsubscribe();let I=0;const T=u++;(0,Jo.Xf)(n(w,T)).subscribe(s=(0,Dn.x)(r,x=>r.next(e?e(w,x,T,I++):x),()=>{s=null,m()}))},()=>{d=!0,m()}))})}var ms=k(5698);function xi(...n){const e=(0,On.yG)(n);return(0,dr.e)((t,r)=>{(e?Vl(n,t,e):Vl(n,t)).subscribe(r)})}function ea(n,e,t,r,s){return(u,d)=>{let m=t,w=e,I=0;u.subscribe((0,Dn.x)(d,T=>{const x=I++;w=m?n(w,T,x):(m=!0,T),r&&d.next(w)},s&&(()=>{m&&d.next(w),d.complete()})))}}function Dr(n,e){return(0,dr.e)(ea(n,e,arguments.length>=2,!0))}function qi(n,e){return(0,dr.e)((t,r)=>{let s=0;t.subscribe((0,Dn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function Zi(n){return(0,dr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Dn.x)(t,void 0,void 0,d=>{u=(0,Jo.Xf)(n(d,Zi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var vn=k(5577);function no(n,e){return(0,ka.m)(e)?(0,vn.z)(n,e,1):(0,vn.z)(n,1)}function pd(n){return n<=0?()=>Xo.E:(0,dr.e)((e,t)=>{let r=[];e.subscribe((0,Dn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Tn(n=$p){return(0,dr.e)((e,t)=>{let r=!1;e.subscribe((0,Dn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function $p(){return new to}function Hp(n){return(0,dr.e)((e,t)=>{let r=!1;e.subscribe((0,Dn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function ro(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qi((s,u)=>n(s,u,r)):hi.y,(0,ms.q)(1),t?Hp(e):Tn(()=>new to))}var Qr=k(8505);class io{constructor(e,t){this.id=e,this.url=t}}class ys extends io{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oa extends io{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wn extends io{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bl extends io{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ta extends io{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zp extends io{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl extends io{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hr extends io{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pi extends io{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $l{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _s{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pa{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class ql{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wn(n){return new ql(n)}const Zl="ngNavigationCancelingError";function so(n){const e=Error("NavigationCancelingError: "+n);return e[Zl]=!0,e}function Do(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))s[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Au(n[s],e[s]))return!1;return!0}function Au(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Ki(n){return Array.prototype.concat.apply([],n)}function md(n){return n.length>0?n[n.length-1]:null}function Vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function gi(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,mn.D)(Promise.resolve(n)):gt(n)}const To={exact:function D(n,e,t){if(!Vt(n.segments,e.segments)||!le(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:F},na={exact:function C(n,e){return Wi(n,e)},subset:function R(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Au(n[t],e[t]))},ignored:()=>!0};function Su(n,e,t){return To[t.paths](n.root,e.root,t.matrixParams)&&na[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return J(n,e,e.segments,t)}function J(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Vt(s,t)||e.hasChildren()||!le(s,t,r))}if(n.segments.length===t.length){if(!Vt(n.segments,t)||!le(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!F(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Vt(n.segments,s)&&le(n.segments,s,r)&&n.children[jt])&&J(n.children[jt],e,u,r)}}function le(n,e,t){return e.every((r,s)=>na[t](n[s].parameters,r.parameters))}class Pe{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wn(this.queryParams)),this._queryParamMap}toString(){return ra.serialize(this)}}class Fe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ao(this)}}class it{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wn(this.parameters)),this._parameterMap}toString(){return Fa(this)}}function Vt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Bn{}class An{parse(e){const t=new _d(e);return new Pe(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Fr(e.root,!0)}`,r=function by(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Ri(t)}=${Ri(s)}`).join("&"):`${Ri(t)}=${Ri(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function So(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ra=new An;function Ao(n){return n.segments.map(e=>Fa(e)).join("/")}function Fr(n,e){if(!n.hasChildren())return Ao(n);if(e){const t=n.children[jt]?Fr(n.children[jt],!1):"",r=[];return Vn(n.children,(s,u)=>{u!==jt&&r.push(`${u}:${Fr(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kt(n,e){let t=[];return Vn(n.children,(r,s)=>{s===jt&&(t=t.concat(e(r,s)))}),Vn(n.children,(r,s)=>{s!==jt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===jt?[Fr(n.children[jt],!1)]:[`${s}:${Fr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[jt]?`${Ao(n)}/${t[0]}`:`${Ao(n)}/(${t.join("//")})`}}function mi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ri(n){return mi(n).replace(/%3B/gi,";")}function yd(n){return mi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wl(n){return decodeURIComponent(n)}function Kl(n){return Wl(n.replace(/\+/g,"%20"))}function Fa(n){return`${yd(n.path)}${function zp(n){return Object.keys(n).map(e=>`;${yd(e)}=${yd(n[e])}`).join("")}(n.parameters)}`}const Cy=/^[^\/()?;=#]+/;function vs(n){const e=n.match(Cy);return e?e[0]:""}const Yl=/^[^=?&#]+/,Dy=/^[^&#]+/;class _d{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fe([],{}):new Fe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[jt]=new Fe(e,t)),r}parseSegment(){const e=vs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new it(Wl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=vs(this.remaining);s&&(r=s,this.capture(r))}e[Wl(t)]=Wl(r)}parseQueryParam(e){const t=function Iy(n){const e=n.match(Yl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Wp(n){const e=n.match(Dy);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=Kl(t),u=Kl(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vs(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=jt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[jt]:new Fe([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ty{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Nh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Nh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Oh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Oh(e,this._root).map(t=>t.value)}}function Nh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Nh(n,t);if(r)return r}return null}function Oh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Oh(n,t);if(r.length)return r.unshift(e),r}return[]}class xo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vd extends Ty{constructor(e,t){super(e),this.snapshot=t,Ed(this,e)}toString(){return this.snapshot.toString()}}function La(n,e){const t=function Ay(n,e){const d=new xu([],{},{},"",{},jt,e,null,n.root,-1,{});return new Ph("",new xo(d,[]))}(n,e),r=new Pr([new it("",{})]),s=new Pr({}),u=new Pr({}),d=new Pr({}),m=new Pr(""),w=new ws(r,s,d,m,u,jt,e,t.root);return w.snapshot=t.root,new vd(new xo(w,[]),t)}class ws{constructor(e,t,r,s,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(e=>Wn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(e=>Wn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function wd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class xu{constructor(e,t,r,s,u,d,m,w,I,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=I,this._lastPathIndex=T,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ph extends Ty{constructor(e,t){super(t),this.url=e,Ed(this,t)}toString(){return bd(this._root)}}function Ed(n,e){e.value._routerState=n,e.children.forEach(t=>Ed(n,t))}function bd(n){const e=n.children.length>0?` { ${n.children.map(bd).join(", ")} } `:"";return`${n.value}${e}`}function Ro(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wi(e.params,t.params)||n.params.next(t.params),function Tu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fh(n,e){const t=Wi(n.params,e.params)&&function Dt(n,e){return Vt(n,e)&&n.every((t,r)=>Wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fh(n.parent,e.parent))}function Ql(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Lh(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Ql(n,r,s);return Ql(n,r)})}(n,e,t);return new xo(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Ql(n,m)),d}}const r=function My(n){return new ws(new Pr(n.url),new Pr(n.params),new Pr(n.queryParams),new Pr(n.fragment),new Pr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Ql(n,u));return new xo(r,s)}}function ko(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ua(n){return"object"==typeof n&&null!=n&&n.outlets}function Uh(n,e,t,r,s){let u={};if(r&&Vn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(I=>`${I}`):`${m}`}),n===e)return new Pe(t,u,s);const d=Cd(n,e,t);return new Pe(d,u,s)}function Cd(n,e,t){const r={};return Vn(n.children,(s,u)=>{r[u]=s===e?t:Cd(s,e,t)}),new Fe(n.segments,r)}class Kp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ko(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Ua);if(s&&s!==md(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Id{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ny(n,e,t){if(n||(n=new Fe([],{})),0===n.segments.length&&n.hasChildren())return oo(n,e,t);const r=function $0(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],m=t[r];if(Ua(m))break;const w=`${m}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&I&&"object"==typeof I&&void 0===I.outlets){if(!ki(w,I,d))return u;r+=2}else{if(!ki(w,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Fe(n.segments.slice(0,r.pathIndex),{});return u.children[jt]=new Fe(n.segments.slice(r.pathIndex),n.children),oo(u,0,s)}return r.match&&0===s.length?new Fe(n.segments,{}):r.match&&!n.hasChildren()?Vh(n,e,t):r.match?oo(n,0,s):Vh(n,e,t)}function oo(n,e,t){if(0===t.length)return new Fe(n.segments,{});{const r=function ky(n){return Ua(n[0])?n[0].outlets:{[jt]:n}}(t),s={};return Vn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[d]=Ny(n.children[d],e,u))}),Vn(n.children,(u,d)=>{void 0===r[d]&&(s[d]=u)}),new Fe(n.segments,s)}}function Vh(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ua(u)){const w=Va(u.outlets);return new Fe(r,w)}if(0===s&&ko(t[0])){r.push(new it(n.segments[e].path,Bh(t[0]))),s++;continue}const d=Ua(u)?u.outlets[jt]:`${u}`,m=s<t.length-1?t[s+1]:null;d&&m&&ko(m)?(r.push(new it(d,Bh(m))),s+=2):(r.push(new it(d,{})),s++)}return new Fe(r,{})}function Va(n){const e={};return Vn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Vh(new Fe([],{}),0,t))}),e}function Bh(n){const e={};return Vn(n,(t,r)=>e[r]=`${t}`),e}function ki(n,e,t){return n==t.path&&Wi(e,t.parameters)}class Jp{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ro(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Mo(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Vn(s,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Mo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Mo(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=Mo(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Hl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new zi(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Ro(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Ro(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function Dd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=s,d.resolver=w,d.outlet&&d.outlet.activateWith(s,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Td{constructor(e,t){this.routes=e,this.module=t}}function Ba(n){return"function"==typeof n}function Mu(n){return n instanceof Pe}const Xl=Symbol("INITIAL_VALUE");function ia(){return fn(n=>Xs(n.map(e=>e.pipe((0,ms.q)(1),xi(Xl)))).pipe(Dr((e,t)=>{let r=!1;return t.reduce((s,u,d)=>s!==Xl?s:(u===Xl&&(r=!0),r||!1!==u&&d!==t.length-1&&!Mu(u)?s:u),e)},Xl),qi(e=>e!==Xl),(0,xt.U)(e=>Mu(e)?e:!0===e),(0,ms.q)(1)))}class Oy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ec,this.attachRef=null}}class ec{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Oy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let tc=(()=>{class n{constructor(t,r,s,u,d){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Gh(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ec),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Gh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ws?this.route:e===ec?this.childContexts:this.parent.get(e,t)}}let qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[tc],encapsulation:2}),n})();function nc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];rc(r,Zh(e,r))}}function rc(n,e){n.children&&nc(n.children,e)}function Zh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function zh(n){const e=n.children&&n.children.map(zh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==jt&&(t.component=qh),t}function en(n){return n.outlet||jt}function Wh(n,e){const t=n.filter(r=>en(r)===e);return t.push(...n.filter(r=>en(r)!==e)),t}const eg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ru(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},eg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Do)(t,n,e);if(!u)return Object.assign({},eg);const d={};Vn(u.posParams,(w,I)=>{d[I]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function ic(n,e,t,r,s="corrected"){if(t.length>0&&function Fy(n,e,t){return t.some(r=>Sd(n,e,r)&&en(r)!==jt)}(n,t,r)){const d=new Fe(e,function Ad(n,e,t,r){const s={};s[jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&en(u)!==jt){const d=new Fe([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[en(u)]=d}return s}(n,e,r,new Fe(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function tg(n,e,t){return t.some(r=>Sd(n,e,r))}(n,t,r)){const d=new Fe(n.segments,function Py(n,e,t,r,s,u){const d={};for(const m of r)if(Sd(n,t,m)&&!s[en(m)]){const w=new Fe([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[en(m)]=w}return Object.assign(Object.assign({},s),d)}(n,e,t,r,n.children,s));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Fe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Sd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ly(n,e,t,r){return!!(en(n)===r||r!==jt&&Sd(e,t,n))&&("**"===n.path||Ru(e,n,t).matched)}function Uy(n,e,t){return 0===e.length&&!n.children[t]}class sa{constructor(e){this.segmentGroup=e||null}}class Tr{constructor(e){this.urlTree=e}}function No(n){return Hi(new sa(n))}function sc(n){return Hi(new Tr(n))}class Yh{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=ic(this.urlTree.root,[],[],this.config).segmentGroup,t=new Fe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,jt).pipe((0,xt.U)(u=>this.createUrlTree($a(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zi(u=>{if(u instanceof Tr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof sa?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,jt).pipe((0,xt.U)(s=>this.createUrlTree($a(s),e.queryParams,e.fragment))).pipe(Zi(s=>{throw s instanceof sa?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new Fe([],{[jt]:e}):e;return new Pe(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,xt.U)(u=>new Fe([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,mn.D)(s).pipe(no(u=>{const d=r.children[u],m=Wh(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,xt.U)(w=>({segment:w,outlet:u})))}),Dr((u,d)=>(u[d.outlet]=d.segment,u),{}),function Gp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qi((s,u)=>n(s,u,r)):hi.y,pd(1),t?Hp(e):Tn(()=>new to))}())}expandSegment(e,t,r,s,u,d){return(0,mn.D)(r).pipe(no(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,d).pipe(Zi(I=>{if(I instanceof sa)return gt(null);throw I}))),ro(m=>!!m),Zi((m,w)=>{if(m instanceof to||"EmptyError"===m.name)return Uy(t,s,u)?gt(new Fe([],{})):No(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,d,m){return Ly(s,t,u,d)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d):No(t):No(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sc(u):this.lineralizeSegments(r,u).pipe((0,vn.z)(d=>{const m=new Fe(d,{});return this.expandSegment(e,m,t,d,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d){const{matched:m,consumedSegments:w,remainingSegments:I,positionalParamSegments:T}=Ru(t,s,u);if(!m)return No(t);const x=this.applyRedirectCommands(w,s.redirectTo,T);return s.redirectTo.startsWith("/")?sc(x):this.lineralizeSegments(s,x).pipe((0,vn.z)(L=>this.expandSegment(e,t,r,L.concat(I),d,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,xt.U)(x=>(r._loadedConfig=x,new Fe(s,{})))):gt(new Fe(s,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=Ru(t,r,s);return d?this.getChildConfig(e,r,s).pipe((0,vn.z)(T=>{const x=T.module,L=T.routes,{segmentGroup:G,slicedSegments:ie}=ic(t,m,w,L),ke=new Fe(G.segments,G.children);if(0===ie.length&&ke.hasChildren())return this.expandChildren(x,L,ke).pipe((0,xt.U)(Mt=>new Fe(m,Mt)));if(0===L.length&&0===ie.length)return gt(new Fe(m,{}));const Oe=en(r)===u;return this.expandSegment(x,ke,L,ie,Oe?jt:u,!0).pipe((0,xt.U)(nt=>new Fe(m.concat(nt.segments),nt.children)))})):No(t)}getChildConfig(e,t,r){return t.children?gt(new Td(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,vn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,xt.U)(u=>(t._loadedConfig=u,u))):function Lr(n){return Hi(so(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new Td([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?gt(s.map(d=>{const m=e.get(d);let w;if(function jh(n){return n&&Ba(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Ba(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return gi(w)})).pipe(ia(),(0,Qr.b)(d=>{if(!Mu(d))return;const m=so(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,xt.U)(d=>!0===d)):gt(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return gt(r);if(s.numberOfChildren>1||!s.children[jt])return Hi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Pe(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Vn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,s)}),new Fe(u,d)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function $a(n){const e={};for(const r of Object.keys(n.children)){const u=$a(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ni(n){if(1===n.numberOfChildren&&n.children[jt]){const e=n.children[jt];return new Fe(n.segments.concat(e.segments),e.children)}return n}(new Fe(n.segments,e))}class ng{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ha{constructor(e,t){this.component=e,this.route=t}}function Jh(n,e,t){const r=n._root;return yi(r,e?e._root:null,t,[r.value])}function oc(n,e,t){const r=function Vy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yi(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Mo(e);return n.children.forEach(d=>{(function ig(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function By(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Vt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vt(n.url,e.url)||!Wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fh(n,e)||!Wi(n.queryParams,e.queryParams);default:return!Fh(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new ng(r)):(u.data=d.data,u._resolvedData=d._resolvedData),yi(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new Ha(m.outlet.component,d))}else d&&Ga(e,m,s),s.canActivateChecks.push(new ng(r)),yi(n,null,u.component?m?m.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Vn(u,(d,m)=>Ga(d,t.getContext(m),s)),s}function Ga(n,e,t){const r=Mo(n),s=n.value;Vn(r,(u,d)=>{Ga(u,s.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Ha(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class tf{}function nf(n){return new Ir.y(e=>e.error(n))}class rf{constructor(e,t,r,s,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=ic(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,jt);if(null===t)return null;const r=new xu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new xo(r,t),u=new Ph(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Sy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=Wh(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const s=og(r);return function Gy(n){n.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,s);if(null!==d)return d}return Uy(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!Ly(e,t,r,s))return null;let u,d=[],m=[];if("**"===e.path){const G=r.length>0?md(r).parameters:{};u=new xu(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),en(e),e.component,e,f(t),g(t)+r.length,S(e))}else{const G=Ru(t,e,r);if(!G.matched)return null;d=G.consumedSegments,m=G.remainingSegments,u=new xu(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),en(e),e.component,e,f(t),g(t)+d.length,S(e))}const w=function qy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:T}=ic(t,d,m,w.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===T.length&&I.hasChildren()){const G=this.processChildren(w,I);return null===G?null:[new xo(u,G)]}if(0===w.length&&0===T.length)return[new xo(u,[])];const x=en(e)===s,L=this.processSegment(w,I,T,x?jt:s);return null===L?null:[new xo(u,L)]}}function Zy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function og(n){const e=[],t=new Set;for(const r of n){if(!Zy(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=og(r.children);e.push(new xo(r.value,s))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function S(n){return n.resolve||{}}function at(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ft(n){return fn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,xt.U)(()=>e)):gt(e)})}class uc extends class Qi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ku=new c.OlP("ROUTES");class Nu{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,xt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new Td(Ki(d.injector.get(ku,void 0,c.XFs.Self|c.XFs.Optional)).map(zh),d)}),Zi(u=>{throw t._loader$=void 0,u}));return t._loader$=new fd(s,()=>new cr.x).pipe(Si()),t._loader$}loadModuleFactory(e){return gi(e()).pipe((0,vn.z)(t=>t instanceof c.YKP?gt(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class zy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function oa(n){throw n}function xd(n,e,t){return e.parse("/")}function Md(n,e){return gt(null)}const af={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Rd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sr=(()=>{class n{constructor(t,r,s,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new cr.x,this.errorHandler=oa,this.malformedUriErrorHandler=xd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Md,afterPreactivation:Md},this.urlHandlingStrategy=new zy,this.routeReuseStrategy=new uc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(c.h0i),this.console=d.get(c.c2e);const x=d.get(c.R0b);this.isNgZoneEnabled=x instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function zl(){return new Pe(new Fe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Nu(d,m,L=>this.triggerEvent(new $l(L)),L=>this.triggerEvent(new _s(L))),this.routerState=La(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qi(s=>0!==s.id),(0,xt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),fn(s=>{let u=!1,d=!1;return gt(s).pipe((0,Qr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fn(m=>{const w=this.browserUrlTree.toString(),I=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return ag(m.source)&&(this.browserUrlTree=m.extractedUrl),gt(m).pipe(fn(x=>{const L=this.transitions.getValue();return r.next(new ys(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?Xo.E:Promise.resolve(x)}),function Qh(n,e,t,r){return fn(s=>function ja(n,e,t,r,s){return new Yh(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,xt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function O(n,e,t,r,s){return(0,vn.z)(u=>function Hy(n,e,t,r,s="emptyOnly",u="legacy"){try{const d=new rf(n,e,t,r,s,u).recognize();return null===d?nf(new tf):gt(d)}catch(d){return nf(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,xt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(G,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new ta(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:ie,restoredState:ke,extras:Oe}=m,Ct=new ys(L,this.serializeUrl(G),ie,ke);r.next(Ct);const nt=La(G,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},m),{targetSnapshot:nt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Xo.E}),ft(m=>{const{targetSnapshot:w,id:I,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.beforePreactivation(w,{navigationId:I,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!G})}),(0,Qr.b)(m=>{const w=new Zp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,xt.U)(m=>Object.assign(Object.assign({},m),{guards:Jh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function jy(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function sg(n,e,t,r){return(0,mn.D)(n).pipe((0,vn.z)(s=>function ac(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(m=>{const w=oc(m,e,s);let I;if(function H0(n){return n&&Ba(n.canDeactivate)}(w))I=gi(w.canDeactivate(n,e,t,r));else{if(!Ba(w))throw new Error("Invalid CanDeactivate guard");I=gi(w(n,e,t,r))}return I.pipe(ro())})).pipe(ia()):gt(!0)}(s.component,s.route,t,e,r)),ro(s=>!0!==s,!0))}(d,r,s,n).pipe((0,vn.z)(m=>m&&function Xp(n){return"boolean"==typeof n}(m)?function Ar(n,e,t,r){return(0,mn.D)(e).pipe(no(s=>Vl(function ef(n,e){return null!==n&&e&&e(new Mi(n)),gt(!0)}(s.route.parent,r),function Xh(n,e){return null!==n&&e&&e(new Pa(n)),gt(!0)}(s.route,r),function Oo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function rg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ai(()=>gt(d.guards.map(w=>{const I=oc(w,d.node,t);let T;if(function Hh(n){return n&&Ba(n.canActivateChild)}(I))T=gi(I.canActivateChild(r,n));else{if(!Ba(I))throw new Error("Invalid CanActivateChild guard");T=gi(I(r,n))}return T.pipe(ro())})).pipe(ia())));return gt(u).pipe(ia())}(n,s.path,t),function $y(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const s=r.map(u=>Ai(()=>{const d=oc(u,e,t);let m;if(function $h(n){return n&&Ba(n.canActivate)}(d))m=gi(d.canActivate(e,n));else{if(!Ba(d))throw new Error("Invalid CanActivate guard");m=gi(d(e,n))}return m.pipe(ro())}));return gt(s).pipe(ia())}(n,s.route,t))),ro(s=>!0!==s,!0))}(r,u,n,e):gt(m)),(0,xt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Qr.b)(m=>{if(Mu(m.guardsResult)){const I=so(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw I.url=m.guardsResult,I}const w=new jl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),qi(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ft(m=>{if(m.guards.canActivateChecks.length)return gt(m).pipe((0,Qr.b)(w=>{const I=new hr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(I)}),fn(w=>{let I=!1;return gt(w).pipe(function K(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return gt(t);let u=0;return(0,mn.D)(s).pipe(no(d=>function he(n,e,t,r){return function Ze(n,e,t,r){const s=at(n);if(0===s.length)return gt({});const u={};return(0,mn.D)(s).pipe((0,vn.z)(d=>function bt(n,e,t,r){const s=oc(n,e,r);return gi(s.resolve?s.resolve(e,t):s(e,t))}(n[d],e,t,r).pipe((0,Qr.b)(m=>{u[d]=m}))),pd(1),(0,vn.z)(()=>at(u).length===s.length?gt(u):Xo.E))}(n._resolve,n,e,r).pipe((0,xt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Sy(n,t).resolve),null)))}(d.route,r,n,e)),(0,Qr.b)(()=>u++),pd(1),(0,vn.z)(d=>u===s.length?gt(t):Xo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qr.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Qr.b)(w=>{const I=new pi(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(I)}))}),ft(m=>{const{targetSnapshot:w,id:I,extractedUrl:T,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:G}}=m;return this.hooks.afterPreactivation(w,{navigationId:I,appliedUrlTree:T,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!G})}),(0,xt.U)(m=>{const w=function xy(n,e,t){const r=Ql(n,e._root,t?t._root:void 0);return new vd(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Qr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,xt.U)(r=>(new Jp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Qr.b)({next(){u=!0},complete(){u=!0}}),function qp(n){return(0,dr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),Zi(m=>{if(d=!0,function gd(n){return n&&n[Zl]}(m)){const w=Mu(m.url);w||(this.navigated=!0,this.restoreHistory(s,!0));const I=new wn(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(I),w?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ag(s.source)};this.scheduleNavigation(T,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new Bl(s.id,this.serializeUrl(s.extractedUrl),m);r.next(w);try{s.resolve(this.errorHandler(m))}catch(I){s.reject(I)}}return Xo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},d=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){nc(t),this.config=t.map(zh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,I=s||this.routerState.root,T=w?this.currentUrlTree.fragment:d;let x=null;switch(m){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function Es(n,e,t,r,s){if(0===t.length)return Uh(e.root,e.root,e.root,r,s);const u=function Yp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Kp(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Vn(u.outlets,(w,I)=>{m[I]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Kp(t,e,r)}(t);if(u.toRoot())return Uh(e.root,e.root,new Fe([],{}),r,s);const d=function Qp(n,e,t){if(n.isAbsolute)return new Id(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Id(u,u===e.root,0)}const r=ko(n.commands[0])?0:1;return function Ry(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Id(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?oo(d.segmentGroup,d.index,u.commands):Ny(d.segmentGroup,d.index,u.commands);return Uh(e.root,d.segmentGroup,m,r,s)}(I,this.currentUrlTree,t,x,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Mu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function uf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},af):!1===r?Object.assign({},Rd):r,Mu(t))return Su(this.currentUrlTree,t,s);const u=this.parseUrl(t);return Su(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Oa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let I,T,x;d?(I=d.resolve,T=d.reject,x=d.promise):x=new Promise((ie,ke)=>{I=ie,T=ke});const L=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),G=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):G=0,this.setTransition({id:L,targetPageId:G,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:T,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(ie=>Promise.reject(ie))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new wn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function ag(n){return"imperative"!==n}let Wy=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new cr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Nd(this.skipLocationChange),replaceUrl:Nd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Nd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(ws),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),kd=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new cr.x,this.subscription=t.events.subscribe(u=>{u instanceof Oa&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,d){if(0!==t||r||s||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Nd(this.skipLocationChange),replaceUrl:Nd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Nd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(ws),c.Y36(we))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Nd(n){return""===n||!!n}let Ky=(()=>{class n{constructor(t,r,s,u,d,m){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=d,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof Oa&&this.update()})}ngAfterContentInit(){gt(this.links.changes,this.linksWithHrefs.changes,gt(null)).pipe((0,Gi.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=(0,mn.D)(r).pipe((0,Gi.J)()).subscribe(s=>{this.isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Yy(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Wy,8),c.Y36(kd,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,Wy,5),c.Suo(s,kd,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class Qy{}class G0{preload(e,t){return gt(null)}}let q0=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new Nu(s,r,w=>t.triggerEvent(new $l(w)),w=>t.triggerEvent(new _s(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(qi(t=>t instanceof Oa),no(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;s.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,mn.D)(s).pipe((0,Gi.J)(),(0,xt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,vn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Qy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ug=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ys?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const bs=new c.OlP("ROUTER_CONFIGURATION"),Xy=new c.OlP("ROUTER_FORROOT_GUARD"),Z0=[Ee,{provide:Bn,useClass:An},{provide:Sr,useFactory:function t_(n,e,t,r,s,u,d={},m,w){const I=new Sr(null,n,e,t,r,s,Ki(u));return m&&(I.urlHandlingStrategy=m),w&&(I.routeReuseStrategy=w),function K0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,I),d.enableTracing&&I.events.subscribe(T=>{var x,L;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(L=console.groupEnd)||void 0===L||L.call(console)}),I},deps:[Bn,ec,Ee,c.zs3,c.Sil,ku,bs,[class sf{},new c.FiY],[class Sn{},new c.FiY]]},ec,{provide:ws,useFactory:function lg(n){return n.routerState.root},deps:[Sr]},q0,G0,class Jy{preload(e,t){return t().pipe(Zi(()=>gt(null)))}},{provide:bs,useValue:{enableTracing:!1}}];function WC(){return new c.PXZ("Router",Sr)}let lc=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Z0,e_(t),{provide:Xy,useFactory:W0,deps:[[Sr,new c.FiY,new c.tp0]]},{provide:bs,useValue:r||{}},{provide:we,useFactory:z0,deps:[ne,[new c.tBr(st),new c.FiY],bs]},{provide:ug,useFactory:KC,deps:[Sr,fu,bs]},{provide:Qy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:G0},{provide:c.PXZ,multi:!0,useFactory:WC},[Od,{provide:c.ip1,multi:!0,useFactory:Y0,deps:[Od]},{provide:r_,useFactory:n_,deps:[Od]},{provide:c.tb,multi:!0,useExisting:r_}]]}}static forChild(t){return{ngModule:n,providers:[e_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xy,8),c.LFG(Sr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function KC(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ug(n,e,t)}function z0(n,e,t={}){return t.useHash?new Ie(n,e):new et(n,e)}function W0(n){return"guarded"}function e_(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:ku,multi:!0,useValue:n}]}let Od=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new cr.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),u=this.injector.get(Sr),d=this.injector.get(bs);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(bs),s=this.injector.get(q0),u=this.injector.get(ug),d=this.injector.get(Sr),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),s.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Y0(n){return n.appInitializer.bind(n)}function n_(n){return n.bootstrapListener.bind(n)}const r_=new c.OlP("Router Initializer"),Q0=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:104,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto","p-8"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"video",1),c._UZ(2,"source",2),c.qZA(),c._UZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),c.qZA(),c.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),c._uU(13,"Clip it and ship it!"),c.qZA(),c.TgZ(14,"p"),c._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),c.qZA()()()(),c.TgZ(16,"section",9)(17,"h1",10),c._uU(18," Latest "),c.qZA(),c.TgZ(19,"div",11)(20,"a",12),c._UZ(21,"img",13),c.TgZ(22,"div",14)(23,"div",15)(24,"div",16),c.O4$(),c.TgZ(25,"svg",17),c._UZ(26,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(27,"div",19)(28,"h2",20),c._uU(29,"Game Highlighting Clip"),c.qZA(),c.TgZ(30,"p",21),c._uU(31," Luis Ramirez \xb7 "),c.TgZ(32,"span",22),c._uU(33,"March 31, 2020"),c.qZA()()()(),c.TgZ(34,"a",12),c._UZ(35,"img",23),c.TgZ(36,"div",14)(37,"div",15)(38,"div",16),c.O4$(),c.TgZ(39,"svg",17),c._UZ(40,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(41,"div",19)(42,"h2",20),c._uU(43,"Game Highlighting Clip"),c.qZA(),c.TgZ(44,"p",21),c._uU(45," Luis Ramirez \xb7 "),c.TgZ(46,"span",22),c._uU(47,"March 31, 2020"),c.qZA()()()(),c.TgZ(48,"a",12),c._UZ(49,"img",24),c.TgZ(50,"div",14)(51,"div",15)(52,"div",16),c.O4$(),c.TgZ(53,"svg",17),c._UZ(54,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(55,"div",19)(56,"h2",20),c._uU(57,"Game Highlighting Clip"),c.qZA(),c.TgZ(58,"p",21),c._uU(59," Luis Ramirez \xb7 "),c.TgZ(60,"span",22),c._uU(61,"March 31, 2020"),c.qZA()()()(),c.TgZ(62,"a",12),c._UZ(63,"img",23),c.TgZ(64,"div",14)(65,"div",15)(66,"div",16),c.O4$(),c.TgZ(67,"svg",17),c._UZ(68,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(69,"div",19)(70,"h2",20),c._uU(71,"Game Highlighting Clip"),c.qZA(),c.TgZ(72,"p",21),c._uU(73," Luis Ramirez \xb7 "),c.TgZ(74,"span",22),c._uU(75,"March 31, 2020"),c.qZA()()()(),c.TgZ(76,"a",12),c._UZ(77,"img",24),c.TgZ(78,"div",14)(79,"div",15)(80,"div",16),c.O4$(),c.TgZ(81,"svg",17),c._UZ(82,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(83,"div",19)(84,"h2",20),c._uU(85,"Game Highlighting Clip"),c.qZA(),c.TgZ(86,"p",21),c._uU(87," Luis Ramirez \xb7 "),c.TgZ(88,"span",22),c._uU(89,"March 31, 2020"),c.qZA()()()(),c.TgZ(90,"a",12),c._UZ(91,"img",13),c.TgZ(92,"div",14)(93,"div",15)(94,"div",16),c.O4$(),c.TgZ(95,"svg",17),c._UZ(96,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(97,"div",19)(98,"h2",20),c._uU(99,"Game Highlighting Clip"),c.qZA(),c.TgZ(100,"p",21),c._uU(101," Luis Ramirez \xb7 "),c.TgZ(102,"span",22),c._uU(103,"March 31, 2020"),c.qZA()()()()()())},styles:[""]}),n})()},{path:"about",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4","px-12"]],template:function(t,r){1&t&&(c.TgZ(0,"p",0),c._uU(1," This is a basic about page to demonstrate basic routing capabilities.\n"),c.qZA())},styles:[""]}),n})()},{path:"clip/:id",component:(()=>{class n{constructor(t){this.route=t,this.id=""}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ws))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clip"]],decls:57,vars:1,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","data-setup","{}",1,"video-js","vjs-theme-forest","mx-auto"],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["routerLink","/clip/b",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Uploaded By Luis on "),c.TgZ(6,"span"),c._uU(7,"March 25, 2022"),c.qZA()(),c.TgZ(8,"div",4)(9,"video",5),c._UZ(10,"source",6),c.qZA()()()(),c.TgZ(11,"div",7)(12,"h2",8),c._uU(13,"More Clips"),c.qZA(),c.TgZ(14,"div",9)(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"div",4)(18,"div",12)(19,"div",13),c.O4$(),c.TgZ(20,"svg",14),c._UZ(21,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(22,"div",16)(23,"h2",17),c._uU(24,"Game Highlighting Clip"),c.qZA(),c.TgZ(25,"p",18),c._uU(26," Luis Ramirez \xb7 "),c.TgZ(27,"span",19),c._uU(28,"March 31, 2020"),c.qZA()()()(),c.TgZ(29,"a",20),c._UZ(30,"img",21),c.TgZ(31,"div",4)(32,"div",12)(33,"div",13),c.O4$(),c.TgZ(34,"svg",14),c._UZ(35,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(36,"div",16)(37,"h2",17),c._uU(38,"Game Highlighting Clip"),c.qZA(),c.TgZ(39,"p",18),c._uU(40," Luis Ramirez \xb7 "),c.TgZ(41,"span",19),c._uU(42,"March 31, 2020"),c.qZA()()()(),c.TgZ(43,"a",20),c._UZ(44,"img",22),c.TgZ(45,"div",4)(46,"div",12)(47,"div",13),c.O4$(),c.TgZ(48,"svg",14),c._UZ(49,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(50,"div",16)(51,"h2",17),c._uU(52,"Game Highlighting Clip"),c.qZA(),c.TgZ(53,"p",18),c._uU(54," Luis Ramirez \xb7 "),c.TgZ(55,"span",19),c._uU(56,"March 31, 2020"),c.qZA()()()()()()),2&t&&(c.xp6(3),c.Oqu(r.id))},directives:[kd],styles:[""]}),n})()},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"404"),c.qZA(),c._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),c.qZA(),c.TgZ(15,"div",14)(16,"h2",15),c._uU(17,"Page not found"),c.qZA(),c.TgZ(18,"p"),c._uU(19,"Looks like the page you're looking for is gone or doesn't exist."),c.qZA()())},styles:[""]}),n})()}];let s_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lc.forRoot(Q0)],lc]}),n})();var fe=k(5861),o_=k(4986),J0=k(5032);function ew(n,e){return e?t=>Vl(e.pipe((0,ms.q)(1),function QC(){return(0,dr.e)((n,e)=>{n.subscribe((0,Dn.x)(e,J0.Z))})}()),t.pipe(ew(n))):(0,vn.z)((t,r)=>n(t,r).pipe((0,ms.q)(1),function X0(n){return(0,xt.U)(()=>n)}(t)))}var JC=k(3532);var eI=k(6451),dg=k(5363),tI=k(6063);class nI extends cr.x{constructor(e=1/0,t=1/0,r=tI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!s&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var nw=k(3099);function rw(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,nw.B)({connector:()=>new nI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function iw(n,e){return(0,ka.m)(e)?fn(()=>n,e):fn(()=>n)}var a_=k(9468),lt=k(5813),_i=k(2011);k(5867);var Cs=k(9681),cf=k(4859),Nt=k(2090),Pu=k(1877);const dw=new Map,iI={activated:!1,tokenObservers:[]},hw={initialized:!1,enabled:!1};function Jr(n){return dw.get(n)||iI}function Fo(n,e){dw.set(n,e)}function f_(){return hw}class oS{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Nt.BH,yield function aS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Nt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ji=new Nt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function aI(n){if(!Jr(n).activated)throw Ji.create("use-before-activation",{appName:n.name})}function df(n,e){return m_.apply(this,arguments)}function m_(){return(m_=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const x=yield s.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(x){throw Ji.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==d.status)throw Ji.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(x){throw Ji.create("fetch-parse-error",{originalErrorMessage:x.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Ji.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const I=1e3*Number(w[1]),T=Date.now();return{token:m.attestationToken,expireTimeMillis:T+I,issuedAtTimeMillis:T}})).apply(this,arguments)}function mw(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const ao="firebase-app-check-store";let pg=null;function gg(){return pg||(pg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Ji.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ao,{keyPath:"compositeKey"})}}catch(t){e(Ji.create("storage-open",{originalErrorMessage:t.message}))}}),pg)}function Fu(){return(Fu=(0,fe.Z)(function*(n,e){const r=(yield gg()).transaction(ao,"readwrite"),u=r.objectStore(ao).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var I;m(Ji.create("storage-set",{originalErrorMessage:null===(I=w.target.error)||void 0===I?void 0:I.message}))}})})).apply(this,arguments)}const ua=new Pu.Yd("@firebase/app-check");function w_(n,e){return(0,Nt.hl)()?function yw(n,e){return function Pd(n,e){return Fu.apply(this,arguments)}(function Fd(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ua.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function b_(){return f_().enabled}function ff(){return C_.apply(this,arguments)}function C_(){return(C_=(0,fe.Z)(function*(){const n=f_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cS={error:"UNKNOWN_ERROR"};function vw(n){return Nt.US.encodeString(JSON.stringify(n),!1)}function pf(n){return I_.apply(this,arguments)}function I_(){return(I_=(0,fe.Z)(function*(n,e=!1){const t=n.app;aI(t);const r=Jr(t);let u,s=r.token;if(!s){const w=yield r.cachedTokenPromise;w&&vg(w)&&(s=w)}if(!e&&s&&vg(s))return{token:s.token};let m,d=!1;if(b_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=df(mw(t,yield ff()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),d=!0);const w=yield r.exchangeTokenPromise;return yield w_(t,w),Fo(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),s=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?ua.warn(w.message):ua.error(w),u=w}return s?(m={token:s.token},Fo(t,Object.assign(Object.assign({},r),{token:s})),yield w_(t,s)):m=dS(u),d&&Ew(t,m),m})).apply(this,arguments)}function D_(n,e){const t=Jr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Fo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ww(n){const{app:e}=n,t=Jr(e);let r=t.tokenRefresher;r||(r=function Is(n){const{app:e}=n;return new oS((0,fe.Z)(function*(){let r;if(r=Jr(e).token?yield pf(n,!0):yield pf(n),r.error)throw r.error}),()=>!0,()=>{const t=Jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Fo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ew(n,e){const t=Jr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function vg(n){return n.expireTimeMillis-Date.now()>0}function dS(n){return{token:vw(cS),error:n}}class hS{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Jr(this.app);for(const t of e)D_(this.app,t.next);return Promise.resolve()}}const kw="app-check-internal";!function Eg(){(0,Cs._registerComponent)(new cf.wA("app-check",n=>function bw(n,e){return new hS(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kw).initialize()})),(0,Cs._registerComponent)(new cf.wA(kw,n=>function fS(n){return{getToken:e=>pf(n,e),addTokenListener:e=>function _g(n,e,t,r){const{app:s}=n,u=Jr(s),d={next:t,error:r,type:e};if(Fo(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&vg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ww(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ww(n))}(n,"INTERNAL",e),removeTokenListener:e=>D_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cs.registerVersion)("@firebase/app-check","0.5.5")}();class Ld{constructor(){return(0,lt.vb)("app-check")}}"undefined"!=typeof window&&window;var Ud=k(127);const Ig=new c.OlP("angularfire2.auth.use-emulator"),k_=new c.OlP("angularfire2.auth.settings"),Dg=new c.OlP("angularfire2.auth.tenant-id"),Vd=new c.OlP("angularfire2.auth.langugage-code"),Fw=new c.OlP("angularfire2.auth.use-device-language"),Tg=new c.OlP("angularfire.auth.persistence"),N_=(n,e,t,r,s,u,d,m)=>(0,_i.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),d)for(const[I,T]of Object.entries(d))w.settings[I]=T;return m&&w.setPersistence(m),w},[t,r,s,u,d,m]);let la=(()=>{class n{constructor(t,r,s,u,d,m,w,I,T,x,L,G){const ie=new cr.x,ke=gt(void 0).pipe((0,dg.Q)(d.outsideAngular),fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,xt.U)(()=>(0,_i.on)(t,u,r)),(0,xt.U)(Oe=>N_(Oe,u,m,I,T,x,w,L)),rw({bufferSize:1,refCount:!1}));if(ur(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{ke.pipe(ro()).subscribe();const Ct=ke.pipe(fn(rt=>rt.getRedirectResult().then(St=>St,()=>null)),lt.iC,rw({bufferSize:1,refCount:!1})),nt=ke.pipe(fn(rt=>new Ir.y(St=>({unsubscribe:u.runOutsideAngular(()=>rt.onAuthStateChanged(Xe=>St.next(Xe),Xe=>St.error(Xe),()=>St.complete()))})))),Mt=ke.pipe(fn(rt=>new Ir.y(St=>({unsubscribe:u.runOutsideAngular(()=>rt.onIdTokenChanged(Xe=>St.next(Xe),Xe=>St.error(Xe),()=>St.complete()))}))));this.authState=Ct.pipe(iw(nt),(0,a_.R)(d.outsideAngular),(0,dg.Q)(d.insideAngular)),this.user=Ct.pipe(iw(Mt),(0,a_.R)(d.outsideAngular),(0,dg.Q)(d.insideAngular)),this.idToken=this.user.pipe(fn(rt=>rt?(0,mn.D)(rt.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(fn(rt=>rt?(0,mn.D)(rt.getIdTokenResult()):gt(null))),this.credential=(0,eI.T)(Ct,ie,this.authState.pipe(qi(rt=>!rt))).pipe((0,xt.U)(rt=>(null==rt?void 0:rt.user)?rt:null),(0,a_.R)(d.outsideAngular),(0,dg.Q)(d.insideAngular))}return(0,_i.pX)(this,ke,u,{spy:{apply:(Oe,Ct,nt)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&nt.then(Mt=>ie.next(Mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_i.Dh),c.LFG(_i.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(lt.HU),c.LFG(Ig,8),c.LFG(k_,8),c.LFG(Dg,8),c.LFG(Vd,8),c.LFG(Fw,8),c.LFG(Tg,8),c.LFG(Ld,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Lw=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",lt.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[la]}),n})();function O_(){return(0,dr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Dn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function DI(n,e){return n===e}k(4087);var ct,F_=k(3942),Bd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ca={},L_=L_||{},Tt=Bd||self;function Ag(){}function U_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ds="closure_uid_"+(1e9*Math.random()>>>0),V_=0;function Uw(n,e,t){return n.call.apply(n.bind,arguments)}function Vw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ur(n,e,t){return(Ur=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uw:Vw).apply(null,arguments)}function yf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Xr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[s].apply(r,d)}}function Vu(){this.s=this.s,this.o=this.o}var SI={};Vu.prototype.s=!1,Vu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function TI(n){return Object.prototype.hasOwnProperty.call(n,Ds)&&n[Ds]||(n[Ds]=++V_)}(this);delete SI[n]}},Vu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const B_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},xI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function jw(n){return Array.prototype.concat.apply([],arguments)}function j_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $_(n){return/^[\s\xa0]*$/.test(n)}var vi,MI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ei(n,e){return-1!=n.indexOf(e)}function H_(n,e){return n<e?-1:n>e?1:0}e:{var G_=Tt.navigator;if(G_){var RI=G_.userAgent;if(RI){vi=RI;break e}}vi=""}function Ts(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function kI(n){const e={};for(const t in n)e[t]=n[t];return e}var NI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q_(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<NI.length;u++)t=NI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Sg(n){return Sg[" "](n),n}Sg[" "]=Ag;var xg,n,OI=ei(vi,"Opera"),_f=ei(vi,"Trident")||ei(vi,"MSIE"),Z_=ei(vi,"Edge"),vf=Z_||_f,Hw=ei(vi,"Gecko")&&!(ei(vi.toLowerCase(),"webkit")&&!ei(vi,"Edge"))&&!(ei(vi,"Trident")||ei(vi,"MSIE"))&&!ei(vi,"Edge"),z_=ei(vi.toLowerCase(),"webkit")&&!ei(vi,"Edge");function Gw(){var n=Tt.document;return n?n.documentMode:void 0}e:{var W_="",K_=(n=vi,Hw?/rv:([^\);]+)(\)|;)/.exec(n):Z_?/Edge\/([\d\.]+)/.exec(n):_f?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):z_?/WebKit\/(\S+)/.exec(n):OI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(K_&&(W_=K_?K_[1]:""),_f){var Y_=Gw();if(null!=Y_&&Y_>parseFloat(W_)){xg=String(Y_);break e}}xg=W_}var PI={};var wf=Tt.document&&_f&&(Gw()||parseInt(xg,10))||void 0,FI=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",Ag,e),Tt.removeEventListener("test",Ag,e)}catch(t){}return n}();function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function cc(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Hw){e:{try{Sg(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:da[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&cc.Z.h.call(this)}}wi.prototype.h=function(){this.defaultPrevented=!0},Xr(cc,wi);var da={2:"touch",3:"pen",4:"mouse"};cc.prototype.h=function(){cc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var qa="closure_listenable_"+(1e6*Math.random()|0),Ei=0;function dc(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++Ei,this.ca=this.fa=!1}function hc(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Oi(n){this.src=n,this.g={},this.h=0}function Ef(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=B_(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(hc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ju(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}Oi.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=ju(n,e,r,s);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new dc(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var $u="closure_lm_"+(1e6*Math.random()|0),Hu={};function fc(n,e,t,r,s){if(r&&r.once)return gc(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)fc(n,e[u],t,r,s);return null}return t=Ng(t),n&&n[qa]?n.N(e,t,mf(r)?!!r.capture:!!r,s):pc(n,e,t,!1,r,s)}function pc(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var d=mf(s)?!!s.capture:!!s,m=Rg(n);if(m||(n[$u]=m=new Oi(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function jd(){var e=Zw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)FI||(s=d),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Q_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function gc(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)gc(n,e[u],t,r,s);return null}return t=Ng(t),n&&n[qa]?n.O(e,t,mf(r)?!!r.capture:!!r,s):pc(n,e,t,!0,r,s)}function mc(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)mc(n,e[u],t,r,s);else r=mf(r)?!!r.capture:!!r,t=Ng(t),n&&n[qa]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ju(u=n.g[e],t,r,s))&&(hc(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Rg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ju(e,t,r,s)),(t=-1<n?e[n]:null)&&Gu(t))}function Gu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[qa])Ef(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Q_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Rg(e))?(Ef(t,n),0==t.h&&(t.src=null,e[$u]=null)):hc(n)}}}function Q_(n){return n in Hu?Hu[n]:Hu[n]="on"+n}function Zw(n,e){if(n.ca)n=!0;else{e=new cc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Gu(n),n=t.call(r,e)}return n}function Rg(n){return(n=n[$u])instanceof Oi?n:null}var kg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ng(n){return"function"==typeof n?n:(n[kg]||(n[kg]=function(e){return n.handleEvent(e)}),n[kg])}function xr(){Vu.call(this),this.i=new Oi(this),this.P=this,this.I=null}function Vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var s=e;q_(e=new wi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];s=bf(d,r,!0,e)&&s}if(s=bf(d=e.g=n,r,!0,e)&&s,s=bf(d,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=bf(d=e.g=t[u],r,!1,e)&&s}function bf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Ef(n.i,d),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Xr(xr,Vu),xr.prototype[qa]=!0,xr.prototype.removeEventListener=function(n,e,t,r){mc(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hc(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Og=Tt.JSON.stringify;function LI(){var n=tv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var X_,Ww=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Kw,n=>n.reset());class Kw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yw(n){Tt.setTimeout(()=>{throw n},0)}function J_(n,e){X_||function Qw(){var n=Tt.Promise.resolve(void 0);X_=function(){n.then(UI)}}(),ev||(X_(),ev=!0),tv.add(n,e)}var ev=!1,tv=new class zw{constructor(){this.h=this.g=null}add(e,t){const r=Ww.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function UI(){for(var n;n=LI();){try{n.h.call(n.g)}catch(t){Yw(t)}var e=Ww;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ev=!1}function Pg(n,e){xr.call(this),this.h=n||1,this.g=e||Tt,this.j=Ur(this.kb,this),this.l=Date.now()}function Jw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function nv(n,e,t){if("function"==typeof n)t&&(n=Ur(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ur(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function Fg(n){n.g=nv(()=>{n.g=null,n.i&&(n.i=!1,Fg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xr(Pg,xr),(ct=Pg.prototype).da=!1,ct.S=null,ct.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vr(this,"tick"),this.da&&(Jw(this),this.start()))}},ct.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Pg.Z.M.call(this),Jw(this),delete this.g};class rv extends Vu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fg(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cf(n){Vu.call(this),this.h=n,this.g={}}Xr(Cf,Vu);var VI=[];function BI(n,e,t,r){Array.isArray(t)||(t&&(VI[0]=t.toString()),t=VI);for(var s=0;s<t.length;s++){var u=fc(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function jI(n){Ts(n.g,function(e,t){this.g.hasOwnProperty(t)&&Gu(e)},n),n.g={}}function Lg(){this.g=!0}function $d(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $I(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<s.length;d++)s[d]=""}}}return Og(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Cf.prototype.M=function(){Cf.Z.M.call(this),jI(this)},Cf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lg.prototype.Aa=function(){this.g=!1},Lg.prototype.info=function(){};var qu={},eE=null;function If(){return eE=eE||new xr}function Df(n){wi.call(this,qu.Ma,n)}function Tf(n){const e=If();Vr(e,new Df(e,n))}function iv(n,e){wi.call(this,qu.STAT_EVENT,n),this.stat=e}function Pi(n){const e=If();Vr(e,new iv(e,n))}function tE(n,e){wi.call(this,qu.Na,n),this.size=e}function Af(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}qu.Ma="serverreachability",Xr(Df,wi),qu.STAT_EVENT="statevent",Xr(iv,wi),qu.Na="timingevent",Xr(tE,wi);var Ug={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Vg(){}function sv(){}Vg.prototype.h=null;var xf,Gd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sf(){wi.call(this,"d")}function iE(){wi.call(this,"c")}function Bg(){}function jg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Cf(this),this.P=sE,this.W=new Pg(n=vf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qd}function qd(){this.i=null,this.g="",this.h=!1}Xr(Sf,wi),Xr(iE,wi),Xr(Bg,Vg),Bg.prototype.g=function(){return new XMLHttpRequest},Bg.prototype.i=function(){return{}},xf=new Bg;var sE=45e3,Mf={},Zd={};function ov(n,e,t){n.K=1,n.v=Uf(ha(e)),n.s=t,n.U=!0,Rf(n,null)}function Rf(n,e){n.F=Date.now(),Nf(n),n.A=ha(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),hE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new qd,n.g=ME(n.l,t?e:null,!n.s),0<n.O&&(n.L=new rv(Ur(n.Ia,n,n.g),n.O)),BI(n.V,n.g,"readystatechange",n.gb),e=n.H?kI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Tf(1),function Xw(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var I=m[w].split("=");if(1<I.length){var T=I[0];I=I[1];var x=T.split("_");d=2<=x.length&&"type"==x[1]?d+(T+"=")+I+"&":d+(T+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function kf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function $g(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=bS(n,t),s==Zd){4==e&&(n.o=4,Pi(14),r=!1),$d(n.j,n.m,null,"[Incomplete Response]");break}if(s==Mf){n.o=4,Pi(15),$d(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$d(n.j,n.m,s,null),Pf(n,s)}kf(n)&&s!=Zd&&s!=Mf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),bv(e),e.L=!0,Pi(11))):($d(n.j,n.m,t,"[Invalid Chunked Response]"),Zu(n),zd(n))}function bS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zd:(t=Number(e.substring(t,r)),isNaN(t)?Mf:(r+=1)+t>e.length?Zd:(e=e.substr(r,t),n.C=r+t,e))}function Nf(n){n.Y=Date.now()+n.P,Of(n,n.P)}function Of(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Af(Ur(n.eb,n),e)}function yc(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function zd(n){0==n.l.G||n.I||TE(n.l,n)}function Zu(n){yc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jw(n.W),jI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Pf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||hv(t.i,n)))if(t.I=n.N,!n.J&&hv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Af(Ur(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Qg(t),Gf(t)}Ev(t),Pi(18)}if(1>=gE(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else wc(t,11)}else if((n.J||t.g==n)&&Qg(t),!$_(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const T=I[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ie=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;!u.g&&(ei(ie,"spdy")||ei(ie,"quic")||ei(ie,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Zg(u,u.h),u.h=null))}if(r.D){const ke=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(r.sa=ke,En(r.F,r.D,ke))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=xE(r,r.H?r.la:null,r.W),d.J){mE(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(yc(m),Nf(m)),r.g=d}else IE(r);0<t.l.length&&qf(t)}else"stop"!=I[0]&&"close"!=I[0]||wc(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?wc(t,7):Kg(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}Tf(4)}catch(I){}}function Hg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(U_(n)||"string"==typeof n)xI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(U_(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function oE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(U_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function zu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof zu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Gg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];_c(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)_c(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function _c(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ct=jg.prototype).setTimeout=function(n){this.P=n},ct.gb=function(n){n=n.target;const e=this.L;e&&3==za(n)?e.l():this.Ia(n)},ct.Ia=function(n){try{if(n==this.g)e:{const T=za(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>T)&&(3!=T||vf||this.g&&(this.h.h||this.g.ga()||_v(this.g)))){this.I||4!=T||7==e||Tf(8==e||0>=x?3:2),yc(this);var t=this.g.ba();this.N=t;t:if(kf(this)){var r=_v(this.g);n="";var s=r.length,u=4==za(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zu(this),zd(this);var d="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function ES(n,e,t,r,s,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$_(m)){var I=m;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Pi(12),Zu(this),zd(this);break e}$d(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pf(this,t)}this.U?($g(this,T,d),vf&&this.i&&3==T&&(BI(this.V,this.W,"tick",this.fb),this.W.start())):($d(this.j,this.m,d,null),Pf(this,d)),4==T&&Zu(this),this.i&&!this.I&&(4==T?TE(this.l,this):(this.i=!1,Nf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Pi(12)):(this.o=0,Pi(13)),Zu(this),zd(this)}}}catch(T){}},ct.fb=function(){if(this.g){var n=za(this.g),e=this.g.ga();this.C<e.length&&(yc(this),$g(this,n,e),this.i&&4!=n&&Nf(this))}},ct.cancel=function(){this.I=!0,Zu(this)},ct.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Hd(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Tf(3),Pi(17)),Zu(this),this.o=2,zd(this)):Of(this,this.Y-n)},(ct=zu.prototype).R=function(){Gg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ct.T=function(){return Gg(this),this.g.concat()},ct.get=function(n,e){return _c(this.h,n)?this.h[n]:e},ct.set=function(n,e){_c(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ct.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var av=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Za(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Za){this.g=void 0!==e?e:n.g,qg(this,n.j),this.s=n.s,Ff(this,n.i),Lf(this,n.m),this.l=n.l,e=n.h;var t=new Yd;t.i=e.i,e.g&&(t.g=new zu(e.g),t.h=e.h),uv(this,t),this.o=n.o}else n&&(t=String(n).match(av))?(this.g=!!e,qg(this,t[1]||"",!0),this.s=Wd(t[2]||""),Ff(this,t[3]||"",!0),Lf(this,t[4]),this.l=Wd(t[5]||"",!0),uv(this,t[6]||"",!0),this.o=Wd(t[7]||"")):(this.g=!!e,this.h=new Yd(null,this.g))}function ha(n){return new Za(n)}function qg(n,e,t){n.j=t?Wd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ff(n,e,t){n.i=t?Wd(e,!0):e}function Lf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uv(n,e,t){e instanceof Yd?(n.h=e,function fE(n,e){e&&!n.j&&(Wu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(fr(this,r),hE(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Kd(e,HI)),n.h=new Yd(e,n.g))}function En(n,e,t){n.h.set(e,t)}function Uf(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Kd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Za.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Kd(e,lv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Kd(e,lv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Kd(t,"/"==t.charAt(0)?CS:dE,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Kd(t,GI)),n.join("")};var lv=/[#\/\?@]/g,dE=/[#\?:]/g,CS=/[#\?]/g,HI=/[#\?@]/g,GI=/#/g;function Yd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wu(n){n.g||(n.g=new zu,n.h=0,n.i&&function aE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fr(n,e){Wu(n),e=Qd(n,e),_c(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,_c((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Gg(n)))}function cv(n,e){return Wu(n),e=Qd(n,e),_c(n.g.h,e)}function hE(n,e,t){fr(n,e),0<t.length&&(n.i=null,n.g.set(Qd(n,e),j_(t)),n.h+=t.length)}function Qd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dv(n){this.l=n||pE,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ea&&Tt.g.Ea()&&Tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=Yd.prototype).add=function(n,e){Wu(this),this.i=null,n=Qd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){Wu(this),this.g.forEach(function(t,r){xI(t,function(s){n.call(e,s,r,this)},this)},this)},ct.T=function(){Wu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},ct.R=function(n){Wu(this);var e=[];if("string"==typeof n)cv(this,n)&&(e=jw(e,this.g.get(Qd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=jw(e,n[t])}return e},ct.set=function(n,e){return Wu(this),this.i=null,cv(this,n=Qd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=s;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var pE=10;function vc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gE(n){return n.h?1:n.g?n.g.size:0}function hv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Zg(n,e){n.g?n.g.add(e):n.h=e}function mE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return j_(n.i)}function yE(){}function _E(){this.g=new yE}function pv(n,e,t){const r=t||"";try{Hg(n,function(s,u){let d=s;mf(s)&&(d=Og(s)),e.push(r+u+"="+encodeURIComponent(d))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function zg(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Vf(n){this.l=n.$b||null,this.j=n.ib||!1}function As(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dv.prototype.cancel=function(){if(this.i=fv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yE.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},yE.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},Xr(Vf,Vg),Vf.prototype.g=function(){return new As(this.l,this.j)},Vf.prototype.i=function(n){return function(){return n}}({}),Xr(As,xr);var Ss=0;function uo(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Jd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xd(n)}function Xd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=As.prototype).open=function(n,e){if(this.readyState!=Ss)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Xd(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jd(this)),this.readyState=Ss},ct.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xd(this)),this.g&&(this.readyState=3,Xd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uo(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ct.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Jd(this):Xd(this),3==this.readyState&&uo(this)}},ct.Ua=function(n){this.g&&(this.response=this.responseText=n,Jd(this))},ct.Ta=function(n){this.g&&(this.response=n,Jd(this))},ct.ha=function(){this.g&&Jd(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(As.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ZI=Tt.JSON.parse;function pr(n){xr.call(this),this.headers=new zu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vE,this.K=this.L=!1}Xr(pr,xr);var vE="",zI=/^https?$/i,gv=["POST","PUT"];function WI(n){return"content-type"==n.toLowerCase()}function mv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wE(n),jf(n)}function wE(n){n.D||(n.D=!0,Vr(n,"complete"),Vr(n,"error"))}function yv(n){if(n.h&&void 0!==L_&&(!n.C[1]||4!=za(n)||2!=n.ba()))if(n.v&&4==za(n))nv(n.Fa,0,n);else if(Vr(n,"readystatechange"),4==za(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(av)[1]||null;if(!s&&Tt.self&&Tt.self.location){var u=Tt.self.location.protocol;s=u.substr(0,u.length-1)}r=!zI.test(s?s.toLowerCase():"")}t=r}if(t)Vr(n,"complete"),Vr(n,"success");else{n.m=6;try{var d=2<za(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",wE(n)}}finally{jf(n)}}}function jf(n,e){if(n.g){$f(n);const t=n.g,r=n.C[0]?Ag:null;n.g=null,n.C=null,e||Vr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function $f(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function za(n){return n.g?n.g.readyState:0}function _v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function EE(n){let e="";return Ts(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function Ku(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Wg(n){this.za=0,this.l=[],this.h=new Lg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ku("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ku("baseRetryDelayMs",5e3,n),this.$a=Ku("retryDelaySeedMs",1e4,n),this.Ya=Ku("forwardChannelMaxRetries",2,n),this.ra=Ku("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new dv(n&&n.concurrentRequestLimit),this.Ca=new _E,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Kg(n){if(vv(n),3==n.G){var e=n.V++,t=ha(n.F);En(t,"SID",n.J),En(t,"RID",e),En(t,"TYPE","terminate"),Zf(n,t),(e=new jg(n,n.h,e,void 0)).K=2,e.v=Uf(ha(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ME(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Nf(e)}SE(n)}function Gf(n){n.g&&(bv(n),n.g.cancel(),n.g=null)}function vv(n){Gf(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),Qg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function Yg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&qf(n)}function qf(n){vc(n.i)||n.m||(n.m=!0,J_(n.Ha,n),n.C=0)}function wv(n,e){var t;t=e?e.m:n.V++;const r=ha(n.F);En(r,"SID",n.J),En(r,"RID",t),En(r,"AID",n.U),Zf(n,r),n.o&&n.s&&Hf(r,n.o,n.s),t=new jg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=CE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Zg(n.i,t),ov(t,r,e)}function Zf(n,e){n.j&&Hg({},function(t,r){En(e,r,t)})}function CE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ur(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=s[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let I=s[w].h;const T=s[w].g;if(I-=u,0>I)u=Math.max(0,s[w].h-100),m=!1;else try{pv(T,d,"req"+I+"_")}catch(x){r&&r(T)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function IE(n){n.g||n.u||(n.Y=1,J_(n.Ga,n),n.A=0)}function Ev(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Af(Ur(n.Ga,n),AE(n,n.A)),n.A++,0))}function bv(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function DE(n){n.g=new jg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ha(n.oa);En(e,"RID","rpc"),En(e,"SID",n.J),En(e,"CI",n.N?"0":"1"),En(e,"AID",n.U),Zf(n,e),En(e,"TYPE","xmlhttp"),n.o&&n.s&&Hf(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Uf(ha(e)),t.s=null,t.U=!0,Rf(t,n)}function Qg(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function TE(n,e){var t=null;if(n.g==e){Qg(n),bv(n),n.g=null;var r=2}else{if(!hv(n.i,e))return;t=e.D,mE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Vr(r=If(),new tE(r,t,e,s)),qf(n)}else IE(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function bE(n,e){return!(gE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Af(Ur(n.Ha,n,e),AE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ev(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:wc(n,5);break;case 4:wc(n,10);break;case 3:wc(n,6);break;default:wc(n,2)}}function AE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function wc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ur(n.jb,n);t||(t=new Za("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||qg(t,"https"),Uf(t)),function fa(n,e){const t=new Lg;if(Tt.Image){const r=new Image;r.onload=yf(zg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=yf(zg,t,r,"TestLoadImage: error",!1,e),r.onabort=yf(zg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=yf(zg,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Pi(2);n.G=0,n.j&&n.j.va(e),SE(n),vv(n)}function SE(n){n.G=0,n.I=-1,n.j&&((0!=fv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,j_(n.l),n.l.length=0),n.j.ua())}function xE(n,e,t){let r=function uE(n){return n instanceof Za?ha(n):new Za(n,void 0)}(t);if(""!=r.i)e&&Ff(r,e+"."+r.i),Lf(r,r.m);else{const s=Tt.location;r=function lE(n,e,t,r){var s=new Za(null,void 0);return n&&qg(s,n),e&&Ff(s,e),t&&Lf(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&Ts(n.aa,function(s,u){En(r,u,s)}),t=n.sa,(e=n.D)&&t&&En(r,e,t),En(r,"VER",n.ma),Zf(n,r),r}function ME(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pr(t&&n.Ba&&!n.qa?new Vf({ib:!0}):n.qa)).L=n.H,e}function RE(){}function Jg(){if(_f&&!(10<=Number(wf)))throw Error("Environmental error: no available transport.")}function xs(n,e){xr.call(this),this.g=new Wg(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!$_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ec(this)}function kE(n){Sf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function NE(){iE.call(this),this.status=1}function Ec(n){this.g=n}(ct=pr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xf.g(),this.C=function rE(n){return n.h||(n.h=n.i())}(this.u?this.u:xf),this.g.onreadystatechange=Ur(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void mv(this,u)}n=t||"";const s=new zu(this.headers);r&&Hg(r,function(u,d){s.set(d,u)}),r=function Bw(n){e:{var e=WI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=Tt.FormData&&n instanceof Tt.FormData,!(0<=B_(gv,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$f(this),0<this.B&&((this.K=function Bf(n){return _f&&function Mg(){return function $w(n){var e=PI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=MI(String(xg)).split("."),t=MI("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var s=e[d]||"",u=t[d]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=H_(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||H_(0==s[2].length,0==u[2].length)||H_(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ur(this.pa,this)):this.A=nv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){mv(this,u)}},ct.pa=function(){void 0!==L_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vr(this,"complete"),Vr(this,"abort"),jf(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jf(this,!0)),pr.Z.M.call(this)},ct.Fa=function(){this.s||(this.F||this.v||this.l?yv(this):this.cb())},ct.cb=function(){yv(this)},ct.ba=function(){try{return 2<za(this)?this.g.status:-1}catch(n){return-1}},ct.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ct.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ZI(e)}},ct.Da=function(){return this.m},ct.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=Wg.prototype).ma=8,ct.G=1,ct.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ct.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new jg(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=kI(u),q_(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=CE(this,s,e),En(t=ha(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),Zf(this,t),this.o&&u&&Hf(t,this.o,u),Zg(this.i,s),this.Ra&&En(t,"TYPE","init"),this.ja?(En(t,"$req",e),En(t,"SID","null"),s.$=!0,ov(s,t,null)):ov(s,t,e),this.G=2}}else 3==this.G&&(n?wv(this,n):0==this.l.length||vc(this.i)||wv(this))},ct.Ga=function(){if(this.u=null,DE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Af(Ur(this.bb,this),n)}},ct.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Pi(10),Gf(this),DE(this))},ct.ab=function(){null!=this.v&&(this.v=null,Gf(this),Ev(this),Pi(19))},ct.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Pi(2)):(this.h.info("Failed to ping google.com"),Pi(1))},(ct=RE.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Oa=function(){},Jg.prototype.g=function(n,e){return new xs(n,e)},Xr(xs,xr),xs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),J_(Ur(n.hb,n,e))),Pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=xE(n,null,n.W),qf(n)},xs.prototype.close=function(){Kg(this.g)},xs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Yg(this.g,e)}else this.v?((e={}).__data__=Og(n),Yg(this.g,e)):Yg(this.g,n)},xs.prototype.M=function(){this.g.j=null,delete this.j,Kg(this.g),delete this.g,xs.Z.M.call(this)},Xr(kE,Sf),Xr(NE,iE),Xr(Ec,RE),Ec.prototype.xa=function(){Vr(this.g,"a")},Ec.prototype.wa=function(n){Vr(this.g,new kE(n))},Ec.prototype.va=function(n){Vr(this.g,new NE(n))},Ec.prototype.ua=function(){Vr(this.g,"b")},Jg.prototype.createWebChannel=Jg.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,Ug.NO_ERROR=0,Ug.TIMEOUT=8,Ug.HTTP_ERROR=6,nE.COMPLETE="complete",sv.EventType=Gd,Gd.OPEN="a",Gd.CLOSE="b",Gd.ERROR="c",Gd.MESSAGE="d",xr.prototype.listen=xr.prototype.N,pr.prototype.listenOnce=pr.prototype.O,pr.prototype.getLastError=pr.prototype.La,pr.prototype.getLastErrorCode=pr.prototype.Da,pr.prototype.getStatus=pr.prototype.ba,pr.prototype.getResponseJson=pr.prototype.Qa,pr.prototype.getResponseText=pr.prototype.ga,pr.prototype.send=pr.prototype.ea;var OE=ca.createWebChannelTransport=function(){return new Jg},PE=ca.getStatEventTarget=function(){return If()},Xg=ca.ErrorCode=Ug,FE=ca.EventType=nE,LE=ca.Event=qu,Cv=ca.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},UE=ca.FetchXmlHttpFactory=Vf,zf=ca.WebChannel=sv,VE=ca.XhrIo=pr;const Iv="@firebase/firestore";class jn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");let eh="9.6.10";const Yu=new Pu.Yd("@firebase/firestore");function Qu(){return Yu.logLevel}function Be(n,...e){if(Yu.logLevel<=Pu.in.DEBUG){const t=e.map(em);Yu.debug(`Firestore (${eh}): ${n}`,...t)}}function Mr(n,...e){if(Yu.logLevel<=Pu.in.ERROR){const t=e.map(em);Yu.error(`Firestore (${eh}): ${n}`,...t)}}function th(n,...e){if(Yu.logLevel<=Pu.in.WARN){const t=e.map(em);Yu.warn(`Firestore (${eh}): ${n}`,...t)}}function em(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+n;throw Mr(e),new Error(e)}function Ue(n,e){n||dt()}function Je(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jn.UNAUTHENTICATED))}shutdown(){}}class Kn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DS{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let d=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Br,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const I=d;e.enqueueRetryable((0,fe.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},w=I=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(I=>w(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?w(I):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Br)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue("string"==typeof r.accessToken),new Wf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ue(null===e||"string"==typeof e),new jn(e)}}class BE{constructor(e,t,r){this.type="FirstParty",this.user=jn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class YI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new BE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $E{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Be("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue("string"==typeof t.token),this.p=t.token,new jE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function HE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Xi.A=-1;class GE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=HE(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function nh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function rh(n){return n+"\0"}class nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nr.fromMillis(Date.now())}static fromDate(e){return nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new nr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new nr(0,0))}static max(){return new At(new nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function qE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ih{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ih?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends ih{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends ih{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ne(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Ne(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ne(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(d=!d,s++):"."!==m||d?(r+=m,s++):(u(),s++)}if(u(),d)throw new Ne(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class ga{constructor(e){this.fields=e,e.sort(Yn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Rr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const eD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wa(n){if(Ue(!!n),"string"==typeof n){let e=0;const t=eD.exec(n);if(Ue(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$n(n.seconds),nanos:$n(n.nanos)}}function $n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ju(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function Tv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Av(n){const e=n.mapValue.fields.__previous_value__;return Tv(e)?Av(e):e}function Kf(n){const e=Wa(n.mapValue.fields.__local_write_time__.timestampValue);return new nr(e.seconds,e.nanos)}class tD{constructor(e,t,r,s,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Xu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}function sh(n){return null==n}function nm(n){return 0===n&&1/n==-1/0}function nD(n){return"number"==typeof n&&Number.isInteger(n)&&!nm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Xt.fromString(e))}static fromName(e){return new ze(Xt.fromString(e).popFirst(5))}static empty(){return new ze(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Xt(e.slice()))}}const Yf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ZE={nullValue:"NULL_VALUE"};function bc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tv(n)?4:KE(n)?9:10:dt()}function Vo(n,e){if(n===e)return!0;const t=bc(n);if(t!==bc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kf(n).isEqual(Kf(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Wa(r.timestampValue),d=Wa(s.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ju(n.bytesValue).isEqual(Ju(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return $n(r.geoPointValue.latitude)===$n(s.geoPointValue.latitude)&&$n(r.geoPointValue.longitude)===$n(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return $n(r.integerValue)===$n(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=$n(r.doubleValue),d=$n(s.doubleValue);return u===d?nm(u)===nm(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return nh(n.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(r,s){const u=r.mapValue.fields||{},d=s.mapValue.fields||{};if(qE(u)!==qE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Vo(u[m],d[m])))return!1;return!0}(n,e);default:return dt()}var s}function Ka(n,e){return void 0!==(n.values||[]).find(t=>Vo(t,e))}function el(n,e){if(n===e)return 0;const t=bc(n),r=bc(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const d=$n(s.integerValue||s.doubleValue),m=$n(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return zE(n.timestampValue,e.timestampValue);case 4:return zE(Kf(n),Kf(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(s,u){const d=Ju(s),m=Ju(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const d=s.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const I=Yt(d[w],m[w]);if(0!==I)return I}return Yt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const d=Yt($n(s.latitude),$n(u.latitude));return 0!==d?d:Yt($n(s.longitude),$n(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const d=s.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const I=el(d[w],m[w]);if(I)return I}return Yt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){const d=s.fields||{},m=Object.keys(d),w=u.fields||{},I=Object.keys(w);m.sort(),I.sort();for(let T=0;T<m.length&&T<I.length;++T){const x=Yt(m[T],I[T]);if(0!==x)return x;const L=el(d[m[T]],w[I[T]]);if(0!==L)return L}return Yt(m.length,I.length)}(n.mapValue,e.mapValue);default:throw dt()}}function zE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=Wa(n),r=Wa(e),s=Yt(t.seconds,r.seconds);return 0!==s?s:Yt(t.nanos,r.nanos)}function oh(n){return Sv(n)}function Sv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Wa(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ju(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Sv(d);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of s)d?d=!1:u+=",",u+=`${m}:${Sv(r.fields[m])}`;return u+"}"}(n.mapValue):dt();var e}function ah(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rm(n){return!!n&&"integerValue"in n}function Qf(n){return!!n&&"arrayValue"in n}function WE(n){return!!n&&"nullValue"in n}function Cc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function im(n){return!!n&&"mapValue"in n}function uh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function xv(n,e){return void 0===n?e:void 0===e||el(n,e)>0?n:e}function YE(n,e){return void 0===n?e:void 0===e||el(n,e)<0?n:e}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!im(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uh(t)}setAll(e){let t=Yn.emptyPath(),r={},s=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}d?r[m.lastSegment()]=uh(d):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());im(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];im(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){pa(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new ti(uh(this.value))}}function QE(n){const e=[];return pa(n.fields,(t,r)=>{const s=new Yn([t]);if(im(r)){const u=QE(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new ga(e)}class _n{constructor(e,t,r,s,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new _n(e,0,At.min(),At.min(),ti.empty(),0)}static newFoundDocument(e,t,r){return new _n(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new _n(e,2,t,At.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,At.min(),ti.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function om(n){return n.fields.find(e=>2===e.kind)}function Ic(n){return n.fields.filter(e=>2!==e.kind)}sm.UNKNOWN_ID=-1;class am{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jf(0,Ya.min())}}function JE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=At.fromTimestamp(1e9===r?new nr(t+1,0):new nr(t,r));return new Ya(s,ze.empty(),e)}function Mv(n){return new Ya(n.readTime,n.key,-1)}class Ya{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ya(At.min(),ze.empty(),-1)}static max(){return new Ya(At.max(),ze.empty(),-1)}}function XE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class rD{constructor(e,t=null,r=[],s=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function eb(n,e=null,t=[],r=[],s=null,u=null,d=null){return new rD(n,e,t,r,s,u,d)}function Dc(n){const e=Je(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+oh(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oh(r)).join(",")),e.P=t}return e.P}function Xf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!sb(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!Vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ob(n.startAt,e.startAt)&&ob(n.endAt,e.endAt)}function um(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function lm(n,e){return n.filters.filter(t=>t instanceof ni&&t.field.isEqual(e))}class ni extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new tb(e,t,r):"array-contains"===t?new ib(e,r):"in"===t?new oD(e,r):"not-in"===t?new aD(e,r):"array-contains-any"===t?new uD(e,r):new ni(e,t,r)}static V(e,t,r){return"in"===t?new nb(e,r):new sD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(el(t,this.value)):null!==t&&bc(this.value)===bc(t)&&this.v(el(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tb extends ni{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.v(t)}}class nb extends ni{constructor(e,t){super(e,"in",t),this.keys=rb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sD extends ni{constructor(e,t){super(e,"not-in",t),this.keys=rb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class ib extends ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qf(t)&&Ka(t.arrayValue,this.value)}}class oD extends ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ka(this.value.arrayValue,t)}}class aD extends ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ka(this.value.arrayValue,t)}}class uD extends ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}class ma{constructor(e,t){this.position=e,this.inclusive=t}}class tl{constructor(e,t="asc"){this.field=e,this.dir=t}}function sb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function cm(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(d.referenceValue),t.key):el(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function ob(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vo(n.position[t],e.position[t]))return!1;return!0}class Qa{constructor(e,t=null,r=[],s=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function dm(n,e,t,r,s,u,d,m){return new Qa(n,e,t,r,s,u,d,m)}function lh(n){return new Qa(n)}function ep(n){return!sh(n.limit)&&"F"===n.limitType}function hm(n){return!sh(n.limit)&&"L"===n.limitType}function fm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Rv(n){for(const e of n.filters)if(e.S())return e.field;return null}function pm(n){return null!==n.collectionGroup}function tp(n){const e=Je(n);if(null===e.D){e.D=[];const t=Rv(e),r=fm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new tl(t)),e.D.push(new tl(Yn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new tl(Yn.keyField(),u))}}}return e.D}function lo(n){const e=Je(n);if(!e.C)if("F"===e.limitType)e.C=eb(e.path,e.collectionGroup,tp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of tp(e))t.push(new tl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ma(e.endAt.position,!e.endAt.inclusive):null,s=e.startAt?new ma(e.startAt.position,!e.startAt.inclusive):null;e.C=eb(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function np(n,e,t){return new Qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rp(n,e){return Xf(lo(n),lo(e))&&n.limitType===e.limitType}function Tc(n){return`${Dc(lo(n))}|lt:${n.limitType}`}function Ac(n){return`Query(target=${function iD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${oh(r.value)}`;var r}).join(", ")}]`),sh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>oh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>oh(t)).join(",")),`Target(${e})`}(lo(n))}; limitType=${n.limitType})`}function kv(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):ze.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,d){const m=cm(s,u,d);return s.inclusive?m<=0:m<0}(t.startAt,tp(t),r)||t.endAt&&!function(s,u,d){const m=cm(s,u,d);return s.inclusive?m>=0:m>0}(t.endAt,tp(t),r)));var t,r}function lD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Nv(n){return(e,t)=>{let r=!1;for(const s of tp(n)){const u=cD(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function cD(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(s,u,d){const m=u.data.field(s),w=d.data.field(s);return null!==m&&null!==w?el(m,w):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function ab(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nm(e)?"-0":e}}function ub(n){return{integerValue:""+n}}function lb(n,e){return nD(e)?ub(e):ab(n,e)}class ip{constructor(){this._=void 0}}function cb(n,e,t){return n instanceof ya?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Sc?Pv(n,e):n instanceof nl?db(n,e):function(r,s){const u=sp(r,s),d=gm(u)+gm(r.k);return rm(u)&&rm(r.k)?ub(d):ab(r.M,d)}(n,e)}function Ov(n,e,t){return n instanceof Sc?Pv(n,e):n instanceof nl?db(n,e):t}function sp(n,e){return n instanceof ch?rm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ya extends ip{}class Sc extends ip{constructor(e){super(),this.elements=e}}function Pv(n,e){const t=hb(e);for(const r of n.elements)t.some(s=>Vo(s,r))||t.push(r);return{arrayValue:{values:t}}}class nl extends ip{constructor(e){super(),this.elements=e}}function db(n,e){let t=hb(e);for(const r of n.elements)t=t.filter(s=>!Vo(s,r));return{arrayValue:{values:t}}}class ch extends ip{constructor(e,t){super(),this.M=e,this.k=t}}function gm(n){return $n(n.integerValue||n.doubleValue)}function hb(n){return Qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mm{constructor(e,t){this.field=e,this.transform=t}}class hD{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function op(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ja{}function TS(n,e,t){n instanceof _m?function(r,s,u){const d=r.value.clone(),m=Lv(r.fieldTransforms,s,u.transformResults);d.setAll(m),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof rl?function(r,s,u){if(!op(r.precondition,s))return void s.convertToUnknownDocument(u.version);const d=Lv(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(vm(r)),m.setAll(d),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ym(n,e,t){var s;n instanceof _m?function(r,s,u){if(!op(r.precondition,s))return;const d=r.value.clone(),m=Uv(r.fieldTransforms,u,s);d.setAll(m),s.convertToFoundDocument(Fv(s),d).setHasLocalMutations()}(n,e,t):n instanceof rl?function(r,s,u){if(!op(r.precondition,s))return;const d=Uv(r.fieldTransforms,u,s),m=s.data;m.setAll(vm(r)),m.setAll(d),s.convertToFoundDocument(Fv(s),m).setHasLocalMutations()}(n,e,t):op(n.precondition,s=e)&&s.convertToNoDocument(At.min())}function fD(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=sp(r.transform,s||null);null!=u&&(null==t&&(t=ti.empty()),t.set(r.field,u))}return t||null}function pD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&nh(t,r,(s,u)=>function dD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sc&&r instanceof Sc||t instanceof nl&&r instanceof nl?nh(t.elements,r.elements,Vo):t instanceof ch&&r instanceof ch?Vo(t.k,r.k):t instanceof ya&&r instanceof ya);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Fv(n){return n.isFoundDocument()?n.version:At.min()}class _m extends Ja{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class rl extends Ja{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function vm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Lv(n,e,t){const r=new Map;Ue(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,m=e.data.field(u.field);r.set(u.field,Ov(d,m,t[s]))}return r}function Uv(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,cb(u,d,e))}return r}class dh extends Ja{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Vv extends Ja{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class gD{constructor(e){this.count=e}}var gr,tn;function fb(n){switch(n){default:return dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function pb(n){if(void 0===n)return Mr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case gr.OK:return ge.OK;case gr.CANCELLED:return ge.CANCELLED;case gr.UNKNOWN:return ge.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ge.INTERNAL;case gr.UNAVAILABLE:return ge.UNAVAILABLE;case gr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case gr.NOT_FOUND:return ge.NOT_FOUND;case gr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case gr.ABORTED:return ge.ABORTED;case gr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case gr.DATA_LOSS:return ge.DATA_LOSS;default:return dt()}}(tn=gr||(gr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";class il{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return Dv(this.inner)}size(){return this.innerSize}}class Mn{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ap(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ap(this.root,e,this.comparator,!1)}getReverseIterator(){return new ap(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ap(this.root,e,this.comparator,!0)}}class ap{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:jr.RED,this.left=null!=s?s:jr.EMPTY,this.right=null!=u?u:jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new jr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return jr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1,jr.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(e){return new Bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class Bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xc(n){return n.hasNext()?n.getNext():void 0}const gb=new Mn(ze.comparator);function co(){return gb}const mb=new Mn(ze.comparator);function jv(){return mb}function up(){return new il(n=>n.toString(),(n,e)=>n.isEqual(e))}const mD=new Mn(ze.comparator),yD=new bn(ze.comparator);function nn(...n){let e=yD;for(const t of n)e=e.add(t);return e}const _D=new bn(Yt);function hh(){return _D}class es{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,t)),new es(At.min(),r,hh(),co(),nn())}}class lp{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lp(Rr.EMPTY_BYTE_STRING,t,nn(),nn(),nn())}}class Mc{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class fh{constructor(e,t){this.targetId=e,this.$=t}}class yb{constructor(e,t,r=Rr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class _b{constructor(){this.B=0,this.L=dp(),this.U=Rr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=nn(),t=nn(),r=nn();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:dt()}}),new lp(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=dp()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class vD{constructor(e){this.nt=e,this.st=new Map,this.it=co(),this.rt=cp(),this.ot=new bn(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(um(u))if(0===r){const d=new ze(u.path);this.ct(t,d,_n.newNoDocument(d,At.min()))}else Ue(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&um(m.target)){const w=new ze(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,_n.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=nn();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const I=this.wt(w);return!I||2===I.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const s=new es(e,t,this.ot,this.it,r);return this.it=co(),this.rt=cp(),this.ot=new bn(Yt),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new _b,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new bn(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new _b),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function cp(){return new Mn(ze.comparator)}function dp(){return new Mn(ze.comparator)}const wD={asc:"ASCENDING",desc:"DESCENDING"},ED={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vb{constructor(e,t){this.databaseId=e,this.N=t}}function ph(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wm(n,e){return n.N?e.toBase64():e.toUint8Array()}function wb(n,e){return ph(n,e.toTimestamp())}function $r(n){return Ue(!!n),At.fromTimestamp(function(e){const t=Wa(e);return new nr(t.seconds,t.nanos)}(n))}function $v(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function bD(n){const e=Xt.fromString(n);return Ue(SD(e)),e}function Rc(n,e){return $v(n.databaseId,e.path)}function ho(n,e){const t=bD(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(Eb(t))}function Em(n,e){return $v(n.databaseId,e)}function bm(n){const e=bD(n);return 4===e.length?Xt.emptyPath():Eb(e)}function kc(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Eb(n){return Ue(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bb(n,e,t){return{name:Rc(n,e),fields:t.value.mapValue.fields}}function Cb(n,e,t){const r=ho(n,e.name),s=$r(e.updateTime),u=new ti({mapValue:{fields:e.fields}}),d=_n.newFoundDocument(r,s,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Nc(n,e){let t;if(e instanceof _m)t={update:bb(n,e.key,e.value)};else if(e instanceof dh)t={delete:Rc(n,e.key)};else if(e instanceof rl)t={update:bb(n,e.key,e.data),updateMask:AD(e.fieldMask)};else{if(!(e instanceof Vv))return dt();t={verify:Rc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const d=u.transform;if(d instanceof ya)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ch)return{fieldPath:u.field.canonicalString(),increment:d.k};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:wb(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:dt()),t;var s}function Cm(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?xn.updateTime($r(s.updateTime)):void 0!==s.exists?xn.exists(s.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,d){let m=null;"setToServerValue"in d?(Ue("REQUEST_TIME"===d.setToServerValue),m=new ya):"appendMissingElements"in d?m=new Sc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new nl(d.removeAllFromArray.values||[]):"increment"in d?m=new ch(u,d.increment):dt();const w=Yn.fromServerFormat(d.fieldPath);return new mm(w,m)}(n,s)):[];var s;if(e.update){const s=ho(n,e.update.name),u=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new ga((e.updateMask.fieldPaths||[]).map(I=>Yn.fromServerFormat(I)));return new rl(s,u,d,t,r)}return new _m(s,u,t,r)}if(e.delete){const s=ho(n,e.delete);return new dh(s,t)}if(e.verify){const s=ho(n,e.verify);return new Vv(s,t)}return dt()}function Hv(n,e){return{documents:[Em(n,e.path)]}}function Gv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Em(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Em(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const I=w.map(T=>function(x){if("=="===x.op){if(Cc(x.value))return{unaryFilter:{field:Oc(x.field),op:"IS_NAN"}};if(WE(x.value))return{unaryFilter:{field:Oc(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(Cc(x.value))return{unaryFilter:{field:Oc(x.field),op:"IS_NOT_NAN"}};if(WE(x.value))return{unaryFilter:{field:Oc(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(x.field),op:Ab(x.op),value:x.value}}}(T));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(I=>{return{field:Oc((T=I).field),direction:DD(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(I=e.limit,n.N||sh(I)?I:{value:I});var I,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Db(n){let e=bm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ue(1===r);const T=t.from[0];T.allDescendants?s=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=qv(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(T=>{return new tl(mr((x=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let m=null;t.limit&&(m=function(T){let x;return x="object"==typeof T?T.value:T,sh(x)?null:x}(t.limit));let w=null;var T;t.startAt&&(w=new ma((T=t.startAt).values||[],!!T.before));let I=null;return t.endAt&&(I=function(T){return new ma(T.values||[],!T.before)}(t.endAt)),dm(e,s,d,u,m,"F",w,I)}function qv(n){return n?void 0!==n.unaryFilter?[TD(n)]:void 0!==n.fieldFilter?[gh(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qv(e)).reduce((e,t)=>e.concat(t)):dt():[]}function DD(n){return wD[n]}function Ab(n){return ED[n]}function Oc(n){return{fieldPath:n.canonicalString()}}function mr(n){return Yn.fromServerFormat(n.fieldPath)}function gh(n){return ni.create(mr(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function TD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=mr(n.unaryFilter.field);return ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=mr(n.unaryFilter.field);return ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mr(n.unaryFilter.field);return ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=mr(n.unaryFilter.field);return ni.create(s,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function AD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function SD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Qn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Im(e)),e=xD(n.get(t),e);return Im(e)}function xD(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Im(n){return n+"\x01\x01"}function Bo(n){const e=n.length;if(Ue(e>=2),2===e)return Ue("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&dt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,d),s+="\0";break;case"\x11":s+=n.substring(u,d+1);break;default:dt()}u=d+2}return new Xt(r)}const Zv=["userId","batchId"];function Dm(n,e){return[n,Qn(e)]}function Sb(n,e,t){return[n,Qn(e),t]}const zv={},xb=["prefixPath","collectionGroup","readTime","documentId"],Mb=["prefixPath","collectionGroup","documentId"],Tm=["collectionGroup","readTime","prefixPath","documentId"],Wv=["canonicalId","targetId"],AS=["targetId","path"],Rb=["path","targetId"],MD=["collectionId","parent"],kb=["indexId","uid"],Am=["uid","sequenceNumber"],Nb=["indexId","uid","arrayValue","directionalValue","documentKey"],RD=["indexId","uid","documentKey"],Kv=["userId","collectionPath","documentId"],Yv=["userId","collectionPath","largestBatchId"],SS=["userId","collectionGroup","largestBatchId"],Ob=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kD=[...Ob,"documentOverlays"],Qv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Pb=[...Qv,"indexConfiguration","indexState","indexEntries"],Fb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _e((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _e?t:_e.resolve(t)}catch(t){return _e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_e.reject(t)}static resolve(e){return new _e((t,r)=>{t(e)})}static reject(e){return new _e((t,r)=>{r(e)})}static waitFor(e){return new _e((t,r)=>{let s=0,u=0,d=!1;e.forEach(m=>{++s,m.next(()=>{++u,d&&u===s&&t()},w=>r(w))}),d=!0,u===s&&t()})}static or(e){let t=_e.resolve(!1);for(const r of e)t=t.next(s=>s?_e.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class Sm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Br,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new hp(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=e0(r.target.error);this.At.reject(new hp(e,s))}}static open(e,t,r,s){try{return new Sm(t,e.transaction(s,r))}catch(u){throw new hp(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ub(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===jo.Vt((0,Nt.z$)())&&Mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),ol(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Nt.hl)())return!1;if(jo.St())return!0;const e=(0,Nt.z$)(),t=jo.Vt(e),r=0<t&&t<10,s=jo.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{s(new hp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;s("VersionError"===m.name?new Ne(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ne(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new hp(e,m))},u.onupgradeneeded=d=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,fe.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Sm.open(u.db,e,d?"readonly":"readwrite",r),I=s(w).next(T=>(w.bt(),T)).catch(T=>(w.abort(T),_e.reject(T))).toPromise();return I.catch(()=>{}),yield w.Rt,I}catch(w){const I="FirebaseError"!==w.name&&m<3;if(Be("SimpleDb","Transaction failed with error:",w.message,"Retrying:",I),u.close(),!I)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Lb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ol(this.Ft.delete())}}class hp extends Ne{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sl(n){return"IndexedDbTransactionError"===n.name}class Ub{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ol(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),ol(this.store.add(e))}get(e){return ol(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),ol(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),ol(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Gt(s,(d,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new _e((u,d)=>{s.onerror=m=>{d(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new _e((s,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}Qt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Gt(s,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Gt(s,t)}zt(e){const t=this.cursor({});return new _e((r,s)=>{t.onerror=u=>{const d=e0(u.target.error);s(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Gt(e,t){const r=[];return new _e((s,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void s();const w=new Lb(m),I=t(m.primaryKey,m.value,w);if(I instanceof _e){const T=I.catch(x=>(w.done(),_e.reject(x)));r.push(T)}w.isDone?s():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>_e.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ol(n){return new _e((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=e0(r.target.error);t(s)}})}let Xv=!1;function e0(n){const e=jo.Vt((0,Nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xv||(Xv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Vb extends Jv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ri(n,e){const t=Je(n);return jo.xt(t.Ht,e)}class xm{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&TS(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ym(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ym(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,(t,r)=>pD(t,r))&&nh(this.baseMutations,e.baseMutations,(t,r)=>pD(t,r))}}class Bb{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ue(e.mutations.length===r.length);let s=mD;const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new Bb(e,t,r,s)}}class jb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pc{constructor(e,t,r,s,u=At.min(),d=At.min(),m=Rr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Pc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ND{constructor(e){this.Jt=e}}function OD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:t0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rc(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ph(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:mh(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:mh(e.version)}}var s,u;return r}function t0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _a(n){const e=new nr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function fp(n,e){const t=(e.baseMutations||[]).map(u=>Cm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Cm(n.Jt,u)),s=nr.fromMillis(e.localWriteTimeMs);return new xm(e.batchId,s,t,r)}function yh(n){const e=_a(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_a(n.lastLimboFreeSnapshotVersion):At.min();let r;var s;return void 0!==n.query.documents?(Ue(1===(s=n.query).documents.length),r=lo(lh(bm(s.documents[0])))):r=lo(Db(n.query)),new Pc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function Mm(n,e){const t=mh(e.snapshotVersion),r=mh(e.lastLimboFreeSnapshotVersion);let s;s=um(e.target)?Hv(n.Jt,e.target):Gv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Rm(n){const e=Db({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?np(e,e.limit,"L"):e}function km(n,e){return new jb(e.largestBatchId,Cm(n.Jt,e.overlayMutation))}function PD(n,e){const t=e.path.lastSegment();return[n,Qn(e.path.popLast()),t]}class n0{getBundleMetadata(e,t){return r0(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:_a(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return r0(e).put({bundleId:(r=t).id,createTime:mh($r(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return s0(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:Rm(s.bundledQuery),readTime:_a(s.readTime)};var s})}saveNamedQuery(e,t){return s0(e).put({name:(r=t).name,readTime:mh($r(r.readTime)),bundledQuery:r.bundledQuery});var r}}function r0(n){return ri(n,"bundles")}function s0(n){return ri(n,"namedQueries")}class Nm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Nm(e,t.uid||"")}getOverlay(e,t){return Om(e).get(PD(this.userId,t)).next(r=>r?km(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,d)=>{const m=new jb(t,d);s.push(this.Xt(e,m))}),_e.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(d=>s.add(Qn(d.getCollectionPath())));const u=[];return s.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Om(e).Qt("collectionPathOverlayIndex",m))}),_e.waitFor(u)}getOverlaysForCollection(e,t,r){const s=up(),u=Qn(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Om(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const I=km(this.M,w);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=up();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Om(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,I,T)=>{const x=km(this.M,I);u.size()<s||x.largestBatchId===d?(u.set(x.getKey(),x),d=x.largestBatchId):T.done()}).next(()=>u)}Xt(e,t){return Om(e).put(function(r,s,u){const[d,m,w]=PD(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Nc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Om(n){return ri(n,"documentOverlays")}class Fc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se($n(e.integerValue));else if("doubleValue"in e){const r=$n(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),nm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ju(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?KE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):dt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function FD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Pm(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=FD(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Fc.fe=new Fc;class LD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=Pm(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=Pm(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class MS{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class RS{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class o0{constructor(){this.De=new LD,this.Ce=new MS(this.De),this.xe=new RS(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class al{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new al(this.indexId,this.documentKey,this.arrayValue,r)}}function Lc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$b(n.arrayValue,e.arrayValue),0!==t?t:(t=$b(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function $b(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class kS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=om(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ic(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const d=r[s];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++s}for(;s<r.length;++s){const d=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class UD{constructor(){this.qe=new pp}addToCollectionParentIndex(e,t){return this.qe.add(t),_e.resolve()}getCollectionParents(e,t){return _e.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return _e.resolve()}deleteFieldIndex(e,t){return _e.resolve()}getDocumentsMatchingTarget(e,t){return _e.resolve(null)}getFieldIndex(e,t){return _e.resolve(null)}getFieldIndexes(e,t){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}updateCollectionGroup(e,t,r){return _e.resolve()}updateIndexEntries(e,t){return _e.resolve()}}class pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new bn(Xt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new bn(Xt.comparator)).toArray()}}const Fm=new Uint8Array(0);class $o{constructor(e){this.user=e,this.Ge=new pp,this.Ke=new il(t=>Dc(t),(t,r)=>Xf(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Qn(s)};return Hb(e).put(u)}return _e.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[rh(t),""],!1,!0);return Hb(e).qt(s).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Bo(d.parent))}return r})}addFieldIndex(e,t){const r=Lm(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=Lm(e),s=Um(e),u=Uc(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Uc(e);let s=!0;const u=new Map;return _e.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{s&&(s=!!m),u.set(d,m)})).next(()=>{if(s){let d=nn();return _e.forEach(u,(m,w)=>{var I;Be("IndexedDbIndexManager",`Using index ${I=m,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(nt=>`${nt.fieldPath}:${nt.kind}`).join(",")}`} to execute ${Dc(t)}`);const T=function(nt,Mt){const rt=om(Mt);if(void 0===rt)return null;for(const St of lm(nt,rt.fieldPath))switch(St.op){case"array-contains-any":return St.value.arrayValue.values||[];case"array-contains":return[St.value]}return null}(w,m),x=function(nt,Mt){const rt=new Map;for(const St of Ic(Mt))for(const Xe of lm(nt,St.fieldPath))switch(Xe.op){case"==":case"in":rt.set(St.fieldPath.canonicalString(),Xe.value);break;case"not-in":case"!=":return rt.set(St.fieldPath.canonicalString(),Xe.value),Array.from(rt.values())}return null}(w,m),L=function(nt,Mt){const rt=[];let St=!0;for(const Ft of Ic(Mt)){let Pn,Ps=!0;for(const rr of lm(nt,Ft.fieldPath)){let Rn,fo=!0;switch(rr.op){case"<":case"<=":Rn="nullValue"in(Xe=rr.value)?ZE:"booleanValue"in Xe?{booleanValue:!1}:"integerValue"in Xe||"doubleValue"in Xe?{doubleValue:NaN}:"timestampValue"in Xe?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Xe?{stringValue:""}:"bytesValue"in Xe?{bytesValue:""}:"referenceValue"in Xe?ah(Xu.empty(),ze.empty()):"geoPointValue"in Xe?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Xe?{arrayValue:{}}:"mapValue"in Xe?{mapValue:{}}:dt();break;case"==":case"in":case">=":Rn=rr.value;break;case">":Rn=rr.value,fo=!1;break;case"!=":case"not-in":Rn=ZE}xv(Pn,Rn)===Rn&&(Pn=Rn,Ps=fo)}if(null!==nt.startAt)for(let rr=0;rr<nt.orderBy.length;++rr)if(nt.orderBy[rr].field.isEqual(Ft.fieldPath)){const Rn=nt.startAt.position[rr];xv(Pn,Rn)===Rn&&(Pn=Rn,Ps=nt.startAt.inclusive);break}if(void 0===Pn)return null;rt.push(Pn),St&&(St=Ps)}var Xe;return new ma(rt,St)}(w,m),G=function(nt,Mt){const rt=[];let St=!0;for(const Ft of Ic(Mt)){let Pn,Ps=!0;for(const rr of lm(nt,Ft.fieldPath)){let Rn,fo=!0;switch(rr.op){case">=":case">":Rn="nullValue"in(Xe=rr.value)?{booleanValue:!1}:"booleanValue"in Xe?{doubleValue:NaN}:"integerValue"in Xe||"doubleValue"in Xe?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Xe?{stringValue:""}:"stringValue"in Xe?{bytesValue:""}:"bytesValue"in Xe?ah(Xu.empty(),ze.empty()):"referenceValue"in Xe?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Xe?{arrayValue:{}}:"arrayValue"in Xe?{mapValue:{}}:"mapValue"in Xe?Yf:dt(),fo=!1;break;case"==":case"in":case"<=":Rn=rr.value;break;case"<":Rn=rr.value,fo=!1;break;case"!=":case"not-in":Rn=Yf}YE(Pn,Rn)===Rn&&(Pn=Rn,Ps=fo)}if(null!==nt.endAt)for(let rr=0;rr<nt.orderBy.length;++rr)if(nt.orderBy[rr].field.isEqual(Ft.fieldPath)){const Rn=nt.endAt.position[rr];YE(Pn,Rn)===Rn&&(Pn=Rn,Ps=nt.endAt.inclusive);break}if(void 0===Pn)return null;rt.push(Pn),St&&(St=Ps)}var Xe;return new ma(rt,St)}(w,m),ie=this.je(m,w,L),ke=this.je(m,w,G),Oe=this.We(m,w,x),Ct=this.ze(m.indexId,T,ie,!!L&&L.inclusive,ke,!!G&&G.inclusive,Oe);return _e.forEach(Ct,nt=>r.Kt(nt,t.limit).next(Mt=>{Mt.forEach(rt=>{d=d.add(new ze(Bo(rt.documentKey)))})}))}).next(()=>d)}return _e.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,s,u,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),I=w/(null!=t?t.length:1),T=[];for(let x=0;x<w;++x){const L=t?this.He(t[x/I]):Fm,G=r?this.Je(e,L,r[x%I],s):this.Ye(e),ie=u?this.Xe(e,L,u[x%I],d):this.Ye(e+1);T.push(...this.createRange(G,ie,m.map(ke=>this.Je(e,L,ke,!0))))}return T}Je(e,t,r,s){const u=new al(e,ze.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new al(e,ze.empty(),t,r);return s?u.ke():u}Ye(e){return new al(e,ze.empty(),Fm,Fm)}getFieldIndex(e,t){const r=new kS(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new o0;for(const s of Ic(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const d=r.Ne(s.kind);Fc.fe.Zt(u,d)}return r.Se()}He(e){const t=new o0;return Fc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let s=[];s.push(new o0);let u=0;for(const d of Ic(e)){const m=r[u++];for(const w of s)if(this.tn(t,d.fieldPath)&&Qf(m))s=this.en(s,d,m);else{const I=w.Ne(d.kind);Fc.fe.Zt(m,I)}}return this.nn(s)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const s=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of s){const w=new o0;w.seed(m.Se()),Fc.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof ni&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Lm(e),s=Um(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return _e.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{d.push(function(I,T){const x=T?new Jf(T.sequenceNumber,new Ya(_a(T.readTime),new ze(Bo(T.documentKey)),T.largestBatchId)):Jf.empty(),L=I.fields.map(([G,ie])=>new am(Yn.fromServerFormat(G),ie));return new sm(I.indexId,I.collectionGroup,L,x)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Yt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Lm(e),u=Um(e);return this.sn(e).next(d=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>_e.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:mh((L=r).readTime),documentKey:Qn(L.documentKey.path),largestBatchId:L.largestBatchId});var L})))}updateIndexEntries(e,t){const r=new Map;return _e.forEach(t,(s,u)=>{const d=r.get(s.collectionGroup);return(d?_e.resolve(d):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),_e.forEach(m,w=>this.rn(e,s,w).next(I=>{const T=this.on(u,w);return I.isEqual(T)?_e.resolve():this.un(e,u,I,T)}))))})}an(e,t,r){return Uc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Qn(t.key.path)})}cn(e,t,r){return Uc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Qn(t.key.path)])}rn(e,t,r){const s=Uc(e);let u=new bn(Lc);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Qn(t.path)])},(d,m)=>{u=u.add(new al(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}on(e,t){let r=new bn(Lc);const s=this.Ze(t,e);if(null==s)return r;const u=om(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Qf(d))for(const m of d.arrayValue.values||[])r=r.add(new al(t.indexId,e.key,this.He(m),s))}else r=r.add(new al(t.indexId,e.key,Fm,s));return r}un(e,t,r,s){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,m,w,I,T){const x=d.getIterator(),L=m.getIterator();let G=xc(x),ie=xc(L);for(;G||ie;){let ke=!1,Oe=!1;if(G&&ie){const Ct=w(G,ie);Ct<0?Oe=!0:Ct>0&&(ke=!0)}else null!=G?Oe=!0:ke=!0;ke?(I(ie),ie=xc(L)):Oe?(T(G),G=xc(x)):(G=xc(x),ie=xc(L))}}(r,s,Lc,d=>{u.push(this.an(e,t,d))},d=>{u.push(this.cn(e,t,d))}),_e.waitFor(u)}sn(e){let t=1;return Um(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Lc(d,m)).filter((d,m,w)=>!m||0!==Lc(d,w[m-1]));const s=[];s.push(e);for(const d of r){const m=Lc(d,e),w=Lc(d,t);if(0===m)s[0]=e.ke();else if(m>0&&w<0)s.push(d),s.push(d.ke());else if(w>0)break}s.push(t);const u=[];for(let d=0;d<s.length;d+=2)u.push(IDBKeyRange.bound([s[d].indexId,this.uid,s[d].arrayValue,s[d].directionalValue,""],[s[d+1].indexId,this.uid,s[d+1].arrayValue,s[d+1].directionalValue,""]));return u}}function Hb(n){return ri(n,"collectionParents")}function Uc(n){return ri(n,"indexEntries")}function Lm(n){return ri(n,"indexConfiguration")}function Um(n){return ri(n,"indexState")}const Vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function a0(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(T,x,L)=>(m++,L.delete()));u.push(w.next(()=>{Ue(1===m)}));const I=[];for(const T of t.mutations){const x=Sb(e,T.key.path,t.batchId);u.push(s.delete(x)),I.push(T.key)}return _e.waitFor(u).next(()=>I)}function Bm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class jm{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.hn={}}static Yt(e,t,r,s){Ue(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new jm(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).Wt({index:"userMutationsIndex",range:r},(s,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=_h(e),d=ul(e);return d.add({}).next(m=>{Ue("number"==typeof m);const w=new xm(m,t,r,s),I=function(L,G,ie){const ke=ie.baseMutations.map(Ct=>Nc(L.Jt,Ct)),Oe=ie.mutations.map(Ct=>Nc(L.Jt,Ct));return{userId:G,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:ke,mutations:Oe}}(this.M,this.userId,w),T=[];let x=new bn((L,G)=>Yt(L.canonicalString(),G.canonicalString()));for(const L of s){const G=Sb(this.userId,L.key.path,m);x=x.add(L.key.path.popLast()),T.push(d.put(I)),T.push(u.put(G,zv))}return x.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.hn[m]=w.keys()}),_e.waitFor(T).next(()=>w)})}lookupMutationBatch(e,t){return ul(e).get(t).next(r=>r?(Ue(r.userId===this.userId),fp(this.M,r)):null)}ln(e,t){return this.hn[t]?_e.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.hn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ul(e).Wt({index:"userMutationsIndex",range:s},(d,m,w)=>{m.userId===this.userId&&(Ue(m.batchId>=r),u=fp(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ul(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).qt("userMutationsIndex",t).next(r=>r.map(s=>fp(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Dm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return _h(e).Wt({range:s},(d,m,w)=>{const[I,T,x]=d,L=Bo(T);if(I===this.userId&&t.path.isEqual(L))return ul(e).get(x).next(G=>{if(!G)throw dt();Ue(G.userId===this.userId),u.push(fp(this.M,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Yt);const s=[];return t.forEach(u=>{const d=Dm(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=_h(e).Wt({range:m},(I,T,x)=>{const[L,G,ie]=I,ke=Bo(G);L===this.userId&&u.path.isEqual(ke)?r=r.add(ie):x.done()});s.push(w)}),_e.waitFor(s).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Dm(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new bn(Yt);return _h(e).Wt({range:d},(w,I,T)=>{const[x,L,G]=w,ie=Bo(L);x===this.userId&&r.isPrefixOf(ie)?ie.length===s&&(m=m.add(G)):T.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(ul(e).get(u).next(d=>{if(null===d)throw dt();Ue(d.userId===this.userId),r.push(fp(this.M,d))}))}),_e.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return a0(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),_e.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _e.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return _h(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Bo(u[1]);s.push(w)}else m.done()}).next(()=>{Ue(0===s.length)})})}containsKey(e,t){return u0(e,this.userId,t)}_n(e){return $m(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u0(n,e,t){const r=Dm(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return _h(n).Wt({range:u,jt:!0},(m,w,I)=>{const[T,x,L]=m;T===e&&x===s&&(d=!0),I.done()}).next(()=>d)}function ul(n){return ri(n,"mutations")}function _h(n){return ri(n,"documentMutations")}function $m(n){return ri(n,"mutationQueues")}class ii{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new ii(0)}static gn(){return new ii(-1)}}class VD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new ii(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>At.fromTimestamp(new nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.pn(e,s)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gp(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Ue(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return gp(e).Wt((d,m)=>{const w=yh(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>_e.waitFor(u)).next(()=>s)}forEachTarget(e,t){return gp(e).Wt((r,s)=>{const u=yh(s);t(u)})}yn(e){return Gb(e).get("targetGlobalKey").next(t=>(Ue(null!==t),t))}pn(e,t){return Gb(e).put("targetGlobalKey",t)}In(e,t){return gp(e).put(Mm(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Dc(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return gp(e).Wt({range:s,index:"queryTargetsIndex"},(d,m,w)=>{const I=yh(m);Xf(t,I.target)&&(u=I,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Xa(e);return t.forEach(d=>{const m=Qn(d.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,d))}),_e.waitFor(s)}removeMatchingKeys(e,t,r){const s=Xa(e);return _e.forEach(t,u=>{const d=Qn(u.path);return _e.waitFor([s.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Xa(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Xa(e);let u=nn();return s.Wt({range:r,jt:!0},(d,m,w)=>{const I=Bo(d[1]),T=new ze(I);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Qn(t.path),s=IDBKeyRange.bound([r],[rh(r)],!1,!0);let u=0;return Xa(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([d,m],w,I)=>{0!==d&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return gp(e).get(t).next(r=>r?yh(r):null)}}function gp(n){return ri(n,"targets")}function Gb(n){return ri(n,"targetGlobal")}function Xa(n){return ri(n,"targetDocuments")}function Vc(n){return l0.apply(this,arguments)}function l0(){return l0=(0,fe.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==Fb)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),l0.apply(this,arguments)}function c0([n,e],[t,r]){const s=Yt(n,t);return 0===s?Yt(e,r):s}class BD{constructor(e){this.En=e,this.buffer=new bn(c0),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();c0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NS{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,fe.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){sl(s)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Vc(s)}yield t.vn(e)}))}}class qb{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return _e.resolve(Xi.A);const r=new BD(t);return this.Sn.forEachTarget(e,s=>r.bn(s.sequenceNumber)).next(()=>this.Sn.Cn(e,s=>r.bn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(Vm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vm):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,s,u,d,m,w,I;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,d=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,m=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),Qu()<=Pu.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${s} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${x} documents in `+(I-w)+`ms\nTotal Duration: ${I-T}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class Zb{constructor(e,t){this.db=e,this.garbageCollector=new qb(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,s)=>t(s))}addReference(e,t,r){return Hm(e,r)}removeReference(e,t,r){return Hm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Hm(e,t)}Mn(e,t){return function(r,s){let u=!1;return $m(r).zt(d=>u0(r,d,s).next(m=>(m&&(u=!0),_e.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.kn(e,(d,m)=>{if(m<=t){const w=this.Mn(e,d).next(I=>{if(!I)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,At.min()),Xa(e).delete([0,Qn(d.path)])))});s.push(w)}}).next(()=>_e.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Hm(e,t)}kn(e,t){const r=Xa(e);let s,u=Xi.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:I})=>{0===d?(u!==Xi.A&&t(new ze(Bo(s)),u),u=I,s=w):u=Xi.A}).next(()=>{u!==Xi.A&&t(new ze(Bo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Hm(n,e){return Xa(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qn(e.path),sequenceNumber:r}));var r}class zb{constructor(){this.changes=new il(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?_e.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wb{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ll(e).put(r)}removeEntry(e,t,r){return ll(e).delete(function(s,u){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],t0(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=_n.newInvalidDocument(t);return ll(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mp(t))},(s,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:_n.newInvalidDocument(t)};return ll(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mp(t))},(s,u)=>{r={document:this.Fn(t,u),size:Bm(u)}}).next(()=>r)}getEntries(e,t){let r=co();return this.Bn(e,t,(s,u)=>{const d=this.Fn(s,u);r=r.insert(s,d)}).next(()=>r)}Ln(e,t){let r=co(),s=new Mn(ze.comparator);return this.Bn(e,t,(u,d)=>{const m=this.Fn(u,d);r=r.insert(u,m),s=s.insert(u,Bm(d))}).next(()=>({documents:r,Un:s}))}Bn(e,t,r){if(t.isEmpty())return _e.resolve();let s=new bn(f0);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(mp(s.first()),mp(s.last())),d=s.getIterator();let m=d.getNext();return ll(e).Wt({index:"documentKeyIndex",range:u},(w,I,T)=>{const x=ze.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;m&&f0(m,x)<0;)r(m,null),m=d.getNext();m&&m.isEqual(x)&&(r(m,I),m=d.hasNext()?d.getNext():null),m?T.Ut(mp(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),t0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ll(e).qt(IDBKeyRange.bound(s,u,!0)).next(d=>{let m=co();for(const w of d){const I=this.Fn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(I.key,I)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=co();const d=h0(t,r),m=h0(t,Ya.max());return ll(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,I,T)=>{const x=this.Fn(ze.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===s&&T.done()}).next(()=>u)}newChangeBuffer(e){return new d0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gm(e).get("remoteDocumentGlobalKey").next(t=>(Ue(!!t),t))}On(e,t){return Gm(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function xS(n,e){let t;if(e.document)t=Cb(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),s=_a(e.noDocument.readTime);t=_n.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=ze.fromSegments(e.unknownDocument.path),s=_a(e.unknownDocument.version);t=_n.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new nr(r[0],r[1]);return At.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return _n.newInvalidDocument(e)}}class d0 extends zb{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new il(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new bn((u,d)=>Yt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=OD(this.qn.M,d);s=s.add(u.path.popLast()),r+=Bm(w)-m.size,t.push(this.qn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=OD(this.qn.M,d.convertToNoDocument(At.min()));t.push(this.qn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),_e.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:s})=>(s.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Gm(n){return ri(n,"remoteDocumentGlobal")}function ll(n){return ri(n,"remoteDocumentsV14")}function mp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function h0(n,e){const t=e.documentKey.path.toArray();return[n,t0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function f0(n,e){const t=n.path.length-e.path.length;return 0!==t?t:ze.comparator(n,e)}class jD{constructor(e){this.M=e}kt(e,t,r,s){const u=new Sm("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zv,{unique:!0}),m.createObjectStore("documentMutations"),Kb(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=_e.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Kb(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(I=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zv,{unique:!0});const T=w.store("mutations"),x=I.map(L=>T.put(L));return _e.waitFor(x)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(d=d.next(()=>this.Kn(u))),r<6&&s>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&s>=7&&(d=d.next(()=>this.jn(u))),r<8&&s>=8&&(d=d.next(()=>this.Wn(e,u))),r<9&&s>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(d=d.next(()=>this.zn(u))),r<11&&s>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Kv});w.createIndex("collectionPathOverlayIndex",Yv,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",SS,{unique:!1})}(e)})),r<13&&s>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:xb});w.createIndex("documentKeyIndex",Mb),w.createIndex("collectionGroupIndex",Tm)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:kb}).createIndex("sequenceNumberIndex",Am,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Nb}).createIndex("documentKeyIndex",RD,{unique:!1})}(e)})),d}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=Bm(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>_e.forEach(s,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>_e.forEach(m,w=>{Ue(w.userId===u.userId);const I=fp(this.M,w);return a0(e,u.userId,I).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((d,m)=>{const w=new Xt(d),I=[0,Qn(w)];u.push(t.get(I).next(T=>T?_e.resolve():t.put({targetId:0,path:Qn(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>_e.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:MD});const r=t.store("collectionParents"),s=new pp,u=d=>{if(s.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Qn(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Xt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],I)=>{const T=Bo(m);return u(T.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=yh(s),d=Mm(this.M,u);return t.put(d)})}Hn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(I=d,I.document?new ze(Xt.fromString(I.document.name).popFirst(5)):I.noDocument?ze.fromSegments(I.noDocument.path):I.unknownDocument?ze.fromSegments(I.unknownDocument.path):dt()).path.toArray();var I;const T={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};s.push(m.put(T))}).next(()=>_e.waitFor(s))}}function Kb(n){n.createObjectStore("targetDocuments",{keyPath:AS}).createIndex("documentTargetsIndex",Rb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wv,{unique:!0}),n.createObjectStore("targetGlobal")}const Yb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qb{constructor(e,t,r,s,u,d,m,w,I,T,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=d,this.document=m,this.Yn=I,this.Xn=T,this.Zn=x,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=L=>Promise.resolve(),!Qb.vt())throw new Ne(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zb(this,s),this.cs=t+"main",this.M=new ND(w),this.hs=new jo(this.cs,this.Zn,new jD(this.M)),this.ls=new VD(this.referenceDelegate,this.M),this.fs=new Wb(this.M),this.ds=new n0,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===T&&Mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ge.FAILED_PRECONDITION,Yb);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Xi(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,fe.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(sl(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return vh(e).get("owner").next(t=>_e.resolve(this.bs(t)))}Ps(e){return qm(e).delete(this.clientId)}Vs(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ri(r,"clientMetadata");return s.qt().next(u=>{const d=e.Ss(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return _e.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?_e.resolve(!0):vh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ne(ge.FAILED_PRECONDITION,Yb);return!1}}return!(!this.networkEnabled||!this.inForeground)||qm(e).qt().next(r=>void 0===this.Ss(r,5e3).find(s=>{if(this.clientId!==s.clientId){const d=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Vb(t,Xi.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>qm(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return jm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new $o(e)}getDocumentOverlayCache(e){return Nm.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(d=this.Zn)?Pb:13===d?Qv:12===d?kD:11===d?Ob:void dt();var d;let m;return this.hs.runTransaction(e,s,u,w=>(m=new Vb(w,this.ts?this.ts.next():Xi.A),"readwrite-primary"===t?this.Ts(m).next(I=>!!I||this.Es(m)).next(I=>{if(!I)throw Mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ne(ge.FAILED_PRECONDITION,Fb);return r(m)}).next(I=>this.Rs(m).next(()=>I)):this.Fs(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Fs(e){return vh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ge.FAILED_PRECONDITION,Yb)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vh(e).put("owner",t)}static vt(){return jo.vt()}As(e){const t=vh(e);return t.get("owner").next(r=>this.bs(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_e.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Mr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vh(n){return ri(n,"owner")}function qm(n){return ri(n,"clientMetadata")}function p0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $D{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}Us(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return ze.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.Qs(e,t.path):pm(t)?this.js(e,t,r):this.Ws(e,t,r);var s}Qs(e,t){return this.Bs(e,new ze(t)).next(r=>{let s=jv();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}js(e,t,r){const s=t.collectionGroup;let u=jv();return this.indexManager.getCollectionParents(e,s).next(d=>_e.forEach(d,m=>{const w=(I=t,T=m.child(s),new Qa(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,T;return this.Ws(e,w,r).next(I=>{I.forEach((T,x)=>{u=u.insert(T,x)})})}).next(()=>u))}Ws(e,t,r){let s;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let I=s.get(w);null==I&&(I=_n.newInvalidDocument(w),s=s.insert(w,I)),ym(m,I,d.localWriteTime),I.isFoundDocument()||(s=s.remove(w))}}).next(()=>(s.forEach((u,d)=>{kv(t,d)||(s=s.remove(u))}),s))}}class Jb{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=s}static Js(e,t){let r=nn(),s=nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new Jb(e,t.fromCache,r,s)}}class HD{Ys(e){this.Xs=e}Ks(e,t,r,s){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(At.min())?this.Zs(e,t):this.Xs.qs(e,s).next(u=>{const d=this.ti(t,u);return(ep(t)||hm(t))&&this.ei(t.limitType,d,s,r)?this.Zs(e,t):(Qu()<=Pu.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ac(t)),this.Xs.Ks(e,t,JE(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ti(e,t){let r=new bn(Nv(e));return t.forEach((s,u)=>{kv(e,u)&&(r=r.add(u))}),r}ei(e,t,r,s){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Zs(e,t){return Qu()<=Pu.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Ac(t)),this.Xs.Ks(e,t,Ya.min())}}class OS{constructor(e,t,r,s){this.persistence=e,this.ni=t,this.M=s,this.si=new Mn(Yt),this.ii=new il(u=>Dc(u),Xf),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new $D(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function GD(n,e,t,r){return new OS(n,e,t,r)}function qD(n,e){return g0.apply(this,arguments)}function g0(){return g0=(0,fe.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.$s.getAllMutationBatches(r).next(u=>(s=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=nn();for(const I of s){d.push(I.batchId);for(const T of I.mutations)w=w.add(T.key)}for(const I of u){m.push(I.batchId);for(const T of I.mutations)w=w.add(T.key)}return t.ai.qs(r,w).next(I=>({ci:I,removedBatchIds:d,addedBatchIds:m}))})})}),g0.apply(this,arguments)}function Zm(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,I){const T=w.batch,x=T.keys();let L=_e.resolve();return x.forEach(G=>{L=L.next(()=>I.getEntry(m,G)).next(ie=>{const ke=w.docVersions.get(G);Ue(null!==ke),ie.version.compareTo(ke)<0&&(T.applyToRemoteDocument(ie,w),ie.isValidDocument()&&(ie.setReadTime(w.commitVersion),I.addEntry(ie)))})}),L.next(()=>d.$s.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,s))})}function Xb(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function ZD(n,e){const t=Je(n),r=e.snapshotVersion;let s=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.oi.newChangeBuffer({trackRemovals:!0});s=t.si;const m=[];e.targetChanges.forEach((I,T)=>{const x=s.get(T);if(!x)return;m.push(t.ls.removeMatchingKeys(u,I.removedDocuments,T).next(()=>t.ls.addMatchingKeys(u,I.addedDocuments,T)));let L=x.withSequenceNumber(u.currentSequenceNumber);var G,ie,ke;e.targetMismatches.has(T)?L=L.withResumeToken(Rr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),s=s.insert(T,L),ie=L,ke=I,(0===(G=x).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(u,L))});let w=co();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),m.push(m0(u,d,e.documentUpdates).next(I=>{w=I})),!r.isEqual(At.min())){const I=t.ls.getLastRemoteSnapshotVersion(u).next(T=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(I)}return _e.waitFor(m).next(()=>d.apply(u)).next(()=>t.ai.Gs(u,w)).next(()=>w)}).then(u=>(t.si=s,u))}function m0(n,e,t){let r=nn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=co();return t.forEach((d,m)=>{const w=s.get(d);m.isNoDocument()&&m.version.isEqual(At.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Be("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function Bc(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function jc(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.ls.getTargetData(r,e).next(u=>u?(s=u,_e.resolve(s)):t.ls.allocateTargetId(r).next(d=>(s=new Pc(e,d,0,r.currentSequenceNumber),t.ls.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.si.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function cl(n,e,t){return yp.apply(this,arguments)}function yp(){return yp=(0,fe.Z)(function*(n,e,t){const r=Je(n),s=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!sl(d))throw d;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.si=r.si.remove(e),r.ii.delete(s.target)}),yp.apply(this,arguments)}function zm(n,e,t){const r=Je(n);let s=At.min(),u=nn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,I){const T=Je(m),x=T.ii.get(I);return void 0!==x?_e.resolve(T.si.get(x)):T.ls.getTargetData(w,I)}(r,d,lo(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.ni.Ks(d,e,t?s:At.min(),t?u:nn())).next(m=>(_p(r,lD(e),m),{documents:m,hi:u})))}function Wm(n,e){const t=Je(n),r=Je(t.ls),s=t.si.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function Km(n,e){const t=Je(n),r=t.ri.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.oi.getAllFromCollectionGroup(s,e,JE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(_p(t,e,s),s))}function _p(n,e,t){let r=At.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function eC(){return eC=(0,fe.Z)(function*(n,e,t,r){const s=Je(n);let u=nn(),d=co();for(const I of t){const T=e.li(I.metadata.name);I.document&&(u=u.add(T));const x=e.fi(I);x.setReadTime(e.di(I.metadata.readTime)),d=d.insert(T,x)}const m=s.oi.newChangeBuffer({trackRemovals:!0}),w=yield jc(s,(I=r,lo(lh(Xt.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>m0(I,m,d).next(T=>(m.apply(I),T)).next(T=>s.ls.removeMatchingKeysForTargetId(I,w.targetId).next(()=>s.ls.addMatchingKeys(I,u,w.targetId)).next(()=>s.ai.Gs(I,T)).next(()=>T)))}),eC.apply(this,arguments)}function FS(n,e){return tC.apply(this,arguments)}function tC(){return tC=(0,fe.Z)(function*(n,e,t=nn()){const r=yield jc(n,lo(Rm(e.bundledQuery))),s=Je(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const d=$r(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return s.ds.saveNamedQuery(u,e);const m=r.withResumeToken(Rr.EMPTY_BYTE_STRING,d);return s.si=s.si.insert(m.targetId,m),s.ls.updateTargetData(u,m).next(()=>s.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.ls.addMatchingKeys(u,t,r.targetId)).next(()=>s.ds.saveNamedQuery(u,e))})}),tC.apply(this,arguments)}class nC{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return _e.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:$r(r.createTime)}),_e.resolve()}getNamedQuery(e,t){return _e.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Rm(r.bundledQuery),readTime:$r(r.readTime)}),_e.resolve();var r}}class zD{constructor(){this.overlays=new Mn(ze.comparator),this.mi=new Map}getOverlay(e,t){return _e.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),_e.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.mi.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),_e.resolve()}getOverlaysForCollection(e,t,r){const s=up(),u=t.length+1,d=new ze(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,I=w.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return _e.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Mn((I,T)=>I-T);const d=this.overlays.getIterator();for(;d.hasNext();){const I=d.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let T=u.get(I.largestBatchId);null===T&&(T=up(),u=u.insert(I.largestBatchId,T)),T.set(I.getKey(),I)}}const m=up(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((I,T)=>m.set(I,T)),!(m.size()>=s)););return _e.resolve(m)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const d=this.mi.get(s.largestBatchId).delete(r.key);this.mi.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new jb(t,r));let u=this.mi.get(t);void 0===u&&(u=nn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class y0{constructor(){this.gi=new bn(Hr.yi),this.pi=new bn(Hr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Hr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Hr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new ze(new Xt([])),r=new Hr(t,e),s=new Hr(t,e+1),u=[];return this.pi.forEachInRange([r,s],d=>{this.Ei(d),u.push(d.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new ze(new Xt([])),r=new Hr(t,e),s=new Hr(t,e+1);let u=nn();return this.pi.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Hr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Hr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return ze.comparator(e.key,t.key)||Yt(e.Vi,t.Vi)}static Ii(e,t){return Yt(e.Vi,t.Vi)||ze.comparator(e.key,t.key)}}class WD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new bn(Hr.yi)}checkEmpty(e){return _e.resolve(0===this.$s.length)}addMutationBatch(e,t,r,s){const u=this.vi;this.vi++;const d=new xm(u,t,r,s);this.$s.push(d);for(const m of s)this.Si=this.Si.add(new Hr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return _e.resolve(d)}lookupMutationBatch(e,t){return _e.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Ci(t+1),u=s<0?0:s;return _e.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return _e.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Hr(t,0),s=new Hr(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,s],d=>{const m=this.Di(d.Vi);u.push(m)}),_e.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(Yt);return t.forEach(s=>{const u=new Hr(s,0),d=new Hr(s,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,d],m=>{r=r.add(m.Vi)})}),_e.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const d=new Hr(new ze(u),0);let m=new bn(Yt);return this.Si.forEachWhile(w=>{const I=w.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(m=m.add(w.Vi)),!0)},d),_e.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const s=this.Di(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ue(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return _e.forEach(t.mutations,s=>{const u=new Hr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Hr(t,0),s=this.Si.firstAfterOrEqual(r);return _e.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return _e.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class rC{constructor(e){this.ki=e,this.docs=new Mn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return _e.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=co();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():_n.newInvalidDocument(s))}),_e.resolve(r)}getAllFromCollection(e,t,r){let s=co();const u=new ze(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||XE(Mv(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return _e.resolve(s)}getAllFromCollectionGroup(e,t,r,s){dt()}Mi(e,t){return _e.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iC(this)}getSize(e){return _e.resolve(this.size)}}class iC extends zb{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.qn.addEntry(e,s)):this.qn.removeEntry(r)}),_e.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class sC{constructor(e){this.persistence=e,this.Oi=new il(t=>Dc(t),Xf),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Fi=0,this.$i=new y0,this.targetCount=0,this.Bi=ii.mn()}forEachTarget(e,t){return this.Oi.forEach((r,s)=>t(s)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),_e.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new ii(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,_e.resolve()}updateTargetData(e,t){return this.In(t),_e.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Oi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),_e.waitFor(u).next(()=>s)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return _e.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),_e.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),_e.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),_e.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return _e.resolve(r)}containsKey(e,t){return _e.resolve(this.$i.containsKey(t))}}class KD{constructor(e,t){this.Li={},this.overlays={},this.ts=new Xi(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new sC(this),this.indexManager=new UD,this.fs=new rC(r=>this.referenceDelegate.Ui(r)),this.M=new ND(t),this.ds=new nC(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new WD(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const s=new YD(this.ts.next());return this.referenceDelegate.qi(),r(s).next(u=>this.referenceDelegate.Gi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ki(e,t){return _e.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class YD extends Jv{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Qi=new y0,this.ji=null}static Wi(e){return new Ym(e)}get zi(){if(this.ji)return this.ji;throw dt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),_e.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),_e.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(s=>this.zi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.zi,r=>{const s=ze.fromPath(r);return this.Hi(e,s).next(u=>{u||t.removeEntry(s,At.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return _e.or([()=>_e.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Qm(n,e){return`firestore_clients_${n}_${e}`}function QD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jm(n,e){return`firestore_targets_${n}_${e}`}class wh{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ji(e,t,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Ne(s.error.code,s.error.message))),d?new wh(e,t,s.state,u):(Mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ne(r.error.code,r.error.message))),u?new vp(e,r.state,s):(Mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=hh();for(let d=0;s&&d<r.activeTargetIds.length;++d)s=nD(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return s?new Xm(e,u):(Mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oC{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oC(t.clientId,t.onlineState):(Mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aC{constructor(){this.activeTargetIds=hh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uC{constructor(e,t,r,s,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Mn(Yt),this.started=!1,this.ir=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Qm(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new aC),this.ar=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.Os();for(const s of t){if(s===e.tr)continue;const u=e.getItem(Qm(e.persistenceKey,s));if(u){const d=Xm.Ji(s,u);d&&(e.sr=e.sr.insert(d.clientId,d))}}e._r();const r=e.storage.getItem(e.lr);if(r){const s=e.wr(r);s&&e.mr(s)}for(const s of e.ir)e.nr(s);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Jm(this.persistenceKey,e));if(r){const s=vp.Ji(e,r);s&&(t=s.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.pr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const s=t.Rr(r.key);return t.br(s,null)}{const s=t.Pr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const s=t.Vr(r.key,r.newValue);if(s)return t.vr(s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.Sr(r.key,r.newValue);if(s)return t.Dr(s)}}else if(r.key===t.lr){if(null!==r.newValue){const s=t.wr(r.newValue);if(s)return t.mr(s)}}else if(r.key===t.ur){const s=function(u){let d=Xi.A;if(null!=u)try{const m=JSON.parse(u);Ue("number"==typeof m),d=m}catch(m){Mr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);s!==Xi.A&&t.sequenceNumberHandler(s)}else if(r.key===t.dr){const s=t.Cr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const s=new wh(this.currentUser,e,t,r),u=QD(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Yi())}pr(e){const t=QD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const s=Jm(this.persistenceKey,e),u=new vp(e,t,r);this.setItem(s,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Xm.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),s=Number(r[1]);return wh.Ji(new jn(void 0!==r[2]?r[2]:null),s,t)}Sr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return vp.Ji(s,t)}wr(e){return oC.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),s=this.gr(this.sr),u=this.gr(r),d=[],m=[];return u.forEach(w=>{s.has(w)||d.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Or(d,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=hh();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class lC{constructor(){this.Fr=new aC,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new aC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class JD{Br(e){}shutdown(){}}class XD{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const LS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class US{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class VS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,s,u){const d=this.oo(e,t);Be("RestConnection","Sending: ",d,r);const m={};return this.uo(m,s,u),this.ao(e,d,m,r).then(w=>(Be("RestConnection","Received: ",w),w),w=>{throw th("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}co(e,t,r,s,u){return this.ro(e,t,r,s,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+eh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}oo(e,t){return`${this.so}/v1/${t}:${LS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,s){return new Promise((u,d)=>{const m=new VE;m.listenOnce(FE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Xg.NO_ERROR:const I=m.getResponseJson();Be("Connection","XHR received:",JSON.stringify(I)),u(I);break;case Xg.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),d(new Ne(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Xg.HTTP_ERROR:const T=m.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',T,"response text:",m.getResponseText()),T>0){const x=m.getResponseJson().error;if(x&&x.status&&x.message){const L=function(G){const ie=G.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(ie)>=0?ie:ge.UNKNOWN}(x.status);d(new Ne(L,x.message))}else d(new Ne(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ne(ge.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}ho(e,t,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=OE(),d=PE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new UE({})),this.uo(m.initMessageHeaders,t,r),(0,Nt.uI)()||(0,Nt.b$)()||(0,Nt.d)()||(0,Nt.w1)()||(0,Nt.Mn)()||(0,Nt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=s.join("");Be("Connection","Creating WebChannel: "+w,m);const I=u.createWebChannel(w,m);let T=!1,x=!1;const L=new US({jr:ie=>{x?Be("Connection","Not sending because WebChannel is closed:",ie):(T||(Be("Connection","Opening WebChannel transport."),I.open(),T=!0),Be("Connection","WebChannel sending:",ie),I.send(ie))},Wr:()=>I.close()}),G=(ie,ke,Oe)=>{ie.listen(ke,Ct=>{try{Oe(Ct)}catch(nt){setTimeout(()=>{throw nt},0)}})};return G(I,zf.EventType.OPEN,()=>{x||Be("Connection","WebChannel transport opened.")}),G(I,zf.EventType.CLOSE,()=>{x||(x=!0,Be("Connection","WebChannel transport closed"),L.eo())}),G(I,zf.EventType.ERROR,ie=>{x||(x=!0,th("Connection","WebChannel transport errored:",ie),L.eo(new Ne(ge.UNAVAILABLE,"The operation could not be completed")))}),G(I,zf.EventType.MESSAGE,ie=>{var ke;if(!x){const Oe=ie.data[0];Ue(!!Oe);const Ct=Oe,nt=Ct.error||(null===(ke=Ct[0])||void 0===ke?void 0:ke.error);if(nt){Be("Connection","WebChannel received error:",nt);const Mt=nt.status;let rt=function(Xe){const Ft=gr[Xe];if(void 0!==Ft)return pb(Ft)}(Mt),St=nt.message;void 0===rt&&(rt=ge.INTERNAL,St="Unknown error status: "+Mt+" with message "+nt.message),x=!0,L.eo(new Ne(rt,St)),I.close()}else Be("Connection","WebChannel received:",Oe),L.no(Oe)}}),G(d,LE.STAT_EVENT,ie=>{ie.stat===Cv.PROXY?Be("Connection","Detected buffering proxy"):ie.stat===Cv.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.Zr()},0),L}}function eT(){return"undefined"!=typeof window?window:null}function ey(){return"undefined"!=typeof document?document:null}function ty(n){return new vb(n,!0)}class cC{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=s,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,t-r);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class tT{constructor(e,t,r,s,u,d,m,w){this.Jn=e,this.Ao=r,this.Ro=s,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new cC(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,fe.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,fe.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Mr(t.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===t&&this.Uo(r,s)},r=>{e(()=>{const s=new Ne(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){var e=this;this.state=5,this.So.Io((0,fe.Z)(function*(){e.state=0,e.start()}))}qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BS extends tT{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Ib(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:dt(),s=e.targetChange.targetIds||[],u=function(w,I){return w.N?(Ue(void 0===I||"string"==typeof I),Rr.fromBase64String(I||"")):(Ue(void 0===I||I instanceof Uint8Array),Rr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const I=void 0===w.code?ge.UNKNOWN:pb(w.code);return new Ne(I,w.message||"")}(d);t=new yb(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=ho(n,r.document.name),u=$r(r.document.updateTime),d=new ti({mapValue:{fields:r.document.fields}}),m=_n.newFoundDocument(s,u,d);t=new Mc(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=ho(n,r.document),u=r.readTime?$r(r.readTime):At.min(),d=_n.newNoDocument(s,u);t=new Mc([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=ho(n,r.document);t=new Mc([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return dt();{const r=e.filter,u=new gD(r.count||0);t=new fh(r.targetId,u)}}var w;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return At.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?At.min():u.readTime?$r(u.readTime):At.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=kc(this.M),t.addTarget=function(s,u){let d;const m=u.target;return d=um(m)?{documents:Hv(s,m)}:{query:Gv(s,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=wm(s,u.resumeToken):u.snapshotVersion.compareTo(At.min())>0&&(d.readTime=ph(s,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function Tb(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=kc(this.M),t.removeTarget=e,this.Oo(t)}}class i extends tT{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function ID(n,e){return n&&n.length>0?(Ue(void 0!==e),n.map(t=>function(r,s){let u=$r(r.updateTime?r.updateTime:s);return u.isEqual(At.min())&&(u=$r(s)),new hD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$r(e.commitTime);return this.listener.Jo(r,t)}return Ue(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=kc(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nc(this.M,r))};this.Oo(t)}}class o extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=s,this.Zo=!1}tu(){if(this.Zo)throw new Ne(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ro(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ge.UNKNOWN,s.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(ge.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class a{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Mr(t),this.su=!1):Be("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class l{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,fe.Z)(function*(){var w;ve(d)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,fe.Z)(function*(I){const T=Je(I);T.lu.add(4),yield _(T),T._u.set("Unknown"),T.lu.delete(4),yield h(T)}),function(I){return w.apply(this,arguments)})(d))}))}),this._u=new a(r,s)}}function h(n){return p.apply(this,arguments)}function p(){return p=(0,fe.Z)(function*(n){if(ve(n))for(const e of n.fu)yield e(!0)}),p.apply(this,arguments)}function _(n){return E.apply(this,arguments)}function E(){return E=(0,fe.Z)(function*(n){for(const e of n.fu)yield e(!1)}),E.apply(this,arguments)}function b(n,e){const t=Je(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),X(t)?j(t):sy(t).Co()&&M(t,e))}function A(n,e){const t=Je(n),r=sy(t);t.hu.delete(e),r.Co()&&P(t,e),0===t.hu.size&&(r.Co()?r.ko():ve(t)&&t._u.set("Unknown"))}function M(n,e){n.wu.Z(e.targetId),sy(n).Qo(e)}function P(n,e){n.wu.Z(e),sy(n).jo(e)}function j(n){n.wu=new vD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),sy(n).start(),n._u.iu()}function X(n){return ve(n)&&!sy(n).Do()&&n.hu.size>0}function ve(n){return 0===Je(n).lu.size}function je(n){n.wu=void 0}function Ke(n){return ut.apply(this,arguments)}function ut(){return ut=(0,fe.Z)(function*(n){n.hu.forEach((e,t)=>{M(n,e)})}),ut.apply(this,arguments)}function Se(n,e){return mt.apply(this,arguments)}function mt(){return mt=(0,fe.Z)(function*(n,e){je(n),X(n)?(n._u.uu(e),j(n)):n._u.set("Unknown")}),mt.apply(this,arguments)}function Qt(n,e,t){return un.apply(this,arguments)}function un(){return un=(0,fe.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof yb&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(s,u){const d=u.cause;for(const m of u.targetIds)s.hu.has(m)&&(yield s.remoteSyncer.rejectListen(m,d),s.hu.delete(m),s.wu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bi(n,r)}else if(e instanceof Mc?n.wu.ut(e):e instanceof fh?n.wu._t(e):n.wu.ht(e),!t.isEqual(At.min()))try{const r=yield Xb(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const d=s.wu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const I=s.hu.get(w);I&&s.hu.set(w,I.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=s.hu.get(m);if(!w)return;s.hu.set(m,w.withResumeToken(Rr.EMPTY_BYTE_STRING,w.snapshotVersion)),P(s,m);const I=new Pc(w.target,m,1,w.sequenceNumber);M(s,I)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield bi(n,r)}var r}),un.apply(this,arguments)}function bi(n,e,t){return eu.apply(this,arguments)}function eu(){return eu=(0,fe.Z)(function*(n,e,t){if(!sl(e))throw e;n.lu.add(1),yield _(n),n._u.set("Offline"),t||(t=()=>Xb(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield h(n)}))}),eu.apply(this,arguments)}function ny(n,e){return e().catch(t=>bi(n,t,e))}function dl(n){return wp.apply(this,arguments)}function wp(){return wp=(0,fe.Z)(function*(n){const e=Je(n),t=Eh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;_0(e);)try{const s=yield Bc(e.localStore,r);if(null===s){0===e.cu.length&&t.ko();break}r=s.batchId,v0(e,s)}catch(s){yield bi(e,s)}ry(e)&&iy(e)}),wp.apply(this,arguments)}function _0(n){return ve(n)&&n.cu.length<10}function v0(n,e){n.cu.push(e);const t=Eh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function ry(n){return ve(n)&&!Eh(n).Do()&&n.cu.length>0}function iy(n){Eh(n).start()}function w0(n){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,fe.Z)(function*(n){Eh(n).Xo()}),Ep.apply(this,arguments)}function uR(n){return nT.apply(this,arguments)}function nT(){return nT=(0,fe.Z)(function*(n){const e=Eh(n);for(const t of n.cu)e.Ho(t.mutations)}),nT.apply(this,arguments)}function lR(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,fe.Z)(function*(n,e,t){const r=n.cu.shift(),s=Bb.from(r,e,t);yield ny(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield dl(n)}),rT.apply(this,arguments)}function cR(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,fe.Z)(function*(n,e){var t;e&&Eh(n).zo&&(yield(t=(0,fe.Z)(function*(r,s){if(fb(u=s.code)&&u!==ge.ABORTED){const d=r.cu.shift();Eh(r).No(),yield ny(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,s)),yield dl(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),ry(n)&&iy(n)}),iT.apply(this,arguments)}function jS(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,fe.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=ve(t);t.lu.add(3),yield _(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield h(t)}),sT.apply(this,arguments)}function oT(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,fe.Z)(function*(n,e){const t=Je(n);e?(t.lu.delete(2),yield h(t)):e||(t.lu.add(2),yield _(t),t._u.set("Unknown"))}),aT.apply(this,arguments)}function sy(n){return n.mu||(n.mu=function(e,t,r){const s=Je(e);return s.tu(),new BS(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{zr:Ke.bind(null,n),Jr:Se.bind(null,n),Ko:Qt.bind(null,n)}),n.fu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.mu.No(),X(n)?j(n):n._u.set("Unknown")):(yield n.mu.stop(),je(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Eh(n){return n.gu||(n.gu=function(e,t,r){const s=Je(e);return s.tu(),new i(t,s.bo,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{zr:w0.bind(null,n),Jr:cR.bind(null,n),Yo:uR.bind(null,n),Jo:lR.bind(null,n)}),n.fu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.gu.No(),yield dl(n)):(yield n.gu.stop(),n.cu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class uT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,m=new uT(e,t,d,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(n,e){if(Mr("AsyncQueue",`${e}: ${n}`),sl(n))return new Ne(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class ay{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=jv(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new ay(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ay)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ay;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $S{constructor(){this.yu=new Mn(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):dt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class uy{constructor(e,t,r,s,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new uy(e,t,ay.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class dR{constructor(){this.Iu=void 0,this.listeners=[]}}class hR{constructor(){this.queries=new il(e=>Tc(e),rp),this.onlineState="Unknown",this.Tu=new Set}}function lT(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,fe.Z)(function*(n,e){const t=Je(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new dR),s)try{u.Iu=yield t.onListen(r)}catch(d){const m=oy(d,`Initialization of query '${Ac(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&fT(t)}),cT.apply(this,arguments)}function dT(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,fe.Z)(function*(n,e){const t=Je(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),hT.apply(this,arguments)}function fR(n,e){const t=Je(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const m of d.listeners)m.Au(s)&&(r=!0);d.Iu=s}}r&&fT(t)}function pR(n,e,t){const r=Je(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function fT(n){n.Tu.forEach(e=>{e.next()})}class pT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new uy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=uy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class gR{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class HS{constructor(e){this.M=e}li(e){return ho(this.M,e)}fi(e){return e.metadata.exists?Cb(this.M,e.document,!1):_n.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return $r(e)}}class mR{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GS(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new HS(this.M);for(const s of e)if(s.metadata.queries){const u=r.li(s.metadata.name);for(const d of s.metadata.queries){const m=(t.get(d)||nn()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function PS(n,e,t,r){return eC.apply(this,arguments)}(e.localStore,new HS(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const s of e.queries)yield FS(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function GS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class qS{constructor(e){this.key=e}}class ZS{constructor(e){this.key=e}}class zS{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=nn(),this.mutatedKeys=nn(),this.Lu=Nv(e),this.Uu=new ay(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new $S,s=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,m=!1;const w=ep(this.query)&&s.size===this.query.limit?s.last():null,I=hm(this.query)&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((T,x)=>{const L=s.get(T),G=kv(this.query,x)?x:null,ie=!!L&&this.mutatedKeys.has(L.key),ke=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Oe=!1;L&&G?L.data.isEqual(G.data)?ie!==ke&&(r.track({type:3,doc:G}),Oe=!0):this.Qu(L,G)||(r.track({type:2,doc:G}),Oe=!0,(w&&this.Lu(G,w)>0||I&&this.Lu(G,I)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),Oe=!0):L&&!G&&(r.track({type:1,doc:L}),Oe=!0,(w||I)&&(m=!0)),Oe&&(G?(d=d.add(G),u=ke?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))}),ep(this.query)||hm(this.query))for(;d.size>this.query.limit;){const T=ep(this.query)?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Uu:d,Ku:r,ei:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((I,T)=>function(x,L){const G=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return G(x)-G(L)}(I.type,T.type)||this.Lu(I.doc,T.doc)),this.ju(r);const d=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==u.length||w?{snapshot:new uy(this.query,e.Uu,s,u,e.mutatedKeys,0===m,w,!1),zu:d}:{zu:d}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new $S,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=nn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new ZS(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new qS(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=nn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return uy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class yR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _R{constructor(e){this.key=e,this.Xu=!1}}class vR{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Zu={},this.ta=new il(m=>Tc(m),rp),this.ea=new Map,this.na=new Set,this.sa=new Mn(ze.comparator),this.ia=new Map,this.ra=new y0,this.oa={},this.ua=new Map,this.aa=ii.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function wR(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,fe.Z)(function*(n,e){const t=UT(n);let r,s;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Yu();else{const d=yield jc(t.localStore,lo(e));t.isPrimaryClient&&b(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,s=yield mT(t,e,r,"current"===m)}return s}),gT.apply(this,arguments)}function mT(n,e,t,r){return yT.apply(this,arguments)}function yT(){return yT=(0,fe.Z)(function*(n,e,t,r){n.ha=(T,x,L)=>{return(G=(0,fe.Z)(function*(ie,ke,Oe,Ct){let nt=ke.view.Gu(Oe);nt.ei&&(nt=yield zm(ie.localStore,ke.query,!1).then(({documents:St})=>ke.view.Gu(St,nt)));const Mt=Ct&&Ct.targetChanges.get(ke.targetId),rt=ke.view.applyChanges(nt,ie.isPrimaryClient,Mt);return AT(ie,ke.targetId,rt.zu),rt.snapshot}),function(ie,ke,Oe,Ct){return G.apply(this,arguments)})(n,T,x,L);var G};const s=yield zm(n.localStore,e,!0),u=new zS(e,s.hi),d=u.Gu(s.documents),m=lp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);AT(n,t,w.zu);const I=new yR(e,t,u);return n.ta.set(e,I),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),w.snapshot}),yT.apply(this,arguments)}function ER(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,fe.Z)(function*(n,e){const t=Je(n),r=t.ta.get(e),s=t.ea.get(r.targetId);if(s.length>1)return t.ea.set(r.targetId,s.filter(u=>!rp(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),A(t.remoteStore,r.targetId),ly(t,r.targetId)}).catch(Vc))):(ly(t,r.targetId),yield cl(t.localStore,r.targetId,!0))}),_T.apply(this,arguments)}function vT(){return vT=(0,fe.Z)(function*(n,e,t){const r=VT(n);try{const s=yield function(u,d){const m=Je(u),w=nr.now(),I=d.reduce((x,L)=>x.add(L.key),nn());let T;return m.persistence.runTransaction("Locally write mutations","readwrite",x=>m.ai.qs(x,I).next(L=>{T=L;const G=[];for(const ie of d){const ke=fD(ie,T.get(ie.key));null!=ke&&G.push(new rl(ie.key,ke,QE(ke.value.mapValue),xn.exists(!0)))}return m.$s.addMutationBatch(x,w,G,d)})).then(x=>(x.applyToLocalDocumentSet(T),{batchId:x.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,d,m){let w=u.oa[u.currentUser.toKey()];w||(w=new Mn(Yt)),w=w.insert(d,m),u.oa[u.currentUser.toKey()]=w}(r,s.batchId,t),yield $c(r,s.changes),yield dl(r.remoteStore)}catch(s){const u=oy(s,"Failed to persist write");t.reject(u)}}),vT.apply(this,arguments)}function WS(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,fe.Z)(function*(n,e){const t=Je(n);try{const r=yield ZD(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.ia.get(u);d&&(Ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.Xu=!0:s.modifiedDocuments.size>0?Ue(d.Xu):s.removedDocuments.size>0&&(Ue(d.Xu),d.Xu=!1))}),yield $c(t,r,e)}catch(r){yield Vc(r)}}),wT.apply(this,arguments)}function KS(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ta.forEach((u,d)=>{const m=d.view.Eu(e);m.snapshot&&s.push(m.snapshot)}),function(u,d){const m=Je(u);m.onlineState=d;let w=!1;m.queries.forEach((I,T)=>{for(const x of T.listeners)x.Eu(d)&&(w=!0)}),w&&fT(m)}(r.eventManager,e),s.length&&r.Zu.Ko(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CR(n,e,t){return ET.apply(this,arguments)}function ET(){return ET=(0,fe.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ia.get(e),u=s&&s.key;if(u){let d=new Mn(ze.comparator);d=d.insert(u,_n.newNoDocument(u,At.min()));const m=nn().add(u),w=new es(At.min(),new Map,new bn(Yt),d,m);yield WS(r,w),r.sa=r.sa.remove(u),r.ia.delete(e),ST(r)}else yield cl(r.localStore,e,!1).then(()=>ly(r,e,t)).catch(Vc)}),ET.apply(this,arguments)}function IR(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,fe.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const s=yield Zm(t.localStore,e);TT(t,r,null),DT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $c(t,s)}catch(s){yield Vc(s)}}),bT.apply(this,arguments)}function DR(n,e,t){return CT.apply(this,arguments)}function CT(){return CT=(0,fe.Z)(function*(n,e,t){const r=Je(n);try{const s=yield function(u,d){const m=Je(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let I;return m.$s.lookupMutationBatch(w,d).next(T=>(Ue(null!==T),I=T.keys(),m.$s.removeMutationBatch(w,T))).next(()=>m.$s.performConsistencyCheck(w)).next(()=>m.ai.qs(w,I))})}(r.localStore,e);TT(r,e,t),DT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $c(r,s)}catch(s){yield Vc(s)}}),CT.apply(this,arguments)}function IT(){return IT=(0,fe.Z)(function*(n,e){const t=Je(n);ve(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Je(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.ua.get(r)||[];s.push(e),t.ua.set(r,s)}catch(r){const s=oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),IT.apply(this,arguments)}function DT(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function TT(n,e,t){const r=Je(n);let s=r.oa[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.oa[r.currentUser.toKey()]=s}}function ly(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||YS(n,r)})}function YS(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(A(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),ST(n))}function AT(n,e,t){for(const r of t)r instanceof qS?(n.ra.addReference(r.key,e),AR(n,r)):r instanceof ZS?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||YS(n,r.key)):dt()}function AR(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.na.add(r),ST(n))}function ST(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new ze(Xt.fromString(e)),r=n.aa.next();n.ia.set(r,new _R(t)),n.sa=n.sa.insert(t,r),b(n.remoteStore,new Pc(lo(lh(t.path)),r,2,Xi.A))}}function $c(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,fe.Z)(function*(n,e,t){const r=Je(n),s=[],u=[],d=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,w)=>{d.push(r.ha(w,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,I.fromCache?"not-current":"current"),s.push(I);const T=Jb.Js(w.targetId,I);u.push(T)}}))}),yield Promise.all(d),r.Zu.Ko(s),yield(m=(0,fe.Z)(function*(w,I){const T=Je(w);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>_e.forEach(I,L=>_e.forEach(L.zs,G=>T.persistence.referenceDelegate.addReference(x,L.targetId,G)).next(()=>_e.forEach(L.Hs,G=>T.persistence.referenceDelegate.removeReference(x,L.targetId,G)))))}catch(x){if(!sl(x))throw x;Be("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const L=x.targetId;if(!x.fromCache){const G=T.si.get(L),ke=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.si=T.si.insert(L,ke)}}}),function(w,I){return m.apply(this,arguments)})(r.localStore,u))}),xT.apply(this,arguments)}function SR(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,fe.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield qD(t.localStore,e);t.currentUser=e,(s=t).ua.forEach(d=>{d.forEach(m=>{m.reject(new Ne(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $c(t,r.ci)}var s}),MT.apply(this,arguments)}function xR(n,e){const t=Je(n),r=t.ia.get(e);if(r&&r.Xu)return nn().add(r.key);{let s=nn();const u=t.ea.get(e);if(!u)return s;for(const d of u){const m=t.ta.get(d);s=s.unionWith(m.view.qu)}return s}}function MR(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,fe.Z)(function*(n,e){const t=Je(n),r=yield zm(t.localStore,e.query,!0),s=e.view.Ju(r);return t.isPrimaryClient&&AT(t,e.targetId,s.zu),s}),RT.apply(this,arguments)}function RR(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,fe.Z)(function*(n,e){const t=Je(n);return Km(t.localStore,e).then(r=>$c(t,r))}),kT.apply(this,arguments)}function kR(n,e,t,r){return NT.apply(this,arguments)}function NT(){return NT=(0,fe.Z)(function*(n,e,t,r){const s=Je(n),u=yield function(d,m){const w=Je(d),I=Je(w.$s);return w.persistence.runTransaction("Lookup mutation documents","readonly",T=>I.ln(T,m).next(x=>x?w.ai.qs(T,x):_e.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield dl(s.remoteStore):"acknowledged"===t||"rejected"===t?(TT(s,e,r||null),DT(s,e),m=e,Je(Je(s.localStore).$s).dn(m)):dt(),yield $c(s,u)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),NT.apply(this,arguments)}function OT(){return OT=(0,fe.Z)(function*(n,e){const t=Je(n);if(UT(t),VT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield QS(t,r.toArray());t.ca=!0,yield oT(t.remoteStore,!0);for(const u of s)b(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let s=Promise.resolve();t.ea.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):s=s.then(()=>(ly(t,d),cl(t.localStore,d,!0))),A(t.remoteStore,d)}),yield s,yield QS(t,r),function(u){const d=Je(u);d.ia.forEach((m,w)=>{A(d.remoteStore,w)}),d.ra.bi(),d.ia=new Map,d.sa=new Mn(ze.comparator)}(t),t.ca=!1,yield oT(t.remoteStore,!1)}}),OT.apply(this,arguments)}function QS(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,fe.Z)(function*(n,e,t){const r=Je(n),s=[],u=[];for(const d of e){let m;const w=r.ea.get(d);if(w&&0!==w.length){m=yield jc(r.localStore,lo(w[0]));for(const I of w){const T=r.ta.get(I),x=yield MR(r,T);x.snapshot&&u.push(x.snapshot)}}else{const I=yield Wm(r.localStore,d);m=yield jc(r.localStore,I),yield mT(r,JS(I),d,!1)}s.push(m)}return r.Zu.Ko(u),s}),PT.apply(this,arguments)}function JS(n){return dm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OR(n){const e=Je(n);return Je(Je(e.localStore).persistence).Os()}function PR(n,e,t,r){return FT.apply(this,arguments)}function FT(){return FT=(0,fe.Z)(function*(n,e,t,r){const s=Je(n);if(s.ca)return void Be("SyncEngine","Ignoring unexpected query state notification.");const u=s.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield Km(s.localStore,lD(u[0])),m=es.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield $c(s,d,m);break}case"rejected":yield cl(s.localStore,e,!0),ly(s,e,r);break;default:dt()}}),FT.apply(this,arguments)}function FR(n,e,t){return LT.apply(this,arguments)}function LT(){return LT=(0,fe.Z)(function*(n,e,t){const r=UT(n);if(r.ca){for(const s of e){if(r.ea.has(s)){Be("SyncEngine","Adding an already active target "+s);continue}const u=yield Wm(r.localStore,s),d=yield jc(r.localStore,u);yield mT(r,JS(u),d.targetId,!1),b(r.remoteStore,d)}for(const s of t)r.ea.has(s)&&(yield cl(r.localStore,s,!1).then(()=>{A(r.remoteStore,s),ly(r,s)}).catch(Vc))}}),LT.apply(this,arguments)}function UT(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CR.bind(null,e),e.Zu.Ko=fR.bind(null,e.eventManager),e.Zu.la=pR.bind(null,e.eventManager),e}function VT(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DR.bind(null,e),e}class XS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.M=ty(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return GD(this.persistence,new HD,e.initialUser,this.M)}_a(e){return new KD(Ym.Wi,this.M)}da(e){return new lC}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ex extends XS{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield VT(r.ga.syncEngine),yield dl(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return GD(this.persistence,new HD,e.initialUser,this.M)}wa(e){return new NS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=p0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new Qb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eT(),ey(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new lC}}class UR extends ex{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const s=r.ga.syncEngine;r.sharedClientState instanceof uC&&(r.sharedClientState.syncEngine={kr:kR.bind(null,s),Mr:PR.bind(null,s),Or:FR.bind(null,s),Os:OR.bind(null,s),Nr:RR.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,fe.Z)(function*(d){yield function NR(n,e){return OT.apply(this,arguments)}(r.ga.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}da(e){const t=eT();if(!uC.vt(t))throw new Ne(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=p0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class BT{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>KS(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=SR.bind(null,r.syncEngine),yield oT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hR}createDatastore(e){const t=ty(e.databaseInfo.databaseId),r=new VS(e.databaseInfo);return new o(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>KS(this.syncEngine,m,0),d=XD.vt()?new XD:new JD,new l(t,r,s,u,d);var t,r,s,u,d}createSyncEngine(e,t){return function(r,s,u,d,m,w,I){const T=new vR(r,s,u,d,m,w);return I&&(T.ca=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=Je(t);Be("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield _(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tx(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class VR{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Br,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),s=Number(r);isNaN(s)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(s);return new gR(JSON.parse(u),t.length+s)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,fe.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,fe.Z)(function*(u,d){const m=Je(u),w=kc(m.M)+"/documents",I={documents:d.map(G=>Rc(m.M,G))},T=yield m.co("BatchGetDocuments",w,I),x=new Map;T.forEach(G=>{const ie=function CD(n,e){return"found"in e?function(t,r){Ue(!!r.found);const s=ho(t,r.found.name),u=$r(r.found.updateTime),d=new ti({mapValue:{fields:r.found.fields}});return _n.newFoundDocument(s,u,d)}(n,e):"missing"in e?function(t,r){Ue(!!r.missing),Ue(!!r.readTime);const s=ho(t,r.missing),u=$r(r.readTime);return _n.newNoDocument(s,u)}(n,e):dt()}(m.M,G);x.set(ie.key.toString(),ie)});const L=[];return d.forEach(G=>{const ie=x.get(G.toString());Ue(!!ie),L.push(ie)}),L}),function(u,d){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=ze.fromPath(s);e.mutations.push(new Vv(u,e.precondition(u)))}),yield(r=(0,fe.Z)(function*(s,u){const d=Je(s),m=kc(d.M)+"/documents",w={writes:u.map(I=>Nc(d.M,I))};yield d.ro("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Ne(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jR{constructor(e,t,r,s){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=s,this.va=5,this.So=new cC(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,fe.Z)(function*(){const t=new BR(e.datastore),r=e.Da(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Ca(u)}))}).catch(s=>{e.Ca(s)})}))}Da(e){try{const t=this.updateFunction(e);return!sh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!fb(t)}return!1}}class $R{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=jn.UNAUTHENTICATED,this.clientId=GE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,fe.Z)(function*(m){Be("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Be("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=oy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function nx(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,fe.Z)(function*(u){r.isEqual(u)||(yield qD(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jT.apply(this,arguments)}function rx(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield HT(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>jS(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>jS(e.remoteStore,u)),n.onlineComponents=e}),$T.apply(this,arguments)}function HT(n){return GT.apply(this,arguments)}function GT(){return GT=(0,fe.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield nx(n,new XS)),n.offlineComponents}),GT.apply(this,arguments)}function hC(n){return qT.apply(this,arguments)}function qT(){return qT=(0,fe.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield rx(n,new BT)),n.onlineComponents}),qT.apply(this,arguments)}function ix(n){return HT(n).then(e=>e.persistence)}function ZT(n){return HT(n).then(e=>e.localStore)}function sx(n){return hC(n).then(e=>e.remoteStore)}function zT(n){return hC(n).then(e=>e.syncEngine)}function cy(n){return WT.apply(this,arguments)}function WT(){return WT=(0,fe.Z)(function*(n){const e=yield hC(n),t=e.eventManager;return t.onListen=wR.bind(null,e.syncEngine),t.onUnlisten=ER.bind(null,e.syncEngine),t}),WT.apply(this,arguments)}function ox(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,d,m,w){const I=new dC({next:x=>{u.enqueueAndForget(()=>dT(s,T));const L=x.docs.has(d);!L&&x.fromCache?w.reject(new Ne(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&m&&"server"===m.source?w.reject(new Ne(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(x)},error:x=>w.reject(x)}),T=new pT(lh(d.path),I,{includeMetadataChanges:!0,Du:!0});return lT(s,T)}(yield cy(n),n.asyncQueue,e,t,r)})),r.promise}function ax(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(s,u,d,m,w){const I=new dC({next:x=>{u.enqueueAndForget(()=>dT(s,T)),x.fromCache&&"server"===m.source?w.reject(new Ne(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(x)},error:x=>w.reject(x)}),T=new pT(d,I,{includeMetadataChanges:!0,Du:!0});return lT(s,T)}(yield cy(n),n.asyncQueue,e,t,r)})),r.promise}const ux=new Map;function KT(n,e,t){if(!t)throw new Ne(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lx(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cx(n){if(!ze.isDocumentKey(n))throw new Ne(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dx(n){if(ze.isDocumentKey(n))throw new Ne(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fC(n);throw new Ne(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hx(n,e){if(e<=0)throw new Ne(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class fx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,e instanceof Xu?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ne(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(s.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tm;switch(t.type){case"gapi":const r=t.client;return Ue(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new YI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ux.get(e);t&&(Be("ComponentProvider","Removing Datastore"),ux.delete(e),t.terminate())}(this),Promise.resolve()}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class hl extends ts{constructor(e,t,r){super(e,t,lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ze(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function px(n,e,...t){if(n=(0,Nt.m9)(n),KT("collection","path",e),n instanceof E0){const r=Xt.fromString(e,...t);return dx(r),new hl(n,null,r)}{if(!(n instanceof Hn||n instanceof hl))throw new Ne(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return dx(r),new hl(n.firestore,null,r)}}function pC(n,e,...t){if(n=(0,Nt.m9)(n),1===arguments.length&&(e=GE.R()),KT("doc","path",e),n instanceof E0){const r=Xt.fromString(e,...t);return cx(r),new Hn(n,null,new ze(r))}{if(!(n instanceof Hn||n instanceof hl))throw new Ne(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return cx(r),new Hn(n.firestore,n instanceof hl?n.converter:null,new ze(r))}}function gx(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),(n instanceof Hn||n instanceof hl)&&(e instanceof Hn||e instanceof hl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mx(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&rp(n._query,e._query)&&n.converter===e.converter}class XR{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new cC(this,"async_queue_retry"),this.Ua=()=>{const t=ey();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=ey();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=ey();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Br;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,fe.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!sl(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Mr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const s=uT.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(s),s}qa(){this.Fa&&dt()}verifyOperationInProgress(){}ja(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function YT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class ek{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends E0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new XR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||yx(this),this._firestoreClient.terminate()}}function Gr(n){return n._firestoreClient||yx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function yx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new tD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new $R(n._authCredentials,n._appCheckCredentials,n._queue,r)}function _x(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield nx(n,t),yield rx(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function vx(n){if(n._initialized||n._terminated)throw new Ne(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fl(Rr.fromBase64String(e))}catch(t){throw new Ne(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fl(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bp{constructor(e){this._methodName=e}}class gC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const ck=/^__.*__$/;class dk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new _m(e,this.data,t,this.fieldTransforms)}}class wx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ex(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class mC{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new mC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Xa({path:r,tc:!1});return s.ec(e),s}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Xa({path:r,tc:!1});return s.Ja(),s}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return vC(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Ex(this.Ya)&&ck.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class hk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||ty(e)}uc(e,t,r,s=!1){return new mC({Ya:e,methodName:t,oc:r,path:Yn.emptyPath(),tc:!1,rc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cp(n){const e=n._freezeSettings(),t=ty(n._databaseId);return new hk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yC(n,e,t,r,s,u={}){const d=n.uc(u.merge||u.mergeFields?2:0,e,t,s);eA("Data must be an object, but it was:",d,r);const m=Ix(r,d);let w,I;if(u.merge)w=new ga(d.fieldMask),I=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const L=tA(e,x,t);if(!d.contains(L))throw new Ne(ge.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Tx(T,L)||T.push(L)}w=new ga(T),I=d.fieldTransforms.filter(x=>w.covers(x.field))}else w=null,I=d.fieldTransforms;return new dk(new ti(m),w,I)}class b0 extends bp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof b0}}function bx(n,e,t){return new mC({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class QT extends bp{_toFieldTransform(e){return new mm(e.path,new ya)}isEqual(e){return e instanceof QT}}class fk extends bp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=bx(this,e,!0),r=this.ac.map(u=>Ip(u,t)),s=new Sc(r);return new mm(e.path,s)}isEqual(e){return this===e}}class pk extends bp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=bx(this,e,!0),r=this.ac.map(u=>Ip(u,t)),s=new nl(r);return new mm(e.path,s)}isEqual(e){return this===e}}class gk extends bp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new ch(e.M,lb(e.M,this.cc));return new mm(e.path,t)}isEqual(e){return this===e}}function JT(n,e,t,r){const s=n.uc(1,e,t);eA("Data must be an object, but it was:",s,r);const u=[],d=ti.empty();pa(r,(w,I)=>{const T=_C(e,w,t);I=(0,Nt.m9)(I);const x=s.nc(T);if(I instanceof b0)u.push(T);else{const L=Ip(I,x);null!=L&&(u.push(T),d.set(T,L))}});const m=new ga(u);return new wx(d,m,s.fieldTransforms)}function XT(n,e,t,r,s,u){const d=n.uc(1,e,t),m=[tA(e,r,t)],w=[s];if(u.length%2!=0)throw new Ne(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(tA(e,u[L])),w.push(u[L+1]);const I=[],T=ti.empty();for(let L=m.length-1;L>=0;--L)if(!Tx(I,m[L])){const G=m[L];let ie=w[L];ie=(0,Nt.m9)(ie);const ke=d.nc(G);if(ie instanceof b0)I.push(G);else{const Oe=Ip(ie,ke);null!=Oe&&(I.push(G),T.set(G,Oe))}}const x=new ga(I);return new wx(T,x,d.fieldTransforms)}function Cx(n,e,t,r=!1){return Ip(t,n.uc(r?4:3,e))}function Ip(n,e){if(Dx(n=(0,Nt.m9)(n)))return eA("Unsupported field value:",e,n),Ix(n,e);if(n instanceof bp)return function(t,r){if(!Ex(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const d of t){let m=Ip(d,r.sc(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=nr.fromDate(t);return{timestampValue:ph(r.M,s)}}if(t instanceof nr){const s=new nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ph(r.M,s)}}if(t instanceof gC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:wm(r.M,t._byteString)};if(t instanceof Hn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$v(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${fC(t)}`)}(n,e)}function Ix(n,e){const t={};return Dv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(n,(r,s)=>{const u=Ip(s,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Dx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof nr||n instanceof gC||n instanceof fl||n instanceof Hn||n instanceof bp)}function eA(n,e,t){if(!Dx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fC(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function tA(n,e,t){if((e=(0,Nt.m9)(e))instanceof Hc)return e._internalPath;if("string"==typeof e)return _C(n,e);throw vC("Field path arguments must be of type string or ",n,!1,void 0,t)}const mk=new RegExp("[~\\*/\\[\\]]");function _C(n,e,t){if(e.search(mk)>=0)throw vC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hc(...e.split("."))._internalPath}catch(r){throw vC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vC(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${s}`),w+=")"),new Ne(ge.INVALID_ARGUMENT,m+n+w)}function Tx(n,e){return n.some(t=>t.isEqual(e))}class C0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yk extends C0{data(){return super.data()}}function wC(n,e){return"string"==typeof e?_C(n,e):e instanceof Hc?e._internalPath:e._delegate._internalPath}class Dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gc extends C0{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class I0 extends Gc{data(e={}){return super.data(e)}}class bh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Dp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new I0(this._firestore,this._userDataWriter,r.key,r,new Dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new I0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Dp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const m=new I0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Dp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,I=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),I=u.indexOf(d.doc.key)),{type:_k(d.type),doc:m,oldIndex:w,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _k(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function Ax(n,e){return n instanceof Gc&&e instanceof Gc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bh&&e instanceof bh&&n._firestore===e._firestore&&mx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Sx(n){if(hm(n)&&0===n.explicitOrderBy.length)throw new Ne(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class D0{}function Ch(n,...e){for(const t of e)n=t._apply(n);return n}class vk extends D0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Cp(e.firestore),r=function(s,u,d,m,w,I,T){let x;if(w.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){Ox(T,I);const G=[];for(const ie of T)G.push(Nx(m,s,ie));x={arrayValue:{values:G}}}else x=Nx(m,s,T)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||Ox(T,I),x=Cx(d,"where",T,"in"===I||"not-in"===I);const L=ni.create(w,I,x);return function(G,ie){if(ie.S()){const Oe=Rv(G);if(null!==Oe&&!Oe.isEqual(ie.field))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${ie.field.toString()}'`);const Ct=fm(G);null!==Ct&&Px(0,ie.field,Ct)}const ke=function(Oe,Ct){for(const nt of Oe.filters)if(Ct.indexOf(nt.op)>=0)return nt.op;return null}(G,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==ke)throw new Ne(ge.INVALID_ARGUMENT,ke===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${ke.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ts(e.firestore,e.converter,function(s,u){const d=s.filters.concat([u]);return new Qa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),d,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class Ek extends D0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new tl(s,u);return function(m,w){if(null===fm(m)){const I=Rv(m);null!==I&&Px(0,I,w.field)}}(r,d),d}(e._query,this.hc,this.dc);return new ts(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Qa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xx extends D0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new ts(e.firestore,e.converter,np(e._query,this._c,this.wc))}}class Mx extends D0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=kx(e,this.type,this.mc,this.gc);return new ts(e.firestore,e.converter,(s=t,new Qa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class Rx extends D0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=kx(e,this.type,this.mc,this.gc);return new ts(e.firestore,e.converter,(s=t,new Qa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function kx(n,e,t,r){if(t[0]=(0,Nt.m9)(t[0]),t[0]instanceof C0)return function(s,u,d,m,w){if(!m)throw new Ne(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const I=[];for(const T of tp(s))if(T.field.isKeyField())I.push(ah(u,m.key));else{const x=m.data.field(T.field);if(Tv(x))throw new Ne(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const L=T.field.canonicalString();throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(x)}return new ma(I,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Cp(n.firestore);return function(u,d,m,w,I,T){const x=u.explicitOrderBy;if(I.length>x.length)throw new Ne(ge.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<I.length;G++){const ie=I[G];if(x[G].field.isKeyField()){if("string"!=typeof ie)throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ie}`);if(!pm(u)&&-1!==ie.indexOf("/"))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ie}' contains a slash.`);const ke=u.path.child(Xt.fromString(ie));if(!ze.isDocumentKey(ke))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const Oe=new ze(ke);L.push(ah(d,Oe))}else{const ke=Cx(m,w,ie);L.push(ke)}}return new ma(L,T)}(n._query,n.firestore._databaseId,s,e,t,r)}}function Nx(n,e,t){if("string"==typeof(t=(0,Nt.m9)(t))){if(""===t)throw new Ne(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pm(e)&&-1!==t.indexOf("/"))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!ze.isDocumentKey(r))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ah(n,new ze(r))}if(t instanceof Hn)return ah(n,t._key);throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fC(t)}.`)}function Ox(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Px(n,e,t){if(!t.isEqual(e))throw new Ne(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nA{convertValue(e,t="none"){switch(bc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return pa(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new gC($n(e.latitude),$n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Av(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kf(e));default:return null}}convertTimestamp(e){const t=Wa(e);return new nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);Ue(SD(r));const s=new Xu(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return s.isEqual(t)||Mr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function EC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xk extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class Fx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,t,r){this._verifyNotCommitted();const s=Ih(e,this._firestore),u=EC(s.converter,t,r),d=yC(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,xn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ih(e,this._firestore);let d;return d="string"==typeof(t=(0,Nt.m9)(t))||t instanceof Hc?XT(this._dataReader,"WriteBatch.update",u._key,t,r,s):JT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ih(e,this._firestore);return this._mutations=this._mutations.concat(new dh(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ih(n,e){if((n=(0,Nt.m9)(n)).firestore!==e)throw new Ne(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tp extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function Lx(n,e,t){n=rn(n,Hn);const r=rn(n.firestore,Jn),s=EC(n.converter,e,t);return dy(r,[yC(Cp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,xn.none())])}function Ux(n,e,t,...r){n=rn(n,Hn);const s=rn(n.firestore,Jn),u=Cp(s);let d;return d="string"==typeof(e=(0,Nt.m9)(e))||e instanceof Hc?XT(u,"updateDoc",n._key,e,t,r):JT(u,"updateDoc",n._key,e),dy(s,[d.toMutation(n._key,xn.exists(!0))])}function Vx(n,...e){var t,r,s;n=(0,Nt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||YT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(YT(e[d])){const x=e[d];e[d]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[d+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[d+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let w,I,T;if(n instanceof Hn)I=rn(n.firestore,Jn),T=lh(n._key.path),w={next:x=>{e[d]&&e[d](rA(I,n,x))},error:e[d+1],complete:e[d+2]};else{const x=rn(n,ts);I=rn(x.firestore,Jn),T=x._query;const L=new Tp(I);w={next:G=>{e[d]&&e[d](new bh(I,L,x,G))},error:e[d+1],complete:e[d+2]},Sx(n._query)}return function(x,L,G,ie){const ke=new dC(ie),Oe=new pT(L,ke,G);return x.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return lT(yield cy(x),Oe)})),()=>{ke.pa(),x.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return dT(yield cy(x),Oe)}))}}(Gr(I),T,m,w)}function dy(n,e){return function(t,r){const s=new Br;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function bR(n,e,t){return vT.apply(this,arguments)}(yield zT(t),r,s)})),s.promise}(Gr(n),e)}function rA(n,e,t){const r=t.docs.get(e._key),s=new Tp(n);return new Gc(n,s,e._key,r,new Dp(t.hasPendingWrites,t.fromCache),e.converter)}class Vk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=Ih(e,this._firestore),r=new xk(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return dt();const u=s[0];if(u.isFoundDocument())return new C0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new C0(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const s=Ih(e,this._firestore),u=EC(s.converter,t,r),d=yC(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,d),this}update(e,t,r,...s){const u=Ih(e,this._firestore);let d;return d="string"==typeof(t=(0,Nt.m9)(t))||t instanceof Hc?XT(this._dataReader,"Transaction.update",u._key,t,r,s):JT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ih(e,this._firestore),r=new Tp(this._firestore);return super.get(e).then(s=>new Gc(this._firestore,r,t._key,s._document,new Dp(!1,!1),t.converter))}}function iA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jx(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function $x(){if(!function XI(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){eh=Cs.SDK_VERSION,(0,Cs._registerComponent)(new cf.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new Jn(s,new DS(t.getProvider("auth-internal")),new $E(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Cs.registerVersion)(Iv,"3.4.7",n),(0,Cs.registerVersion)(Iv,"3.4.7","esm2017")}();class T0{constructor(e){this._delegate=e}static fromBase64String(e){return $x(),new T0(fl.fromBase64String(e))}static fromUint8Array(e){return jx(),new T0(fl.fromUint8Array(e))}toBase64(){return $x(),this._delegate.toBase64()}toUint8Array(){return jx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sA(n){return function Wk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Kk{enableIndexedDbPersistence(e,t){return function nk(n,e){vx(n=rn(n,Jn));const t=Gr(n),r=n._freezeSettings(),s=new BT;return _x(t,s,new ex(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rk(n){vx(n=rn(n,Jn));const e=Gr(n),t=n._freezeSettings(),r=new BT;return _x(e,r,new UR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ik(n){if(n._initialized&&!n._terminated)throw new Ne(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!jo.vt())return Promise.resolve();const s=r+"main";yield jo.delete(s)}),function(r){return t.apply(this,arguments)})(p0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Hx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&th("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function QR(n,e,t,r={}){var s;const u=(n=rn(n,E0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&th("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=jn.MOCK_USER;else{d=(0,Nt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ne(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new jn(w)}n._authCredentials=new Kn(new Wf(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function ok(n){return function HR(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield ix(n),t=yield sx(n);return e.setNetworkEnabled(!0),function(r){const s=Je(r);return s.lu.delete(0),h(s)}(t)}))}(Gr(n=rn(n,Jn)))}(this._delegate)}disableNetwork(){return function ak(n){return function GR(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield ix(n),t=yield sx(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(s){const u=Je(s);u.lu.add(0),yield _(u),u._u.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Gr(n=rn(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sk(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function TR(n,e){return IT.apply(this,arguments)}(yield zT(e),t)})),t.promise}(Gr(n=rn(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function Uk(n,e){return function zR(n,e){const t=new dC(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield cy(n),s=t,Je(r).Tu.add(s),void s.next();var r,s})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield cy(n),s=t,void Je(r).Tu.delete(s);var r,s}))}}(Gr(n=rn(n,Jn)),YT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hy(this,px(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,pC(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function JR(n,e){if(n=rn(n,E0),KT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new Qa(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Bk(n,e){return function WR(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const r=yield(s=n,hC(s).then(u=>u.datastore));var s;new jR(n.asyncQueue,r,e,t).run()})),t.promise}(Gr(n=rn(n,Jn)),t=>e(new Vk(n,t)))}(this._delegate,t=>e(new Gx(this,t)))}batch(){return Gr(this._delegate),new qx(new Fx(this._delegate,e=>dy(this._delegate,e)))}loadBundle(e){return function uk(n,e){const t=Gr(n=rn(n,Jn)),r=new ek;return function KR(n,e,t,r){const s=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,I){if(w instanceof Uint8Array)return tx(w,I);if(w instanceof ArrayBuffer)return tx(new Uint8Array(w),I);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new VR(w,d);var w}(t,ty(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function LR(n,e,t){const r=Je(n);var s;(s=(0,fe.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(L,G){const ie=Je(L),ke=$r(G.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Oe=>ie.ds.getBundleMetadata(Oe,G.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(ke)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=w).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(GS(w));const I=new mR(w,u.localStore,d.M);let T=yield d.fa();for(;T;){const L=yield I.Nu(T);L&&m._updateProgress(L),T=yield d.fa()}const x=yield I.complete();return yield $c(u,x.Ou,void 0),yield function(L,G){const ie=Je(L);return ie.persistence.runTransaction("Save bundle","readwrite",ke=>ie.ds.saveBundleMetadata(ke,G))}(u.localStore,w),m._completeWith(x.progress),Promise.resolve(x.Mu)}catch(w){return th("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var L}),function(u,d,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield zT(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function lk(n,e){return function YR(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const s=Je(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.ds.getNamedQuery(u,r))}(yield ZT(n),e)}))}(Gr(n=rn(n,Jn)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class bC extends nA{constructor(e){super(),this.firestore=e}convertBytes(e){return new T0(new fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class Gx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bC(e)}get(e){const t=Sp(e);return this._delegate.get(t).then(r=>new A0(this._firestore,new Gc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Sp(e);return r?(iA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}}class qx{constructor(e){this._delegate=e}set(e,t,r){const s=Sp(e);return r?(iA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Sp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ap{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new I0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new S0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ap.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Ap(e,new bC(e),t),s.set(t,u)),u}}Ap.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new Hn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new va(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hy(this.firestore,px(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Hn&&gx(this._delegate,e)}set(e,t){t=iA("DocumentReference.set",t);try{return t?Lx(this._delegate,e,t):Lx(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ux(this._delegate,e):Ux(this._delegate,e,t,...r)}catch(s){throw Ms(s,"updateDoc()","DocumentReference.update()")}}delete(){return function Fk(n){return dy(rn(n.firestore,Jn),[new dh(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=Zx(e),r=zx(e,s=>new A0(this.firestore,new Gc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Vx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Rk(n){n=rn(n,Hn);const e=rn(n.firestore,Jn),t=Gr(e),r=new Tp(e);return function qR(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,d){try{const m=yield function(w,I){const T=Je(w);return T.persistence.runTransaction("read document","readonly",x=>T.ai.Bs(x,I))}(s,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ne(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=oy(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(s,u,d){return r.apply(this,arguments)})(yield ZT(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Gc(e,r,n._key,s,new Dp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function kk(n){n=rn(n,Hn);const e=rn(n.firestore,Jn);return ox(Gr(e),n._key,{source:"server"}).then(t=>rA(e,n,t))}(this._delegate):function Mk(n){n=rn(n,Hn);const e=rn(n.firestore,Jn);return ox(Gr(e),n._key).then(t=>rA(e,n,t))}(this._delegate),t.then(r=>new A0(this.firestore,new Gc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function Zx(n){for(const e of n)if("object"==typeof e&&!sA(e))return e;return{}}function zx(n,e){var t,r;let s;return s=sA(n[0])?n[0]:sA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class A0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ax(this._delegate,e._delegate)}}class S0 extends A0{data(e){const t=this._delegate.data(e);return function KI(n,e){n||dt()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bC(e)}where(e,t,r){try{return new Rs(this.firestore,Ch(this._delegate,function wk(n,e,t){const r=e,s=wC("where",n);return new vk(s,r,t)}(e,t,r)))}catch(s){throw Ms(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Ch(this._delegate,function bk(n,e="asc"){const t=e,r=wC("orderBy",n);return new Ek(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Ch(this._delegate,function Ck(n){return hx("limit",n),new xx("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Ch(this._delegate,function Ik(n){return hx("limitToLast",n),new xx("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Ch(this._delegate,function Dk(...n){return new Mx("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Ch(this._delegate,function Tk(...n){return new Mx("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Ch(this._delegate,function Ak(...n){return new Rx("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Ch(this._delegate,function Sk(...n){return new Rx("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return mx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Ok(n){n=rn(n,ts);const e=rn(n.firestore,Jn),t=Gr(e),r=new Tp(e);return function ZR(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(s,u,d){try{const m=yield zm(s,u,!0),w=new zS(u,m.hi),I=w.Gu(m.documents),T=w.applyChanges(I,!1);d.resolve(T.snapshot)}catch(m){const w=oy(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(s,u,d){return r.apply(this,arguments)})(yield ZT(n),e,t);var r})),t.promise}(t,n._query).then(s=>new bh(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function Pk(n){n=rn(n,ts);const e=rn(n.firestore,Jn),t=Gr(e),r=new Tp(e);return ax(t,n._query,{source:"server"}).then(s=>new bh(e,r,n,s))}(this._delegate):function Nk(n){n=rn(n,ts);const e=rn(n.firestore,Jn),t=Gr(e),r=new Tp(e);return Sx(n._query),ax(t,n._query).then(s=>new bh(e,r,n,s))}(this._delegate),t.then(r=>new oA(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Zx(e),r=zx(e,s=>new oA(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Vx(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}class Qk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new S0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new S0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Qk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new S0(this._firestore,r))})}isEqual(e){return Ax(this._delegate,e._delegate)}}class hy extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?pC(this._delegate):pC(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function Lk(n,e){const t=rn(n.firestore,Jn),r=pC(n),s=EC(n.converter,e);return dy(t,[yC(Cp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return gx(this._delegate,e._delegate)}withConverter(e){return new hy(this.firestore,this._delegate.withConverter(e?Ap.getInstance(this.firestore,e):null))}}function Sp(n){return rn(n,Hn)}class aA{constructor(...e){this._delegate=new Hc(...e)}static documentId(){return new aA(Yn.keyField().canonicalString())}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Hc&&this._delegate._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $k(){return new QT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xp(e)}static delete(){const e=function jk(){return new b0("deleteField")}();return e._methodName="FieldValue.delete",new xp(e)}static arrayUnion(...e){const t=function Hk(...n){return new fk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xp(t)}static arrayRemove(...e){const t=function Gk(...n){return new pk("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xp(t)}static increment(e){const t=function qk(n){return new gk("increment",n)}(e);return t._methodName="FieldValue.increment",new xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Jk={Firestore:Hx,GeoPoint:gC,Timestamp:nr,Blob:T0,Transaction:Gx,WriteBatch:qx,DocumentReference:va,DocumentSnapshot:A0,Query:Rs,QueryDocumentSnapshot:S0,QuerySnapshot:oA,CollectionReference:hy,FieldPath:aA,FieldValue:xp,setLogLevel:function Yk(n){!function IS(n){Yu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Wx(n,e){return function tN(n,e=o_.z){return new Ir.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function uA(n,e){return Wx(n,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function CC(n,e){return uA(n,e).pipe(xi(void 0),O_(),(0,xt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=s.find(T=>T.doc.ref.isEqual(d.ref)),I=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&I&&JSON.stringify(I.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Kx(n,e,t){return CC(n,t).pipe(Dr((r,s)=>function rN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function iN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function P_(n,e=hi.y){return n=null!=n?n:DI,(0,dr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Dn.x)(r,d=>{const m=e(d);(u||!n(s,m))&&(u=!1,s=m,r.next(d))}))})}(),(0,xt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function lA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Yx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function eN(n){(function Xk(n,e){n.INTERNAL.registerComponent(new cf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},Jk)))})(n,(e,t)=>new Hx(e,t,new Kk)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(F_.Z);class Qx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(xi(void 0),O_(),qi(([r,s])=>s.length>0||!r),(0,xt.U)(([r,s])=>s),lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yx(e);return Kx(this.query,t,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return uA(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),lt.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(lt.iC)}add(e){return this.ref.add(e)}doc(e){return new Jx(this.ref.doc(e),this.afs)}}class Jx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=tM(r,t);return new Qx(s,u,this.afs)}snapshotChanges(){return function nN(n,e){return Wx(n,e).pipe(xi(void 0),O_(),(0,xt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(lt.iC)}}class sN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CC(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),qi(t=>t.length>0),lt.iC):CC(this.query,this.afs.schedulers.outsideAngular).pipe(lt.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Yx(e);return Kx(this.query,t,this.afs.schedulers.outsideAngular).pipe(lt.iC)}valueChanges(e={}){return uA(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),lt.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(lt.iC)}}const Xx=new c.OlP("angularfire2.enableFirestorePersistence"),eM=new c.OlP("angularfire2.firestore.persistenceSettings"),oN=new c.OlP("angularfire2.firestore.settings"),aN=new c.OlP("angularfire2.firestore.use-emulator");function tM(n,e=(t=>t)){return{query:e(n),ref:n}}let cA=(()=>{class n{constructor(t,r,s,u,d,m,w,I,T,x,L,G,ie,ke,Oe,Ct,nt){this.schedulers=w;const Mt=(0,_i.on)(t,m,r),rt=T;x&&N_(Mt,m,L,ie,ke,Oe,G,Ct),[this.firestore,this.persistenceEnabled$]=(0,_i.cc)(`${Mt.name}.firestore`,"AngularFirestore",Mt.name,()=>{const St=m.runOutsideAngular(()=>Mt.firestore());if(u&&St.settings(u),rt&&St.useEmulator(...rt),s&&!ur(d)){const Xe=()=>{try{return(0,mn.D)(St.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(Ft){return"undefined"!=typeof console&&console.warn(Ft),gt(!1)}};return[St,m.runOutsideAngular(Xe)]}return[St,gt(!1)]},[u,rt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=tM(s,r),m=this.schedulers.ngZone.run(()=>u);return new Qx(m,d,this)}collectionGroup(t,r){const s=r||(d=>d),u=this.firestore.collectionGroup(t);return new sN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Jx(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_i.Dh),c.LFG(_i.xv,8),c.LFG(Xx,8),c.LFG(oN,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(lt.HU),c.LFG(eM,8),c.LFG(aN,8),c.LFG(la,8),c.LFG(Ig,8),c.LFG(k_,8),c.LFG(Dg,8),c.LFG(Vd,8),c.LFG(Fw,8),c.LFG(Tg,8),c.LFG(Ld,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uN=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",lt.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Xx,useValue:!0},{provide:eM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[cA]}),n})(),dA=(()=>{class n{constructor(t,r,s,u){this.auth=t,this.db=r,this.router=s,this.route=u,this.redirect=!1,this.usersColleciton=r.collection("users"),this.isAuthenticated$=t.user.pipe((0,xt.U)(d=>!!d)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function tw(n,e=o_.z){const t=function XC(n=0,e,t=o_.P){let r=-1;return null!=e&&((0,JC.K)(e)?t=e:r=e),new Ir.y(s=>{let u=function Po(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){s.closed||(s.next(d++),0<=r?this.schedule(void 0,r):s.complete())},u)})}(n,e);return ew(()=>t)}(1e3)),this.router.events.pipe(qi(d=>d instanceof Oa),(0,xt.U)(d=>this.route.firstChild),fn(d=>{var m;return null!==(m=null==d?void 0:d.data)&&void 0!==m?m:gt({})})).subscribe(d=>{var m;this.redirect=null!==(m=d.authOnly)&&void 0!==m&&m})}createUser(t){var r=this;return(0,fe.Z)(function*(){if(!t.password)throw new Error("Password not provided!");const s=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);if(!s.user)throw new Error("User can't be found");yield r.usersColleciton.doc(s.user.uid).set({name:t.name,email:t.email,age:t.age,phoneNumber:t.phoneNumber}),yield s.user.updateProfile({displayName:t.name})})()}logout(t){var r=this;return(0,fe.Z)(function*(){t&&t.preventDefault(),yield r.auth.signOut(),r.redirect&&(yield r.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(la),c.LFG(cA),c.LFG(Sr),c.LFG(ws))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x0=(()=>{class n{constructor(){this.modals=[]}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(r=>r.id!==t)}isModalOpen(t){var r;return Boolean(null===(r=this.modals.find(s=>s.id===t))||void 0===r?void 0:r.visible)}toggleModal(t){const r=this.modals.find(s=>s.id===t);r&&(r.visible=!r.visible)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",15),c.NdJ("click",function(s){return c.CHM(t),c.oxw().openModal(s)}),c._uU(2,"Login / Register"),c.qZA()()}}const nM=function(){return{exact:!0}},cN=function(){return{sort:"1"}};function dN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",16),c._uU(2," Manage"),c.qZA()(),c.TgZ(3,"li")(4,"a",17),c._uU(5,"Upload"),c.qZA()(),c.TgZ(6,"li")(7,"a",18),c.NdJ("click",function(s){return c.CHM(t),c.oxw().auth.logout(s)}),c._uU(8,"Logout"),c.qZA()()}2&n&&(c.xp6(1),c.Q6J("routerLinkActiveOptions",c.DdM(3,nM))("queryParams",c.DdM(4,cN)),c.xp6(3),c.Q6J("routerLinkActiveOptions",c.DdM(5,nM)))}let hN=(()=>{class n{constructor(t,r){this.modal=t,this.auth=r,this.isAuthenticated=!1}ngOnInit(){}openModal(t){t.preventDefault(),this.modal.toggleModal("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(x0),c.Y36(dA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary","px-8"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"px-2",3,"click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),c._uU(3,"Clipz"),c.qZA(),c.TgZ(4,"div",3)(5,"ul",4),c.YNc(6,lN,3,0,"li",5),c.ALo(7,"async"),c.YNc(8,dN,9,6,"ng-template",null,6,c.W1O),c.TgZ(10,"li",7)(11,"a",8),c._uU(12,"About"),c.qZA()()(),c.TgZ(13,"ul",9)(14,"li")(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"span",12),c._uU(18,"English"),c.qZA()()(),c.TgZ(19,"li",13)(20,"a",10),c._UZ(21,"img",14),c.TgZ(22,"span",12),c._uU(23,"French"),c.qZA()()()()()()()),2&t){const s=c.MAs(9);c.xp6(6),c.Q6J("ngIf",!c.lcZ(7,2,r.auth.isAuthenticated$))("ngIfElse",s)}},directives:[kd,zn,Ky],pipes:[uu],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();const fN=[[["","heading",""]],"*"],pN=function(n){return{hidden:n}},gN=["[heading]","*"];let rM=(()=>{class n{constructor(t,r){this.modal=t,this.el=r,this.modalID="",console.log(r)}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(t){t.preventDefault(),this.modal.toggleModal(this.modalID)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(x0),c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:gN,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(c.F$t(fN),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.NdJ("click",function(u){return r.closeModal(u)}),c._UZ(3,"div",3),c.qZA(),c.TgZ(4,"span",4),c._uU(5,"\u200b"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7),c.Hsn(9),c.TgZ(10,"div",8),c.NdJ("click",function(u){return r.closeModal(u)}),c._uU(11," \u2715 "),c.qZA()(),c.Hsn(12,1),c.qZA()()()()),2&t&&c.Q6J("ngClass",c.VKq(1,pN,!r.modal.isModalOpen(r.modalID)))},directives:[ui],styles:[""]}),n})();const mN=["*"];let iM=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:mN,decls:2,vars:2,template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div"),c.Hsn(1),c.qZA()),2&t&&c.ekj("hidden",!r.active)},styles:[""]}),n})();const yN=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function _N(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2)(1,"a",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().selectTab(u)}),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(2,yN,!t.active,t.active)),c.xp6(1),c.Oqu(t.tabTitle)}}const vN=["*"];let wN=(()=>{class n{constructor(){this.tabs=new c.n_E}ngAfterContentInit(){var t;const r=null===(t=this.tabs)||void 0===t?void 0:t.filter(s=>s.active);(!r||0===r.length)&&this.selectTab(this.tabs.first)}selectTab(t){var r;return null===(r=this.tabs)||void 0===r||r.forEach(s=>s.active=!1),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,s){if(1&t&&c.Suo(s,iM,4),2&t){let u;c.iGM(u=c.CRH())&&(r.tabs=u)}},ngContentSelectors:vN,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"ul",0),c.YNc(1,_N,3,5,"li",1),c.qZA(),c.Hsn(2)),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.tabs))},directives:[Zn,ui],styles:[""]}),n})();const EN=["*"];let IC=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:EN,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.Q6J("ngClass",r.bgColor)},directives:[ui],styles:[""]}),n})();function hA(...n){const e=(0,On.jO)(n),{args:t,keys:r}=Ti(n),s=new Ir.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,I=d;for(let T=0;T<d;T++){let x=!1;(0,Jo.Xf)(t[T]).subscribe((0,Dn.x)(u,L=>{x||(x=!0,I--),m[T]=L},()=>w--,void 0,()=>{(!w||!x)&&(I||u.next(r?Io(r,m):m),u.complete())}))}});return e?s.pipe(hd(e)):s}let sM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Mp=(()=>{class n extends sM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const tu=new c.OlP("NgValueAccessor"),CN={provide:tu,useExisting:(0,c.Gpc)(()=>M0),multi:!0},DN=new c.OlP("CompositionEventMode");let M0=(()=>{class n extends sM{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function IN(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(DN,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([CN]),c.qOj]}),n})();function Dh(n){return null==n||0===n.length}function aM(n){return null!=n&&"number"==typeof n.length}const Li=new c.OlP("NgValidators"),Th=new c.OlP("NgAsyncValidators"),TN=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ui{static min(e){return function uM(n){return e=>{if(Dh(e.value)||Dh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function lM(n){return e=>{if(Dh(e.value)||Dh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return cM(e)}static requiredTrue(e){return function dM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function hM(n){return Dh(n.value)||TN.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function fM(n){return e=>Dh(e.value)||!aM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function pM(n){return e=>aM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return gM(e)}static nullValidator(e){return null}static compose(e){return EM(e)}static composeAsync(e){return bM(e)}}function cM(n){return Dh(n.value)?{required:!0}:null}function gM(n){if(!n)return DC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Dh(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}function DC(n){return null}function mM(n){return null!=n}function yM(n){const e=(0,c.QGY)(n)?(0,mn.D)(n):n;return(0,c.CqO)(e),e}function _M(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function vM(n,e){return e.map(t=>t(n))}function wM(n){return n.map(e=>function AN(n){return!n.validate}(e)?e:t=>e.validate(t))}function EM(n){if(!n)return null;const e=n.filter(mM);return 0==e.length?null:function(t){return _M(vM(t,e))}}function fA(n){return null!=n?EM(wM(n)):null}function bM(n){if(!n)return null;const e=n.filter(mM);return 0==e.length?null:function(t){return hA(vM(t,e).map(yM)).pipe((0,xt.U)(_M))}}function pA(n){return null!=n?bM(wM(n)):null}function CM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function IM(n){return n._rawValidators}function DM(n){return n._rawAsyncValidators}function gA(n){return n?Array.isArray(n)?n:[n]:[]}function TC(n,e){return Array.isArray(n)?n.includes(e):n===e}function TM(n,e){const t=gA(e);return gA(n).forEach(s=>{TC(t,s)||t.push(s)}),t}function AM(n,e){return gA(e).filter(t=>!TC(n,t))}class SM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ah extends SM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ks extends SM{get formDirective(){return null}get path(){return null}}class xM{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let mA=(()=>{class n extends xM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ah,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),R0=(()=>{class n extends xM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ks,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function k0(n,e){vA(n,e),e.valueAccessor.writeValue(n.value),function PN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&RM(n,e)})}(n,e),function LN(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function FN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&RM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ON(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),RC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function MC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vA(n,e){const t=IM(n);null!==e.validator?n.setValidators(CM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=DM(n);null!==e.asyncValidator?n.setAsyncValidators(CM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();MC(e._rawValidators,s),MC(e._rawAsyncValidators,s)}function RC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=IM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=DM(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(d=>d!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return MC(e._rawValidators,r),MC(e._rawAsyncValidators,r),t}function RM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kM(n,e){vA(n,e)}function wA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function OM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EA(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===M0?t=u:function BN(n){return Object.getPrototypeOf(n.constructor)===Mp}(u)?r=u:s=u}),s||r||t||null}function bA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const N0="VALID",kC="INVALID",fy="PENDING",O0="DISABLED";function IA(n){return(NC(n)?n.validators:n)||null}function PM(n){return Array.isArray(n)?fA(n):n||null}function DA(n,e){return(NC(e)?e.asyncValidators:n)||null}function FM(n){return Array.isArray(n)?pA(n):n||null}function NC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const LM=n=>n instanceof wa,TA=n=>n instanceof py;function UM(n){return LM(n)?n.value:n.getRawValue()}function VM(n,e){const t=TA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function BM(n,e){TA(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new c.vHH(1002,"")})}class AA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=PM(this._rawValidators),this._composedAsyncValidatorFn=FM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===N0}get invalid(){return this.status===kC}get pending(){return this.status==fy}get disabled(){return this.status===O0}get enabled(){return this.status!==O0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=PM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=FM(e)}addValidators(e){this.setValidators(TM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AM(e,this._rawAsyncValidators))}hasValidator(e){return TC(this._rawValidators,e)}hasAsyncValidator(e){return TC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=N0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===N0||this.status===fy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?O0:N0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fy,this._hasOwnPendingAsyncValidator=!0;const t=yM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function jN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=TA(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof HN)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?O0:this.errors?kC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fy)?fy:this._anyControlsHaveStatus(kC)?kC:N0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){NC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wa extends AA{constructor(e=null,t,r){super(IA(t),DA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),NC(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class py extends AA{constructor(e,t,r){super(IA(t),DA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){BM(this,e),Object.keys(e).forEach(r=>{VM(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=UM(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class HN extends AA{constructor(e,t,r){super(IA(t),DA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){BM(this,e),e.forEach((r,s)=>{VM(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>UM(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const GN={provide:ks,useExisting:(0,c.Gpc)(()=>OC)},P0=(()=>Promise.resolve(null))();let OC=(()=>{class n extends ks{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new py({},fA(t),pA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){P0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),k0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){P0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){P0.then(()=>{const r=this._findContainer(t.path),s=new py({});kM(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){P0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){P0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,OM(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Li,10),c.Y36(Th,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([GN]),c.qOj]}),n})();const ZN={provide:Ah,useExisting:(0,c.Gpc)(()=>SA)},HM=(()=>Promise.resolve(null))();let SA=(()=>{class n extends Ah{constructor(t,r,s,u,d){super(),this._changeDetectorRef=d,this.control=new wa,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=EA(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),wA(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){k0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HM.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=""===r||r&&"false"!==r;HM.then(()=>{var u;s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function SC(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ks,9),c.Y36(Li,10),c.Y36(Th,10),c.Y36(tu,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([ZN]),c.qOj,c.TTD]}),n})(),F0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const xA=new c.OlP("NgModelWithFormControlWarning"),QN={provide:Ah,useExisting:(0,c.Gpc)(()=>MA)};let MA=(()=>{class n extends Ah{constructor(t,r,s,u){super(),this._ngModelWarningConfig=u,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=EA(0,s)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&xC(r,this,!1),k0(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}wA(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&xC(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Li,10),c.Y36(Th,10),c.Y36(tu,10),c.Y36(xA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([QN]),c.qOj,c.TTD]}),n})();const JN={provide:ks,useExisting:(0,c.Gpc)(()=>gy)};let gy=(()=>{class n extends ks{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(RC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return k0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){xC(t.control||null,t,!1),bA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,OM(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(xC(r||null,t),LM(s)&&(k0(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);kM(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function UN(n,e){return RC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vA(this.form,this),this._oldForm&&RC(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Li,10),c.Y36(Th,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([JN]),c.qOj,c.TTD]}),n})();const nO={provide:tu,useExisting:(0,c.Gpc)(()=>NA),multi:!0};function YM(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let NA=(()=>{class n extends Mp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=YM(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function rO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([nO]),c.qOj]}),n})(),QM=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(YM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(NA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const iO={provide:tu,useExisting:(0,c.Gpc)(()=>OA),multi:!0};function JM(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let OA=(()=>{class n extends Mp{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,d)=>{u._setSelected(s.indexOf(d.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const d=u;for(let m=0;m<d.length;m++){const I=this._getOptionValue(d[m].value);s.push(I)}}else{const d=r.options;for(let m=0;m<d.length;m++){const w=d[m];if(w.selected){const I=this._getOptionValue(w.value);s.push(I)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function sO(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([iO]),c.qOj]}),n})(),XM=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(JM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(JM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(OA,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Rp=(()=>{class n{constructor(){this._validator=DC}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):DC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const lO={provide:Li,useExisting:(0,c.Gpc)(()=>PC),multi:!0};let PC=(()=>{class n extends Rp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function oO(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>cM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([lO]),c.qOj]}),n})();const pO={provide:Li,useExisting:(0,c.Gpc)(()=>PA),multi:!0};let PA=(()=>{class n extends Rp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>gM(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([pO]),c.qOj]}),n})(),u1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[qM]]}),n})(),gO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[u1]}),n})(),FA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[u1]}),n})();function mO(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMsg)}}function yO(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Email is invalid "),c.qZA())}function _O(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Password is invalid "),c.qZA())}let vO=(()=>{class n{constructor(t){this.auth=t,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait till we log you in...",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var t=this;return(0,fe.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait till we log you in...",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch(r){return t.inSubmission=!1,t.alertMsg="An unexpected error has occured. Plz try again later",t.alertColor="red",void console.error(r)}t.alertMsg="You're now successfully logged in.",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(la))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(c.YNc(0,mO,2,2,"app-alert",0),c.TgZ(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.login()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(u){return r.credentials.email=u}),c.qZA(),c.YNc(8,yO,2,0,"p",7),c.qZA(),c.TgZ(9,"div",3)(10,"label",4),c._uU(11,"Password"),c.qZA(),c.TgZ(12,"input",8,9),c.NdJ("ngModelChange",function(u){return r.credentials.password=u}),c.qZA(),c.YNc(14,_O,2,0,"p",7),c.qZA(),c.TgZ(15,"button",10),c._uU(16," Submit "),c.qZA()()),2&t){const s=c.MAs(2),u=c.MAs(7),d=c.MAs(13);c.Q6J("ngIf",r.showAlert),c.xp6(6),c.Q6J("ngModel",r.credentials.email),c.xp6(2),c.Q6J("ngIf",u.errors&&u.touched&&u.dirty),c.xp6(4),c.Q6J("ngModel",r.credentials.password),c.xp6(2),c.Q6J("ngIf",d.errors&&d.touched&&d.dirty),c.xp6(1),c.Q6J("disabled",s.invalid||r.inSubmission)}},directives:[zn,IC,F0,R0,OC,M0,PC,PA,mA,SA],styles:[""]}),n})();class wO{static match(e,t){return r=>{const s=r.get(e),u=r.get(t);if(!s||!u)return console.error("Form controls can't be found in the form group"),{controlNotFound:!1};const d=s.value===u.value?null:{noMatch:!0};return u.setErrors(d),d}}}let EO=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(s=>s.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(la))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var bO=k(655);const FC=new c.OlP("ngx-mask config"),l1=new c.OlP("new ngx-mask config"),c1=new c.OlP("initial ngx-mask config"),CO={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new c.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},IO=["Hh:m0:s0","Hh:m0","m0:s0"],DO=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let d1=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,s,u,d)=>{var m,w;let I=[],T="";if(Array.isArray(u)){const ke=new RegExp(u.map(Oe=>"[\\^$.|?*+()".indexOf(Oe)>=0?`\\${Oe}`:Oe).join("|"));I=r.split(ke),T=null!==(w=null===(m=r.match(ke))||void 0===m?void 0:m[0])&&void 0!==w?w:""}else I=r.split(u),T=u;const x=I.length>1?`${T}${I[1]}`:"";let L=I[0];const G=this.separatorLimit.replace(/\s/g,"");G&&+G&&(L="-"===L[0]?`-${L.slice(1,L.length).slice(0,G.length)}`:L.slice(0,G.length));const ie=/(\d+)(\d{3})/;for(;s&&ie.test(L);)L=L.replace(ie,"$1"+s+"$2");return void 0===d?L+x:0===d?L:L+x.substr(0,d+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const s=r.split(".");return s.length>1?Number(s[s.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var s,u,d;for(let m=(null===(s=this.suffix)||void 0===s?void 0:s.length)-1;m>=0;m--){const w=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(w)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(d=this.suffix)||void 0===d?void 0:d.length))))return r.replace(w,"")}return r},this.checkInputPrecision=(r,s,u)=>{if(s<1/0){if(Array.isArray(u)){const w=u.find(I=>I!==this.thousandSeparator);u=w||u[0]}const d=new RegExp(this._charToRegExpExpression(u)+`\\d{${s}}.*$`),m=r.match(d);m&&m[0].length-1>s&&(r=r.substring(0,r.length-(m[0].length-1-s))),0===s&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[s,u]=r;return this.customPattern=u,this.applyMask(t,s)}applyMask(t,r,s=0,u=!1,d=!1,m=(()=>{})){var w,I;if(!r||"string"!=typeof t)return"";let T=0,x="",L=!1,G=!1,ie=1,ke=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Oe=t.toString().split("");"IP"===r&&(this.ipError=Oe.filter(Xe=>"."===Xe).length<3&&Oe.length<7,r="099.099.099.099");const Ct=[];for(let Xe=0;Xe<t.length;Xe++)(null===(w=t[Xe])||void 0===w?void 0:w.match("\\d"))&&Ct.push(t[Xe]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==Ct.length&&14!==Ct.length,r=Ct.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const Xe=this.getPrecision(r);t=this.checkInputPrecision(t,Xe,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),x=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!d?t.slice(1,t.length):t,d&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const Xe=this._charToRegExpExpression(this.thousandSeparator);let Ft='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Xe,"");if(Array.isArray(this.decimalMarker))for(const Np of this.decimalMarker)Ft=Ft.replace(this._charToRegExpExpression(Np),"");else Ft=Ft.replace(this._charToRegExpExpression(this.decimalMarker),"");const Pn=new RegExp("["+Ft+"]");(t.match(Pn)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const Ps=this.getPrecision(r),rr=(t=this.checkInputPrecision(t,Ps,this.decimalMarker)).replace(new RegExp(Xe,"g"),"");x=this._formatWithSeparators(rr,this.thousandSeparator,this.decimalMarker,Ps);const Rn=x.indexOf(",")-t.indexOf(","),fo=x.length-t.length;if(fo>0&&","!==x[s]){G=!0;let Np=0;do{this._shift.add(s+Np),Np++}while(Np<fo)}else 0!==Rn&&s>0&&!(x.indexOf(",")>=s&&s>3)||!(x.indexOf(".")>=s&&s>3)&&fo<=0?(this._shift.clear(),G=!0,ie=fo,this._shift.add(s+=fo)):this._shift.clear()}else for(let Xe=0,Ft=Oe[0];Xe<Oe.length&&T!==r.length;Xe++,Ft=Oe[Xe])if(this._checkSymbolMask(Ft,r[T])&&"?"===r[T+1])x+=Ft,T+=2;else if("*"===r[T+1]&&L&&this._checkSymbolMask(Ft,r[T+2]))x+=Ft,T+=3,L=!1;else if(this._checkSymbolMask(Ft,r[T])&&"*"===r[T+1])x+=Ft,L=!0;else if("?"===r[T+1]&&this._checkSymbolMask(Ft,r[T+2]))x+=Ft,T+=3;else if(this._checkSymbolMask(Ft,r[T])){if("H"===r[T]&&Number(Ft)>2){T+=1,this._shiftStep(r,T,Oe.length),Xe--,this.leadZeroDateTime&&(x+="0");continue}if("h"===r[T]&&"2"===x&&Number(Ft)>3){T+=1,Xe--;continue}if("m"===r[T]&&Number(Ft)>5){T+=1,this._shiftStep(r,T,Oe.length),Xe--,this.leadZeroDateTime&&(x+="0");continue}if("s"===r[T]&&Number(Ft)>5){T+=1,this._shiftStep(r,T,Oe.length),Xe--,this.leadZeroDateTime&&(x+="0");continue}const Pn=31;if("d"===r[T]&&(Number(Ft)>3&&this.leadZeroDateTime||Number(t.slice(T,T+2))>Pn||"/"===t[T+1])){T+=1,this._shiftStep(r,T,Oe.length),Xe--,this.leadZeroDateTime&&(x+="0");continue}if("M"===r[T]){const rr=0===T&&(Number(Ft)>2||Number(t.slice(T,T+2))>12||"/"===t[T+1]),Rn=t.slice(T-3,T-1).includes("/")&&("/"===t[T-2]&&Number(t.slice(T-1,T+1))>12&&"/"!==t[T]||"/"===t[T]||"/"===t[T-3]&&Number(t.slice(T-2,T))>12&&"/"!==t[T-1]||"/"===t[T-1]),fo=Number(t.slice(T-3,T-1))<=Pn&&!t.slice(T-3,T-1).includes("/")&&"/"===t[T-1]&&(Number(t.slice(T,T+2))>12||"/"===t[T+1]),Np=Number(t.slice(T-3,T-1))>Pn&&!t.slice(T-3,T-1).includes("/")&&!t.slice(T-2,T).includes("/")&&Number(t.slice(T-2,T))>12,gL=Number(t.slice(T-3,T-1))<=Pn&&!t.slice(T-3,T-1).includes("/")&&"/"!==t[T-1]&&Number(t.slice(T-1,T+1))>12;if(Number(Ft)>1&&this.leadZeroDateTime||rr||Rn||fo||Np||gL){T+=1,this._shiftStep(r,T,Oe.length),Xe--,this.leadZeroDateTime&&(x+="0");continue}}x+=Ft,T++}else-1!==this.maskSpecialCharacters.indexOf(r[T])?(x+=r[T],T++,this._shiftStep(r,T,Oe.length),Xe--):this.maskSpecialCharacters.indexOf(Ft)>-1&&this.maskAvailablePatterns[r[T]]&&(null===(I=this.maskAvailablePatterns[r[T]])||void 0===I?void 0:I.optional)?(!!Oe[T]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(x+=Oe[T]),T++,Xe--):"*"===this.maskExpression[T+1]&&this._findSpecialChar(this.maskExpression[T+2])&&this._findSpecialChar(Ft)===this.maskExpression[T+2]&&L||"?"===this.maskExpression[T+1]&&this._findSpecialChar(this.maskExpression[T+2])&&this._findSpecialChar(Ft)===this.maskExpression[T+2]&&L?(T+=3,x+=Ft):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Ft)<0&&Ft!==this.placeHolderCharacter&&(ke=!0);x.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(x+=r[r.length-1]);let nt=s+1;for(;this._shift.has(nt);)ie++,nt++;let Mt=u?T:this._shift.has(s)?ie:0;ke&&Mt--,m(Mt,G),ie<0&&this._shift.clear();let rt=!1;d&&(rt=Oe.every(Xe=>this.maskSpecialCharacters.includes(Xe)));let St=`${this.prefix}${rt?"":x}${this.suffix}`;return 0===x.length&&(St=`${this.prefix}${x}`),St}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,s)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===s&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,s){const u=/[*?]/g.test(t.slice(0,r))?s:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,s){return Array.isArray(r)?r.filter(u=>u!==s).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(FC))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),h1=(()=>{class n extends d1{constructor(t,r,s,u){super(r),this.document=t,this._config=r,this._elementRef=s,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=d=>{}}applyMask(t,r,s=0,u=!1,d=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const w=t&&"number"==typeof this.selStart?t[this.selStart]:"";let I="";if(this.hiddenInput&&!this.writingValue){let G=this.actualValue.split("");""!==t&&G.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>G.length?G.splice(this.selStart,0,w):t.length<G.length&&(G.length-t.length==1?G.splice(this.selStart-1,1):G.splice(this.selStart,this.selEnd-this.selStart))):G=[],this.showMaskTyped&&(t=this.removeMask(t)),I=this.actualValue.length&&G.length<=t.length?this.shiftTypedSymbols(G.join("")):t}I=Boolean(I)&&I.length?I:t;const T=super.applyMask(I,r,s,u,d,m);if(this.actualValue=this.getActualValue(T),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(G=>!this._compareOrIncludes(G,this.decimalMarker,this.thousandSeparator))),this.formControlResult(T),!this.showMaskTyped)return this.hiddenInput&&T&&T.length?this.hideInput(T,this.maskExpression):T;const x=T.length,L=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const G=this._numberSkipedSymbols(T);return T+L.slice(x+G)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?T+L:T+L.slice(x)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let s=r.exec(t),u=0;for(;null!=s;)u+=1,s=r.exec(t);return u}applyValueChanges(t,r,s,u=(()=>{})){const d=this._elementRef.nativeElement;d.value=this.applyMask(d.value,this.maskExpression,t,r,s,u),d!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((s,u)=>{var d,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(d=this.maskAvailablePatterns[r[u]])||void 0===d?void 0:d.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:s}).join("")}getActualValue(t){const r=t.split("").filter((s,u)=>this._checkSymbolMask(s,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&s===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,d)=>{if(this.maskSpecialCharacters.includes(t[d+1])&&t[d+1]!==this.maskExpression[d+1])return r=u,t[d+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(s=>this._findSpecialChar(s)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const s=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&s.push(t[u]);return s.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:s.length>3&&s.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:s.length>6&&s.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const s=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return s;const d=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&d.push(t[m]);return d.length<=3?s.slice(d.length,s.length):d.length>3&&d.length<=6?s.slice(d.length+1,s.length):d.length>6&&d.length<=9?s.slice(d.length+2,s.length):d.length>9&&d.length<11?s.slice(d.length+3,s.length):11===d.length?"":12===d.length?u.slice(17===t.length?16:15,u.length):d.length>12&&d.length<=14?u.slice(d.length+4,u.length):""}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let s=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(s=s.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,s):Number(s):s}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ee),c.LFG(FC),c.LFG(c.SBq),c.LFG(c.Qsj))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),TO=(()=>{class n{constructor(t,r,s){this.document=t,this._maskService=r,this._config=s,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new c.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:s,patterns:u,prefix:d,suffix:m,thousandSeparator:w,decimalMarker:I,dropSpecialCharacters:T,hiddenInput:x,showMaskTyped:L,placeHolderCharacter:G,shownMaskExpression:ie,showTemplate:ke,clearIfNotMatch:Oe,validation:Ct,separatorLimit:nt,allowNegativeNumbers:Mt,leadZeroDateTime:rt,triggerOnMaskChange:St}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((Xe,Ft)=>Xe.length-Ft.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),s){if(!s.currentValue||!Array.isArray(s.currentValue))return;this._maskService.maskSpecialCharacters=s.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),d&&(this._maskService.prefix=d.currentValue),m&&(this._maskService.suffix=m.currentValue),w&&(this._maskService.thousandSeparator=w.currentValue),I&&(this._maskService.decimalMarker=I.currentValue),T&&(this._maskService.dropSpecialCharacters=T.currentValue),x&&(this._maskService.hiddenInput=x.currentValue),L&&(this._maskService.showMaskTyped=L.currentValue),G&&(this._maskService.placeHolderCharacter=G.currentValue),ie&&(this._maskService.shownMaskExpression=ie.currentValue),ke&&(this._maskService.showTemplate=ke.currentValue),Oe&&(this._maskService.clearIfNotMatch=Oe.currentValue),Ct&&(this._maskService.validation=Ct.currentValue),nt&&(this._maskService.separatorLimit=nt.currentValue),Mt&&(this._maskService.allowNegativeNumbers=Mt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Xe=>"-"!==Xe))),rt&&(this._maskService.leadZeroDateTime=rt.currentValue),St&&(this._maskService.triggerOnMaskChange=St.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||DO.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(IO.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const s in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[s].optional&&(this._maskValue.indexOf(s)!==this._maskValue.lastIndexOf(s)?r+=this._maskValue.split("").filter(d=>d===s).join("").length:-1!==this._maskValue.indexOf(s)&&r++,-1!==this._maskValue.indexOf(s)&&t.toString().length>=this._maskValue.indexOf(s)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const s=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<s)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){!t&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const s=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,d=!1;if(this._maskService.applyValueChanges(s,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(w,I)=>{this._justPasted=!1,u=w,d=I}),this.document.activeElement!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+s+u:s+("Backspace"!==this._code||d?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const d=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==d&&(r.value=d),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const s=t.target;if(this._inputValue=s.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===s.value.length&&(s.selectionStart=s.selectionEnd),8===t.keyCode&&0!==s.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&s.selectionStart<=this.prefix.length)s.setSelectionRange(this.prefix.length,s.selectionEnd);else if(this._inputValue.length!==s.selectionStart&&1!==s.selectionStart)for(;this.specialCharacters.includes(this._inputValue[s.selectionStart-1].toString())&&(this.prefix.length>=1&&s.selectionStart>this.prefix.length||0===this.prefix.length);)s.setSelectionRange(s.selectionStart-1,s.selectionEnd);this.checkSelectionOnDeletion(s),this._maskService.prefix.length&&s.selectionStart<=this._maskService.prefix.length&&s.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=s.selectionStart;8===t.keyCode&&!s.readOnly&&0===u&&s.selectionEnd===s.value.length&&0!==s.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<s.selectionStart?s.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(s.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=s.selectionStart,this._maskService.selEnd=s.selectionEnd}writeValue(t){return(0,bO.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),"number"==typeof t&&(t=String(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,s,u)=>{if(this._start="{"===s?u:this._start,"}"!==s)return this._maskService._findSpecialChar(s)?r+s:r;this._end=u;const d=Number(t.slice(this._start+1,this._end));return r+new Array(d+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(s=>":"!==s).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,s;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(s=this._maskService.removeMask(t))||void 0===s?void 0:s.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ee),c.Y36(h1),c.Y36(FC))},n.\u0275dir=c.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&c.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[c._Bn([{provide:tu,useExisting:(0,c.Gpc)(()=>n),multi:!0},{provide:Li,useExisting:(0,c.Gpc)(()=>n),multi:!0},h1]),c.TTD]}),n})();function AO(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let SO=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:l1,useValue:t},{provide:c1,useValue:CO},{provide:FC,useFactory:AO,deps:[c1,l1]},d1]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const f1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function xO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password must be at least 8 characters, must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number "),c.qZA())}function MO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Please fill the field "),c.qZA())}function RO(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.AsE(" The input that you've passed in is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," chars long. Plz type at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," chars. ")}}function kO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," You shall enter a valid email. "),c.qZA())}function NO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1,"Value too low."),c.qZA())}function OO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1,"Value too high."),c.qZA())}function PO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Passwords don't match. "),c.qZA())}function FO(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Email was taken. Please try to register with another email. "),c.qZA())}function LO(n,e){if(1&n&&(c.ynx(0),c.YNc(1,xO,2,0,"p",2),c.YNc(2,MO,2,0,"p",2),c.YNc(3,RO,2,2,"p",2),c.YNc(4,kO,2,0,"p",2),c.YNc(5,NO,2,0,"p",2),c.YNc(6,OO,2,0,"p",2),c.YNc(7,PO,2,0,"p",2),c.YNc(8,FO,2,0,"p",2),c.BQk()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken)}}f1.KeyboardEvent||(f1.KeyboardEvent=function(n,e){});let LA=(()=>{class n{constructor(){this.control=new wa,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(c._UZ(0,"input",0),c.YNc(1,LO,9,8,"ng-container",1)),2&t&&(c.Q6J("formControl",r.control)("type",r.type)("placeholder",r.placeholder)("mask",r.format)("dropSpecialCharacters",!1),c.xp6(1),c.Q6J("ngIf",r.control.touched&&r.control.dirty))},directives:[M0,TO,mA,MA,zn],styles:[""]}),n})();function UO(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.hij(" ",t.alertMsg,"\n")}}let VO=(()=>{class n{constructor(t,r){this.auth=t,this.emailTaken=r,this.inSubmittion=!1,this.name=new wa("",[Ui.required,Ui.minLength(3)]),this.email=new wa("",[Ui.required,Ui.email],[this.emailTaken.validate]),this.age=new wa("",[Ui.required,Ui.min(18),Ui.max(128)]),this.password=new wa("",[Ui.required,Ui.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/)]),this.confirm_password=new wa("",[Ui.required]),this.phoneNumber=new wa("",[Ui.required,Ui.minLength(13),Ui.maxLength(13)]),this.showAlert=!1,this.alertMsg="Creating your account...",this.alertColor="blue",this.registerForm=new py({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[wO.match("password","confirm_password")])}register(){var t=this;return(0,fe.Z)(function*(){t.inSubmittion=!0,t.showAlert=!0,t.alertMsg="Creating your account...",t.alertColor="blue";try{yield t.auth.createUser(t.registerForm.value)}catch(r){return console.error(r),t.alertMsg="An unexpected error occured. Plz try again later",t.alertColor="red",void(t.inSubmittion=!1)}t.alertMsg="Success! Your account has been created",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(dA),c.Y36(EO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Type Password",3,"control"],["type","password","placeholder","Retype password",3,"control"],["placeholder","Enter Phone Number","format","(000)00-00-00",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(c.YNc(0,UO,2,2,"app-alert",0),c.TgZ(1,"form",1),c.NdJ("ngSubmit",function(){return r.register()}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Name"),c.qZA(),c._UZ(5,"app-input",4),c.qZA(),c.TgZ(6,"div",2)(7,"label",3),c._uU(8,"Email"),c.qZA(),c._UZ(9,"app-input",5),c.qZA(),c.TgZ(10,"div",2)(11,"label",3),c._uU(12,"Age"),c.qZA(),c._UZ(13,"app-input",6),c.qZA(),c.TgZ(14,"div",2)(15,"label",3),c._uU(16,"Password"),c.qZA(),c._UZ(17,"app-input",7),c.qZA(),c.TgZ(18,"div",2)(19,"label",3),c._uU(20,"Confirm Password"),c.qZA(),c._UZ(21,"app-input",8),c.qZA(),c.TgZ(22,"div",2)(23,"label",3),c._uU(24,"Phone Number"),c.qZA(),c._UZ(25,"app-input",9),c.qZA(),c.TgZ(26,"button",10),c._uU(27," Submit "),c.qZA()()),2&t&&(c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.registerForm),c.xp6(4),c.Q6J("control",r.name),c.xp6(4),c.Q6J("control",r.email),c.xp6(4),c.Q6J("control",r.age),c.xp6(4),c.Q6J("control",r.password),c.xp6(4),c.Q6J("control",r.confirm_password),c.xp6(4),c.Q6J("control",r.phoneNumber),c.xp6(1),c.Q6J("disabled",r.registerForm.invalid||r.inSubmittion))},directives:[zn,IC,F0,R0,gy,LA],styles:[""]}),n})(),BO=(()=>{class n{constructor(t){this.modal=t}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(x0))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Your Account"),c.qZA(),c.TgZ(3,"app-tabs-container")(4,"app-tab",2),c._UZ(5,"app-login"),c.qZA(),c.TgZ(6,"app-tab",3),c._UZ(7,"app-register"),c.qZA()()())},directives:[rM,wN,iM,vO,VO],styles:[""]}),n})();function jO(n,e){1&n&&c._UZ(0,"app-auth-modal")}let $O=(()=>{class n{constructor(t){this.auth=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(dA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav")(1,"router-outlet"),c.YNc(2,jO,1,0,"app-auth-modal",0),c.ALo(3,"async")),2&t&&(c.xp6(2),c.Q6J("ngIf",!c.lcZ(3,1,r.auth.isAuthenticatedWithDelay$)))},directives:[hN,tc,zn,BO],pipes:[uu],styles:[""]}),n})(),p1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ls,FA,SO.forRoot()]]}),n})(),HO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ls,p1,FA,gO]]}),n})();const UA_firebase={apiKey:"AIzaSyAaapwLuJHwgfSTd69HCvVOEw0qXewodlk",authDomain:"clips-42.firebaseapp.com",projectId:"clips-42",storageBucket:"clips-42.appspot.com",messagingSenderId:"107676987763",appId:"1:107676987763:web:425ddf7115e5e99a495506",measurementId:"G-2LK24R1FYZ"},g1="firebasestorage.googleapis.com",m1="storageBucket";class yr extends Nt.ZR{constructor(e,t){super(VA(e),`Firebase Storage: ${t} (${VA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}_codeEquals(e){return VA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function VA(n){return"storage/"+n}function BA(){return new yr("unknown","An unknown error occurred, please check the error payload for server response.")}function y1(){return new yr("canceled","User canceled the upload/download.")}function _1(){return new yr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function my(n){return new yr("invalid-argument",n)}function v1(){return new yr("app-deleted","The Firebase app was deleted.")}function w1(n){return new yr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function L0(n,e){return new yr("invalid-format","String does not match format '"+n+"': "+e)}function U0(n){throw new yr("internal-error","Internal error: "+n)}class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch(s){return new ns(e,"")}if(""===r.path)return r;throw function eP(n){return new yr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+s+"(/(.*))?$","i");function I(rt){rt.path_=decodeURIComponent(rt.path)}const x=t.replace(/[.]/g,"\\."),Mt=[{regex:m,indices:{bucket:1,path:3},postModify:function u(rt){"/"===rt.path.charAt(rt.path.length-1)&&(rt.path_=rt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:I},{regex:new RegExp(`^https?://${t===g1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:I}];for(let rt=0;rt<Mt.length;rt++){const St=Mt[rt],Xe=St.regex.exec(e);if(Xe){let Pn=Xe[St.indices.path];Pn||(Pn=""),r=new ns(Xe[St.indices.bucket],Pn),St.postModify(r);break}}if(null==r)throw function XO(n){return new yr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class iP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function LC(n){return"string"==typeof n||n instanceof String}function E1(n){return jA()&&n instanceof Blob}function jA(){return"undefined"!=typeof Blob}function $A(n,e,t,r){if(r<e)throw my(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw my(`Invalid value for '${n}'. Expected ${t} or less.`)}function qc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function b1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Sh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Sh||(Sh={})),Sh))();class cP{constructor(e,t,r,s,u,d,m,w,I,T,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=w,this.timeout_=I,this.progressCallback_=T,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,G)=>{this.resolve_=L,this.reject_=G,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,d=this.reject_,m=s.connection;if(s.wasSuccessCode)try{const w=this.callback_(m,m.getResponse());!function aP(n){return void 0!==n}(w)?u():u(w)}catch(w){d(w)}else if(null!==m){const w=BA();w.serverResponse=m.getErrorText(),d(this.errorCallback_?this.errorCallback_(m,w):w)}else d(s.canceled?this.appDelete_?v1():y1():function JO(){return new yr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new UC(!1,null,!0)):this.backoffId_=function sP(n,e,t){let r=1,s=null,u=null,d=!1,m=0;function w(){return 2===m}let I=!1;function T(...Oe){I||(I=!0,e.apply(null,Oe))}function x(Oe){s=setTimeout(()=>{s=null,n(G,w())},Oe)}function L(){u&&clearTimeout(u)}function G(Oe,...Ct){if(I)return void L();if(Oe)return L(),void T.call(null,Oe,...Ct);if(w()||d)return L(),void T.call(null,Oe,...Ct);let Mt;r<64&&(r*=2),1===m?(m=2,Mt=0):Mt=1e3*(r+Math.random()),x(Mt)}let ie=!1;function ke(Oe){ie||(ie=!0,L(),!I&&(null!==s?(Oe||(m=2),clearTimeout(s),x(0)):Oe||(m=1)))}return x(0),u=setTimeout(()=>{d=!0,ke(!0)},t),ke}((r,s)=>{if(s)return void r(!1,new UC(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const d=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const m=u.getErrorCode()===Sh.NO_ERROR,w=u.getStatus();if(!m||this.isRetryStatusCode_(w)){const T=u.getErrorCode()===Sh.ABORT;return void r(!1,new UC(!1,null,T))}const I=-1!==this.successCodes_.indexOf(w);r(!0,new UC(I,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function oP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,s=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||s||u}}class UC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function yP(...n){const e=function mP(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jA())return new Blob(n);throw new yr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ho={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HA{constructor(e,t){this.data=e,this.contentType=t||null}}function GA(n,e){switch(n){case Ho.RAW:return new HA(C1(e));case Ho.BASE64:case Ho.BASE64URL:return new HA(I1(n,e));case Ho.DATA_URL:return new HA(function EP(n){const e=new D1(n);return e.base64?I1(Ho.BASE64,e.rest):function wP(n){let e;try{e=decodeURIComponent(n)}catch(t){throw L0(Ho.DATA_URL,"Malformed data URL.")}return C1(e)}(e.rest)}(e),function bP(n){return new D1(n).contentType}(e))}throw BA()}function C1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function I1(n,e){switch(n){case Ho.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw L0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ho.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw L0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function vP(n){return atob(n)}(e)}catch(s){throw L0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class D1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw L0(Ho.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function CP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class pl{constructor(e,t){let r=0,s="";E1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(E1(this.data_)){const s=function _P(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new pl(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new pl(r,!0)}}static getBlob(...e){if(jA()){const t=e.map(r=>r instanceof pl?r.data_:r);return new pl(yP.apply(null,t))}{const t=e.map(d=>LC(d)?GA(Ho.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)s[u++]=d[m]}),new pl(s,!0)}}uploadData(){return this.data_}}function qA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function lP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function T1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function TP(n,e){return e}class Ns{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||TP}}let VC=null;function V0(){if(VC)return VC;const n=[];n.push(new Ns("bucket")),n.push(new Ns("generation")),n.push(new Ns("metageneration")),n.push(new Ns("name","fullPath",!0));const t=new Ns("name");t.xform=function e(u,d){return function AP(n){return!LC(n)||n.length<2?n:T1(n)}(d)},n.push(t);const s=new Ns("size");return s.xform=function r(u,d){return void 0!==d?Number(d):d},n.push(s),n.push(new Ns("timeCreated")),n.push(new Ns("updated")),n.push(new Ns("md5Hash",null,!0)),n.push(new Ns("cacheControl",null,!0)),n.push(new Ns("contentDisposition",null,!0)),n.push(new Ns("contentEncoding",null,!0)),n.push(new Ns("contentLanguage",null,!0)),n.push(new Ns("contentType",null,!0)),n.push(new Ns("metadata","customMetadata",!0)),VC=n,VC}function A1(n,e,t){const r=qA(e);return null===r?null:function xP(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return function SP(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new ns(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function ZA(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const S1="prefixes";class gl{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ml(n){if(!n)throw BA()}function BC(n,e){return function t(r,s){const u=A1(n,s,e);return ml(null!==u),u}}function yy(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function YO(){return new yr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function KO(){return new yr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function WO(n){return new yr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function QO(n){return new yr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,s.serverResponse=r.serverResponse,s}}function B0(n){const e=yy(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function zO(n){return new yr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function M1(n,e,t){const s=qc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new gl(s,"GET",BC(n,t),d);return m.errorHandler=B0(e),m}function PP(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const m=qc(e.bucketOnlyServerUrl(),n.host,n._protocol),I=n.maxOperationRetryTime,T=new gl(m,"GET",function NP(n,e){return function t(r,s){const u=function kP(n,e,t){const r=qA(t);return null===r?null:function RP(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[S1])for(const s of t[S1]){const u=s.replace(/\/$/,""),d=n._makeStorageReference(new ns(e,u));r.prefixes.push(d)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new ns(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return ml(null!==u),u}}(n,e.bucket),I);return T.urlParams=u,T.errorHandler=yy(e),T}function k1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function VP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class jC{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function zA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(s){ml(!1)}return ml(!!t&&-1!==(e||["active"]).indexOf(t)),t}const HP={STATE_CHANGED:"state_changed"},Os={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WA(n){switch(n){case"running":case"pausing":case"canceling":return Os.RUNNING;case"paused":return Os.PAUSED;case"success":return Os.SUCCESS;case"canceled":return Os.CANCELED;default:return Os.ERROR}}class GP{constructor(e,t,r){if(function uP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function _y(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ZP extends class qP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw U0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw U0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw U0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw U0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw U0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function nu(){return new ZP}class F1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=V0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=s,this._transition("error"))},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function BP(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d=k1(e,r,s),m={name:d.fullPath},w=qc(u,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},x=ZA(d,t),ie=new gl(w,"POST",function G(ke){let Oe;zA(ke);try{Oe=ke.getResponseHeader("X-Goog-Upload-URL")}catch(Ct){ml(!1)}return ml(LC(Oe)),Oe},n.maxUploadRetryTime);return ie.urlParams=m,ie.headers=T,ie.body=x,ie.errorHandler=yy(e),ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,nu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function jP(n,e,t,r){const w=new gl(t,"POST",function u(I){const T=zA(I,["active","final"]);let x=null;try{x=I.getResponseHeader("X-Goog-Upload-Size-Received")}catch(G){ml(!1)}x||ml(!1);const L=Number(x);return ml(!isNaN(L)),new jC(L,r.size(),"final"===T)},n.maxUploadRetryTime);return w.headers={"X-Goog-Upload-Command":"query"},w.errorHandler=yy(e),w}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,nu,t,r);this._request=u,u.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new jC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let d;try{d=function $P(n,e,t,r,s,u,d,m){const w=new jC(0,0);if(d?(w.current=d.current,w.total=d.total):(w.current=0,w.total=r.size()),r.size()!==w.total)throw function nP(){return new yr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const I=w.total-w.current;let T=I;s>0&&(T=Math.min(T,s));const x=w.current,ie={"X-Goog-Upload-Command":T===I?"upload, finalize":"upload","X-Goog-Upload-Offset":`${w.current}`},ke=r.slice(x,x+T);if(null===ke)throw _1();const Mt=new gl(t,"POST",function Oe(rt,St){const Xe=zA(rt,["active","final"]),Ft=w.current+T,Pn=r.size();let Ps;return Ps="final"===Xe?BC(e,u)(rt,St):null,new jC(Ft,Pn,"final"===Xe,Ps)},e.maxUploadRetryTime);return Mt.headers=ie,Mt.body=ke.uploadData(),Mt.progressCallback=m||null,Mt.errorHandler=yy(n),Mt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(w){return this._error=w,void this._transition("error")}const m=this._ref.storage._makeRequest(d,nu,s,u);this._request=m,m.getPromise().then(w=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(w.current),w.finalized?(this._metadata=w.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=M1(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,nu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function N1(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},w=function m(){let Mt="";for(let rt=0;rt<2;rt++)Mt+=Math.random().toString().slice(2);return Mt}();d["Content-Type"]="multipart/related; boundary="+w;const I=k1(e,r,s),T=ZA(I,t),G=pl.getBlob("--"+w+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+w+"\r\nContent-Type: "+I.contentType+"\r\n\r\n",r,"\r\n--"+w+"--");if(null===G)throw _1();const ie={name:I.fullPath},ke=qc(u,n.host,n._protocol),Ct=n.maxUploadRetryTime,nt=new gl(ke,"POST",BC(n,t),Ct);return nt.urlParams=ie,nt.headers=d,nt.body=G.uploadData(),nt.errorHandler=yy(e),nt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,nu,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=y1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=WA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new GP(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(WA(this._state)){case Os.SUCCESS:_y(this._resolve.bind(null,this.snapshot))();break;case Os.CANCELED:case Os.ERROR:_y(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(WA(this._state)){case Os.RUNNING:case Os.PAUSED:e.next&&_y(e.next.bind(e,this.snapshot))();break;case Os.SUCCESS:e.complete&&_y(e.complete.bind(e))();break;default:e.error&&_y(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class kp{constructor(e,t){this._service=e,this._location=t instanceof ns?t:ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new kp(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return T1(this._location.path)}get storage(){return this._service}get parent(){const e=function IP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ns(this._location.bucket,e);return new kp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw w1(e)}}function U1(n,e,t){return KA.apply(this,arguments)}function KA(){return KA=(0,fe.Z)(function*(n,e,t){const s=yield V1(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield U1(n,e,s.nextPageToken))}),KA.apply(this,arguments)}function V1(n,e){null!=e&&"number"==typeof e.maxResults&&$A("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=PP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,nu)}function iF(n){n._throwIfRoot("getDownloadURL");const e=function FP(n,e,t){const s=qc(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,m=new gl(s,"GET",function OP(n,e){return function t(r,s){const u=A1(n,s,e);return ml(null!==u),function MP(n,e,t,r){const s=qA(e);if(null===s||!LC(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const d=encodeURIComponent;return u.split(",").map(I=>{const x=n.fullPath;return qc("/b/"+d(n.bucket)+"/o/"+d(x),t,r)+b1({alt:"media",token:I})})[0]}(u,s,n.host,n._protocol)}}(n,t),d);return m.errorHandler=B0(e),m}(n.storage,n._location,V0());return n.storage.makeRequestWithTokens(e,nu).then(t=>{if(null===t)throw function rP(){return new yr("no-download-url","The given file does not have any download URLs.")}();return t})}function B1(n,e){const t=function DP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ns(n._location.bucket,t);return new kp(n.storage,r)}function j1(n,e){if(n instanceof YA){const t=n;if(null==t._bucket)throw function tP(){return new yr("no-default-bucket","No default bucket found. Did you set the '"+m1+"' property when initializing the app?")}();const r=new kp(t,t._bucket);return null!=e?j1(r,e):r}return void 0!==e?B1(n,e):n}function uF(n,e){if(e&&function oF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof YA)return function aF(n,e){return new kp(n,e)}(n,e);throw my("To use ref(service, url), the first argument must be a Storage instance.")}return j1(n,e)}function $1(n,e){const t=null==e?void 0:e[m1];return null==t?null:ns.makeFromBucketSpec(t,n)}class YA{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=g1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?ns.makeFromBucketSpec(s,this._host):$1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ns.makeFromBucketSpec(this._url,e):$1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$A("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$A("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kp(this,e)}_makeRequest(e,t,r,s){if(this._deleted)return new iP(v1());{const u=function gP(n,e,t,r,s,u){const d=b1(n.urlParams),m=n.url+d,w=Object.assign({},n.headers);return function fP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function dP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function hP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(w,u),function pP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new cP(m,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s)}(e,this._appId,r,s,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const H1="@firebase/storage";function Z1(n,e){return uF(n=(0,Nt.m9)(n),e)}function vF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new YA(t,r,s,e,Cs.SDK_VERSION)}!function wF(){(0,Cs._registerComponent)(new cf.wA("storage",vF,"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(H1,"0.9.4",""),(0,Cs.registerVersion)(H1,"0.9.4","esm2017")}();class $C{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class z1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $C(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new $C(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?d=>t(new $C(d,this,this._ref)):{next:t.next?d=>t.next(new $C(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class W1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Zc(e,this._service))}get items(){return this._delegate.items.map(e=>new Zc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Zc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function yF(n,e){return B1(n,e)}(this._delegate,e);return new Zc(t,this.storage)}get root(){return new Zc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Zc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new z1(function cF(n,e,t){return function XP(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new F1(n,new pl(e),t)}(n=(0,Nt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ho.RAW,r){this._throwIfRoot("putString");const s=GA(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new z1(new F1(this._delegate,new pl(s.data,!0),u),this)}listAll(){return function pF(n){return function tF(n){const e={prefixes:[],items:[]};return U1(n,e).then(()=>e)}(n=(0,Nt.m9)(n))}(this._delegate).then(e=>new W1(e,this.storage))}list(e){return function fF(n,e){return V1(n=(0,Nt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new W1(t,this.storage))}getMetadata(){return function dF(n){return function nF(n){n._throwIfRoot("getMetadata");const e=M1(n.storage,n._location,V0());return n.storage.makeRequestWithTokens(e,nu)}(n=(0,Nt.m9)(n))}(this._delegate)}updateMetadata(e){return function hF(n,e){return function rF(n,e){n._throwIfRoot("updateMetadata");const t=function LP(n,e,t,r){const u=qc(e.fullServerUrl(),n.host,n._protocol),m=ZA(t,r),I=n.maxOperationRetryTime,T=new gl(u,"PATCH",BC(n,r),I);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=m,T.errorHandler=B0(e),T}(n.storage,n._location,e,V0());return n.storage.makeRequestWithTokens(t,nu)}(n=(0,Nt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function gF(n){return iF(n=(0,Nt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function mF(n){return function sF(n){n._throwIfRoot("deleteObject");const e=function UP(n,e){const r=qc(e.fullServerUrl(),n.host,n._protocol),m=new gl(r,"DELETE",function d(w,I){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=B0(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,nu)}(n=(0,Nt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw w1(e)}}class K1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Y1(e))throw my("ref() expected a child path but got a URL, use refFromURL instead.");return new Zc(Z1(this._delegate,e),this)}refFromURL(e){if(!Y1(e))throw my("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ns.makeFromUrl(e,this._delegate.host)}catch(t){throw my("refFromUrl() expected a valid full URL but got an invalid one.")}return new Zc(Z1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function _F(n,e,t,r={}){!function lF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Nt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Y1(n){return/^[A-Za-z]+:\/\//.test(n)}function IF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new K1(t,r)}function Q1(n){const e=function TF(n){return new Ir.y(e=>{const t=d=>e.next(d);t(n.snapshot);const u=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){u()}}).pipe(function GO(n,e=o_.z){return(0,dr.e)((t,r)=>{let s=null,u=null,d=null;const m=()=>{if(s){s.unsubscribe(),s=null;const I=u;u=null,r.next(I)}};function w(){const I=d+n,T=e.now();if(T<I)return s=this.schedule(void 0,I-T),void r.add(s);m()}t.subscribe((0,Dn.x)(r,I=>{u=I,d=e.now(),s||(s=e.schedule(w,n),r.add(s))},()=>{m(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,xt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function HC(n){return{getDownloadURL:()=>gt(void 0).pipe(lt.fc,fn(()=>n.getDownloadURL()),lt.iC),getMetadata:()=>gt(void 0).pipe(lt.fc,fn(()=>n.getMetadata()),lt.iC),delete:()=>(0,mn.D)(n.delete()),child:e=>HC(n.child(e)),updateMetadata:e=>(0,mn.D)(n.updateMetadata(e)),put:(e,t)=>Q1(n.put(e,t)),putString:(e,t,r)=>Q1(n.putString(e,t,r)),list:e=>(0,mn.D)(n.list(e)),listAll:()=>(0,mn.D)(n.listAll())}}!function DF(n){const e={TaskState:Os,TaskEvent:HP,StringFormat:Ho,Storage:K1,Reference:Zc};n.INTERNAL.registerComponent(new cf.wA("storage-compat",IF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(F_.Z);const AF=new c.OlP("angularfire2.storageBucket"),SF=new c.OlP("angularfire2.storage.maxUploadRetryTime"),xF=new c.OlP("angularfire2.storage.maxOperationRetryTime"),MF=new c.OlP("angularfire2.storage.use-emulator");let QA=(()=>{class n{constructor(t,r,s,u,d,m,w,I,T,x){const L=(0,_i.on)(t,d,r);this.storage=(0,_i.cc)(`${L.name}.storage.${s}`,"AngularFireStorage",L.name,()=>{const G=d.runOutsideAngular(()=>L.storage(s||void 0)),ie=T;return ie&&G.useEmulator(...ie),w&&G.setMaxUploadRetryTime(w),I&&G.setMaxOperationRetryTime(I),G},[w,I])}ref(t){return HC(this.storage.ref(t))}refFromURL(t){return HC(this.storage.refFromURL(t))}upload(t,r,s){return HC(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(_i.Dh),c.LFG(_i.xv,8),c.LFG(AF,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(lt.HU),c.LFG(SF,8),c.LFG(xF,8),c.LFG(MF,8),c.LFG(Ld,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),RF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),kF=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",lt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[QA],imports:[RF]}),n})(),JA=(()=>{class n{constructor(t,r,s){this.db=t,this.auth=r,this.storage=s,this.clipsCollection=t.collection("clips")}createClip(t){return this.clipsCollection.add(t)}getUserClips(t){return Xs([this.auth.user,t]).pipe(fn(r=>{const[s,u]=r;return s?this.clipsCollection.ref.where("uid","==",s.uid).orderBy("timestamp","1"===u?"asc":"desc").get():gt([])}),(0,xt.U)(r=>r.docs))}updateClip(t,r){return this.clipsCollection.doc(t).update({title:r})}deleteClip(t){var r=this;return(0,fe.Z)(function*(){const s=r.storage.ref(`clips/${t.fileName}`),u=r.storage.ref(`screenshots/${t.screenshotFileName}`);yield s.delete(),yield u.delete(),yield r.clipsCollection.doc(t.docID).delete()})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(cA),c.LFG(la),c.LFG(QA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function NF(n,e){if(1&n&&(c.TgZ(0,"app-alert",9)(1,"p"),c._uU(2),c.qZA()()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(2),c.Oqu(t.alertMsg)}}const OF=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};let PF=(()=>{class n{constructor(t,r){this.modal=t,this.clipService=r,this.activeClip=null,this.inSubmission=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Please wait! Updating the clip.",this.update=new c.vpe,this.clipID=new wa(""),this.title=new wa("",[Ui.required,Ui.minLength(3)]),this.editForm=new py({title:this.title,id:this.clipID})}ngOnInit(){this.modal.register("editClip")}ngOnDestroy(){this.modal.unregister("editClip")}ngOnChanges(){!this.activeClip||(this.inSubmission=!1,this.showAlert=!1,this.clipID.setValue(this.activeClip.docID),this.title.setValue(this.activeClip.title))}submit(){var t=this;return(0,fe.Z)(function*(){if(t.activeClip){t.inSubmission=!0,t.showAlert=!0,t.alertColor="blue",t.alertMsg="Please wait! Updating the clip.";try{yield t.clipService.updateClip(t.clipID.value,t.title.value)}catch(r){return t.inSubmission=!1,t.alertColor="red",void(t.alertMsg="Smth went wrong! Try again later.")}t.activeClip.title=t.title.value,t.update.emit(t.activeClip),t.inSubmission=!1,t.alertColor="green",t.alertMsg="Success!"}})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(x0),c.Y36(JA))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[c.TTD],decls:12,vars:8,consts:[["modalID","editClip"],[1,"text-2xl","font-bold"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Edit Video"),c.qZA(),c.YNc(3,NF,3,2,"app-alert",2),c.TgZ(4,"form",3),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(5,"div",4)(6,"label",5),c._uU(7,"Title"),c.qZA(),c._UZ(8,"app-input",6),c.qZA(),c.TgZ(9,"div",7)(10,"button",8),c._uU(11," Update "),c.qZA()()()()),2&t&&(c.xp6(3),c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.editForm),c.xp6(4),c.Q6J("control",r.title),c.xp6(2),c.Q6J("disabled",r.inSubmission)("ngClass",c.WLB(5,OF,r.inSubmission,!r.inSubmission)))},directives:[rM,zn,IC,F0,R0,gy,LA,ui],styles:[""]}),n})();function FF(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",10)(1,"a",11),c._UZ(2,"img",12),c.qZA(),c.TgZ(3,"div",13)(4,"a",14),c._uU(5),c.qZA(),c.TgZ(6,"a",15),c._uU(7," Copy Link "),c.qZA()(),c.TgZ(8,"div",16)(9,"a",17),c.NdJ("click",function(s){const d=c.CHM(t).$implicit;return c.oxw().openModal(s,d)}),c.TgZ(10,"span",18),c._uU(11,"build"),c.qZA()(),c.TgZ(12,"a",19),c.NdJ("click",function(s){const d=c.CHM(t).$implicit;return c.oxw().deleteClip(s,d)}),c.TgZ(13,"span",18),c._uU(14,"delete"),c.qZA()()()()}if(2&n){const t=e.$implicit;c.xp6(5),c.hij(" ",t.title," ")}}let LF=(()=>{class n{constructor(t,r,s,u){this.router=t,this.route=r,this.clipService=s,this.modal=u,this.videoOrder="1",this.clips=[],this.activeClip=null,this.sort$=new Pr(this.videoOrder)}ngOnInit(){this.route.queryParamMap.subscribe(t=>{this.videoOrder="2"===t.params.sort?t.params.sort:"1",this.sort$.next(this.videoOrder)}),this.clipService.getUserClips(this.sort$).subscribe(t=>{this.clips=[],t.forEach(r=>{this.clips.push(Object.assign({docID:r.id},r.data()))})})}sort(t){const{value:r}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:r}})}openModal(t,r){t.preventDefault(),this.activeClip=r,this.modal.toggleModal("editClip")}update(t){this.clips.forEach((r,s)=>{r.docID==t.docID&&(this.clips[s].title=t.title)})}deleteClip(t,r){t.preventDefault(),this.clipService.deleteClip(r),this.clips.forEach((s,u)=>{s.docID==r.docID&&this.clips.splice(u,1)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(ws),c.Y36(JA),c.Y36(x0))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],["href","#",1,"font-bold","mb-2"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"a",2),c._uU(3,"Upload Videos"),c.qZA(),c.TgZ(4,"select",3),c.NdJ("change",function(u){return r.sort(u)}),c.TgZ(5,"option",4),c._uU(6,"Recent Uploads"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Oldest Uploads"),c.qZA()()()(),c.TgZ(9,"div",6)(10,"div",7),c.YNc(11,FF,15,1,"div",8),c.qZA()(),c.TgZ(12,"app-edit",9),c.NdJ("update",function(u){return r.update(u)}),c.qZA()),2&t&&(c.xp6(5),c.Q6J("selected","1"===r.videoOrder),c.xp6(2),c.Q6J("selected","2"===r.videoOrder),c.xp6(4),c.Q6J("ngForOf",r.clips),c.xp6(1),c.Q6J("activeClip",r.activeClip))},directives:[kd,QM,XM,Zn,PF],styles:[""]}),n})();var GC,UF=new Uint8Array(16);function VF(){if(!GC&&!(GC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return GC(UF)}const BF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,$F=function jF(n){return"string"==typeof n&&BF.test(n)};for(var Vi=[],XA=0;XA<256;++XA)Vi.push((XA+256).toString(16).substr(1));const ZF=function qF(n,e,t){var r=(n=n||{}).random||(n.rng||VF)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return function HF(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Vi[n[e+0]]+Vi[n[e+1]]+Vi[n[e+2]]+Vi[n[e+3]]+"-"+Vi[n[e+4]]+Vi[n[e+5]]+"-"+Vi[n[e+6]]+Vi[n[e+7]]+"-"+Vi[n[e+8]]+Vi[n[e+9]]+"-"+Vi[n[e+10]]+Vi[n[e+11]]+Vi[n[e+12]]+Vi[n[e+13]]+Vi[n[e+14]]+Vi[n[e+15]]).toLowerCase();if(!$F(t))throw TypeError("Stringified UUID is invalid");return t}(r)};var J1=k(260);let zF=(()=>{class n{constructor(){this.isRunning=!1,this.isReady=!1,this.ffmpeg=(0,J1.createFFmpeg)({log:!0})}init(){var t=this;return(0,fe.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}getScreenshots(t){var r=this;return(0,fe.Z)(function*(){r.isRunning=!0;const s=yield(0,J1.fetchFile)(t);r.ffmpeg.FS("writeFile",t.name,s);const u=[1,2,3],d=[];u.forEach(w=>{d.push("-i",t.name,"-ss",`00:00:0${w}`,"-frames:v","1","-filter:v","scale=510:-1",`output_0${w}.png`)}),yield r.ffmpeg.run(...d);const m=[];return u.forEach(w=>{const I=r.ffmpeg.FS("readFile",`output_0${w}.png`),T=new Blob([I.buffer],{type:"image/png"}),x=URL.createObjectURL(T);m.push(x)}),r.isRunning=!1,m})()}blobFromURL(t){return(0,fe.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WF=(()=>{class n{handleEvent(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","app-event-blocker",""]],hostBindings:function(t,r){1&t&&c.NdJ("drop",function(u){return r.handleEvent(u)})("dragover",function(u){return r.handleEvent(u)})}}),n})(),KF=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ps,16))},n.\u0275pipe=c.Yjl({name:"safeURL",type:n,pure:!0}),n})();function YF(n,e){1&n&&(c.TgZ(0,"span",5),c._uU(1,"rotate_right"),c.qZA())}function QF(n,e){1&n&&(c.TgZ(0,"span",5),c._uU(1,"autorenew"),c.qZA())}const JF=function(n){return{"bg-indigo-400 border-indigo-400 solid":n}};function XF(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",8),c.NdJ("dragend",function(){return c.CHM(t),c.oxw(2).isDragover=!1})("dragover",function(){return c.CHM(t),c.oxw(2).isDragover=!0})("dragenter",function(){return c.CHM(t),c.oxw(2).isDragover=!0})("dragleave",function(){return c.CHM(t),c.oxw(2).isDragover=!1})("mouseleave",function(){return c.CHM(t),c.oxw(2).isDragover=!1})("drop",function(s){return c.CHM(t),c.oxw(2).storeFile(s)}),c.TgZ(2,"h5"),c._uU(3,"Drop your file here (mp4 only!)"),c.qZA(),c.YNc(4,QF,2,0,"span",9),c.qZA(),c.TgZ(5,"input",10),c.NdJ("change",function(s){return c.CHM(t),c.oxw(2).storeFile(s)}),c.qZA(),c.BQk()}if(2&n){const t=c.oxw(2);c.xp6(1),c.Q6J("ngClass",c.VKq(2,JF,t.isDragover)),c.xp6(3),c.Q6J("ngIf",t.ffmpegService.isRunning)}}function eL(n,e){if(1&n&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"percent"),c.qZA()),2&n){const t=c.oxw(4);c.xp6(1),c.Oqu(c.lcZ(2,1,t.percentage))}}function tL(n,e){if(1&n&&(c.TgZ(0,"app-alert",21)(1,"p"),c._uU(2),c.qZA(),c.YNc(3,eL,3,3,"p",22),c.qZA()),2&n){const t=c.oxw(3);c.Q6J("color",t.alertColor),c.xp6(2),c.Oqu(t.alertMsg),c.xp6(1),c.Q6J("ngIf",t.showPercentage)}}const nL=function(n,e){return{"border-green-400":n,"border-transparent":e}};function rL(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",23),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw(3).selectedScreenshot=u}),c._UZ(1,"img",24),c.ALo(2,"safeURL"),c.qZA()}if(2&n){const t=e.$implicit,r=c.oxw(3);c.Q6J("ngClass",c.WLB(4,nL,t===r.selectedScreenshot,t!==r.selectedScreenshot)),c.xp6(1),c.Q6J("src",c.lcZ(2,2,t),c.LSH)}}const iL=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700":e}};function sL(n,e){if(1&n){const t=c.EpF();c.YNc(0,tL,4,3,"app-alert",11),c.TgZ(1,"form",12),c.NdJ("ngSubmit",function(){return c.CHM(t),c.oxw(2).uploadFile()}),c.TgZ(2,"h2",13),c._uU(3,"Select a Thumbnail"),c.qZA(),c.TgZ(4,"div",14),c.YNc(5,rL,3,7,"div",15),c.qZA(),c.TgZ(6,"div",16)(7,"label",17),c._uU(8,"Title"),c.qZA(),c._UZ(9,"app-input",18),c.qZA(),c.TgZ(10,"div",19)(11,"button",20),c._uU(12," Publish "),c.qZA()()()}if(2&n){const t=c.oxw(2);c.Q6J("ngIf",t.showAlert),c.xp6(1),c.Q6J("formGroup",t.uploadForm),c.xp6(4),c.Q6J("ngForOf",t.screenshots),c.xp6(4),c.Q6J("control",t.title),c.xp6(2),c.Q6J("disabled",t.inSubmission)("ngClass",c.WLB(6,iL,t.inSubmission,!t.inSubmission))}}function oL(n,e){if(1&n&&(c.YNc(0,XF,6,4,"ng-container",6),c.YNc(1,sL,13,9,"ng-template",null,7,c.W1O)),2&n){const t=c.MAs(2),r=c.oxw();c.Q6J("ngIf",!r.nextStep)("ngIfElse",t)}}let aL=(()=>{class n{constructor(t,r,s,u,d){this.storage=t,this.auth=r,this.clipsService=s,this.router=u,this.ffmpegService=d,this.isDragover=!1,this.file=null,this.nextStep=!1,this.showAlert=!1,this.alertColor="blue",this.alertMsg="Plz wait. Your clip is being uploaded.",this.inSubmission=!1,this.percentage=0,this.showPercentage=!1,this.user=null,this.screenshots=[],this.selectedScreenshot="",this.title=new wa("",[Ui.required,Ui.minLength(3)]),this.uploadForm=new py({title:this.title}),r.user.subscribe(m=>this.user=m),this.ffmpegService.init()}ngOnDestroy(){var t;null===(t=this.task)||void 0===t||t.cancel()}storeFile(t){var r=this;return(0,fe.Z)(function*(){var s,u,d,m;r.ffmpegService.isRunning||(r.isDragover=!1,r.file=t.dataTransfer?null!==(u=null===(s=t.dataTransfer)||void 0===s?void 0:s.files.item(0))&&void 0!==u?u:null:null!==(m=null===(d=t.target.files)||void 0===d?void 0:d.item(0))&&void 0!==m?m:null,r.file&&"video/mp4"===r.file.type&&(r.screenshots=yield r.ffmpegService.getScreenshots(r.file),r.selectedScreenshot=r.screenshots[0],r.title.setValue(r.file.name.replace(/\.[^/.]+$/,"")),r.nextStep=!0))})()}uploadFile(){var t=this;return(0,fe.Z)(function*(){t.uploadForm.disable(),t.showAlert=!0,t.alertColor="blue",t.alertMsg="Plz wait. Your clip is being uploaded.",t.inSubmission=!0,t.showPercentage=!0;const r=ZF(),s=`clips/${r}.mp4`,u=yield t.ffmpegService.blobFromURL(t.selectedScreenshot),d=`screenshots/${r}.png`;t.task=t.storage.upload(s,t.file);const m=t.storage.ref(s);t.screenshotTask=t.storage.upload(d,u);const w=t.storage.ref(d);var I;Xs([t.task.percentageChanges(),t.screenshotTask.percentageChanges()]).subscribe(I=>{const[T,x]=I;T&&x&&(t.percentage=(T+x)/200)}),hA([t.task.snapshotChanges(),t.screenshotTask.snapshotChanges()]).pipe(fn(()=>hA([m.getDownloadURL(),w.getDownloadURL()]))).subscribe({next:(I=(0,fe.Z)(function*(T){var x,L;const[G,ie]=T,ke={uid:null===(x=t.user)||void 0===x?void 0:x.uid,displayName:null===(L=t.user)||void 0===L?void 0:L.displayName,title:t.title.value,fileName:`${r}.mp4`,url:G,screenshotURL:ie,screenshotFileName:`${r}.png`,timestamp:Ud.Z.firestore.FieldValue.serverTimestamp()},Oe=yield t.clipsService.createClip(ke);console.log(ke),t.alertColor="green",t.alertMsg="Success! Your clip is ready to be shared.",t.showPercentage=!1,setTimeout(()=>{t.router.navigate(["clip",Oe.id])},1e3)}),function(x){return I.apply(this,arguments)}),error:I=>{t.uploadForm.enable(),t.alertColor="red",t.alertMsg="Upload failed! Plz try again later.",t.inSubmission=!0,t.showPercentage=!1,console.log(I)}})})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(QA),c.Y36(la),c.Y36(JA),c.Y36(Sr),c.Y36(zF))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:8,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],["class","material-symbols-outlined text-center text-6xl p-8 animate-spin",4,"ngIf","ngIfElse"],["uploadEditorCtr",""],[1,"material-symbols-outlined","text-center","text-6xl","p-8","animate-spin"],[4,"ngIf","ngIfElse"],["uploadFormCtr",""],["app-event-blocker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["class","material-symbols-outlined text-center text-6xl p-8 animate-spin",4,"ngIf"],["type","file",1,"mt-4",3,"change"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","border-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[4,"ngIf"],[1,"border-8","cursor-pointer",3,"ngClass","click"],[3,"src"]],template:function(t,r){if(1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2),c._uU(3,"Upload Video"),c.qZA(),c.ynx(4),c.YNc(5,YF,2,0,"span",3),c.BQk(),c.YNc(6,oL,3,2,"ng-template",null,4,c.W1O),c.qZA()()),2&t){const s=c.MAs(7);c.xp6(5),c.Q6J("ngIf",!r.ffmpegService.isReady)("ngIfElse",s)}},directives:[zn,WF,ui,IC,F0,R0,gy,Zn,LA],pipes:[Or,KF],styles:[""]}),n})();var uL=k(9635);const eS=(0,xt.U)(n=>!!n);let tS=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(s,u)=>{const d=s.data.authGuardPipe||(()=>eS);return this.auth.user.pipe((0,ms.q)(1),d(s,u),(0,xt.U)(m=>"boolean"==typeof m?m:Array.isArray(m)?this.router.createUrlTree(m):this.router.parseUrl(m)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sr),c.LFG(la))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const X1=()=>(0,uL.z)(eS,(0,xt.U)(e=>e||"/")),dL=[{path:"manage",component:LF,data:{authOnly:!0,authGuardPipe:X1},canActivate:[tS]},{path:"upload",component:aL,data:{authOnly:!0,authGuardPipe:X1},canActivate:[tS]},{path:"manage-clips",redirectTo:"manage"}];let hL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[lc.forChild(dL)],lc]}),n})(),fL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ls,hL,p1,FA]]}),n})(),pL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[$O]}),n.\u0275inj=c.cJS({providers:[],imports:[[Ma,HO,_i.hO.initializeApp(UA_firebase),Lw,uN,fL,s_,kF]]}),n})();(0,c.G48)(),Ud.Z.initializeApp(UA_firebase);let eR=!1;Ud.Z.auth().onAuthStateChanged(()=>{eR||Al().bootstrapModule(pL).catch(n=>console.error(n)),eR=!0})},5867:(Me,oe,k)=>{"use strict";k.d(oe,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=k(9681);(0,c.registerVersion)("firebase","9.6.10","app")},127:(Me,oe,k)=>{"use strict";k.d(oe,{Z:()=>c.Z});var c=k(3942);c.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(Me,oe,k)=>{"use strict";k.r(oe);var c=k(5861),q=k(3942),N=k(2090),Y=k(9681),Z=k(655),te=k(1877),ee=k(4859);const Ce=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Qe=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},we=new N.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new te.Yd("@firebase/auth");function et(y,...f){st.logLevel<=te.in.ERROR&&st.error(`Auth (${Y.SDK_VERSION}): ${y}`,...f)}function Ie(y,...f){throw Ge(y,...f)}function Ee(y,...f){return Ge(y,...f)}function be(y,f,g){const v=Object.assign(Object.assign({},Qe()),{[f]:g});return new N.LL("auth","Firebase",v).create(f,{appName:y.name})}function He(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ie(y,"argument-error"),be(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return we.create(y,...f)}function ue(y,f,...g){if(!y)throw Ge(f,...g)}function Q(y){const f="INTERNAL ASSERTION FAILED: "+y;throw et(f),new Error(f)}function ce(y,f){y||Q(f)}const me=new Map;function de(y){ce(y instanceof Function,"Expected a class definition");let f=me.get(y);return f?(ce(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,me.set(y,f),f)}function se(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function De(){return"http:"===We()||"https:"===We()}function We(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class wt{constructor(f,g){this.shortDelay=f,this.longDelay=g,ce(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,N.uI)()||(0,N.b$)()}get(){return function Te(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(De()||(0,N.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rt(y,f){ce(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class pn{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qr=new wt(3e4,6e4);function qt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Pt(y,f,g,v){return ir.apply(this,arguments)}function ir(){return(ir=(0,c.Z)(function*(y,f,g,v,S={}){return si(y,S,(0,c.Z)(function*(){let O={},K={};v&&("GET"===f?K=v:O={body:JSON.stringify(v)});const he=(0,N.xO)(Object.assign({key:y.config.apiKey},K)).slice(1),Ze=yield y._getAdditionalHeaders();return Ze["Content-Type"]="application/json",y.languageCode&&(Ze["X-Firebase-Locale"]=y.languageCode),pn.fetch()(Nr(y,y.config.apiHost,g,he),Object.assign({method:f,headers:Ze,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function si(y,f,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Ot),f);try{const S=new rs(y),O=yield Promise.race([g(),S.promise]);S.clearNetworkTimeout();const K=yield O.json();if("needConfirmation"in K)throw is(y,"account-exists-with-different-credential",K);if(O.ok&&!("errorMessage"in K))return K;{const he=O.ok?K.errorMessage:K.error.message,[Ze,at]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw is(y,"credential-already-in-use",K);if("EMAIL_EXISTS"===Ze)throw is(y,"email-already-in-use",K);const bt=v[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw be(y,bt,at);Ie(y,bt)}}catch(S){if(S instanceof N.ZR)throw S;Ie(y,"network-request-failed")}})).apply(this,arguments)}function kr(y,f,g,v){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(y,f,g,v,S={}){const O=yield Pt(y,f,g,v,S);return"mfaPendingCredential"in O&&Ie(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Nr(y,f,g,v){const S=`${f}${g}?${v}`;return y.config.emulator?Rt(y.config,S):`${y.config.apiScheme}://${S}`}class rs{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(Ee(this.auth,"network-request-failed")),qr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function is(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const S=Ee(y,f,v);return S.customData._tokenResponse=g,S}function Zr(){return(Zr=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Xn(y,f){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function oi(y,f){return po.apply(this,arguments)}function po(){return(po=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function gn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Ea(){return(Ea=(0,c.Z)(function*(y,f=!1){const g=(0,N.m9)(y),v=yield g.getIdToken(f),S=ht(v);ue(S&&S.exp&&S.auth_time&&S.iat,g.auth,"internal-error");const O="object"==typeof S.firebase?S.firebase:void 0,K=null==O?void 0:O.sign_in_provider;return{claims:S,token:v,authTime:gn(Wt(S.auth_time)),issuedAtTime:gn(Wt(S.iat)),expirationTime:gn(Wt(S.exp)),signInProvider:K||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Wt(y){return 1e3*Number(y)}function ht(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return et("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,N.tV)(g);return S?JSON.parse(S):(et("Failed to decode base64 JWT payload"),null)}catch(S){return et("Caught error parsing JWT payload as JSON",S),null}}function sr(y,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof N.ZR&&zt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function zt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class go{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const S=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class _r{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=gn(this.lastLoginAt),this.creationTime=gn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(y){return yt.apply(this,arguments)}function yt(){return(yt=(0,c.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),S=yield sr(y,oi(g,{idToken:v}));ue(null==S?void 0:S.users.length,g,"internal-error");const O=S.users[0];y._notifyReloadListener(O);const K=(null===(f=O.providerUserInfo)||void 0===f?void 0:f.length)?xe(O.providerUserInfo):[],he=tt(y.providerData,K),bt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==he?void 0:he.length)),ft={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new _r(O.createdAt,O.lastLoginAt),isAnonymous:bt};Object.assign(y,ft)})).apply(this,arguments)}function Gt(){return(Gt=(0,c.Z)(function*(y){const f=(0,N.m9)(y);yield or(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function tt(y,f){return[...y.filter(v=>!f.some(S=>S.providerId===v.providerId)),...f]}function xe(y){return y.map(f=>{var{providerId:g}=f,v=(0,Z._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function _t(){return(_t=(0,c.Z)(function*(y,f){const g=yield si(y,{},(0,c.Z)(function*(){const v=(0,N.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:O}=y.config,K=Nr(y,S,"/v1/token",`key=${O}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",pn.fetch()(K,{method:"POST",headers:he,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ue(f.idToken,"internal-error"),ue(void 0!==f.idToken,"internal-error"),ue(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function It(y){const f=ht(y);return ue(f,"internal-error"),ue(void 0!==f.exp,"internal-error"),ue(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,c.Z)(function*(){return ue(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,c.Z)(function*(){const{accessToken:S,refreshToken:O,expiresIn:K}=yield function ot(y,f){return _t.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(S,O,Number(K))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:S,expirationTime:O}=g,K=new Zt;return v&&(ue("string"==typeof v,"internal-error",{appName:f}),K.refreshToken=v),S&&(ue("string"==typeof S,"internal-error",{appName:f}),K.accessToken=S),O&&(ue("number"==typeof O,"internal-error",{appName:f}),K.expirationTime=O),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Zt,this.toJSON())}_performRefresh(){return Q("not implemented")}}function $t(y,f){ue("string"==typeof y||void 0===y,"internal-error",{appName:f})}class H{constructor(f){var{uid:g,auth:v,stsTokenManager:S}=f,O=(0,Z._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new go(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new _r(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const v=yield sr(g,g.stsTokenManager.getToken(g.auth,f));return ue(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function Ls(y){return Ea.apply(this,arguments)}(this,f)}reload(){return function vr(y){return Gt.apply(this,arguments)}(this)}_assign(f){this!==f&&(ue(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new H(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,c.Z)(function*(){let S=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),S=!0),g&&(yield or(v)),yield v.auth._persistUserIfCurrent(v),S&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield sr(f,function pt(y,f){return Zr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,S,O,K,he,Ze,at,bt;const ft=null!==(v=g.displayName)&&void 0!==v?v:void 0,Sn=null!==(S=g.email)&&void 0!==S?S:void 0,Qi=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,uc=null!==(K=g.photoURL)&&void 0!==K?K:void 0,ku=null!==(he=g.tenantId)&&void 0!==he?he:void 0,Nu=null!==(Ze=g._redirectEventId)&&void 0!==Ze?Ze:void 0,sf=null!==(at=g.createdAt)&&void 0!==at?at:void 0,zy=null!==(bt=g.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:oa,emailVerified:xd,isAnonymous:Md,providerData:af,stsTokenManager:Rd}=g;ue(oa&&Rd,f,"internal-error");const Sr=Zt.fromJSON(this.name,Rd);ue("string"==typeof oa,f,"internal-error"),$t(ft,f.name),$t(Sn,f.name),ue("boolean"==typeof xd,f,"internal-error"),ue("boolean"==typeof Md,f,"internal-error"),$t(Qi,f.name),$t(uc,f.name),$t(ku,f.name),$t(Nu,f.name),$t(sf,f.name),$t(zy,f.name);const uf=new H({uid:oa,auth:f,email:Sn,emailVerified:xd,displayName:ft,isAnonymous:Md,photoURL:uc,phoneNumber:Qi,tenantId:ku,stsTokenManager:Sr,createdAt:sf,lastLoginAt:zy});return af&&Array.isArray(af)&&(uf.providerData=af.map(ag=>Object.assign({},ag))),Nu&&(uf._redirectEventId=Nu),uf}static _fromIdTokenResponse(f,g,v=!1){return(0,c.Z)(function*(){const S=new Zt;S.updateFromServerResponse(g);const O=new H({uid:g.localId,auth:f,stsTokenManager:S,isAnonymous:v});return yield or(O),O})()}}const z=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,v){var S=this;return(0,c.Z)(function*(){S.storage[g]=v})()}_get(g){var v=this;return(0,c.Z)(function*(){const S=v.storage[g];return void 0===S?null:S})()}_remove(g){var v=this;return(0,c.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function ye(y,f,g){return`firebase:${y}:${f}:${g}`}class re{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:S,name:O}=this.auth;this.fullUserKey=ye(this.userKey,S.apiKey,O),this.fullPersistenceKey=ye("persistence",S.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?H._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,c.Z)(function*(){if(!g.length)return new re(de(z),f,v);const S=(yield Promise.all(g.map(function(){var at=(0,c.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return at.apply(this,arguments)}}()))).filter(at=>at);let O=S[0]||de(z);const K=ye(v,f.config.apiKey,f.name);let he=null;for(const at of g)try{const bt=yield at._get(K);if(bt){const ft=H._fromJSON(f,bt);at!==O&&(he=ft),O=at;break}}catch(bt){}const Ze=S.filter(at=>at._shouldAllowMigration);return O._shouldAllowMigration&&Ze.length?(O=Ze[0],he&&(yield O._set(K,he.toJSON())),yield Promise.all(g.map(function(){var at=(0,c.Z)(function*(bt){if(bt!==O)try{yield bt._remove(K)}catch(ft){}});return function(bt){return at.apply(this,arguments)}}())),new re(O,f,v)):new re(O,f,v)})()}}function qe(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Kt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Et(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ut(f))return"Blackberry";if(ln(f))return"Webos";if(Jt(f))return"Safari";if((f.includes("chrome/")||wr(f))&&!f.includes("edge/"))return"Chrome";if(Cn(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Et(y=(0,N.z$)()){return/firefox\//i.test(y)}function Jt(y=(0,N.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function wr(y=(0,N.z$)()){return/crios\//i.test(y)}function Kt(y=(0,N.z$)()){return/iemobile/i.test(y)}function Cn(y=(0,N.z$)()){return/android/i.test(y)}function Ut(y=(0,N.z$)()){return/blackberry/i.test(y)}function ln(y=(0,N.z$)()){return/webos/i.test(y)}function tr(y=(0,N.z$)()){return/iphone|ipad|ipod/i.test(y)}function ss(y=(0,N.z$)()){return tr(y)||Cn(y)||ln(y)||Ut(y)||/windows phone/i.test(y)||Kt(y)}function Ca(y,f=[]){let g;switch(y){case"Browser":g=qe((0,N.z$)());break;case"Worker":g=`${qe((0,N.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${Y.SDK_VERSION}/${v}`}class ai{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bt(this),this.idTokenSubscription=new Bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=we,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=de(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var S,O;if(!v._deleted&&(v.persistenceManager=yield re.create(v,f),!v._deleted)){if(null===(S=v._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(K){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(O=v.currentUser)||void 0===O?void 0:O.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var v;let S=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const O=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,K=null==S?void 0:S._redirectEventId,he=yield g.tryRedirectSignIn(f);(!O||O===K)&&(null==he?void 0:he.user)&&(S=he.user)}return S?S._redirectEventId?(ue(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===S._redirectEventId?g.directlySetCurrentUser(S):g.reloadAndSetCurrentUserOrClear(S)):g.reloadAndSetCurrentUserOrClear(S):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(S){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield or(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const v=f?(0,N.m9)(f):null;return v&&ue(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){if(!g._deleted)return f&&ue(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,c.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(de(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new N.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,c.Z)(function*(){const S=yield v.getOrInitRedirectPersistenceManager(g);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&de(f)||g._popupRedirectResolver;ue(v,g,"argument-error"),g.redirectPersistenceManager=yield re.create(g,[de(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var v,S;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(S=g.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,S){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),K=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(K,this,"internal-error"),K.then(()=>O(this.currentUser)),"function"==typeof g?f.addObserver(g,v,S):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ca(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return S&&(v["X-Firebase-Client"]=S),v})()}}function Ve(y){return(0,N.m9)(y)}class Bt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,N.ne)(g=>this.observer=g)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ar(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Fn(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class sn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Q("not implemented")}_getIdTokenResponse(f){return Q("not implemented")}_linkToIdToken(f,g){return Q("not implemented")}_getReauthenticationResolver(f){return Q("not implemented")}}function kn(y,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:resetPassword",qt(y,f))})).apply(this,arguments)}function Lt(y,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ui(y,f){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",qt(y,f))})).apply(this,arguments)}function Zn(){return(Zn=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithPassword",qt(y,f))})).apply(this,arguments)}function os(y,f){return as.apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendOobCode",qt(y,f))})).apply(this,arguments)}function zn(y,f){return on.apply(this,arguments)}function on(){return(on=(0,c.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function iu(y,f){return su.apply(this,arguments)}function su(){return(su=(0,c.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function Ci(y,f){return li.apply(this,arguments)}function li(){return(li=(0,c.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function zc(y,f){return js.apply(this,arguments)}function js(){return(js=(0,c.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}function Wc(){return(Wc=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}class au extends sn{constructor(f,g,v,S=null){super("password",v),this._email=f,this._password=g,this._tenantId=S}static _fromEmailAndPassword(f,g){return new au(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new au(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function Bs(y,f){return Zn.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function ou(y,f){return zr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return Lt(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function xh(y,f){return Wc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ln(y,f){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithIdp",qt(y,f))})).apply(this,arguments)}class us extends sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new us(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ie("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:S}=g,O=(0,Z._T)(g,["providerId","signInMethod"]);if(!v||!S)return null;const K=new us(v,S);return K.idToken=O.idToken||void 0,K.accessToken=O.accessToken||void 0,K.secret=O.secret,K.nonce=O.nonce,K.pendingToken=O.pendingToken||null,K}_getIdTokenResponse(f){return Ln(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Ln(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ln(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,N.xO)(g)}return f}}function Pp(y,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,f))})).apply(this,arguments)}function $s(){return($s=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f))})).apply(this,arguments)}function Yc(){return(Yc=(0,c.Z)(function*(y,f){const g=yield kr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f));if(g.temporaryProof)throw is(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function Qc(){return(Qc=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class qo extends sn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new qo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new qo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function yl(y,f){return $s.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Fp(y,f){return Yc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Up(y,f){return Qc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:S}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:S,temporaryProof:O}=f;return v||g||S||O?new qo({verificationId:g,verificationCode:v,phoneNumber:S,temporaryProof:O}):null}}class yo{constructor(f){var g,v,S,O,K,he;const Ze=(0,N.zd)((0,N.pd)(f)),at=null!==(g=Ze.apiKey)&&void 0!==g?g:null,bt=null!==(v=Ze.oobCode)&&void 0!==v?v:null,ft=function vy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ze.mode)&&void 0!==S?S:null);ue(at&&bt&&ft,"argument-error"),this.apiKey=at,this.operation=ft,this.code=bt,this.continueUrl=null!==(O=Ze.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(K=Ze.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(he=Ze.tenantId)&&void 0!==he?he:null}static parseLink(f){const g=function lu(y){const f=(0,N.zd)((0,N.pd)(y)).link,g=f?(0,N.zd)((0,N.pd)(f)).deep_link_id:null,v=(0,N.zd)((0,N.pd)(y)).deep_link_id;return(v?(0,N.zd)((0,N.pd)(v)).link:null)||v||g||f||y}(f);try{return new yo(g)}catch(v){return null}}}let _l=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return au._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const S=yo.parseLink(v);return ue(S,"argument-error"),au._fromEmailAndCode(g,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Or extends Hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Zo extends Or{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ue("providerId"in g&&"signInMethod"in g,"argument-error"),us._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ue(f.idToken||f.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Zo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Zo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:S,pendingToken:O,nonce:K,providerId:he}=f;if(!v&&!S&&!g&&!O||!he)return null;try{return new Zo(he)._credential({idToken:g,accessToken:v,nonce:K,pendingToken:O})}catch(Ze){return null}}}let _o=(()=>{class y extends Or{constructor(){super("facebook.com")}static credential(g){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Da=(()=>{class y extends Or{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:S}=g;if(!v&&!S)return null;try{return y.credential(v,S)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Jc=(()=>{class y extends Or{constructor(){super("github.com")}static credential(g){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ls extends sn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ln(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Ln(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ln(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:S,pendingToken:O}=g;return v&&S&&O&&v===S?new ls(v,O):null}static _create(f,g){return new ls(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ci extends Hs{constructor(f){ue(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ci.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ci.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ls.fromJSON(f);return ue(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return ls._create(v,g)}catch(S){return null}}}let cu=(()=>{class y extends Or{constructor(){super("twitter.com")}static credential(g,v){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:S}=g;if(!v||!S)return null;try{return y.credential(v,S)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function du(y,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signUp",qt(y,f))})).apply(this,arguments)}class ur{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,S=!1){return(0,c.Z)(function*(){const O=yield H._fromIdTokenResponse(f,v,S),K=Rh(v);return new ur({user:O,providerId:K,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const S=Rh(v);return new ur({user:f,providerId:S,_tokenResponse:v,operationType:g})})()}}function Rh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Xc(){return(Xc=(0,c.Z)(function*(y){var f;const g=Ve(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ur({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield du(g,{returnSecureToken:!0}),S=yield ur._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class fu extends N.ZR{constructor(f,g,v,S){var O;super(g.code,g.message),this.operationType=v,this.user=S,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,S){return new fu(f,g,v,S)}}function pu(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?fu._fromErrorAndOperation(y,O,f,v):O})}function cs(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function vl(){return(vl=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y);yield qs(!0,g,f);const{providerUserInfo:v}=yield Xn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),S=cs(v||[]);return g.providerData=g.providerData.filter(O=>S.has(O.providerId)),S.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function hn(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(y,f,g=!1){const v=yield sr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ur._forOperation(y,"link",v)})).apply(this,arguments)}function qs(y,f,g){return an.apply(this,arguments)}function an(){return(an=(0,c.Z)(function*(y,f,g){yield or(f);const S=!1===y?"provider-already-linked":"no-such-provider";ue(cs(f.providerData).has(g)===y,f.auth,S)})).apply(this,arguments)}function ed(y,f){return vo.apply(this,arguments)}function vo(){return(vo=(0,c.Z)(function*(y,f,g=!1){const{auth:v}=y,S="reauthenticate";try{const O=yield sr(y,pu(v,S,f,y),g);ue(O.idToken,v,"internal-error");const K=ht(O.idToken);ue(K,v,"internal-error");const{sub:he}=K;return ue(y.uid===he,v,"user-mismatch"),ur._forOperation(y,S,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Ie(v,"user-mismatch"),O}})).apply(this,arguments)}function wo(y,f){return Er.apply(this,arguments)}function Er(){return(Er=(0,c.Z)(function*(y,f,g=!1){const v="signIn",S=yield pu(y,v,f),O=yield ur._fromIdTokenResponse(y,v,S);return g||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Nn(y,f){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,c.Z)(function*(y,f){return wo(Ve(y),f)})).apply(this,arguments)}function Ii(y,f){return br.apply(this,arguments)}function br(){return(br=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y);return yield qs(!1,g,f.providerId),hn(g,f)})).apply(this,arguments)}function Zs(y,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(y,f){return ed((0,N.m9)(y),f)})).apply(this,arguments)}function gu(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,c.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,f))})).apply(this,arguments)}function Ws(){return(Ws=(0,c.Z)(function*(y,f){const g=Ve(y),v=yield gu(g,{token:f,returnSecureToken:!0}),S=yield ur._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(S.user),S})).apply(this,arguments)}class vt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?mu._fromServerResponse(f,g):Ie(f,"internal-error")}}class mu extends vt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new mu(g)}}function Sa(y,f,g){var v;ue((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ue(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ue(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ue(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function _u(){return(_u=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y),S={requestType:"PASSWORD_RESET",email:f};g&&Sa(v,S,g),yield iu(v,S)})).apply(this,arguments)}function wl(){return(wl=(0,c.Z)(function*(y,f,g){yield kn((0,N.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ae(){return(Ae=(0,c.Z)(function*(y,f){yield ui((0,N.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ht(y,f){return bl.apply(this,arguments)}function bl(){return(bl=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y),v=yield kn(g,{oobCode:f}),S=v.requestType;switch(ue(S,g,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(v.mfaInfo,g,"internal-error");default:ue(v.email,g,"internal-error")}let O=null;return v.mfaInfo&&(O=vt._fromServerResponse(Ve(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:O},operation:S}})).apply(this,arguments)}function Wo(){return(Wo=(0,c.Z)(function*(y,f){const{data:g}=yield Ht((0,N.m9)(y),f);return g.email})).apply(this,arguments)}function Yr(){return(Yr=(0,c.Z)(function*(y,f,g){const v=Ve(y),S=yield du(v,{returnSecureToken:!0,email:f,password:g}),O=yield ur._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}function td(){return(td=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y),S={requestType:"EMAIL_SIGNIN",email:f};ue(g.handleCodeInApp,v,"argument-error"),g&&Sa(v,S,g),yield Ci(v,S)})).apply(this,arguments)}function Ks(){return(Ks=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y),S=_l.credentialWithLink(f,g||se());return ue(S._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Nn(v,S)})).apply(this,arguments)}function lr(y,f){return di.apply(this,arguments)}function di(){return(di=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:createAuthUri",qt(y,f))})).apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(y,f){const v={identifier:f,continueUri:De()?se():"http://localhost"},{signinMethods:S}=yield lr((0,N.m9)(y),v);return S||[]})).apply(this,arguments)}function Tl(){return(Tl=(0,c.Z)(function*(y,f){const g=(0,N.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Sa(g.auth,S,f);const{email:O}=yield zn(g.auth,S);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Cu(){return(Cu=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Sa(v.auth,O,g);const{email:K}=yield zc(v.auth,O);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function Al(y,f){return xa.apply(this,arguments)}function xa(){return(xa=(0,c.Z)(function*(y,f){return Pt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,N.m9)(y),O={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},K=yield sr(v,Al(v.auth,O));v.displayName=K.displayName||null,v.photoURL=K.photoUrl||null;const he=v.providerData.find(({providerId:Ze})=>"password"===Ze);he&&(he.displayName=v.displayName,he.photoURL=v.photoURL),yield v._updateTokensIfNecessary(K)})).apply(this,arguments)}function Ml(y,f,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,c.Z)(function*(y,f,g){const{auth:v}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(O.email=f),g&&(O.password=g);const K=yield sr(y,Lt(v,O));yield y._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class bo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class id extends bo{constructor(f,g,v,S){super(f,g,v),this.username=S}}class sd extends bo{constructor(f,g){super(f,"facebook.com",g)}}class Co extends id{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Qs extends bo{constructor(f,g){super(f,"google.com",g)}}class Rl extends id{constructor(f,g,v){super(f,"twitter.com",g,v)}}function Cr(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function rd(y){var f,g;if(!y)return null;const{providerId:v}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const K=null===(g=null===(f=ht(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(K)return new bo(O,"anonymous"!==K&&"custom"!==K?K:null)}if(!v)return null;switch(v){case"facebook.com":return new sd(O,S);case"github.com":return new Co(O,S);case"google.com":return new Qs(O,S);case"twitter.com":return new Rl(O,S,y.screenName||null);case"custom":case"anonymous":return new bo(O,null);default:return new bo(O,v,S)}}(g)}class hs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new hs("enroll",f)}static _fromMfaPendingCredential(f){return new hs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return hs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return hs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ra{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=Ve(f),S=g.customData._serverResponse,O=(S.mfaInfo||[]).map(he=>vt._fromServerResponse(v,he));ue(S.mfaPendingCredential,v,"internal-error");const K=hs._fromMfaPendingCredential(S.mfaPendingCredential);return new Ra(K,O,function(){var he=(0,c.Z)(function*(Ze){const at=yield Ze._process(v,K);delete S.mfaInfo,delete S.mfaPendingCredential;const bt=Object.assign(Object.assign({},S),{idToken:at.idToken,refreshToken:at.refreshToken});switch(g.operationType){case"signIn":const ft=yield ur._fromIdTokenResponse(v,g.operationType,bt);return yield v._updateCurrentUser(ft.user),ft;case"reauthenticate":return ue(g.user,v,"internal-error"),ur._forOperation(g.user,g.operationType,bt);default:Ie(v,"internal-error")}});return function(Ze){return he.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Un(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,f))}class fs{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>vt._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new fs(f)}getSession(){var f=this;return(0,c.Z)(function*(){return hs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,c.Z)(function*(){const S=f,O=yield v.getSession(),K=yield sr(v.user,S._process(v.user.auth,O,g));return yield v.user._updateTokensIfNecessary(K),v.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const v="string"==typeof f?f:f.uid,S=yield g.user.getIdToken(),O=yield sr(g.user,function Bp(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,f))}(g.user.auth,{idToken:S,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:K})=>K!==v),yield g.user._updateTokensIfNecessary(O);try{yield g.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const Yo=new WeakMap,Ol="__sak";class ps{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ol,"1"),this.storage.removeItem(Ol),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const On=(()=>{class y extends ps{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pl(){const y=(0,N.z$)();return Jt(y)||tr(y)}()&&function qn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ss(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const S=this.storage.getItem(v),O=this.localCache[v];S!==O&&g(v,O,S)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((he,Ze,at)=>{this.notifyListeners(he,at)});const S=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(S);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(S,g.newValue):this.storage.removeItem(S);else if(this.localCache[S]===g.newValue&&!v)return}const O=()=>{const he=this.storage.getItem(S);!v&&this.localCache[S]===he||this.notifyListeners(S,he)},K=this.storage.getItem(S);!function ba(){return(0,N.w1)()&&10===document.documentMode}()||K===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,v){this.localCache[g]=v;const S=this.listeners[g];if(S)for(const O of Array.from(S))O(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var S=()=>super._set,O=this;return(0,c.Z)(function*(){yield S().call(O,g,v),O.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,S=this;return(0,c.Z)(function*(){const O=yield v().call(S,g);return S.localCache[g]=JSON.stringify(O),O})()}_remove(g){var v=()=>super._remove,S=this;return(0,c.Z)(function*(){yield v().call(S,g),delete S.localCache[g]})()}}return y.type="LOCAL",y})(),cr=(()=>{class y extends ps{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Ir=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(O=>O.isListeningto(g));if(v)return v;const S=new y(g);return this.receivers.push(S),S}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,c.Z)(function*(){const S=g,{eventId:O,eventType:K,data:he}=S.data,Ze=v.handlersMap[K];if(!(null==Ze?void 0:Ze.size))return;S.ports[0].postMessage({status:"ack",eventId:O,eventType:K});const at=Array.from(Ze).map(function(){var ft=(0,c.Z)(function*(Sn){return Sn(S.origin,he)});return function(Sn){return ft.apply(this,arguments)}}()),bt=yield function Pr(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(at);S.ports[0].postMessage({status:"done",eventId:O,eventType:K,response:bt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Qo(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class cd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var S=this;return(0,c.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let K,he;return new Promise((Ze,at)=>{const bt=Qo("",20);O.port1.start();const ft=setTimeout(()=>{at(new Error("unsupported_event"))},v);he={messageChannel:O,onMessage(Sn){const Qi=Sn;if(Qi.data.eventId===bt)switch(Qi.data.status){case"ack":clearTimeout(ft),K=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),Ze(Qi.data.response);break;default:clearTimeout(ft),clearTimeout(K),at(new Error("invalid_response"))}}},S.handlers.add(he),O.port1.addEventListener("message",he.onMessage),S.target.postMessage({eventType:f,eventId:bt,data:g},[O.port2])}).finally(()=>{he&&S.removeMessageHandler(he)})})()}}function dn(){return window}function Ti(){return void 0!==dn().WorkerGlobalScope&&"function"==typeof dn().importScripts}function hi(){return(hi=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Fl="firebaseLocalStorageDb",Io="firebaseLocalStorage",Dn="fbase_key";class gs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Xs(y,f){return y.transaction([Io],f?"readwrite":"readonly").objectStore(Io)}function eo(){const y=indexedDB.open(Fl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Io,{keyPath:Dn})}catch(S){g(S)}}),y.addEventListener("success",(0,c.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Io)?f(v):(v.close(),yield function fi(){const y=indexedDB.deleteDatabase(Fl);return new gs(y).toPromise()}(),f(yield eo()))}))})}function ka(y,f,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(y,f,g){const v=Xs(y,!0).put({[Dn]:f,value:g});return new gs(v).toPromise()})).apply(this,arguments)}function to(){return(to=(0,c.Z)(function*(y,f){const g=Xs(y,!1).get(f),v=yield new gs(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Gi(y,f){const g=Xs(y,!0).delete(f);return new gs(g).toPromise()}const Ai=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield eo()),g.db})()}_withRetries(g){var v=this;return(0,c.Z)(function*(){let S=0;for(;;)try{const O=yield v._openDb();return yield g(O)}catch(O){if(S++>3)throw O;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Ti()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=Ir._getInstance(function dd(){return Ti()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,c.Z)(function*(S,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(S,O){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,c.Z)(function*(S,O){return["keyChanged"]});return function(S,O){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var v,S;if(g.activeServiceWorker=yield function Du(){return hi.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new cd(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);!O||(null===(v=O[0])||void 0===v?void 0:v.fulfilled)&&(null===(S=O[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,c.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function xt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield eo();return yield ka(g,Ol,"1"),yield Gi(g,Ol),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,c.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var S=this;return(0,c.Z)(function*(){return S._withPendingWrite((0,c.Z)(function*(){return yield S._withRetries(O=>ka(O,g,v)),S.localCache[g]=v,S.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,c.Z)(function*(){const S=yield v._withRetries(O=>function Ll(y,f){return to.apply(this,arguments)}(O,g));return v.localCache[g]=S,S})()}_remove(g){var v=this;return(0,c.Z)(function*(){return v._withPendingWrite((0,c.Z)(function*(){return yield v._withRetries(S=>Gi(S,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const v=yield g._withRetries(K=>{const he=Xs(K,!1).getAll();return new gs(he).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const S=[],O=new Set;for(const{fbase_key:K,value:he}of v)O.add(K),JSON.stringify(g.localCache[K])!==JSON.stringify(he)&&(g.notifyListeners(K,he),S.push(K));for(const K of Object.keys(g.localCache))g.localCache[K]&&!O.has(K)&&(g.notifyListeners(K,null),S.push(K));return S})()}notifyListeners(g,v){this.localCache[g]=v;const S=this.listeners[g];if(S)for(const O of Array.from(S))O(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Xo(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,f))}function Si(){return(Si=(0,c.Z)(function*(y){return(yield Pt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fn(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=S=>{const O=Ee("internal-error");O.customData=S,g(O)},v.type="text/javascript",v.charset="UTF-8",function fd(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function ms(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Dr=1e12;class qi{constructor(f){this.auth=f,this.counter=Dr,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Zi(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||Dr;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Dr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var v;return null===(v=g._widgets.get(f||Dr))||void 0===v||v.execute(),""})()}}class Zi{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;ue(S,"argument-error",{appName:g}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vn(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const no=ms("rcb"),pd=new wt(3e4,6e4);class $p{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!dn().grecaptcha}load(f,g=""){return ue(function Hp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(dn().grecaptcha):new Promise((v,S)=>{const O=dn().setTimeout(()=>{S(Ee(f,"network-request-failed"))},pd.get());dn()[no]=()=>{dn().clearTimeout(O),delete dn()[no];const he=dn().grecaptcha;if(!he)return void S(Ee(f,"internal-error"));const Ze=he.render;he.render=(at,bt)=>{const ft=Ze(at,bt);return this.counter++,ft},this.hostLanguage=g,v(he)},fn(`https://www.google.com/recaptcha/api.js??${(0,N.xO)({onload:no,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),S(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!dn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gp{load(f){return(0,c.Z)(function*(){return new qi(f)})()}clearedOneInstance(){}}const ro="recaptcha",Qr={theme:"light",type:"image"};class qp{constructor(f,g=Object.assign({},Qr),v){this.parameters=g,this.type=ro,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ve(v),this.isInvisible="invisible"===this.parameters.size,ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;ue(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gp:new $p,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(O=>{const K=he=>{!he||(f.tokenChangeListeners.delete(K),O(he))};f.tokenChangeListeners.add(K),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=dn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){ue(De()&&!Ti(),f.auth,"internal-error"),yield function io(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function dr(y){return Si.apply(this,arguments)}(f.auth);ue(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ys{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=qo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function wn(){return(wn=(0,c.Z)(function*(y,f,g){const v=Ve(y),S=yield hr(v,f,(0,N.m9)(g));return new ys(S,O=>Nn(v,O))})).apply(this,arguments)}function ta(){return(ta=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y);yield qs(!1,v,"phone");const S=yield hr(v.auth,f,(0,N.m9)(g));return new ys(S,O=>Ii(v,O))})).apply(this,arguments)}function jl(){return(jl=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y),S=yield hr(v.auth,f,(0,N.m9)(g));return new ys(S,O=>Zs(v,O))})).apply(this,arguments)}function hr(y,f,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,c.Z)(function*(y,f,g){var v;const S=yield g.verify();try{let O;if(ue("string"==typeof S,y,"argument-error"),ue(g.type===ro,y,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const K=O.session;if("phoneNumber"in O)return ue("enroll"===K.type,y,"internal-error"),(yield Un(y,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ue("signin"===K.type,y,"internal-error");const he=(null===(v=O.multiFactorHint)||void 0===v?void 0:v.uid)||O.multiFactorUid;return ue(he,y,"missing-multi-factor-info"),(yield Xo(y,{mfaPendingCredential:K.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield Pp(y,{phoneNumber:O.phoneNumber,recaptchaToken:S});return K}}finally{g._reset()}})).apply(this,arguments)}function _s(){return(_s=(0,c.Z)(function*(y,f){yield hn((0,N.m9)(y),f)})).apply(this,arguments)}let Mi=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Ve(g)}verifyPhoneNumber(g,v){return hr(this.auth,g,(0,N.m9)(v))}static credential(g,v){return qo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:S}=g;return v&&S?qo._fromTokenResponse(v,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function zi(y,f){return f?de(f):(ue(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Pa extends sn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ln(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ln(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ln(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Hl(y){return wo(y.auth,new Pa(y),y.bypassAuthState)}function Gl(y){const{auth:f,user:g}=y;return ue(g,f,"internal-error"),ed(g,new Pa(y),y.bypassAuthState)}function jt(y){return ql.apply(this,arguments)}function ql(){return(ql=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return ue(g,f,"internal-error"),hn(g,new Pa(y),y.bypassAuthState)})).apply(this,arguments)}class Wn{constructor(f,g,v,S,O=!1){this.auth=f,this.resolver=v,this.user=S,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(v,S){f.pendingPromise={resolve:v,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(v,S){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:v,sessionId:S,postBody:O,tenantId:K,error:he,type:Ze}=f;if(he)return void g.reject(he);const at={auth:g.auth,requestUri:v,sessionId:S,tenantId:K||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ze)(at))}catch(bt){g.reject(bt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Hl;case"linkViaPopup":case"linkViaRedirect":return jt;case"reauthViaPopup":case"reauthViaRedirect":return Gl;default:Ie(this.auth,"internal-error")}}resolve(f){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zl=new wt(2e3,1e4);function gd(){return(gd=(0,c.Z)(function*(y,f,g){const v=Ve(y);He(y,f,Hs);const S=zi(v,g);return new Ki(v,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y);He(v.auth,f,Hs);const S=zi(v.auth,g);return new Ki(v.auth,"reauthViaPopup",f,S,v).executeNotNull()})).apply(this,arguments)}function Au(){return(Au=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y);He(v.auth,f,Hs);const S=zi(v.auth,g);return new Ki(v.auth,"linkViaPopup",f,S,v).executeNotNull()})).apply(this,arguments)}let Ki=(()=>{class y extends Wn{constructor(g,v,S,O,K){super(g,v,O,K),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const v=yield g.execute();return ue(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,c.Z)(function*(){ce(1===g.filter.length,"Popup operations only handle one event");const v=Qo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(S=>{g.reject(S)}),g.resolver._isIframeWebStorageSupported(g.auth,S=>{S||g.reject(Ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,S;this.pollId=(null===(S=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Zl.get())};g()}}return y.currentPopupAction=null,y})();const Yi=new Map;class Vn extends Wn{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let v=Yi.get(g.auth._key());if(!v){try{const O=(yield function gi(y,f){return zl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(O)}catch(S){v=()=>Promise.reject(S)}Yi.set(g.auth._key(),v)}return g.bypassAuthState||Yi.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const S=yield v.auth._redirectUserForId(f.eventId);if(S)return v.user=S,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function zl(){return(zl=(0,c.Z)(function*(y,f){const g=D(f),v=C(y);if(!(yield v._isAvailable()))return!1;const S="true"===(yield v._get(g));return yield v._remove(g),S})).apply(this,arguments)}function To(y,f){return na.apply(this,arguments)}function na(){return(na=(0,c.Z)(function*(y,f){return C(y)._set(D(f),"true")})).apply(this,arguments)}function C(y){return de(y._redirectPersistence)}function D(y){return ye("pendingRedirect",y.config.apiKey,y.name)}function J(){return(J=(0,c.Z)(function*(y,f,g){const v=Ve(y);He(y,f,Hs);const S=zi(v,g);return yield To(S,v),S._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function Fe(){return(Fe=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y);He(v.auth,f,Hs);const S=zi(v.auth,g);yield To(S,v.auth);const O=yield Ao(v);return S._openRedirect(v.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Vt(){return(Vt=(0,c.Z)(function*(y,f,g){const v=(0,N.m9)(y);He(v.auth,f,Hs);const S=zi(v.auth,g);yield qs(!1,v,f.providerId),yield To(S,v.auth);const O=yield Ao(v);return S._openRedirect(v.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function Bn(){return(Bn=(0,c.Z)(function*(y,f){return yield Ve(y)._initializationPromise,An(y,f,!1)})).apply(this,arguments)}function An(y,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,c.Z)(function*(y,f,g=!1){const v=Ve(y),S=zi(v,f),K=yield new Vn(v,S,g).execute();return K&&!g&&(delete K.user._redirectEventId,yield v._persistUserIfCurrent(K.user),yield v._setRedirectUser(null,f)),K})).apply(this,arguments)}function Ao(y){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(y){const f=Qo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ri{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Wl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yd(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!yd(f)){const S=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(Ee(this.auth,S))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(So(f))}saveEventToCache(f){this.cachedEventUids.add(So(f)),this.lastProcessedEventTime=Date.now()}}function So(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function yd({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Kl(y){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,c.Z)(function*(y,f={}){return Pt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const zp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,by=/^https?/;function vs(){return(vs=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Kl(y);for(const g of f)try{if(Yl(g))return}catch(v){}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function Yl(y){const f=se(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const K=new URL(y);return""===K.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&K.hostname===v}if(!by.test(g))return!1;if(zp.test(y))return v===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(v)}const Iy=new wt(3e4,6e4);function Dy(){const y=dn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let _d=null;function Ty(y){return _d=_d||function Wp(y){return new Promise((f,g)=>{var v,S,O;function K(){Dy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Dy(),g(Ee(y,"network-request-failed"))},timeout:Iy.get()})}if(null===(S=null===(v=dn().gapi)||void 0===v?void 0:v.iframes)||void 0===S?void 0:S.Iframe)f(gapi.iframes.getContext());else{if(!(null===(O=dn().gapi)||void 0===O?void 0:O.load)){const he=ms("iframefcb");return dn()[he]=()=>{gapi.load?K():g(Ee(y,"network-request-failed"))},fn(`https://apis.google.com/js/api.js?onload=${he}`).catch(Ze=>g(Ze))}K()}}).catch(f=>{throw _d=null,f})}(y),_d}const Nh=new wt(5e3,15e3),Mo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function La(y){const f=y.config;ue(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?Rt(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:Y.SDK_VERSION},S=vd.get(y.config.apiHost);S&&(v.eid=S);const O=y._getFrameworks();return O.length&&(v.fw=O.join(",")),`${g}?${(0,N.xO)(v).slice(1)}`}function ws(){return ws=(0,c.Z)(function*(y){const f=yield Ty(y),g=dn().gapi;return ue(g,y,"internal-error"),f.open({where:document.body,url:La(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mo,dontclear:!0},v=>new Promise(function(){var S=(0,c.Z)(function*(O,K){yield v.restyle({setHideOnLeave:!1});const he=Ee(y,"network-request-failed"),Ze=dn().setTimeout(()=>{K(he)},Nh.get());function at(){dn().clearTimeout(Ze),O(v)}v.ping(at).then(at,()=>{K(he)})});return function(O,K){return S.apply(this,arguments)}}()))}),ws.apply(this,arguments)}const Sy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Lh(y,f,g,v,S,O){ue(y.config.authDomain,y,"auth-domain-config-required"),ue(y.config.apiKey,y,"invalid-api-key");const K={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:Y.SDK_VERSION,eventId:S};if(f instanceof Hs){f.setDefaultLanguage(y.languageCode),K.providerId=f.providerId||"",(0,N.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ze,at]of Object.entries(O||{}))K[Ze]=at}if(f instanceof Or){const Ze=f.getScopes().filter(at=>""!==at);Ze.length>0&&(K.scopes=Ze.join(","))}y.tenantId&&(K.tid=y.tenantId);const he=K;for(const Ze of Object.keys(he))void 0===he[Ze]&&delete he[Ze];return`${function My({config:y}){return y.emulator?Rt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,N.xO)(he).slice(1)}`}const Es="webStorageSupport";class Cd extends class Uh{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return Q("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Cd(f)}_finalizeEnroll(f,g,v){return function ad(y,f){return Pt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Na(y,f){return Pt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Kp=(()=>{class y{constructor(){}static assertion(g){return Cd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Yp="@firebase/auth",Id="0.19.11";class Qp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var S;f((null===(S=v)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oo(){return window}function Va(){return(Va=(0,c.Z)(function*(y,f,g){var v;const{BuildInfo:S}=oo();ce(f.sessionId,"AuthEvent did not contain a session ID");const O=yield Ba(f.sessionId),K={};return tr()?K.ibi=S.packageName:Cn()?K.apn=S.packageName:Ie(y,"operation-not-supported-in-this-environment"),S.displayName&&(K.appDisplayName=S.displayName),K.sessionId=O,Lh(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,K)})).apply(this,arguments)}function ki(){return(ki=(0,c.Z)(function*(y){const{BuildInfo:f}=oo(),g={};tr()?g.iosBundleId=f.packageName:Cn()?g.androidPackageName=f.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Kl(y,g)})).apply(this,arguments)}function Dd(){return(Dd=(0,c.Z)(function*(y,f,g){const{cordova:v}=oo();let S=()=>{};try{yield new Promise((O,K)=>{let he=null;function Ze(){var ft;O();const Sn=null===(ft=v.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Sn&&Sn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function at(){he||(he=window.setTimeout(()=>{K(Ee(y,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===(null==document?void 0:document.visibilityState)&&at()}f.addPassiveListener(Ze),document.addEventListener("resume",at,!1),Cn()&&document.addEventListener("visibilitychange",bt,!1),S=()=>{f.removePassiveListener(Ze),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",bt,!1),he&&window.clearTimeout(he)}})}finally{S()}})).apply(this,arguments)}function Ba(y){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,c.Z)(function*(y){const f=Mu(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Mu(y){if(ce(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function ky(y){(0,Y._registerComponent)(new ee.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:O,authDomain:K}=v.options;return((he,Ze)=>{ue(O&&!O.includes(":"),"invalid-api-key",{appName:he.name}),ue(!(null==K?void 0:K.includes(":")),"argument-error",{appName:he.name});const at={apiKey:O,authDomain:K,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ca(y)},bt=new ai(he,Ze,at);return function V(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(de);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(bt,g),bt})(v,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,Y._registerComponent)(new ee.wA("auth-internal",f=>{const g=Ve(f.getProvider("auth").getImmediate());return new Qp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Y.registerVersion)(Yp,Id,function Ry(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,Y.registerVersion)(Yp,Id,"esm2017")}("Browser");class $h extends Ri{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Xl(y){return ia.apply(this,arguments)}function ia(){return(ia=(0,c.Z)(function*(y){const f=yield tc()._get(Gh(y));return f&&(yield tc()._remove(Gh(y))),f})).apply(this,arguments)}function ec(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function tc(){return de(On)}function Gh(y){return ye("authEvent",y.config.apiKey,y.name)}function rc(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,N.zd)(g.join("?"))}function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Ad(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function tg(y=(0,N.z$)()){return!("file:"!==Ad()&&"ionic:"!==Ad()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){try{const y=self.localStorage,f=Qo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function sa(y=(0,N.z$)()){return function Ly(){return(0,N.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Uy(y=(0,N.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,N.hl)()}catch(y){return No()&&(0,N.hl)()}return!1}function No(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function sc(){return(function Fy(){return"http:"===Ad()||"https:"===Ad()}()||(0,N.ru)()||tg())&&!function Sd(){return(0,N.b$)()||(0,N.UG)()}()&&Tr()&&!No()}function Kh(){return tg()&&"undefined"!=typeof document}function ja(){return(ja=(0,c.Z)(function*(){return!!Kh()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ni={LOCAL:"local",NONE:"none",SESSION:"session"},$a=ue,Qh="persistence";function Ha(y){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,c.Z)(function*(y){yield y._initializationPromise;const f=oc(),g=ye(Qh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function oc(){var y;try{return(null===(y=function Yh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Vy=ue;class yi{constructor(){this.browserResolver=de(class ko{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cr,this._completeRedirectFn=An}_openPopup(f,g,v,S){var O=this;return(0,c.Z)(function*(){var K;ce(null===(K=O.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const he=Lh(f,g,v,se(),S);return function Ro(y,f,g,v=500,S=600){const O=Math.max((window.screen.availHeight-S)/2,0).toString(),K=Math.max((window.screen.availWidth-v)/2,0).toString();let he="";const Ze=Object.assign(Object.assign({},Sy),{width:v.toString(),height:S.toString(),top:O,left:K}),at=(0,N.z$)().toLowerCase();g&&(he=wr(at)?"_blank":g),Et(at)&&(f=f||"http://localhost",Ze.scrollbars="yes");const bt=Object.entries(Ze).reduce((Sn,[Qi,uc])=>`${Sn}${Qi}=${uc},`,"");if(function ru(y=(0,N.z$)()){var f;return tr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(at)&&"_self"!==he)return function Fh(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",he),new bd(null);const ft=window.open(f||"",he,bt);ue(ft,y,"popup-blocked");try{ft.focus()}catch(Sn){}return new bd(ft)}(f,he,Qo())})()}_openRedirect(f,g,v,S){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(f),function kh(y){dn().location.href=y}(Lh(f,g,v,se(),S)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:S,promise:O}=this.eventManagers[g];return S?Promise.resolve(S):(ce(O,"If manager is not set, promise should be"),O)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const v=yield function Ay(y){return ws.apply(this,arguments)}(f),S=new Ri(f);return v.register("authEvent",O=>(ue(null==O?void 0:O.authEvent,f,"invalid-auth-event"),{status:S.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:S},g.iframes[f._key()]=v,S})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Es,{type:Es},S=>{var O;const K=null===(O=null==S?void 0:S[0])||void 0===O?void 0:O[Es];void 0!==K&&g(!!K),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Cy(y){return vs.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ss()||Jt()||tr()}}),this.cordovaResolver=de(class zh{constructor(){this._redirectPersistence=cr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=An}_initialize(f){var g=this;return(0,c.Z)(function*(){const v=f._key();let S=g.eventManagers.get(v);return S||(S=new $h(f),g.eventManagers.set(v,S),g.attachCallbackListeners(f,S)),S})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,S){var O=this;return(0,c.Z)(function*(){!function Td(y){var f,g,v,S,O,K,he,Ze,at,bt;const ft=oo();ue("function"==typeof(null===(f=null==ft?void 0:ft.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(void 0!==(null===(g=null==ft?void 0:ft.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(O=null===(S=null===(v=null==ft?void 0:ft.cordova)||void 0===v?void 0:v.plugins)||void 0===S?void 0:S.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Ze=null===(he=null===(K=null==ft?void 0:ft.cordova)||void 0===K?void 0:K.plugins)||void 0===he?void 0:he.browsertab)||void 0===Ze?void 0:Ze.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(bt=null===(at=null==ft?void 0:ft.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===bt?void 0:bt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const K=yield O._initialize(f);yield K.initialized(),K.resetRedirect(),function Su(){Yi.clear()}(),yield O._originValidation(f);const he=function Hh(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:ec(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,v,S);yield function H0(y,f){return tc()._set(Gh(y),f)}(f,he);const Ze=yield function Vh(y,f,g){return Va.apply(this,arguments)}(f,he,g),at=yield function Jl(y){const{cordova:f}=oo();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let S=null;v?f.plugins.browsertab.openUrl(y):S=f.InAppBrowser.open(y,function mo(y=(0,N.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(S)})})}(Ze);return function Jp(y,f,g){return Dd.apply(this,arguments)}(f,K,at)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Bh(y){return ki.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:S,BuildInfo:O}=oo(),K=setTimeout((0,c.Z)(function*(){yield Xl(f),g.onEvent(Wh())}),500),he=function(){var bt=(0,c.Z)(function*(ft){clearTimeout(K);const Sn=yield Xl(f);let Qi=null;Sn&&(null==ft?void 0:ft.url)&&(Qi=function Oy(y,f){var g,v;const S=function nc(y){const f=rc(y),g=f.link?decodeURIComponent(f.link):void 0,v=rc(g).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return rc(S).link||S||v||g||y}(f);if(S.includes("/__/auth/callback")){const O=rc(S),K=O.firebaseError?function qh(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(O.firebaseError)):null,he=null===(v=null===(g=null==K?void 0:K.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ze=he?Ee(he):null;return Ze?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ze,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Sn,ft.url)),g.onEvent(Qi||Wh())});return function(Sn){return bt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,he);const Ze=S,at=`${O.packageName.toLowerCase()}://`;oo().handleOpenURL=function(){var bt=(0,c.Z)(function*(ft){if(ft.toLowerCase().startsWith(at)&&he({url:ft}),"function"==typeof Ze)try{Ze(ft)}catch(Sn){console.error(Sn)}});return function(ft){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=cr,this._completeRedirectFn=An}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,S){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,g,v,S)})()}_openRedirect(f,g,v,S){var O=this;return(0,c.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,g,v,S)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Kh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Lr(){return ja.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ig(y){return y.unwrap()}function Ga(y){return sg(y)}function sg(y){const{_tokenResponse:f}=y instanceof N.ZR?y.customData:y;if(!f)return null;if(!(y instanceof N.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Mi.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Da;break;case"facebook.com":v=_o;break;case"github.com":v=Jc;break;case"twitter.com":v=cu;break;default:const{oauthIdToken:S,oauthAccessToken:O,oauthTokenSecret:K,pendingToken:he,nonce:Ze}=f;return O||K||S||he?he?g.startsWith("saml.")?ls._create(g,he):us._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:S,accessToken:O}):new Zo(g).credential({idToken:S,accessToken:O,rawNonce:Ze}):null}return y instanceof N.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Ar(y,f){return f.catch(g=>{throw g instanceof N.ZR&&function jy(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new $y(y,function Iu(y,f){var g;const v=(0,N.m9)(y),S=f;return ue(f.customData.operationType,v,"argument-error"),ue(null===(g=S.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Ra._fromError(v,S)}(y,f));else if(v){const S=sg(f),O=f;S&&(O.credential=S,O.tenantId=v.tenantId||void 0,O.email=v.email||void 0,O.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const S=g.user;return{operationType:g.operationType,credential:Ga(g),additionalUserInfo:Cr(g),user:Oo.getOrCreate(S)}})}function Xh(y,f){return ef.apply(this,arguments)}function ef(){return(ef=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>Ar(y,g.confirm(v))}})).apply(this,arguments)}class $y{constructor(f,g){this.resolver=g,this.auth=function By(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ar(ig(this.auth),this.resolver.resolveSignIn(f))}}class Oo{constructor(f){this._delegate=f,this.multiFactor=function ud(y){const f=(0,N.m9)(y);return Yo.has(f)||Yo.set(f,fs._fromUser(f)),Yo.get(f)}(f)}static getOrCreate(f){return Oo.USER_MAP.has(f)||Oo.USER_MAP.set(f,new Oo(f)),Oo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return Ar(g.auth,Ii(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,c.Z)(function*(){return Xh(v.auth,function Bl(y,f,g){return ta.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return Ar(g.auth,function Wi(y,f,g){return Au.apply(this,arguments)}(g._delegate,f,yi))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ha(Ve(g.auth)),function it(y,f,g){return function Dt(y,f,g){return Vt.apply(this,arguments)}(y,f,g)}(g._delegate,f,yi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return Ar(g.auth,Zs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Xh(this.auth,function Zp(y,f,g){return jl.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ar(this.auth,function Do(y,f,g){return Tu.apply(this,arguments)}(this._delegate,f,yi))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ha(Ve(g.auth)),function le(y,f,g){return function Pe(y,f,g){return Fe.apply(this,arguments)}(y,f,g)}(g._delegate,f,yi)})()}sendEmailVerification(f){return function Di(y,f){return Tl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function Ta(y,f){return vl.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function xl(y,f){return Ml((0,N.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function nd(y,f){return Ml((0,N.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function $l(y,f){return _s.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Ma(y,f){return Sl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function bu(y,f,g){return Cu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oo.USER_MAP=new WeakMap;const ac=ue;let tf=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=g.options;ac(S,"invalid-api-key",{appName:g.name}),ac(S,"invalid-api-key",{appName:g.name});const O="undefined"!=typeof window?yi:void 0;this._delegate=v.initialize({options:{persistence:Hy(S,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function cn(y,f,g){const v=Ve(y);ue(v._canInitEmulator,v,"emulator-config-failed"),ue(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const S=!!(null==g?void 0:g.disableWarnings),O=ar(f),{host:K,port:he}=function Us(y){const f=ar(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(v);if(S){const O=S[1];return{host:O,port:Fn(v.substr(O.length+1))}}{const[O,K]=v.split(":");return{host:O,port:Fn(K)}}}(f);v.config.emulator={url:`${O}//${K}${null===he?"":`:${he}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:K,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function $i(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function El(y,f){return Ae.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ht(this._delegate,g)}confirmPasswordReset(g,v){return function vu(y,f,g){return wl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var S=this;return(0,c.Z)(function*(){return Ar(S._delegate,function Ko(y,f,g){return Yr.apply(this,arguments)}(S._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Eu(y,f){return Ys.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Dl(y,f){const g=yo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){ac(sc(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function kt(y,f){return Bn.apply(this,arguments)}(g._delegate,yi);return v?Ar(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function eg(y,f){Ve(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,S){const{next:O,error:K,complete:he}=nf(g,v,S);return this._delegate.onAuthStateChanged(O,K,he)}onIdTokenChanged(g,v,S){const{next:O,error:K,complete:he}=nf(g,v,S);return this._delegate.onIdTokenChanged(O,K,he)}sendSignInLinkToEmail(g,v){return function Il(y,f,g){return td.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function yu(y,f,g){return _u.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,c.Z)(function*(){let S;switch(function ng(y,f){$a(Object.values(Ni).includes(f),y,"invalid-persistence-type"),(0,N.b$)()?$a(f!==Ni.SESSION,y,"unsupported-persistence-type"):(0,N.UG)()?$a(f===Ni.NONE,y,"unsupported-persistence-type"):No()?$a(f===Ni.NONE||f===Ni.LOCAL&&(0,N.hl)(),y,"unsupported-persistence-type"):$a(f===Ni.NONE||Tr(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Ni.SESSION:S=cr;break;case Ni.LOCAL:S=(yield de(Ai)._isAvailable())?Ai:On;break;case Ni.NONE:S=z;break;default:return Ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ar(this._delegate,function hu(y){return Xc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ar(this._delegate,Nn(this._delegate,g))}signInWithCustomToken(g){return Ar(this._delegate,function zs(y,f){return Ws.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Ar(this._delegate,function Cl(y,f,g){return Nn((0,N.m9)(y),_l.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Ar(this._delegate,function wu(y,f,g){return Ks.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Xh(this._delegate,function Oa(y,f,g){return wn.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,c.Z)(function*(){return ac(sc(),v._delegate,"operation-not-supported-in-this-environment"),Ar(v._delegate,function so(y,f,g){return gd.apply(this,arguments)}(v._delegate,g,yi))})()}signInWithRedirect(g){var v=this;return(0,c.Z)(function*(){return ac(sc(),v._delegate,"operation-not-supported-in-this-environment"),yield Ha(v._delegate),function R(y,f,g){return function F(y,f,g){return J.apply(this,arguments)}(y,f,g)}(v._delegate,g,yi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function yn(y,f){return Wo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ni,y})();function nf(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const S=v;return{next:K=>S(K&&Oo.getOrCreate(K)),error:f,complete:g}}function Hy(y,f){const g=function rg(y,f){const g=oc();if(!g)return[];const v=ye(Qh,y,f);switch(g.getItem(v)){case Ni.NONE:return[z];case Ni.LOCAL:return[Ai,cr];case Ni.SESSION:return[cr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ai)&&g.push(Ai),"undefined"!=typeof window)for(const v of[On,cr])g.includes(v)||g.push(v);return g.includes(z)||g.push(z),g}class rf{constructor(){this.providerId="phone",this._delegate=new Mi(ig(q.Z.auth()))}static credential(f,g){return Mi.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}rf.PHONE_SIGN_IN_METHOD=Mi.PHONE_SIGN_IN_METHOD,rf.PROVIDER_ID=Mi.PROVIDER_ID;const Gy=ue;class qy{constructor(f,g,v=q.Z.app()){var S;Gy(null===(S=v.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new qp(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function og(y){y.INTERNAL.registerComponent(new ee.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new tf(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_l,FacebookAuthProvider:_o,GithubAuthProvider:Jc,GoogleAuthProvider:Da,OAuthProvider:Zo,SAMLAuthProvider:ci,PhoneAuthProvider:rf,PhoneMultiFactorGenerator:Kp,RecaptchaVerifier:qy,TwitterAuthProvider:cu,Auth:tf,AuthCredential:sn,Error:N.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(q.Z)},7854:Me=>{var oe=function(k){"use strict";var N,c=Object.prototype,q=c.hasOwnProperty,Y="function"==typeof Symbol?Symbol:{},Z=Y.iterator||"@@iterator",te=Y.asyncIterator||"@@asyncIterator",ee=Y.toStringTag||"@@toStringTag";function ne(V,se,De){return Object.defineProperty(V,se,{value:De,enumerable:!0,configurable:!0,writable:!0}),V[se]}try{ne({},"")}catch(V){ne=function(se,De,We){return se[De]=We}}function ae(V,se,De,We){var Ye=Object.create((se&&se.prototype instanceof Qe?se:Qe).prototype),wt=new me(We||[]);return Ye._invoke=function Ge(V,se,De){var We=$;return function(Ye,wt){if(We===$e)throw new Error("Generator is already running");if(We===Re){if("throw"===Ye)throw wt;return Le()}for(De.method=Ye,De.arg=wt;;){var Rt=De.delegate;if(Rt){var pn=ue(Rt,De);if(pn){if(pn===Ce)continue;return pn}}if("next"===De.method)De.sent=De._sent=De.arg;else if("throw"===De.method){if(We===$)throw We=Re,De.arg;De.dispatchException(De.arg)}else"return"===De.method&&De.abrupt("return",De.arg);We=$e;var Ot=B(V,se,De);if("normal"===Ot.type){if(We=De.done?Re:W,Ot.arg===Ce)continue;return{value:Ot.arg,done:De.done}}"throw"===Ot.type&&(We=Re,De.method="throw",De.arg=Ot.arg)}}}(V,De,wt),Ye}function B(V,se,De){try{return{type:"normal",arg:V.call(se,De)}}catch(We){return{type:"throw",arg:We}}}k.wrap=ae;var $="suspendedStart",W="suspendedYield",$e="executing",Re="completed",Ce={};function Qe(){}function we(){}function pe(){}var st={};ne(st,Z,function(){return this});var et=Object.getPrototypeOf,Ie=et&&et(et(de([])));Ie&&Ie!==c&&q.call(Ie,Z)&&(st=Ie);var Ee=pe.prototype=Qe.prototype=Object.create(st);function be(V){["next","throw","return"].forEach(function(se){ne(V,se,function(De){return this._invoke(se,De)})})}function He(V,se){function De(Ye,wt,Rt,pn){var Ot=B(V[Ye],V,wt);if("throw"!==Ot.type){var qr=Ot.arg,qt=qr.value;return qt&&"object"==typeof qt&&q.call(qt,"__await")?se.resolve(qt.__await).then(function(Pt){De("next",Pt,Rt,pn)},function(Pt){De("throw",Pt,Rt,pn)}):se.resolve(qt).then(function(Pt){qr.value=Pt,Rt(qr)},function(Pt){return De("throw",Pt,Rt,pn)})}pn(Ot.arg)}var We;this._invoke=function Te(Ye,wt){function Rt(){return new se(function(pn,Ot){De(Ye,wt,pn,Ot)})}return We=We?We.then(Rt,Rt):Rt()}}function ue(V,se){var De=V.iterator[se.method];if(De===N){if(se.delegate=null,"throw"===se.method){if(V.iterator.return&&(se.method="return",se.arg=N,ue(V,se),"throw"===se.method))return Ce;se.method="throw",se.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ce}var We=B(De,V.iterator,se.arg);if("throw"===We.type)return se.method="throw",se.arg=We.arg,se.delegate=null,Ce;var Te=We.arg;return Te?Te.done?(se[V.resultName]=Te.value,se.next=V.nextLoc,"return"!==se.method&&(se.method="next",se.arg=N),se.delegate=null,Ce):Te:(se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,Ce)}function Q(V){var se={tryLoc:V[0]};1 in V&&(se.catchLoc=V[1]),2 in V&&(se.finallyLoc=V[2],se.afterLoc=V[3]),this.tryEntries.push(se)}function ce(V){var se=V.completion||{};se.type="normal",delete se.arg,V.completion=se}function me(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(Q,this),this.reset(!0)}function de(V){if(V){var se=V[Z];if(se)return se.call(V);if("function"==typeof V.next)return V;if(!isNaN(V.length)){var De=-1,We=function Te(){for(;++De<V.length;)if(q.call(V,De))return Te.value=V[De],Te.done=!1,Te;return Te.value=N,Te.done=!0,Te};return We.next=We}}return{next:Le}}function Le(){return{value:N,done:!0}}return we.prototype=pe,ne(Ee,"constructor",pe),ne(pe,"constructor",we),we.displayName=ne(pe,ee,"GeneratorFunction"),k.isGeneratorFunction=function(V){var se="function"==typeof V&&V.constructor;return!!se&&(se===we||"GeneratorFunction"===(se.displayName||se.name))},k.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,pe):(V.__proto__=pe,ne(V,ee,"GeneratorFunction")),V.prototype=Object.create(Ee),V},k.awrap=function(V){return{__await:V}},be(He.prototype),ne(He.prototype,te,function(){return this}),k.AsyncIterator=He,k.async=function(V,se,De,We,Te){void 0===Te&&(Te=Promise);var Ye=new He(ae(V,se,De,We),Te);return k.isGeneratorFunction(se)?Ye:Ye.next().then(function(wt){return wt.done?wt.value:Ye.next()})},be(Ee),ne(Ee,ee,"Generator"),ne(Ee,Z,function(){return this}),ne(Ee,"toString",function(){return"[object Generator]"}),k.keys=function(V){var se=[];for(var De in V)se.push(De);return se.reverse(),function We(){for(;se.length;){var Te=se.pop();if(Te in V)return We.value=Te,We.done=!1,We}return We.done=!0,We}},k.values=de,me.prototype={constructor:me,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=N,this.done=!1,this.delegate=null,this.method="next",this.arg=N,this.tryEntries.forEach(ce),!V)for(var se in this)"t"===se.charAt(0)&&q.call(this,se)&&!isNaN(+se.slice(1))&&(this[se]=N)},stop:function(){this.done=!0;var se=this.tryEntries[0].completion;if("throw"===se.type)throw se.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var se=this;function De(pn,Ot){return Ye.type="throw",Ye.arg=V,se.next=pn,Ot&&(se.method="next",se.arg=N),!!Ot}for(var We=this.tryEntries.length-1;We>=0;--We){var Te=this.tryEntries[We],Ye=Te.completion;if("root"===Te.tryLoc)return De("end");if(Te.tryLoc<=this.prev){var wt=q.call(Te,"catchLoc"),Rt=q.call(Te,"finallyLoc");if(wt&&Rt){if(this.prev<Te.catchLoc)return De(Te.catchLoc,!0);if(this.prev<Te.finallyLoc)return De(Te.finallyLoc)}else if(wt){if(this.prev<Te.catchLoc)return De(Te.catchLoc,!0)}else{if(!Rt)throw new Error("try statement without catch or finally");if(this.prev<Te.finallyLoc)return De(Te.finallyLoc)}}}},abrupt:function(V,se){for(var De=this.tryEntries.length-1;De>=0;--De){var We=this.tryEntries[De];if(We.tryLoc<=this.prev&&q.call(We,"finallyLoc")&&this.prev<We.finallyLoc){var Te=We;break}}Te&&("break"===V||"continue"===V)&&Te.tryLoc<=se&&se<=Te.finallyLoc&&(Te=null);var Ye=Te?Te.completion:{};return Ye.type=V,Ye.arg=se,Te?(this.method="next",this.next=Te.finallyLoc,Ce):this.complete(Ye)},complete:function(V,se){if("throw"===V.type)throw V.arg;return"break"===V.type||"continue"===V.type?this.next=V.arg:"return"===V.type?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):"normal"===V.type&&se&&(this.next=se),Ce},finish:function(V){for(var se=this.tryEntries.length-1;se>=0;--se){var De=this.tryEntries[se];if(De.finallyLoc===V)return this.complete(De.completion,De.afterLoc),ce(De),Ce}},catch:function(V){for(var se=this.tryEntries.length-1;se>=0;--se){var De=this.tryEntries[se];if(De.tryLoc===V){var We=De.completion;if("throw"===We.type){var Te=We.arg;ce(De)}return Te}}throw new Error("illegal catch attempt")},delegateYield:function(V,se,De){return this.delegate={iterator:de(V),resultName:se,nextLoc:De},"next"===this.method&&(this.arg=N),Ce}},k}(Me.exports);try{regeneratorRuntime=oe}catch(k){"object"==typeof globalThis?globalThis.regeneratorRuntime=oe:Function("r","regeneratorRuntime = r")(oe)}},5555:function(Me,oe,k){var c,q;c=function(){return function N(){var Y=arguments.length;if(0===Y)throw new Error("resolveUrl requires at least one argument; got none.");var Z=document.createElement("base");if(Z.href=arguments[0],1===Y)return Z.href;var te=document.getElementsByTagName("head")[0];te.insertBefore(Z,te.firstChild);for(var ne,ee=document.createElement("a"),ae=1;ae<Y;ae++)ee.href=arguments[ae],Z.href=ne=ee.href;return te.removeChild(Z),ne}},void 0!==(q=c.call(oe,k,oe,Me))&&(Me.exports=q)},9751:(Me,oe,k)=>{"use strict";k.d(oe,{y:()=>ne});var c=k(930),q=k(727),N=k(8822),Y=k(9635),Z=k(2416),te=k(576),ee=k(2806);let ne=(()=>{class W{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const Ce=new W;return Ce.source=this,Ce.operator=Re,Ce}subscribe(Re,Ce,Qe){const we=function $(W){return W&&W instanceof c.Lv||function B(W){return W&&(0,te.m)(W.next)&&(0,te.m)(W.error)&&(0,te.m)(W.complete)}(W)&&(0,q.Nn)(W)}(Re)?Re:new c.Hp(Re,Ce,Qe);return(0,ee.x)(()=>{const{operator:pe,source:st}=this;we.add(pe?pe.call(we,st):st?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(Re){try{return this._subscribe(Re)}catch(Ce){Re.error(Ce)}}forEach(Re,Ce){return new(Ce=ae(Ce))((Qe,we)=>{const pe=new c.Hp({next:st=>{try{Re(st)}catch(et){we(et),pe.unsubscribe()}},error:we,complete:Qe});this.subscribe(pe)})}_subscribe(Re){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(Re)}[N.L](){return this}pipe(...Re){return(0,Y.U)(Re)(this)}toPromise(Re){return new(Re=ae(Re))((Ce,Qe)=>{let we;this.subscribe(pe=>we=pe,pe=>Qe(pe),()=>Ce(we))})}}return W.create=$e=>new W($e),W})();function ae(W){var $e;return null!==($e=null!=W?W:Z.v.Promise)&&void 0!==$e?$e:Promise}},7579:(Me,oe,k)=>{"use strict";k.d(oe,{x:()=>ee});var c=k(9751),q=k(727);const Y=(0,k(3888).d)(ae=>function(){ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Z=k(8737),te=k(2806);let ee=(()=>{class ae extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const W=new ne(this,this);return W.operator=$,W}_throwIfClosed(){if(this.closed)throw new Y}next($){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next($)}})}error($){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:W}=this;for(;W.length;)W.shift().error($)}})}complete(){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:W,isStopped:$e,observers:Re}=this;return W||$e?q.Lc:(this.currentObservers=null,Re.push($),new q.w0(()=>{this.currentObservers=null,(0,Z.P)(Re,$)}))}_checkFinalizedStatuses($){const{hasError:W,thrownError:$e,isStopped:Re}=this;W?$.error($e):Re&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return ae.create=(B,$)=>new ne(B,$),ae})();class ne extends ee{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===W||W.call($,B)}error(B){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===W||W.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,W;return null!==(W=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==W?W:q.Lc}}},930:(Me,oe,k)=>{"use strict";k.d(oe,{Hp:()=>Qe,Lv:()=>W});var c=k(576),q=k(727),N=k(2416),Y=k(7849),Z=k(5032);const te=ae("C",void 0,void 0);function ae(Ie,Ee,be){return{kind:Ie,value:Ee,error:be}}var B=k(3410),$=k(2806);class W extends q.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,q.Nn)(Ee)&&Ee.add(this)):this.destination=et}static create(Ee,be,He){return new Qe(Ee,be,He)}next(Ee){this.isStopped?st(function ne(Ie){return ae("N",Ie,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?st(function ee(Ie){return ae("E",void 0,Ie)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?st(te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Re(Ie,Ee){return $e.call(Ie,Ee)}class Ce{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(He){we(He)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(He){we(He)}else we(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){we(be)}}}class Qe extends W{constructor(Ee,be,He){let Ge;if(super(),(0,c.m)(Ee)||!Ee)Ge={next:null!=Ee?Ee:void 0,error:null!=be?be:void 0,complete:null!=He?He:void 0};else{let ue;this&&N.v.useDeprecatedNextContext?(ue=Object.create(Ee),ue.unsubscribe=()=>this.unsubscribe(),Ge={next:Ee.next&&Re(Ee.next,ue),error:Ee.error&&Re(Ee.error,ue),complete:Ee.complete&&Re(Ee.complete,ue)}):Ge=Ee}this.destination=new Ce(Ge)}}function we(Ie){N.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ie):(0,Y.h)(Ie)}function st(Ie,Ee){const{onStoppedNotification:be}=N.v;be&&B.z.setTimeout(()=>be(Ie,Ee))}const et={closed:!0,next:Z.Z,error:function pe(Ie){throw Ie},complete:Z.Z}},727:(Me,oe,k)=>{"use strict";k.d(oe,{Lc:()=>te,w0:()=>Z,Nn:()=>ee});var c=k(576);const N=(0,k(3888).d)(ae=>function($){ae(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((W,$e)=>`${$e+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var Y=k(8737);class Z{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Re of $)Re.remove(this);else $.remove(this);const{initialTeardown:W}=this;if((0,c.m)(W))try{W()}catch(Re){B=Re instanceof N?Re.errors:[Re]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Re of $e)try{ne(Re)}catch(Ce){B=null!=B?B:[],Ce instanceof N?B=[...B,...Ce.errors]:B.push(Ce)}}if(B)throw new N(B)}}add(B){var $;if(B&&B!==this)if(this.closed)ne(B);else{if(B instanceof Z){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,Y.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,Y.P)($,B),B instanceof Z&&B._removeParent(this)}}Z.EMPTY=(()=>{const ae=new Z;return ae.closed=!0,ae})();const te=Z.EMPTY;function ee(ae){return ae instanceof Z||ae&&"closed"in ae&&(0,c.m)(ae.remove)&&(0,c.m)(ae.add)&&(0,c.m)(ae.unsubscribe)}function ne(ae){(0,c.m)(ae)?ae():ae.unsubscribe()}},2416:(Me,oe,k)=>{"use strict";k.d(oe,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Me,oe,k)=>{"use strict";k.d(oe,{E:()=>q});const q=new(k(9751).y)(Z=>Z.complete())},8996:(Me,oe,k)=>{"use strict";k.d(oe,{D:()=>Ee});var c=k(8421),q=k(5363),N=k(9468),te=k(9751),ne=k(2202),ae=k(576),B=k(9672);function W(be,He){if(!be)throw new Error("Iterable cannot be null");return new te.y(Ge=>{(0,B.f)(Ge,He,()=>{const ue=be[Symbol.asyncIterator]();(0,B.f)(Ge,He,()=>{ue.next().then(Q=>{Q.done?Ge.complete():Ge.next(Q.value)})},0,!0)})})}var $e=k(3670),Re=k(8239),Ce=k(1144),Qe=k(6495),we=k(2206),pe=k(4532),st=k(3260);function Ee(be,He){return He?function Ie(be,He){if(null!=be){if((0,$e.c)(be))return function Y(be,He){return(0,c.Xf)(be).pipe((0,N.R)(He),(0,q.Q)(He))}(be,He);if((0,Ce.z)(be))return function ee(be,He){return new te.y(Ge=>{let ue=0;return He.schedule(function(){ue===be.length?Ge.complete():(Ge.next(be[ue++]),Ge.closed||this.schedule())})})}(be,He);if((0,Re.t)(be))return function Z(be,He){return(0,c.Xf)(be).pipe((0,N.R)(He),(0,q.Q)(He))}(be,He);if((0,we.D)(be))return W(be,He);if((0,Qe.T)(be))return function $(be,He){return new te.y(Ge=>{let ue;return(0,B.f)(Ge,He,()=>{ue=be[ne.h](),(0,B.f)(Ge,He,()=>{let Q,ce;try{({value:Q,done:ce}=ue.next())}catch(me){return void Ge.error(me)}ce?Ge.complete():Ge.next(Q)},0,!0)}),()=>(0,ae.m)(null==ue?void 0:ue.return)&&ue.return()})}(be,He);if((0,st.L)(be))return function et(be,He){return W((0,st.Q)(be),He)}(be,He)}throw(0,pe.z)(be)}(be,He):(0,c.Xf)(be)}},8421:(Me,oe,k)=>{"use strict";k.d(oe,{Xf:()=>$e});var c=k(655),q=k(1144),N=k(8239),Y=k(9751),Z=k(3670),te=k(2206),ee=k(4532),ne=k(6495),ae=k(3260),B=k(576),$=k(7849),W=k(8822);function $e(Ie){if(Ie instanceof Y.y)return Ie;if(null!=Ie){if((0,Z.c)(Ie))return function Re(Ie){return new Y.y(Ee=>{const be=Ie[W.L]();if((0,B.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,q.z)(Ie))return function Ce(Ie){return new Y.y(Ee=>{for(let be=0;be<Ie.length&&!Ee.closed;be++)Ee.next(Ie[be]);Ee.complete()})}(Ie);if((0,N.t)(Ie))return function Qe(Ie){return new Y.y(Ee=>{Ie.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,$.h)})}(Ie);if((0,te.D)(Ie))return pe(Ie);if((0,ne.T)(Ie))return function we(Ie){return new Y.y(Ee=>{for(const be of Ie)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(Ie);if((0,ae.L)(Ie))return function st(Ie){return pe((0,ae.Q)(Ie))}(Ie)}throw(0,ee.z)(Ie)}function pe(Ie){return new Y.y(Ee=>{(function et(Ie,Ee){var be,He,Ge,ue;return(0,c.mG)(this,void 0,void 0,function*(){try{for(be=(0,c.KL)(Ie);!(He=yield be.next()).done;)if(Ee.next(He.value),Ee.closed)return}catch(Q){Ge={error:Q}}finally{try{He&&!He.done&&(ue=be.return)&&(yield ue.call(be))}finally{if(Ge)throw Ge.error}}Ee.complete()})})(Ie,Ee).catch(be=>Ee.error(be))})}},6451:(Me,oe,k)=>{"use strict";k.d(oe,{T:()=>te});var c=k(8189),q=k(8421),N=k(515),Y=k(3269),Z=k(8996);function te(...ee){const ne=(0,Y.yG)(ee),ae=(0,Y._6)(ee,1/0),B=ee;return B.length?1===B.length?(0,q.Xf)(B[0]):(0,c.J)(ae)((0,Z.D)(B,ne)):N.E}},5403:(Me,oe,k)=>{"use strict";k.d(oe,{x:()=>q});var c=k(930);function q(Y,Z,te,ee,ne){return new N(Y,Z,te,ee,ne)}class N extends c.Lv{constructor(Z,te,ee,ne,ae,B){super(Z),this.onFinalize=ae,this.shouldUnsubscribe=B,this._next=te?function($){try{te($)}catch(W){Z.error(W)}}:super._next,this._error=ne?function($){try{ne($)}catch(W){Z.error(W)}finally{this.unsubscribe()}}:super._error,this._complete=ee?function(){try{ee()}catch($){Z.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Z;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:te}=this;super.unsubscribe(),!te&&(null===(Z=this.onFinalize)||void 0===Z||Z.call(this))}}}},4004:(Me,oe,k)=>{"use strict";k.d(oe,{U:()=>N});var c=k(4482),q=k(5403);function N(Y,Z){return(0,c.e)((te,ee)=>{let ne=0;te.subscribe((0,q.x)(ee,ae=>{ee.next(Y.call(Z,ae,ne++))}))})}},8189:(Me,oe,k)=>{"use strict";k.d(oe,{J:()=>N});var c=k(5577),q=k(4671);function N(Y=1/0){return(0,c.z)(q.y,Y)}},5577:(Me,oe,k)=>{"use strict";k.d(oe,{z:()=>ne});var c=k(4004),q=k(8421),N=k(4482),Y=k(9672),Z=k(5403),ee=k(576);function ne(ae,B,$=1/0){return(0,ee.m)(B)?ne((W,$e)=>(0,c.U)((Re,Ce)=>B(W,Re,$e,Ce))((0,q.Xf)(ae(W,$e))),$):("number"==typeof B&&($=B),(0,N.e)((W,$e)=>function te(ae,B,$,W,$e,Re,Ce,Qe){const we=[];let pe=0,st=0,et=!1;const Ie=()=>{et&&!we.length&&!pe&&B.complete()},Ee=He=>pe<W?be(He):we.push(He),be=He=>{Re&&B.next(He),pe++;let Ge=!1;(0,q.Xf)($(He,st++)).subscribe((0,Z.x)(B,ue=>{null==$e||$e(ue),Re?Ee(ue):B.next(ue)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(pe--;we.length&&pe<W;){const ue=we.shift();Ce?(0,Y.f)(B,Ce,()=>be(ue)):be(ue)}Ie()}catch(ue){B.error(ue)}}))};return ae.subscribe((0,Z.x)(B,Ee,()=>{et=!0,Ie()})),()=>{null==Qe||Qe()}}(W,$e,ae,$)))}},5363:(Me,oe,k)=>{"use strict";k.d(oe,{Q:()=>Y});var c=k(9672),q=k(4482),N=k(5403);function Y(Z,te=0){return(0,q.e)((ee,ne)=>{ee.subscribe((0,N.x)(ne,ae=>(0,c.f)(ne,Z,()=>ne.next(ae),te),()=>(0,c.f)(ne,Z,()=>ne.complete(),te),ae=>(0,c.f)(ne,Z,()=>ne.error(ae),te)))})}},3099:(Me,oe,k)=>{"use strict";k.d(oe,{B:()=>te});var c=k(8996),q=k(5698),N=k(7579),Y=k(930),Z=k(4482);function te(ne={}){const{connector:ae=(()=>new N.x),resetOnError:B=!0,resetOnComplete:$=!0,resetOnRefCountZero:W=!0}=ne;return $e=>{let Re=null,Ce=null,Qe=null,we=0,pe=!1,st=!1;const et=()=>{null==Ce||Ce.unsubscribe(),Ce=null},Ie=()=>{et(),Re=Qe=null,pe=st=!1},Ee=()=>{const be=Re;Ie(),null==be||be.unsubscribe()};return(0,Z.e)((be,He)=>{we++,!st&&!pe&&et();const Ge=Qe=null!=Qe?Qe:ae();He.add(()=>{we--,0===we&&!st&&!pe&&(Ce=ee(Ee,W))}),Ge.subscribe(He),Re||(Re=new Y.Hp({next:ue=>Ge.next(ue),error:ue=>{st=!0,et(),Ce=ee(Ie,B,ue),Ge.error(ue)},complete:()=>{pe=!0,et(),Ce=ee(Ie,$),Ge.complete()}}),(0,c.D)(be).subscribe(Re))})($e)}}function ee(ne,ae,...B){return!0===ae?(ne(),null):!1===ae?null:ae(...B).pipe((0,q.q)(1)).subscribe(()=>ne())}},9468:(Me,oe,k)=>{"use strict";k.d(oe,{R:()=>q});var c=k(4482);function q(N,Y=0){return(0,c.e)((Z,te)=>{te.add(N.schedule(()=>Z.subscribe(te),Y))})}},5698:(Me,oe,k)=>{"use strict";k.d(oe,{q:()=>Y});var c=k(515),q=k(4482),N=k(5403);function Y(Z){return Z<=0?()=>c.E:(0,q.e)((te,ee)=>{let ne=0;te.subscribe((0,N.x)(ee,ae=>{++ne<=Z&&(ee.next(ae),Z<=ne&&ee.complete())}))})}},8505:(Me,oe,k)=>{"use strict";k.d(oe,{b:()=>Z});var c=k(576),q=k(4482),N=k(5403),Y=k(4671);function Z(te,ee,ne){const ae=(0,c.m)(te)||ee||ne?{next:te,error:ee,complete:ne}:te;return ae?(0,q.e)((B,$)=>{var W;null===(W=ae.subscribe)||void 0===W||W.call(ae);let $e=!0;B.subscribe((0,N.x)($,Re=>{var Ce;null===(Ce=ae.next)||void 0===Ce||Ce.call(ae,Re),$.next(Re)},()=>{var Re;$e=!1,null===(Re=ae.complete)||void 0===Re||Re.call(ae),$.complete()},Re=>{var Ce;$e=!1,null===(Ce=ae.error)||void 0===Ce||Ce.call(ae,Re),$.error(Re)},()=>{var Re,Ce;$e&&(null===(Re=ae.unsubscribe)||void 0===Re||Re.call(ae)),null===(Ce=ae.finalize)||void 0===Ce||Ce.call(ae)}))}):Y.y}},4408:(Me,oe,k)=>{"use strict";k.d(oe,{o:()=>Z});var c=k(727);class q extends c.w0{constructor(ee,ne){super()}schedule(ee,ne=0){return this}}const N={setInterval(te,ee,...ne){const{delegate:ae}=N;return(null==ae?void 0:ae.setInterval)?ae.setInterval(te,ee,...ne):setInterval(te,ee,...ne)},clearInterval(te){const{delegate:ee}=N;return((null==ee?void 0:ee.clearInterval)||clearInterval)(te)},delegate:void 0};var Y=k(8737);class Z extends q{constructor(ee,ne){super(ee,ne),this.scheduler=ee,this.work=ne,this.pending=!1}schedule(ee,ne=0){if(this.closed)return this;this.state=ee;const ae=this.id,B=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(B,ae,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(B,this.id,ne),this}requestAsyncId(ee,ne,ae=0){return N.setInterval(ee.flush.bind(ee,this),ae)}recycleAsyncId(ee,ne,ae=0){if(null!=ae&&this.delay===ae&&!1===this.pending)return ne;N.clearInterval(ne)}execute(ee,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ae=this._execute(ee,ne);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ee,ne){let B,ae=!1;try{this.work(ee)}catch($){ae=!0,B=$||new Error("Scheduled action threw falsy error")}if(ae)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ee,scheduler:ne}=this,{actions:ae}=ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Y.P)(ae,this),null!=ee&&(this.id=this.recycleAsyncId(ne,ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(Me,oe,k)=>{"use strict";k.d(oe,{v:()=>N});var c=k(6063);class q{constructor(Z,te=q.now){this.schedulerActionCtor=Z,this.now=te}schedule(Z,te=0,ee){return new this.schedulerActionCtor(this,Z).schedule(ee,te)}}q.now=c.l.now;class N extends q{constructor(Z,te=q.now){super(Z,te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Z){const{actions:te}=this;if(this._active)return void te.push(Z);let ee;this._active=!0;do{if(ee=Z.execute(Z.state,Z.delay))break}while(Z=te.shift());if(this._active=!1,ee){for(;Z=te.shift();)Z.unsubscribe();throw ee}}}},4986:(Me,oe,k)=>{"use strict";k.d(oe,{P:()=>Y,z:()=>N});var c=k(4408);const N=new(k(7565).v)(c.o),Y=N},6063:(Me,oe,k)=>{"use strict";k.d(oe,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(Me,oe,k)=>{"use strict";k.d(oe,{z:()=>c});const c={setTimeout(q,N,...Y){const{delegate:Z}=c;return(null==Z?void 0:Z.setTimeout)?Z.setTimeout(q,N,...Y):setTimeout(q,N,...Y)},clearTimeout(q){const{delegate:N}=c;return((null==N?void 0:N.clearTimeout)||clearTimeout)(q)},delegate:void 0}},2202:(Me,oe,k)=>{"use strict";k.d(oe,{h:()=>q});const q=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Me,oe,k)=>{"use strict";k.d(oe,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Me,oe,k)=>{"use strict";k.d(oe,{_6:()=>te,jO:()=>Y,yG:()=>Z});var c=k(576),q=k(3532);function N(ee){return ee[ee.length-1]}function Y(ee){return(0,c.m)(N(ee))?ee.pop():void 0}function Z(ee){return(0,q.K)(N(ee))?ee.pop():void 0}function te(ee,ne){return"number"==typeof N(ee)?ee.pop():ne}},8737:(Me,oe,k)=>{"use strict";function c(q,N){if(q){const Y=q.indexOf(N);0<=Y&&q.splice(Y,1)}}k.d(oe,{P:()=>c})},3888:(Me,oe,k)=>{"use strict";function c(q){const Y=q(Z=>{Error.call(Z),Z.stack=(new Error).stack});return Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y}k.d(oe,{d:()=>c})},2806:(Me,oe,k)=>{"use strict";k.d(oe,{O:()=>Y,x:()=>N});var c=k(2416);let q=null;function N(Z){if(c.v.useDeprecatedSynchronousErrorHandling){const te=!q;if(te&&(q={errorThrown:!1,error:null}),Z(),te){const{errorThrown:ee,error:ne}=q;if(q=null,ee)throw ne}}else Z()}function Y(Z){c.v.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=Z)}},9672:(Me,oe,k)=>{"use strict";function c(q,N,Y,Z=0,te=!1){const ee=N.schedule(function(){Y(),te?q.add(this.schedule(null,Z)):this.unsubscribe()},Z);if(q.add(ee),!te)return ee}k.d(oe,{f:()=>c})},4671:(Me,oe,k)=>{"use strict";function c(q){return q}k.d(oe,{y:()=>c})},1144:(Me,oe,k)=>{"use strict";k.d(oe,{z:()=>c});const c=q=>q&&"number"==typeof q.length&&"function"!=typeof q},2206:(Me,oe,k)=>{"use strict";k.d(oe,{D:()=>q});var c=k(576);function q(N){return Symbol.asyncIterator&&(0,c.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(Me,oe,k)=>{"use strict";function c(q){return"function"==typeof q}k.d(oe,{m:()=>c})},3670:(Me,oe,k)=>{"use strict";k.d(oe,{c:()=>N});var c=k(8822),q=k(576);function N(Y){return(0,q.m)(Y[c.L])}},6495:(Me,oe,k)=>{"use strict";k.d(oe,{T:()=>N});var c=k(2202),q=k(576);function N(Y){return(0,q.m)(null==Y?void 0:Y[c.h])}},8239:(Me,oe,k)=>{"use strict";k.d(oe,{t:()=>q});var c=k(576);function q(N){return(0,c.m)(null==N?void 0:N.then)}},3260:(Me,oe,k)=>{"use strict";k.d(oe,{L:()=>Y,Q:()=>N});var c=k(655),q=k(576);function N(Z){return(0,c.FC)(this,arguments,function*(){const ee=Z.getReader();try{for(;;){const{value:ne,done:ae}=yield(0,c.qq)(ee.read());if(ae)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(ne)}}finally{ee.releaseLock()}})}function Y(Z){return(0,q.m)(null==Z?void 0:Z.getReader)}},3532:(Me,oe,k)=>{"use strict";k.d(oe,{K:()=>q});var c=k(576);function q(N){return N&&(0,c.m)(N.schedule)}},4482:(Me,oe,k)=>{"use strict";k.d(oe,{A:()=>q,e:()=>N});var c=k(576);function q(Y){return(0,c.m)(null==Y?void 0:Y.lift)}function N(Y){return Z=>{if(q(Z))return Z.lift(function(te){try{return Y(te,this)}catch(ee){this.error(ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Me,oe,k)=>{"use strict";function c(){}k.d(oe,{Z:()=>c})},9635:(Me,oe,k)=>{"use strict";k.d(oe,{U:()=>N,z:()=>q});var c=k(4671);function q(...Y){return N(Y)}function N(Y){return 0===Y.length?c.y:1===Y.length?Y[0]:function(te){return Y.reduce((ee,ne)=>ne(ee),te)}}},7849:(Me,oe,k)=>{"use strict";k.d(oe,{h:()=>N});var c=k(2416),q=k(3410);function N(Y){q.z.setTimeout(()=>{const{onUnhandledError:Z}=c.v;if(!Z)throw Y;Z(Y)})}},4532:(Me,oe,k)=>{"use strict";function c(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(oe,{z:()=>c})},8926:Me=>{function oe(c,q,N,Y,Z,te,ee){try{var ne=c[te](ee),ae=ne.value}catch(B){return void N(B)}ne.done?q(ae):Promise.resolve(ae).then(Y,Z)}Me.exports=function k(c){return function(){var q=this,N=arguments;return new Promise(function(Y,Z){var te=c.apply(q,N);function ee(ae){oe(te,Y,Z,ee,ne,"next",ae)}function ne(ae){oe(te,Y,Z,ee,ne,"throw",ae)}ee(void 0)})}},Me.exports.__esModule=!0,Me.exports.default=Me.exports},655:(Me,oe,k)=>{"use strict";function Y(Q,ce){var me={};for(var de in Q)Object.prototype.hasOwnProperty.call(Q,de)&&ce.indexOf(de)<0&&(me[de]=Q[de]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(de=Object.getOwnPropertySymbols(Q);Le<de.length;Le++)ce.indexOf(de[Le])<0&&Object.prototype.propertyIsEnumerable.call(Q,de[Le])&&(me[de[Le]]=Q[de[Le]])}return me}function ne(Q,ce,me,de){return new(me||(me=Promise))(function(V,se){function De(Ye){try{Te(de.next(Ye))}catch(wt){se(wt)}}function We(Ye){try{Te(de.throw(Ye))}catch(wt){se(wt)}}function Te(Ye){Ye.done?V(Ye.value):function Le(V){return V instanceof me?V:new me(function(se){se(V)})}(Ye.value).then(De,We)}Te((de=de.apply(Q,ce||[])).next())})}function we(Q){return this instanceof we?(this.v=Q,this):new we(Q)}function pe(Q,ce,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,de=me.apply(Q,ce||[]),V=[];return Le={},se("next"),se("throw"),se("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function se(Rt){de[Rt]&&(Le[Rt]=function(pn){return new Promise(function(Ot,qr){V.push([Rt,pn,Ot,qr])>1||De(Rt,pn)})})}function De(Rt,pn){try{!function We(Rt){Rt.value instanceof we?Promise.resolve(Rt.value.v).then(Te,Ye):wt(V[0][2],Rt)}(de[Rt](pn))}catch(Ot){wt(V[0][3],Ot)}}function Te(Rt){De("next",Rt)}function Ye(Rt){De("throw",Rt)}function wt(Rt,pn){Rt(pn),V.shift(),V.length&&De(V[0][0],V[0][1])}}function et(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ce=Q[Symbol.asyncIterator];return ce?ce.call(Q):(Q=function W(Q){var ce="function"==typeof Symbol&&Symbol.iterator,me=ce&&Q[ce],de=0;if(me)return me.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&de>=Q.length&&(Q=void 0),{value:Q&&Q[de++],done:!Q}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),me={},de("next"),de("throw"),de("return"),me[Symbol.asyncIterator]=function(){return this},me);function de(V){me[V]=Q[V]&&function(se){return new Promise(function(De,We){!function Le(V,se,De,We){Promise.resolve(We).then(function(Te){V({value:Te,done:De})},se)}(De,We,(se=Q[V](se)).done,se.value)})}}}k.d(oe,{FC:()=>pe,KL:()=>et,_T:()=>Y,mG:()=>ne,qq:()=>we})},5e3:(Me,oe,k)=>{"use strict";k.d(oe,{$8M:()=>ms,$Z:()=>sE,AFp:()=>Rm,ALo:()=>gb,AaK:()=>ne,AsE:()=>Wg,BQk:()=>yc,CHM:()=>bl,CRH:()=>Gv,CZH:()=>Mm,CqO:()=>Hg,DdM:()=>Lv,EJc:()=>LD,EiD:()=>rc,EpF:()=>Zu,F$t:()=>Ff,F4k:()=>oE,FYo:()=>Nv,FiY:()=>mi,G48:()=>Kb,GfV:()=>ip,Gpc:()=>$,Hsn:()=>Lf,JOm:()=>he,JVY:()=>Uh,L6k:()=>Cd,LAX:()=>Yp,LFG:()=>it,LSH:()=>Ru,Lbi:()=>s0,MAs:()=>Kw,NdJ:()=>zu,O4$:()=>od,OlP:()=>Tn,Oqu:()=>Hf,PXZ:()=>Vc,Q6J:()=>Mf,QGY:()=>Pf,Qsj:()=>cD,R0b:()=>$o,RDi:()=>cs,Rgc:()=>fh,SBq:()=>Ac,Sil:()=>Lc,Suo:()=>Hv,TTD:()=>_o,TgZ:()=>Rf,VKq:()=>Uv,VLi:()=>_h,W1O:()=>Oc,WLB:()=>dh,X6Q:()=>jD,XFs:()=>pt,Xpm:()=>$t,Y36:()=>qd,YKP:()=>op,YNc:()=>zw,Yjl:()=>wr,Yz7:()=>Ot,ZZ4:()=>Qm,_Bn:()=>ep,_UZ:()=>$g,_Vd:()=>np,_c5:()=>lC,_uU:()=>EE,aQg:()=>wh,c2e:()=>Fc,cJS:()=>qt,cg1:()=>Be,dDg:()=>jm,deG:()=>$p,dqk:()=>zt,eBb:()=>Kp,eFA:()=>c0,ekj:()=>pv,g9A:()=>r0,h0i:()=>xn,hGG:()=>JD,hij:()=>Ku,iGM:()=>Cm,ifc:()=>Wt,ip1:()=>yh,kL8:()=>th,kcU:()=>wy,lG2:()=>Jt,lcZ:()=>mb,mCW:()=>Va,n5z:()=>fd,n_E:()=>Mc,oAB:()=>re,oxw:()=>ha,pB0:()=>Id,q3G:()=>en,q4F:()=>cb,qLn:()=>Ar,qOj:()=>vf,qZA:()=>kf,qzn:()=>ko,sBO:()=>qm,sIi:()=>wf,s_b:()=>dp,soG:()=>Pm,tBr:()=>Fr,tb:()=>Nm,tp0:()=>So,uIk:()=>Ef,vHH:()=>Ce,vpe:()=>es,wAp:()=>Ue,xp6:()=>_i,yhl:()=>Ua,ynx:()=>Of,z2F:()=>d0,z3N:()=>Es,zSh:()=>Dg,zs3:()=>Ds});var c=k(7579),q=k(727),N=k(9751),Y=k(6451),Z=k(3099);function te(i){for(let o in i)if(i[o]===te)return o;throw Error("Could not find renamed property on target object.")}function ee(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ae(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const B=te({__forward_ref__:te});function $(i){return i.__forward_ref__=$,i.toString=function(){return ne(this())},i}function W(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}class Ce extends Error{constructor(o,a){super(function Qe(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function we(i){return"string"==typeof i?i:null==i?"":String(i)}function pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():we(i)}function Ee(i,o){const a=o?` in ${o}`:"";throw new Ce(-201,`No provider for ${pe(i)} found${a}`)}function Te(i,o){null==i&&function Ye(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Ot(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pt(i){return ir(i,Bi)||ir(i,rs)}function ir(i,o){return i.hasOwnProperty(o)?i[o]:null}function kr(i){return i&&(i.hasOwnProperty(Nr)||i.hasOwnProperty(is))?i[Nr]:null}const Bi=te({\u0275prov:te}),Nr=te({\u0275inj:te}),rs=te({ngInjectableDef:te}),is=te({ngInjectorDef:te});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Zr;function Gn(i){const o=Zr;return Zr=i,o}function oi(i,o,a){const l=Pt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&pt.Optional?null:void 0!==o?o:void Ee(ne(i),"Injector")}function gn(i){return{toString:i}.toString()}var er=(()=>((er=er||{})[er.OnPush=0]="OnPush",er[er.Default=1]="Default",er))(),Wt=(()=>{return(i=Wt||(Wt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Wt;var i})();const ht="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,zt=ht||"undefined"!=typeof global&&global||It||sr,or={},yt=[],vr=te({\u0275cmp:te}),Gt=te({\u0275dir:te}),tt=te({\u0275pipe:te}),xe=te({\u0275mod:te}),ot=te({\u0275fac:te}),_t=te({__NG_ELEMENT_ID__:te});let Zt=0;function $t(i){return gn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===er.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||yt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Wt.Emulated,id:"c",styles:i.styles||yt,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.directives,p=i.features,_=i.pipes;return l.id+=Zt++,l.inputs=Et(i.inputs,a),l.outputs=Et(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(U):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(z):null,l})}function U(i){return Kt(i)||function Cn(i){return i[Gt]||null}(i)}function z(i){return function Ut(i){return i[tt]||null}(i)}const ye={};function re(i){return gn(()=>{const o={type:i.type,bootstrap:i.bootstrap||yt,declarations:i.declarations||yt,imports:i.imports||yt,exports:i.exports||yt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ye[i.id]=i.type),o})}function Et(i,o){if(null==i)return or;const a={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),a[h]=l,o&&(o[h]=p)}return a}const Jt=$t;function wr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[vr]||null}function ln(i,o){const a=i[xe]||null;if(!a&&!0===o)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function Ci(i){return Array.isArray(i)&&"object"==typeof i[1]}function li(i){return Array.isArray(i)&&!0===i[1]}function zc(i){return 0!=(8&i.flags)}function js(i){return 2==(2&i.flags)}function ou(i){return 1==(1&i.flags)}function zr(i){return null!==i.template}function xh(i){return 0!=(512&i[2])}function Or(i,o){return i.hasOwnProperty(ot)?i[ot]:null}class Zo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function _o(){return Da}function Da(i){return i.type.prototype.ngOnChanges&&(i.setInput=Vp),Jc}function Jc(){const i=Gs(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===or)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Vp(i,o,a,l){const h=Gs(i)||function ci(i,o){return i[ls]=o}(i,{previous:or,current:null}),p=h.current||(h.current={}),_=h.previous,E=this.declaredInputs[a],b=_[E];p[E]=new Zo(b&&b.currentValue,o,_===or),i[l]=o}_o.ngInherit=!0;const ls="__ngSimpleChanges__";function Gs(i){return i[ls]||null}let pu;function cs(i){pu=i}function hn(i){return!!i.listen}const zo={createRenderer:(i,o)=>function Ta(){return void 0!==pu?pu:"undefined"!=typeof document?document:void 0}()};function an(i){for(;Array.isArray(i);)i=i[0];return i}function wo(i,o){return an(o[i])}function Er(i,o){return an(o[i.index])}function Aa(i,o){return i.data[o]}function Ii(i,o){return i[o]}function br(i,o){const a=o[i];return Ci(a)?a:a[0]}function Zs(i){return 4==(4&i[2])}function ds(i){return 128==(128&i[2])}function Kr(i,o){return null==o?null:i[o]}function zs(i){i[18]=0}function Ws(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const vt={lFrame:bo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function vu(){return vt.bindingsEnabled}function Ae(){return vt.lFrame.lView}function Ht(){return vt.lFrame.tView}function bl(i){return vt.lFrame.contextLView=i,i[8]}function yn(){let i=Wo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Wo(){return vt.lFrame.currentTNode}function Yr(i,o){const a=vt.lFrame;a.currentTNode=i,a.isParent=o}function Cl(){return vt.lFrame.isParent}function Il(){vt.lFrame.isParent=!1}function wu(){return vt.isInCheckNoChangesMode}function Ks(i){vt.isInCheckNoChangesMode=i}function lr(){const i=vt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function Ys(){return vt.lFrame.bindingIndex++}function Di(i){const o=vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Cu(i,o){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,xa(o)}function xa(i){vt.lFrame.currentDirectiveIndex=i}function Sl(){return vt.lFrame.currentQueryIndex}function xl(i){vt.lFrame.currentQueryIndex=i}function nd(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Ml(i,o,a){if(a&pt.SkipSelf){let h=o,p=i;for(;!(h=h.parent,null!==h||a&pt.Host||(h=nd(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,i=p}const l=vt.lFrame=rd();return l.currentTNode=o,l.lView=i,!0}function Eo(i){const o=rd(),a=i[1];vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function rd(){const i=vt.lFrame,o=null===i?null:i.child;return null===o?bo(i):o}function bo(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function id(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const sd=id;function Co(){const i=id();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Cr(){return vt.lFrame.selectedIndex}function Js(i){vt.lFrame.selectedIndex=i}function In(){const i=vt.lFrame;return Aa(i.tView,i.selectedIndex)}function od(){vt.lFrame.currentNamespace="svg"}function wy(){!function kl(){vt.lFrame.currentNamespace=null}()}function hs(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ra(i,o,a){ad(i,o,3,a)}function Iu(i,o,a,l){(3&i[2])===a&&ad(i,o,a,l)}function Un(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function ad(i,o,a,l){const p=null!=l?l:-1,_=o.length-1;let E=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=l&&E>=l)break}else o[b]<0&&(i[18]+=65536),(E<p||-1==p)&&(Bp(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function Bp(i,o,a,l){const h=a[l]<0,p=a[l+1],E=i[h?-a[l]:a[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Yo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function gt(i,o,a){const l=hn(i);let h=0;for(;h<a.length;){const p=a[h];if("number"==typeof p){if(0!==p)break;h++;const _=a[h++],E=a[h++],b=a[h++];l?i.setAttribute(o,E,b,_):o.setAttributeNS(_,E,b)}else{const _=p,E=a[++h];Pr(_)?l&&i.setProperty(o,_,E):l?i.setAttribute(o,_,E):o.setAttribute(_,E),h++}}return h}function cr(i){return 3===i||4===i||6===i}function Pr(i){return 64===i.charCodeAt(0)}function Ir(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?a=h:0===a||Qo(i,a,h,null,-1===a||2===a?o[++l]:null)}}return i}function Qo(i,o,a,l,h){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==h&&(i[p+1]=h));if(l===i[p+1])return void(i[p+2]=h)}p++,null!==l&&p++,null!==h&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==h&&i.splice(p++,0,h)}function cd(i){return-1!==i}function dn(i){return 32767&i}function Ti(i,o){let a=function kh(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Du=!0;function hi(i){const o=Du;return Du=i,o}let hd=0;function Dn(i,o){const a=Xs(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,gs(l.data,i),gs(o,null),gs(l.blueprint,null));const h=fi(i,o),p=i.injectorIndex;if(cd(h)){const _=dn(h),E=Ti(h,o),b=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[_+A]|b[_+A]}return o[p+8]=h,p}function gs(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Xs(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function fi(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(l=2===_?p.declTNode:1===_?h[6]:null,null===l)return-1;if(a++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function eo(i,o,a){!function Io(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(_t)&&(l=a[_t]),null==l&&(l=a[_t]=hd++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,a)}function Hi(i,o,a){if(a&pt.Optional)return i;Ee(o,"NodeInjector")}function Ll(i,o,a,l){if(a&pt.Optional&&void 0===l&&(l=null),0==(a&(pt.Self|pt.Host))){const h=i[9],p=Gn(void 0);try{return h?h.get(o,l,a&pt.Optional):oi(o,l,a&pt.Optional)}finally{Gn(p)}}return Hi(l,o,a)}function to(i,o,a,l=pt.Default,h){if(null!==i){const p=function Xo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(_t)?i[_t]:void 0;return"number"==typeof o?o>=0?255&o:Ul:o}(a);if("function"==typeof p){if(!Ml(o,i,l))return l&pt.Host?Hi(h,a,l):Ll(o,a,l,h);try{const _=p(l);if(null!=_||l&pt.Optional)return _;Ee(a)}finally{sd()}}else if("number"==typeof p){let _=null,E=Xs(i,o),b=-1,A=l&pt.Host?o[16][6]:null;for((-1===E||l&pt.SkipSelf)&&(b=-1===E?fi(i,o):o[E+8],-1!==b&&dr(l,!1)?(_=o[1],E=dn(b),o=Ti(b,o)):E=-1);-1!==E;){const M=o[1];if(Na(p,E,M.data)){const P=Vl(E,o,a,_,l,A);if(P!==Gi)return P}b=o[E+8],-1!==b&&dr(l,o[1].data[E+8]===A)&&Na(p,E,o)?(_=M,E=dn(b),o=Ti(b,o)):E=-1}}}return Ll(o,a,l,h)}const Gi={};function Ul(){return new Si(yn(),Ae())}function Vl(i,o,a,l,h,p){const _=o[1],E=_.data[i+8],M=Jo(E,_,a,null==l?js(E)&&Du:l!=_&&0!=(3&E.type),h&pt.Host&&p===E);return null!==M?Ai(o,_,M,E):Gi}function Jo(i,o,a,l,h){const p=i.providerIndexes,_=o.data,E=1048575&p,b=i.directiveStart,M=p>>20,j=h?E+M:i.directiveEnd;for(let X=l?E:E+M;X<j;X++){const ve=_[X];if(X<b&&a===ve||X>=b&&ve.type===a)return X}if(h){const X=_[b];if(X&&zr(X)&&X.type===a)return b}return null}function Ai(i,o,a,l){let h=i[a];const p=o.data;if(function ud(i){return i instanceof Yo}(h)){const _=h;_.resolving&&function st(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Ce(-200,`Circular dependency in DI detected for ${i}${a}`)}(pe(p[a]));const E=hi(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Gn(_.injectImpl):null;Ml(i,l,pt.Default);try{h=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Nl(i,o,a){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(l){const _=Da(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}h&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,h),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&Gn(b),hi(E),_.resolving=!1,sd()}}return h}function Na(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function dr(i,o){return!(i&pt.Self||i&pt.Host&&o)}class Si{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return to(this._tNode,this._lView,o,l,a)}}function fd(i){return gn(()=>{const o=i.prototype.constructor,a=o[ot]||fn(o),l=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==l;){const p=h[ot]||fn(h);if(p&&p!==a)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function fn(i){return $e(i)?()=>{const o=fn(W(i));return o&&o()}:Or(i)}function ms(i){return function ka(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let h=0;for(;h<l;){const p=a[h];if(cr(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<l&&"string"==typeof a[h];)h++;else{if(p===o)return a[h+1];h+=2}}}return null}(yn(),i)}const ea="__parameters__";function vn(i,o,a){return gn(()=>{const l=function Zi(i){return function(...a){if(i){const l=i(...a);for(const h in l)this[h]=l[h]}}}(o);function h(...p){if(this instanceof h)return l.apply(this,p),this;const _=new h(...p);return E.annotation=_,E;function E(b,A,M){const P=b.hasOwnProperty(ea)?b[ea]:Object.defineProperty(b,ea,{value:[]})[ea];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(_),b}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class Tn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ot({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $p=new Tn("AnalyzeForEntryComponents");function hr(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),hr(l,o)):o!==i&&o.push(l)}return o}function pi(i,o){i.forEach(a=>Array.isArray(a)?pi(a,o):o(a))}function $l(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function _s(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Mi(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function Wn(i,o,a){let l=so(i,o);return l>=0?i[1|l]=a:(l=~l,function Hl(i,o,a,l){let h=i.length;if(h==o)i.push(a,l);else if(1===h)i.push(l,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Zl(i,o){const a=so(i,o);if(a>=0)return i[1|a]}function so(i,o){return function Do(i,o,a){let l=0,h=i.length>>a;for(;h!==l;){const p=l+(h-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?h=p:l=p+1}return~(h<<a)}(i,o,1)}const To={},na="__NG_DI_FLAG__",Su="ngTempTokenPath",D=/\n/gm,F="__source",J=te({provide:String,useValue:te});let le;function Pe(i){const o=le;return le=i,o}function Fe(i,o=pt.Default){if(void 0===le)throw new Ce(203,"");return null===le?oi(i,void 0,o):le.get(i,o&pt.Optional?null:void 0,o)}function it(i,o=pt.Default){return(function Xn(){return Zr}()||Fe)(W(i),o)}const Vt=it;function kt(i){const o=[];for(let a=0;a<i.length;a++){const l=W(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ce(900,"");let h,p=pt.Default;for(let _=0;_<l.length;_++){const E=l[_],b=An(E);"number"==typeof b?-1===b?h=E.token:p|=b:h=E}o.push(it(h,p))}else o.push(it(l))}return o}function Bn(i,o){return i[na]=o,i.prototype[na]=o,i}function An(i){return i[na]}const Fr=Bn(vn("Inject",i=>({token:i})),-1),mi=Bn(vn("Optional"),8),So=Bn(vn("SkipSelf"),4);let Mo;function La(i){var o;return(null===(o=function vd(){if(void 0===Mo&&(Mo=null,zt.trustedTypes))try{Mo=zt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Mo}())||void 0===o?void 0:o.createHTML(i))||i}class Ro{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fh extends Ro{getTypeName(){return"HTML"}}class xy extends Ro{getTypeName(){return"Style"}}class Ql extends Ro{getTypeName(){return"Script"}}class Lh extends Ro{getTypeName(){return"URL"}}class My extends Ro{getTypeName(){return"ResourceURL"}}function Es(i){return i instanceof Ro?i.changingThisBreaksApplicationSecurity:i}function ko(i,o){const a=Ua(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function Ua(i){return i instanceof Ro&&i.getTypeName()||null}function Uh(i){return new Fh(i)}function Cd(i){return new xy(i)}function Kp(i){return new Ql(i)}function Yp(i){return new Lh(i)}function Id(i){return new My(i)}class Ry{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(La(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class ky{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=La(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=La(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let h=a.length-1;0<h;h--){const _=a.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const oo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Va(i){return(i=String(i)).match(oo)||i.match(Vh)?i:"unsafe:"+i}function ki(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function Jl(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const Jp=ki("area,br,col,hr,img,wbr"),Dd=ki("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Td=ki("rp,rt"),jh=Jl(Jp,Jl(Dd,ki("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jl(Td,ki("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jl(Td,Dd)),$h=ki("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hh=ki("srcset"),ia=Jl($h,Hh,ki("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ki("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Oy=ki("script,style,template");class ec{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=this.checkClobberedElement(a,a.nextSibling);if(h){a=h;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!jh.hasOwnProperty(a))return this.sanitizedSomething=!0,!Oy.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let h=0;h<l.length;h++){const p=l.item(h),_=p.name,E=_.toLowerCase();if(!ia.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let b=p.value;$h[E]&&(b=Va(b)),Hh[E]&&(i=b,b=(i=String(i)).split(",").map(o=>Va(o.trim())).join(", ")),this.buf.push(" ",_,'="',qh(b),'"')}var i;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();jh.hasOwnProperty(a)&&!Jp.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(qh(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const tc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gh=/([^\#-~ |!])/g;function qh(i){return i.replace(/&/g,"&amp;").replace(tc,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Gh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nc;function rc(i,o){let a=null;try{nc=nc||function Qp(i){const o=new ky(i);return function Ny(){try{return!!(new window.DOMParser).parseFromString(La(""),"text/html")}catch(i){return!1}}()?new Ry(o):o}(i);let l=o?String(o):"";a=nc.getInertBodyElement(l);let h=5,p=l;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,l=p,p=a.innerHTML,a=nc.getInertBodyElement(l)}while(l!==p);return La((new ec).sanitizeChildren(Zh(a)||a))}finally{if(a){const l=Zh(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Zh(i){return"content"in i&&function zh(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var en=(()=>((en=en||{})[en.NONE=0]="NONE",en[en.HTML=1]="HTML",en[en.STYLE=2]="STYLE",en[en.SCRIPT=3]="SCRIPT",en[en.URL=4]="URL",en[en.RESOURCE_URL=5]="RESOURCE_URL",en))();function Ru(i){const o=function sa(){const i=Ae();return i&&i[12]}();return o?o.sanitize(en.URL,i)||"":ko(i,"URL")?Es(i):Va(we(i))}const Kh="__ngContext__";function Lr(i,o){i[Kh]=o}function Yh(i){const o=function ja(i){return i[Kh]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function Ga(i){return i.ngOriginalError}function sg(i,...o){i.error(...o)}class Ar{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function jy(i){return i&&i.ngErrorLogger||sg}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ga(o);for(;a&&Ga(a);)a=Ga(a);return a||null}}const qy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(zt))();function g(i){return i instanceof Function?i():i}var he=(()=>((he=he||{})[he.Important=1]="Important",he[he.DashCase=2]="DashCase",he))();function at(i,o){return undefined(i,o)}function Sn(i){const o=i[3];return li(o)?o[3]:o}function ku(i){return sf(i[13])}function Nu(i){return sf(i[4])}function sf(i){for(;null!==i&&!li(i);)i=i[4];return i}function oa(i,o,a,l,h){if(null!=l){let p,_=!1;li(l)?p=l:Ci(l)&&(_=!0,l=l[0]);const E=an(l);0===i&&null!==a?null==h?Xy(o,a,E):bs(o,a,E,h||null,!0):1===i&&null!==a?bs(o,a,E,h||null,!0):2===i?function r_(i,o,a){const l=lc(i,o);l&&function WC(i,o,a,l){hn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,E,_):3===i&&o.destroyNode(E),null!=p&&function rS(i,o,a,l,h){const p=a[7];p!==an(a)&&oa(o,i,l,p,h);for(let E=10;E<a.length;E++){const b=a[E];cg(b[1],b,i,o,l,p)}}(o,i,p,a,h)}}function Rd(i,o,a){if(hn(i))return i.createElement(o,a);{const l=null!==a?function fu(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function Ky(i,o){const a=i[9],l=a.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Ws(h,-1)),a.splice(l,1)}function Yy(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const h=l[17];null!==h&&h!==i&&Ky(h,l),o>0&&(i[a-1][4]=l[4]);const p=_s(i,10+o);!function Sr(i,o){cg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Qy(i,o){if(!(256&o[2])){const a=o[11];hn(a)&&a.destroyNode&&cg(i,o,a,3,null,null),function Wy(i){let o=i[13];if(!o)return Jy(i[1],i);for(;o;){let a=null;if(Ci(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Ci(o)&&Jy(o[1],o),o=o[3];null===o&&(o=i),Ci(o)&&Jy(o[1],o),a=o&&o[4]}o=a}}(o)}}function Jy(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function q0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const h=o[a[l]];if(!(h instanceof Yo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=h[p[_]],b=p[_+1];try{b.call(E)}finally{}}else try{p.call(h)}finally{}}}}(i,o),function G0(i,o){const a=i.cleanup,l=o[7];let h=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):an(o[_]),b=l[h=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],b,A):A>=0?l[h=A]():l[h=-A].unsubscribe(),p+=2}else{const _=l[h=a[p+1]];a[p].call(_)}if(null!==l){for(let p=h+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&hn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&li(o[3])){a!==o[3]&&Ky(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function ug(i,o,a){return function zC(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===Wt.None||h===Wt.Emulated)return null}return Er(l,a)}(i,o.parent,a)}function bs(i,o,a,l,h){hn(i)?i.insertBefore(o,a,l,h):o.insertBefore(a,l,h)}function Xy(i,o,a){hn(i)?i.appendChild(o,a):o.appendChild(a)}function Z0(i,o,a,l,h){null!==l?bs(i,o,a,l,h):Xy(i,o,a)}function lc(i,o){return hn(i)?i.parentNode(o):o.parentNode}function z0(i,o,a){return e_(i,o,a)}let e_=function W0(i,o,a){return 40&i.type?Er(i,a):null};function lg(i,o,a,l){const h=ug(i,l,o),p=o[11],E=z0(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(a))for(let b=0;b<a.length;b++)Z0(p,h,a[b],E,!1);else Z0(p,h,a,E,!1)}function Od(i,o){if(null!==o){const a=o.type;if(3&a)return Er(o,i);if(4&a)return n_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Od(i,l);{const h=i[o.index];return li(h)?n_(-1,h):an(h)}}if(32&a)return at(o,i)()||an(i[o.index]);{const l=Y0(i,o);return null!==l?Array.isArray(l)?l[0]:Od(Sn(i[16]),l):Od(i,o.next)}}return null}function Y0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function n_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],h=l[1].firstChild;if(null!==h)return Od(l,h)}return o[7]}function i_(i,o,a,l,h,p,_){for(;null!=a;){const E=l[a.index],b=a.type;if(_&&0===o&&(E&&Lr(an(E),l),a.flags|=4),64!=(64&a.flags))if(8&b)i_(i,o,a.child,l,h,p,!1),oa(o,i,h,E,p);else if(32&b){const A=at(a,l);let M;for(;M=A();)oa(o,i,h,M,p);oa(o,i,h,E,p)}else 16&b?YC(i,o,l,a,h,p):oa(o,i,h,E,p);a=_?a.projectionNext:a.next}}function cg(i,o,a,l,h,p){i_(a,l,i.firstChild,o,h,p,!1)}function YC(i,o,a,l,h,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)oa(o,i,h,b[A],p);else i_(i,o,b,_[3],h,p,!0)}function Q0(i,o,a){hn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function s_(i,o,a){hn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function fe(i,o,a){let l=i.length;for(;;){const h=i.indexOf(o,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const p=o.length;if(h+p===l||i.charCodeAt(h+p)<=32)return h}a=h+1}}const J0="ng-template";function QC(i,o,a){let l=0;for(;l<i.length;){let h=i[l++];if(a&&"class"===h){if(h=i[l],-1!==fe(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function X0(i){return 4===i.type&&i.value!==J0}function ew(i,o,a){return o===(4!==i.type||a?i.value:J0)}function JC(i,o,a){let l=4;const h=i.attrs||[],p=function dg(i){for(let o=0;o<i.length;o++)if(cr(i[o]))return o;return i.length}(h);let _=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!ew(i,b,a)||""===b&&1===o.length){if(Po(l))return!1;_=!0}}else{const A=8&l?b:o[++E];if(8&l&&null!==i.attrs){if(!QC(i.attrs,A,a)){if(Po(l))return!1;_=!0}continue}const P=XC(8&l?"class":b,h,X0(i),a);if(-1===P){if(Po(l))return!1;_=!0;continue}if(""!==A){let j;j=P>p?"":h[P+1].toLowerCase();const X=8&l?j:null;if(X&&-1!==fe(X,A,0)||2&l&&A!==j){if(Po(l))return!1;_=!0}}}}else{if(!_&&!Po(l)&&!Po(b))return!1;if(_&&Po(b))continue;_=!1,l=b|1&l}}return Po(l)||_}function Po(i){return 0==(1&i)}function XC(i,o,a,l){if(null===o)return-1;let h=0;if(l||!a){let p=!1;for(;h<o.length;){const _=o[h];if(_===i)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function tI(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function tw(i,o,a=!1){for(let l=0;l<o.length;l++)if(JC(i,o[l],a))return!0;return!1}function nI(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let h=0;h<i.length;h++)if(i[h]!==l[h])continue e;return!0}}return!1}function nw(i,o){return i?":not("+o.trim()+")":o}function rw(i){let o=i[0],a=1,l=2,h="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];h+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?h+="."+_:4&l&&(h+=" "+_);else""!==h&&!Po(_)&&(o+=nw(p,h),h=""),l=_,p=p||!Po(l);a++}return""!==h&&(o+=nw(p,h)),o}const lt={};function _i(i){u_(Ht(),Ae(),Cr()+i,wu())}function u_(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Ra(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Iu(o,p,0,a)}Js(a)}function hg(i,o){return i<<17|o<<2}function aa(i){return i>>17&32767}function ow(i){return 2|i}function Ou(i){return(131068&i)>>2}function c_(i,o){return-131069&i|o<<2}function uw(i){return 1|i}function yw(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const h=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];xl(h),_.contentQueries(2,o[p],p)}}}function Pd(i,o,a,l,h,p,_,E,b,A){const M=o.blueprint.slice();return M[0]=h,M[2]=140|l,zs(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=E||i&&i[11],M[12]=b||i&&i[12]||null,M[9]=A||i&&i[9]||null,M[6]=p,M[16]=2==o.type?i[16]:M,M}function Fu(i,o,a,l,h){let p=i.data[o];if(null===p)p=function mg(i,o,a,l,h){const p=Wo(),_=Cl(),b=i.data[o]=function I_(i,o,a,l,h,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,h);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,o,a,l,h),function Tl(){return vt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=h;const _=function Ko(){const i=vt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Yr(p,!0),p}function Lu(i,o,a,l){if(0===a)return-1;const h=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function Fd(i,o,a){Eo(o);try{const l=i.viewQuery;null!==l&&Ow(1,l,a);const h=i.template;null!==h&&yg(i,o,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&yw(i,o),i.staticViewQueries&&Ow(2,i.viewQuery,a);const p=i.components;null!==p&&function dI(i,o){for(let a=0;a<o.length;a++)_I(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,Co()}}function ua(i,o,a,l){const h=o[2];if(256==(256&h))return;Eo(o);const p=wu();try{zs(o),function Eu(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&yg(i,o,a,2,l);const _=3==(3&h);if(!p)if(_){const A=i.preOrderCheckHooks;null!==A&&Ra(o,A,null)}else{const A=i.preOrderHooks;null!==A&&Iu(o,A,0,null),Un(o,0)}if(function gS(i){for(let o=ku(i);null!==o;o=Nu(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const h=a[l],p=h[3];0==(1024&h[2])&&Ws(p,1),h[2]|=1024}}}(o),function pS(i){for(let o=ku(i);null!==o;o=Nu(o))for(let a=10;a<o.length;a++){const l=o[a],h=l[1];ds(l)&&ua(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&yw(i,o),!p)if(_){const A=i.contentCheckHooks;null!==A&&Ra(o,A)}else{const A=i.contentHooks;null!==A&&Iu(o,A,1),Un(o,1)}!function lI(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const h=a[l];if(h<0)Js(~h);else{const p=h,_=a[++l],E=a[++l];Cu(_,p),E(2,o[p])}}}finally{Js(-1)}}(i,o);const E=i.components;null!==E&&function cI(i,o){for(let a=0;a<o.length;a++)x_(i,o[a])}(o,E);const b=i.viewQuery;if(null!==b&&Ow(2,b,l),!p)if(_){const A=i.viewCheckHooks;null!==A&&Ra(o,A)}else{const A=i.viewHooks;null!==A&&Iu(o,A,2),Un(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ws(o[3],-1))}finally{Co()}}function hI(i,o,a,l){const h=o[10],p=!wu(),_=Zs(o);try{p&&!_&&h.begin&&h.begin(),_&&Fd(i,o,l),ua(i,o,a,l)}finally{p&&!_&&h.end&&h.end()}}function yg(i,o,a,l,h){const p=Cr(),_=2&l;try{Js(-1),_&&o.length>20&&u_(i,o,20,wu()),a(l,h)}finally{Js(p)}}function w_(i,o,a){if(zc(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function E_(i,o,a){!vu()||(function gI(i,o,a,l){const h=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Dn(a,o),Lr(l,o);const _=a.initialInputs;for(let E=h;E<p;E++){const b=i.data[E],A=zr(b);A&&Aw(o,a,b);const M=Ai(o,i,E,a);Lr(M,o),null!==_&&Sw(0,E-h,M,b,0,_),A&&(br(a.index,o)[8]=M)}}(i,o,a,Er(a,o)),128==(128&a.flags)&&function mI(i,o,a){const l=a.directiveStart,h=a.directiveEnd,_=a.index,E=function Al(){return vt.lFrame.currentDirectiveIndex}();try{Js(_);for(let b=l;b<h;b++){const A=i.data[b],M=o[b];xa(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&gf(A,M)}}finally{Js(-1),xa(E)}}(i,o,a))}function hf(i,o,a=Er){const l=o.localNames;if(null!==l){let h=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(o,i):i[_];i[h++]=E}}}function b_(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=ff(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function ff(i,o,a,l,h,p,_,E,b,A){const M=20+l,P=M+h,j=function C_(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:lt);return a}(M,P),X="function"==typeof A?A():A;return j[1]={type:i,blueprint:j,template:a,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:X,incompleteFirstPass:!1}}function pf(i,o,a,l){const h=EI(o);null===a?h.push(l):(h.push(a),i.firstCreatePass&&bI(i).push(l,h.length-1))}function _g(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,h):a[l]=[o,h]}return a}function T_(i,o,a,l){let h=!1;if(vu()){const p=function Iw(i,o,a){const l=i.directiveRegistry;let h=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];tw(a,_.selectors,!1)&&(h||(h=[]),eo(Dn(a,o),i,_.type),zr(_)?(A_(i,a),h.unshift(_)):h.push(_))}return h}(i,o,a),_=null===l?null:{"":-1};if(null!==p){h=!0,Dw(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const P=p[M];P.providersResolver&&P.providersResolver(P)}let E=!1,b=!1,A=Lu(i,o,p.length,null);for(let M=0;M<p.length;M++){const P=p[M];a.mergedAttrs=Ir(a.mergedAttrs,P.hostAttrs),Tw(i,a,o,A,P),yI(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const j=P.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!b&&(j.ngOnChanges||j.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function D_(i,o){const l=o.directiveEnd,h=i.data,p=o.attrs,_=[];let E=null,b=null;for(let A=o.directiveStart;A<l;A++){const M=h[A],P=M.inputs,j=null===p||X0(o)?null:xw(P,p);_.push(j),E=_g(P,A,E),b=_g(M.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=b}(i,a)}_&&function S_(i,o,a){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const p=a[o[h+1]];if(null==p)throw new Ce(-301,!1);l.push(o[h],p)}}}(a,l,_)}return a.mergedAttrs=Ir(a.mergedAttrs,a.attrs),h}function Cw(i,o,a,l,h,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const b=~o.index;(function pI(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=b&&E.push(b),E.push(l,h,_)}}function gf(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function A_(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function yI(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;zr(o)&&(a[""]=i)}}function Dw(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function Tw(i,o,a,l,h){i.data[l]=h;const p=h.factory||(h.factory=Or(h.type)),_=new Yo(p,zr(h),null);i.blueprint[l]=_,a[l]=_,Cw(i,o,0,l,Lu(i,a,h.hostVars,lt),h)}function Aw(i,o,a){const l=Er(o,i),h=b_(a),p=i[10],_=Eg(i,Pd(i,h,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=_}function Uo(i,o,a,l,h,p){const _=Er(i,o);!function wg(i,o,a,l,h,p,_){if(null==p)hn(i)?i.removeAttribute(o,h,a):o.removeAttribute(h);else{const E=null==_?we(p):_(p,l||"",h);hn(i)?i.setAttribute(o,h,E,a):a?o.setAttributeNS(a,h,E):o.setAttribute(h,E)}}(o[11],_,p,i.value,a,l,h)}function Sw(i,o,a,l,h,p){const _=p[o];if(null!==_){const E=l.setInput;for(let b=0;b<_.length;){const A=_[b++],M=_[b++],P=_[b++];null!==E?l.setInput(a,P,A,M):a[M]=P}}}function xw(i,o){let a=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===a&&(a=[]),a.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return a}function Mw(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function x_(i,o){const a=br(o,i);if(ds(a)){const l=a[1];80&a[2]?ua(l,a,l.template,a[8]):a[5]>0&&Rw(a)}}function Rw(i){for(let l=ku(i);null!==l;l=Nu(l))for(let h=10;h<l.length;h++){const p=l[h];if(1024&p[2]){const _=p[1];ua(_,p,_.template,p[8])}else p[5]>0&&Rw(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const h=br(a[l],i);ds(h)&&h[5]>0&&Rw(h)}}function _I(i,o){const a=br(o,i),l=a[1];(function kw(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Fd(l,a,a[8])}function Eg(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function bg(i){for(;i;){i[2]|=64;const o=Sn(i);if(xh(i)&&!o)return i;i=o}return null}function Nw(i,o,a){const l=o[10];l.begin&&l.begin();try{ua(i,o,i.template,a)}catch(h){throw CI(o,h),h}finally{l.end&&l.end()}}function Cg(i){!function Ld(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Yh(a),h=l[1];hI(h,l,h.template,a)}}(i[8])}function Ow(i,o,a){xl(0),o(i,a)}const wI=(()=>Promise.resolve(null))();function EI(i){return i[7]||(i[7]=[])}function bI(i){return i.cleanup||(i.cleanup=[])}function CI(i,o){const a=i[9],l=a?a.get(Ar,null):null;l&&l.handleError(o)}function II(i,o,a,l,h){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],b=o[_],A=i.data[_];null!==A.setInput?A.setInput(b,h,l,E):b[E]=h}}function Uu(i,o,a){const l=wo(o,i);!function Md(i,o,a){hn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function R_(i,o,a){let l=a?i.styles:null,h=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?h=ae(h,E):2==p&&(l=ae(l,E+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=h:i.classesWithoutHost=h}const Ig=new Tn("INJECTOR",-1);class k_{get(o,a=To){if(a===To){const l=new Error(`NullInjectorError: No provider for ${ne(o)}!`);throw l.name="NullInjectorError",l}return a}}const Dg=new Tn("Set Injector scope."),Vd={},Fw={};let Tg;function N_(){return void 0===Tg&&(Tg=new k_),Tg}function la(i,o=null,a=null,l){const h=Lw(i,o,a,l);return h._resolveInjectorDefTypes(),h}function Lw(i,o=null,a=null,l){return new O_(i,a,o||N_(),l)}class O_{constructor(o,a,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&pi(a,E=>this.processProvider(E,o,a)),pi([o],E=>this.processInjectorType(E,[],p)),this.records.set(Ig,Bd(void 0,this));const _=this.records.get(Dg);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:ne(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=To,l=pt.Default){this.assertNotDestroyed();const h=Pe(this),p=Gn(void 0);try{if(!(l&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function TI(i){return"function"==typeof i||"object"==typeof i&&i instanceof Tn}(o)&&Pt(o);E=b&&this.injectableDefInScope(b)?Bd(P_(o),Vd):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&pt.Self?N_():this.parent).get(o,a=l&pt.Optional&&a===To?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Su]=_[Su]||[]).unshift(ne(o)),h)throw _;return function ra(i,o,a,l){const h=i[Su];throw o[F]&&h.unshift(o[F]),i.message=function Ao(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let h=ne(o);if(Array.isArray(o))h=o.map(ne).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ne(E)))}h=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${h}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,h,a,l),i.ngTokenPath=h,i[Su]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Gn(p),Pe(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(ne(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ce(205,!1)}processInjectorType(o,a,l){if(!(o=W(o)))return!1;let h=kr(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,E=-1!==l.indexOf(_);if(void 0!==p&&(h=kr(p)),null==h)return!1;if(null!=h.imports&&!E){let M;l.push(_);try{pi(h.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===M&&(M=[]),M.push(P))})}finally{}if(void 0!==M)for(let P=0;P<M.length;P++){const{ngModule:j,providers:X}=M[P];pi(X,ve=>this.processProvider(ve,j,X||yt))}}this.injectorDefTypes.add(_);const b=Or(_)||(()=>new _);this.records.set(_,Bd(b,Vd));const A=h.providers;if(null!=A&&!E){const M=o;pi(A,P=>this.processProvider(P,M,A))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let h=Tt(o=W(o))?o:W(o&&o.provide);const p=function wS(i,o,a){return ca(i)?Bd(void 0,i.useValue):Bd(F_(i),Vd)}(o);if(Tt(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Bd(void 0,Vd,!0),_.factory=()=>kt(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,a){return a.value===Vd&&(a.value=Fw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function mf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=W(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function P_(i){const o=Pt(i),a=null!==o?o.factory:Or(i);if(null!==a)return a;if(i instanceof Tn)throw new Ce(204,!1);if(i instanceof Function)return function DI(i){const o=i.length;if(o>0)throw Mi(o,"?"),new Ce(204,!1);const a=function si(i){const o=i&&(i[Bi]||i[rs]);if(o){const a=function Fs(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ce(204,!1)}function F_(i,o,a){let l;if(Tt(i)){const h=W(i);return Or(h)||P_(h)}if(ca(i))l=()=>W(i.useValue);else if(function L_(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...kt(i.deps||[]));else if(function ct(i){return!(!i||!i.useExisting)}(i))l=()=>it(W(i.useExisting));else{const h=W(i&&(i.useClass||i.provide));if(!function U_(i){return!!i.deps}(i))return Or(h)||P_(h);l=()=>new h(...kt(i.deps))}return l}function Bd(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function ca(i){return null!==i&&"object"==typeof i&&J in i}function Tt(i){return"function"==typeof i}let Ds=(()=>{class i{static create(a,l){var h;if(Array.isArray(a))return la({name:""},l,a,"");{const p=null!==(h=a.name)&&void 0!==h?h:"";return la({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=To,i.NULL=new k_,i.\u0275prov=Ot({token:i,providedIn:"any",factory:()=>it(Ig)}),i.__NG_ELEMENT_ID__=-1,i})();function OI(i,o){hs(Yh(i)[1],yn())}function vf(i){let o=function Z_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let h;if(zr(i))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ce(903,"");h=o.\u0275dir}if(h){if(a){l.push(h);const _=i;_.inputs=z_(i.inputs),_.declaredInputs=z_(i.declaredInputs),_.outputs=z_(i.outputs);const E=h.hostBindings;E&&W_(i,E);const b=h.viewQuery,A=h.contentQueries;if(b&&Gw(i,b),A&&xg(i,A),ee(i.inputs,h.inputs),ee(i.declaredInputs,h.declaredInputs),ee(i.outputs,h.outputs),zr(h)&&h.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===vf&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Hw(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const h=i[l];h.hostVars=o+=h.hostVars,h.hostAttrs=Ir(h.hostAttrs,a=Ir(a,h.hostAttrs))}}(l)}function z_(i){return i===or?{}:i===yt?[]:i}function Gw(i,o){const a=i.viewQuery;i.viewQuery=a?(l,h)=>{o(l,h),a(l,h)}:o}function xg(i,o){const a=i.contentQueries;i.contentQueries=a?(l,h,p)=>{o(l,h,p),a(l,h,p)}:o}function W_(i,o){const a=i.hostBindings;i.hostBindings=a?(l,h)=>{o(l,h),a(l,h)}:o}let Mg=null;function Bu(){if(!Mg){const i=zt.Symbol;if(i&&i.iterator)Mg=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Mg=l)}}}return Mg}function wf(i){return!!cc(i)&&(Array.isArray(i)||!(i instanceof Map)&&Bu()in i)}function cc(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function da(i,o,a){return i[o]=a}function Ei(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function dc(i,o,a,l){const h=Ei(i,o,a);return Ei(i,o+1,l)||h}function Ef(i,o,a,l){const h=Ae();return Ei(h,Ys(),o)&&(Ht(),Uo(In(),h,i,o,a,l)),Ef}function Hu(i,o,a,l,h,p){const E=dc(i,function di(){return vt.lFrame.bindingIndex}(),a,h);return Di(2),E?o+we(a)+l+we(h)+p:lt}function zw(i,o,a,l,h,p,_,E){const b=Ae(),A=Ht(),M=i+20,P=A.firstCreatePass?function LI(i,o,a,l,h,p,_,E,b){const A=o.consts,M=Fu(o,i,4,_||null,Kr(A,E));T_(o,a,M,Kr(A,b)),hs(o,M);const P=M.tViews=ff(2,M,l,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),P.queries=o.queries.embeddedTView(M)),M}(M,A,b,o,a,l,h,p,_):A.data[M];Yr(P,!1);const j=b[11].createComment("");lg(A,b,j,P),Lr(j,b),Eg(b,b[M]=Mw(j,b,j,P)),ou(P)&&E_(A,b,P),null!=_&&hf(b,P,E)}function Kw(i){return Ii(function Dl(){return vt.lFrame.contextLView}(),20+i)}function qd(i,o=pt.Default){const a=Ae();return null===a?it(i,o):to(yn(),a,W(i),o)}function sE(){throw new Error("invalid")}function Mf(i,o,a){const l=Ae();return Ei(l,Ys(),o)&&function Is(i,o,a,l,h,p,_,E){const b=Er(o,a);let M,A=o.inputs;!E&&null!=A&&(M=A[l])?(II(i,a,M,l,h),js(o)&&function Ew(i,o){const a=br(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function ww(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=_?_(h,o.value||"",l):h,hn(p)?p.setProperty(b,l,h):Pr(l)||(b.setProperty?b.setProperty(l,h):b[l]=h))}(Ht(),In(),l,i,o,l[11],a,!1),Mf}function Zd(i,o,a,l,h){const _=h?"class":"style";II(i,a,o.inputs[_],_,l)}function Rf(i,o,a,l){const h=Ae(),p=Ht(),_=20+i,E=h[11],b=h[_]=Rd(E,o,function Ey(){return vt.lFrame.currentNamespace}()),A=p.firstCreatePass?function ov(i,o,a,l,h,p,_){const E=o.consts,A=Fu(o,i,2,h,Kr(E,p));return T_(o,a,A,Kr(E,_)),null!==A.attrs&&R_(A,A.attrs,!1),null!==A.mergedAttrs&&R_(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(_,p,h,0,o,a,l):p.data[_];Yr(A,!0);const M=A.mergedAttrs;null!==M&&gt(E,b,M);const P=A.classes;null!==P&&s_(E,b,P);const j=A.styles;return null!==j&&Q0(E,b,j),64!=(64&A.flags)&&lg(p,h,b,A),0===function Sa(){return vt.lFrame.elementDepthCount}()&&Lr(b,h),function yu(){vt.lFrame.elementDepthCount++}(),ou(A)&&(E_(p,h,A),w_(p,A,h)),null!==l&&hf(h,A),Rf}function kf(){let i=yn();Cl()?Il():(i=i.parent,Yr(i,!1));const o=i;!function _u(){vt.lFrame.elementDepthCount--}();const a=Ht();return a.firstCreatePass&&(hs(a,i),zc(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function ld(i){return 0!=(16&i.flags)}(o)&&Zd(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function jp(i){return 0!=(32&i.flags)}(o)&&Zd(a,o,Ae(),o.stylesWithoutHost,!1),kf}function $g(i,o,a,l){return Rf(i,o,a,l),kf(),$g}function Of(i,o,a){const l=Ae(),h=Ht(),p=i+20,_=h.firstCreatePass?function Nf(i,o,a,l,h){const p=o.consts,_=Kr(p,l),E=Fu(o,i,8,"ng-container",_);return null!==_&&R_(E,_,!0),T_(o,a,E,Kr(p,h)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,h,l,o,a):h.data[p];Yr(_,!0);const E=l[p]=l[11].createComment("");return lg(h,l,E,_),Lr(E,l),ou(_)&&(E_(h,l,_),w_(h,_,l)),null!=a&&hf(l,_),Of}function yc(){let i=yn();const o=Ht();return Cl()?Il():(i=i.parent,Yr(i,!1)),o.firstCreatePass&&(hs(o,i),zc(i)&&o.queries.elementEnd(i)),yc}function Zu(){return Ae()}function Pf(i){return!!i&&"function"==typeof i.then}function oE(i){return!!i&&"function"==typeof i.subscribe}const Hg=oE;function zu(i,o,a,l){const h=Ae(),p=Ht(),_=yn();return function av(i,o,a,l,h,p,_,E){const b=ou(l),M=i.firstCreatePass&&bI(i),P=o[8],j=EI(o);let X=!0;if(3&l.type||E){const Ke=Er(l,o),ut=E?E(Ke):Ke,Se=j.length,mt=E?Qt=>E(an(Qt[l.index])):l.index;if(hn(a)){let Qt=null;if(!E&&b&&(Qt=function _c(i,o,a,l){const h=i.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===a&&h[p+1]===l){const E=o[7],b=h[p+2];return E.length>b?E[b]:null}"string"==typeof _&&(p+=2)}return null}(i,o,h,l.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=p,Qt.__ngLastListenerFn__=p,X=!1;else{p=Za(l,o,P,p,!1);const un=a.listen(ut,h,p);j.push(p,un),M&&M.push(h,mt,Se,Se+1)}}else p=Za(l,o,P,p,!0),ut.addEventListener(h,p,_),j.push(p),M&&M.push(h,mt,Se,_)}else p=Za(l,o,P,p,!1);const ve=l.outputs;let je;if(X&&null!==ve&&(je=ve[h])){const Ke=je.length;if(Ke)for(let ut=0;ut<Ke;ut+=2){const bi=o[je[ut]][je[ut+1]].subscribe(p),eu=j.length;j.push(p,bi),M&&M.push(h,l.index,eu,-(eu+1))}}}(p,h,h[11],_,i,o,!!a,l),zu}function aE(i,o,a,l){try{return!1!==a(l)}catch(h){return CI(i,h),!1}}function Za(i,o,a,l,h){return function p(_){if(_===Function)return l;const E=2&i.flags?br(i.index,o):o;0==(32&o[2])&&bg(E);let b=aE(o,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=aE(o,0,A,_)&&b,A=A.__ngNextListenerFn__;return h&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function ha(i=1){return function Qs(i){return(vt.lFrame.contextLView=function Rl(i,o){for(;i>0;)o=o[15],i--;return o}(i,vt.lFrame.contextLView))[8]}(i)}function qg(i,o){let a=null;const l=function eI(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===l?tw(i,p,!0):nI(l,p))return h}else a=h}return a}function Ff(i){const o=Ae()[16][6];if(!o.projection){const l=o.projection=Mi(i?i.length:1,null),h=l.slice();let p=o.child;for(;null!==p;){const _=i?qg(p,i):0;null!==_&&(h[_]?h[_].projectionNext=p:l[_]=p,h[_]=p),p=p.next}}}function Lf(i,o=0,a){const l=Ae(),h=Ht(),p=Fu(h,20+i,16,null,a||null);null===p.projection&&(p.projection=o),Il(),64!=(64&p.flags)&&function nS(i,o,a){YC(o[11],0,o,a,ug(i,a,o),z0(a.parent||o[6],a,o))}(h,l,p)}function Yd(i,o,a,l,h){const p=i[a+1],_=null===o;let E=l?aa(p):Ou(p),b=!1;for(;0!==E&&(!1===b||_);){const M=i[E+1];Wu(i[E],o)&&(b=!0,i[E+1]=l?uw(M):ow(M)),E=l?aa(M):Ou(M)}b&&(i[a+1]=l?ow(p):uw(p))}function Wu(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&so(i,o)>=0}function pv(i,o){return function Ss(i,o,a,l){const h=Ae(),p=Ht(),_=Di(2);p.firstUpdatePass&&function Xd(i,o,a,l){const h=i.data;if(null===h[a+1]){const p=h[Cr()],_=function Jd(i,o){return o>=i.expandoStartIndex}(i,a);(function _v(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!_&&(o=!1),o=function ZI(i,o,a,l){const h=function Ma(i){const o=vt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(a=Bf(a=gv(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==h)if(a=gv(h,i,o,a,l),null===p){let b=function pr(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ou(l))return i[aa(l)]}(i,o,l);void 0!==b&&Array.isArray(b)&&(b=gv(null,i,o,b[1],l),b=Bf(b,o.attrs,l),function vE(i,o,a,l){i[aa(a?o.classBindings:o.styleBindings)]=l}(i,o,l,b))}else p=function zI(i,o,a){let l;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)l=Bf(l,i[p].hostAttrs,a);return Bf(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(h,p,o,l),function HI(i,o,a,l,h,p){let _=p?o.classBindings:o.styleBindings,E=aa(_),b=Ou(_);i[l]=a;let M,A=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||so(P,M)>0)&&(A=!0)}else M=a;if(h)if(0!==b){const j=aa(i[E+1]);i[l+1]=hg(j,E),0!==j&&(i[j+1]=c_(i[j+1],l)),i[E+1]=function l_(i,o){return 131071&i|o<<17}(i[E+1],l)}else i[l+1]=hg(E,0),0!==E&&(i[E+1]=c_(i[E+1],l)),E=l;else i[l+1]=hg(b,0),0===E?E=l:i[b+1]=c_(i[b+1],l),b=l;A&&(i[l+1]=ow(i[l+1])),Yd(i,M,l,!0),Yd(i,M,l,!1),function GI(i,o,a,l,h){const p=h?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&so(p,o)>=0&&(a[l+1]=uw(a[l+1]))}(o,M,i,l,p),_=hg(E,b),p?o.classBindings=_:o.styleBindings=_}(h,p,o,a,_,l)}}(p,i,_,l),o!==lt&&Ei(h,_,o)&&function yv(i,o,a,l,h,p,_,E){if(!(3&o.type))return;const b=i.data,A=b[E+1];$f(function aw(i){return 1==(1&i)}(A)?jf(b,o,a,h,Ou(A),_):void 0)||($f(p)||function sw(i){return 2==(2&i)}(A)&&(p=jf(b,null,a,h,E,_)),function iS(i,o,a,l,h){const p=hn(i);if(o)h?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:he.DashCase;if(null==h)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof h&&h.endsWith("!important");E&&(h=h.slice(0,-10),_|=he.Important),p?i.setStyle(a,l,h,_):a.style.setProperty(l,h,E?"important":"")}}}(l,_,wo(Cr(),a),h,p))}(p,p.data[Cr()],h,h[11],i,h[_+1]=function za(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ne(Es(i)))),i}(o,a),l,_)}(i,o,null,!0),pv}function gv(i,o,a,l,h){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],l=Bf(l,p.hostAttrs,h),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Bf(i,o,a){const l=a?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Wn(i,_,!!a||o[++p]))}return void 0===i?null:i}function jf(i,o,a,l,h,p){const _=null===o;let E;for(;h>0;){const b=i[h],A=Array.isArray(b),M=A?b[1]:b,P=null===M;let j=a[h+1];j===lt&&(j=P?yt:void 0);let X=P?Zl(j,l):M===l?j:void 0;if(A&&!$f(X)&&(X=Zl(b,l)),$f(X)&&(E=X,_))return E;const ve=i[h+1];h=_?aa(ve):Ou(ve)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(E=Zl(b,l))}return E}function $f(i){return void 0!==i}function EE(i,o=""){const a=Ae(),l=Ht(),h=i+20,p=l.firstCreatePass?Fu(l,h,1,o,null):l.data[h],_=a[h]=function xd(i,o){return hn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);lg(l,a,_,p),Yr(p,!1)}function Hf(i){return Ku("",i,""),Hf}function Ku(i,o,a){const l=Ae(),h=function $u(i,o,a,l){return Ei(i,Ys(),a)?o+we(a)+l:lt}(l,i,o,a);return h!==lt&&Uu(l,Cr(),h),Ku}function Wg(i,o,a,l,h){const p=Ae(),_=Hu(p,i,o,a,l,h);return _!==lt&&Uu(p,Cr(),_),Wg}const jn=void 0;var Yu=["en",[["a","p"],["AM","PM"],jn],[["AM","PM"],jn,jn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jn,"{1} 'at' {0}",jn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eh(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Qu={};function Be(i){const o=function KI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=em(o);if(a)return a;const l=o.split("-")[0];if(a=em(l),a)return a;if("en"===l)return Yu;throw new Error(`Missing locale data for the locale "${i}".`)}function th(i){return Be(i)[Ue.PluralCase]}function em(i){return i in Qu||(Qu[i]=zt.ng&&zt.ng.common&&zt.ng.common.locales&&zt.ng.common.locales[i]),Qu[i]}var Ue=(()=>((Ue=Ue||{})[Ue.LocaleId=0]="LocaleId",Ue[Ue.DayPeriodsFormat=1]="DayPeriodsFormat",Ue[Ue.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ue[Ue.DaysFormat=3]="DaysFormat",Ue[Ue.DaysStandalone=4]="DaysStandalone",Ue[Ue.MonthsFormat=5]="MonthsFormat",Ue[Ue.MonthsStandalone=6]="MonthsStandalone",Ue[Ue.Eras=7]="Eras",Ue[Ue.FirstDayOfWeek=8]="FirstDayOfWeek",Ue[Ue.WeekendRange=9]="WeekendRange",Ue[Ue.DateFormat=10]="DateFormat",Ue[Ue.TimeFormat=11]="TimeFormat",Ue[Ue.DateTimeFormat=12]="DateTimeFormat",Ue[Ue.NumberSymbols=13]="NumberSymbols",Ue[Ue.NumberFormats=14]="NumberFormats",Ue[Ue.CurrencyCode=15]="CurrencyCode",Ue[Ue.CurrencySymbol=16]="CurrencySymbol",Ue[Ue.CurrencyName=17]="CurrencyName",Ue[Ue.Currencies=18]="Currencies",Ue[Ue.Directionality=19]="Directionality",Ue[Ue.PluralCase=20]="PluralCase",Ue[Ue.ExtraData=21]="ExtraData",Ue))();const Ne="en-US";let BE=Ne;function ma(i,o,a,l,h){if(i=W(i),Array.isArray(i))for(let p=0;p<i.length;p++)ma(i[p],o,a,l,h);else{const p=Ht(),_=Ae();let E=Tt(i)?i:W(i.provide),b=F_(i);const A=yn(),M=1048575&A.providerIndexes,P=A.directiveStart,j=A.providerIndexes>>20;if(Tt(i)||!i.multi){const X=new Yo(b,h,qd),ve=cm(E,o,h?M:M+j,P);-1===ve?(eo(Dn(A,_),p,E),tl(p,i,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(X),_.push(X)):(a[ve]=X,_[ve]=X)}else{const X=cm(E,o,M+j,P),ve=cm(E,o,M,M+j),je=X>=0&&a[X],Ke=ve>=0&&a[ve];if(h&&!Ke||!h&&!je){eo(Dn(A,_),p,E);const ut=function lh(i,o,a,l,h){const p=new Yo(i,a,qd);return p.multi=[],p.index=o,p.componentProviders=0,sb(p,h,l&&!a),p}(h?Qa:ob,a.length,h,l,b);!h&&Ke&&(a[ve].providerFactory=ut),tl(p,i,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),a.push(ut),_.push(ut)}else tl(p,i,X>-1?X:ve,sb(a[h?ve:X],b,!h&&l));!h&&l&&Ke&&a[ve].componentProviders++}}}function tl(i,o,a,l){const h=Tt(o),p=function Ag(i){return!!i.useClass}(o);if(h||p){const b=(p?W(o.useClass):o).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!h&&o.multi){const M=A.indexOf(a);-1===M?A.push(a,[l,b]):A[M+1].push(l,b)}else A.push(a,b)}}}function sb(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function cm(i,o,a,l){for(let h=a;h<l;h++)if(o[h]===i)return h;return-1}function ob(i,o,a,l){return dm(this.multi,[])}function Qa(i,o,a,l){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Ai(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),dm(h,p);for(let b=_;b<E.length;b++)p.push(E[b])}else p=[],dm(h,p);return p}function dm(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function ep(i,o=[]){return a=>{a.providersResolver=(l,h)=>function uD(i,o,a){const l=Ht();if(l.firstCreatePass){const h=zr(i);ma(a,l.data,l.blueprint,h,!0),ma(o,l.data,l.blueprint,h,!1)}}(l,h?h(i):i,o)}}class fm{}class lo{resolveComponentFactory(o){throw function Rv(i){const o=Error(`No component factory found for ${ne(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let np=(()=>{class i{}return i.NULL=new lo,i})();function rp(){return Tc(yn(),Ae())}function Tc(i,o){return new Ac(Er(i,o))}let Ac=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=rp,i})();function kv(i){return i instanceof Ac?i.nativeElement:i}class Nv{}let cD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ub(){const i=Ae(),a=br(yn().index,i);return function ab(i){return i[11]}(Ci(a)?a:i)}(),i})(),lb=(()=>{class i{}return i.\u0275prov=Ot({token:i,providedIn:"root",factory:()=>null}),i})();class ip{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const cb=new ip("13.3.1"),Ov={};function sp(i,o,a,l,h=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(an(p)),li(p))for(let E=10;E<p.length;E++){const b=p[E],A=b[1].firstChild;null!==A&&sp(b[1],b,A,l)}const _=a.type;if(8&_)sp(i,o,a.child,l);else if(32&_){const E=at(a,o);let b;for(;b=E();)l.push(b)}else if(16&_){const E=Y0(o,a);if(Array.isArray(E))l.push(...E);else{const b=Sn(o[16]);sp(b[1],b,E,l,!0)}}a=h?a.projectionNext:a.next}return l}class ya{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return sp(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(li(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Yy(o,l),_s(a,l))}this._attachedToViewContainer=!1}Qy(this._lView[1],this._lView)}onDestroy(o){pf(this._lView[1],this._lView,null,o)}markForCheck(){bg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Nw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mS(i,o,a){Ks(!0);try{Nw(i,o,a)}finally{Ks(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ce(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ag(i,o){cg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ce(902,"");this._appRef=o}}class Sc extends ya{constructor(o){super(o),this._view=o}detectChanges(){Cg(this._view)}checkNoChanges(){!function vI(i){Ks(!0);try{Cg(i)}finally{Ks(!1)}}(this._view)}get context(){return null}}class Pv extends np{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Kt(o);return new gm(a,this.ngModule)}}function nl(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class gm extends fm{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function iw(i){return i.map(rw).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return nl(this.componentDef.inputs)}get outputs(){return nl(this.componentDef.outputs)}create(o,a,l,h){const p=(h=h||this.ngModule)?function ch(i,o){return{get:(a,l,h)=>{const p=i.get(a,Ov,h);return p!==Ov||l===Ov?p:o.get(a,l,h)}}}(o,h.injector):o,_=p.get(Nv,zo),E=p.get(lb,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=l?function vw(i,o,a){if(hn(i))return i.selectRootElement(o,a===Wt.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Rd(_.createRenderer(null,this.componentDef),A,function db(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),P=this.componentDef.onPush?576:528,j=function $w(i,o){return{components:[],scheduler:i||qy,clean:wI,playerHandler:o||null,flags:0}}(),X=ff(0,null,null,1,0,null,null,null,null,null),ve=Pd(null,X,j,P,null,null,_,b,E,p);let je,Ke;Eo(ve);try{const ut=function q_(i,o,a,l,h,p){const _=a[1];a[20]=i;const b=Fu(_,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(R_(b,A,!0),null!==i&&(gt(h,i,A),null!==b.classes&&s_(h,i,b.classes),null!==b.styles&&Q0(h,i,b.styles)));const M=l.createRenderer(i,o),P=Pd(a,b_(o),null,o.onPush?64:16,a[20],b,l,M,p||null,null);return _.firstCreatePass&&(eo(Dn(b,a),_,o.type),A_(_,b),Dw(b,a.length,1)),Eg(a,P),a[20]=P}(M,this.componentDef,ve,_,b);if(M)if(l)gt(b,M,["ng-version",cb.full]);else{const{attrs:Se,classes:mt}=function a_(i){const o=[],a=[];let l=1,h=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===h?""!==p&&o.push(p,i[++l]):8===h&&a.push(p);else{if(!Po(h))break;h=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Se&&gt(b,M,Se),mt&&mt.length>0&&s_(b,M,mt.join(" "))}if(Ke=Aa(X,20),void 0!==a){const Se=Ke.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Qt=a[mt];Se.push(null!=Qt?Array.from(Qt):null)}}je=function Sg(i,o,a,l,h){const p=a[1],_=function fI(i,o,a){const l=yn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Tw(i,l,o,Lu(i,o,1,null),a));const h=Ai(o,i,l.directiveStart,l);Lr(h,o);const p=Er(l,o);return p&&Lr(p,o),h}(p,a,o);if(l.components.push(_),i[8]=_,h&&h.forEach(b=>b(_,o)),o.contentQueries){const b=yn();o.contentQueries(1,_,b.directiveStart)}const E=yn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Js(E.index),Cw(a[1],E,0,E.directiveStart,E.directiveEnd,o),gf(o,_)),_}(ut,this.componentDef,ve,j,[OI]),Fd(X,ve,null)}finally{Co()}return new dD(this.componentType,je,Tc(Ke,ve),ve,Ke)}}class dD extends class hm{}{constructor(o,a,l,h,p){super(),this.location=l,this._rootLView=h,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Sc(h),this.componentType=o}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class xn{}class op{}const Ja=new Map;class rl extends xn{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pv(this);const l=ln(o);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=Lw(o,a,[{provide:xn,useValue:this},{provide:np,useValue:this.componentFactoryResolver}],ne(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Ds.THROW_IF_NOT_FOUND,l=pt.Default){return o===Ds||o===xn||o===Ig?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class vm extends op{constructor(o){super(),this.moduleType=o,null!==ln(o)&&function fD(i){const o=new Set;!function a(l){const h=ln(l,!0),p=h.id;null!==p&&(function ym(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${ne(o)} vs ${ne(o.name)}`)}(p,Ja.get(p),l),Ja.set(p,l));const _=g(h.imports);for(const E of _)o.has(E)||(o.add(E),a(E))}(i)}(o)}create(o){return new rl(this.moduleType,o)}}function Lv(i,o,a){const l=lr()+i,h=Ae();return h[l]===lt?da(h,l,a?o.call(a):o()):function qa(i,o){return i[o]}(h,l)}function Uv(i,o,a,l){return ap(Ae(),lr(),i,o,a,l)}function dh(i,o,a,l,h){return function jr(i,o,a,l,h,p,_){const E=o+a;return dc(i,E,h,p)?da(i,E+2,_?l.call(_,h,p):l(h,p)):Mn(i,E+2)}(Ae(),lr(),i,o,a,l,h)}function Mn(i,o){const a=i[o];return a===lt?void 0:a}function ap(i,o,a,l,h,p){const _=o+a;return Ei(i,_,h)?da(i,_+1,p?l.call(p,h):l(h)):Mn(i,_+1)}function gb(i,o){const a=Ht();let l;const h=i+20;a.firstCreatePass?(l=function co(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[h]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(h,l.onDestroy)):l=a.data[h];const p=l.factory||(l.factory=Or(l.type)),_=Gn(qd);try{const E=hi(!1),b=p();return hi(E),function Ww(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Ae(),h,b),b}finally{Gn(_)}}function mb(i,o,a){const l=i+20,h=Ae(),p=Ii(h,l);return function nn(i,o){return i[1].data[o].pure}(h,l)?ap(h,lr(),o,p.transform,a,p):p.transform(a)}function hh(i){return o=>{setTimeout(i,void 0,o)}}const es=class _D extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var h,p,_;let E=o,b=a||(()=>null),A=l;if(o&&"object"==typeof o){const P=o;E=null===(h=P.next)||void 0===h?void 0:h.bind(P),b=null===(p=P.error)||void 0===p?void 0:p.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=hh(b),E&&(E=hh(E)),A&&(A=hh(A)));const M=super.subscribe({next:E,error:b,complete:A});return o instanceof q.w0&&o.add(M),M}};function lp(){return this._results[Bu()]()}class Mc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Bu(),l=Mc.prototype;l[a]||(l[a]=lp)}get changes(){return this._changes||(this._changes=new es)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const h=hr(o);(this._changesDetected=!function jl(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],p=o[l];if(a&&(h=a(h),p=a(p)),p!==h)return!1}return!0}(l._results,h,a))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let fh=(()=>{class i{}return i.__NG_ELEMENT_ID__=vD,i})();const yb=fh,_b=class extends yb{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Pd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Fd(a,l,o),new ya(l)}};function vD(){return cp(yn(),Ae())}function cp(i,o){return 4&i.type?new _b(o,i,Tc(i,o)):null}let dp=(()=>{class i{}return i.__NG_ELEMENT_ID__=wD,i})();function wD(){return wb(yn(),Ae())}const ED=dp,vb=class extends ED{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){const o=fi(this._hostTNode,this._hostLView);if(cd(o)){const a=Ti(o,this._hostLView),l=dn(o);return new Si(a[1].data[l+8],a)}return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=ph(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const h=o.createEmbeddedView(a||{});return this.insert(h,l),h}createComponent(o,a,l,h,p){const _=o&&!function ta(i){return"function"==typeof i}(o);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,h=P.projectableNodes,p=P.ngModuleRef}const b=_?o:new gm(Kt(o)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const j=(_?A:this.parentInjector).get(xn,null);j&&(p=j)}const M=b.create(A,h,void 0,p);return this.insert(M.hostView,E),M}insert(o,a){const l=o._lView,h=l[1];if(function gu(i){return li(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const P=l[3],j=new vb(P,P[6],P[3]);j.detach(j.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function kd(i,o,a,l){const h=10+l,p=a.length;l>0&&(a[h-1][4]=o),l<p-10?(o[4]=a[h],$l(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Nd(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(i),o[2]|=128}(h,l,_,p);const E=n_(p,_),b=l[11],A=lc(b,_[7]);return null!==A&&function uf(i,o,a,l,h,p){l[0]=h,l[6]=o,cg(i,l,a,1,h,p)}(h,_[6],b,l,A,E),o.attachToViewContainerRef(),$l(wm(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=ph(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Yy(this._lContainer,a);l&&(_s(wm(this._lContainer),a),Qy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Yy(this._lContainer,a);return l&&null!=_s(wm(this._lContainer),a)?new ya(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function ph(i){return i[8]}function wm(i){return i[8]||(i[8]=[])}function wb(i,o){let a;const l=o[i.index];if(li(l))a=l;else{let h;if(8&i.type)h=an(l);else{const p=o[11];h=p.createComment("");const _=Er(i,o);bs(p,lc(p,_),h,function KC(i,o){return hn(i)?i.nextSibling(o):o.nextSibling}(p,_),!1)}o[i.index]=a=Mw(l,o,h,i),Eg(o,a)}return new vb(a,i,o)}class Rc{constructor(o){this.queryList=o,this.matches=null}clone(){return new Rc(this.queryList)}setDirty(){this.queryList.setDirty()}}class ho{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,h=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new ho(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Ab(o,a).matches&&this.queries[a].setDirty()}}class Em{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class bm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const h=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,h);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new bm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class kc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new kc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const p=l[h];this.matchTNodeWithReadOption(o,a,Eb(a,p)),this.matchTNodeWithReadOption(o,a,Jo(a,o,p,!1,!1))}else l===fh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Jo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Ac||h===dp||h===fh&&4&a.type)this.addMatch(a.index,-2);else{const p=Jo(a,o,h,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Eb(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Cb(i,o,a,l){return-1===a?function bb(i,o){return 11&i.type?Tc(i,o):4&i.type?cp(i,o):null}(o,i):-2===a?function CD(i,o,a){return a===Ac?Tc(o,i):a===fh?cp(o,i):a===dp?wb(o,i):void 0}(i,o,l):Ai(i,i[1],a,o)}function Ib(i,o,a,l){const h=o[19].queries[l];if(null===h.matches){const p=i.data,_=a.matches,E=[];for(let b=0;b<_.length;b+=2){const A=_[b];E.push(A<0?null:Cb(o,p[A],_[b+1],a.metadata.read))}h.matches=E}return h.matches}function Nc(i,o,a,l){const h=i.queries.getByIndex(a),p=h.matches;if(null!==p){const _=Ib(i,o,h,a);for(let E=0;E<p.length;E+=2){const b=p[E];if(b>0)l.push(_[E/2]);else{const A=p[E+1],M=o[-b];for(let P=10;P<M.length;P++){const j=M[P];j[17]===j[3]&&Nc(j[1],j,A,l)}if(null!==M[9]){const P=M[9];for(let j=0;j<P.length;j++){const X=P[j];Nc(X[1],X,A,l)}}}}}return l}function Cm(i){const o=Ae(),a=Ht(),l=Sl();xl(l+1);const h=Ab(a,l);if(i.dirty&&Zs(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const p=h.crossesNgTemplate?Nc(a,o,l,[]):Ib(a,o,h,l);i.reset(p,kv),i.notifyOnChanges()}return!0}return!1}function Hv(i,o,a,l){const h=Ht();if(h.firstCreatePass){const p=yn();(function qv(i,o,a){null===i.queries&&(i.queries=new bm),i.queries.track(new kc(o,a))})(h,new Em(o,a,l),p.index),function DD(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}!function Tb(i,o,a){const l=new Mc(4==(4&a));pf(i,o,l,l.destroy),null===o[19]&&(o[19]=new ho),o[19].queries.push(new Rc(l))}(h,Ae(),a)}function Gv(){return function Db(i,o){return i[19].queries[o].queryList}(Ae(),Sl())}function Ab(i,o){return i.queries.getByIndex(o)}function Oc(i,o){return cp(i,o)}function _a(...i){}const yh=new Tn("Application Initializer");let Mm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=_a,this.reject=_a,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Pf(p))a.push(p);else if(Hg(p)){const _=new Promise((E,b)=>{p.subscribe({complete:E,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(h=>{this.reject(h)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(it(yh,8))},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Rm=new Tn("AppId",{providedIn:"root",factory:function km(){return`${n0()}${n0()}${n0()}`}});function n0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const r0=new Tn("Platform Initializer"),s0=new Tn("Platform ID"),Nm=new Tn("appBootstrapListener");let Fc=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac}),i})();const Pm=new Tn("LocaleId",{providedIn:"root",factory:()=>Vt(Pm,pt.Optional|pt.SkipSelf)||function FD(){return"undefined"!=typeof $localize&&$localize.locale||Ne}()}),LD=new Tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class al{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Lc=(()=>{class i{compileModuleSync(a){return new vm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(ln(a).declarations).reduce((_,E)=>{const b=Kt(E);return b&&_.push(new gm(b)),_},[]);return new al(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const UD=(()=>Promise.resolve(0))();function pp(i){"undefined"==typeof Zone?UD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class $o{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new es(!1),this.onMicrotaskEmpty=new es(!1),this.onStable=new es(!1),this.onError=new es(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&a,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Fm(){let i=zt.requestAnimationFrame,o=zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Um(i){const o=()=>{!function Lm(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(zt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vm(i),i.isCheckStableRunning=!0,Uc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,h,p,_,E)=>{try{return Fi(i),a.invokeTask(h,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),a0(i)}},onInvoke:(a,l,h,p,_,E,b)=>{try{return Fi(i),a.invoke(h,p,_,E,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),a0(i)}},onHasTask:(a,l,h,p)=>{a.hasTask(h,p),l===h&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Vm(i),Uc(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,h,p)=>(a.handleError(h,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$o.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($o.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,Hb,_a,_a);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Hb={};function Uc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Fi(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function a0(i){i._nesting--,Uc(i)}class Bm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new es,this.onMicrotaskEmpty=new es,this.onStable=new es,this.onError=new es}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,h){return o.apply(a,l)}}let jm=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$o.assertNotInAngularZone(),pp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,h){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:h})}whenStable(a,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(it($o))},i.\u0275prov=Ot({token:i,factory:i.\u0275fac}),i})(),u0=(()=>{class i{constructor(){this._applications=new Map,$m.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return $m.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac}),i})();class ul{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function _h(i){$m=i}let ii,$m=new ul;const Xa=new Tn("AllowMultipleToken");class Vc{constructor(o,a){this.name=o,this.token=a}}function c0(i,o,a=[]){const l=`Platform: ${o}`,h=new Tn(l);return(p=[])=>{let _=qb();if(!_||_.injector.get(Xa,!1))if(i)i(a.concat(p).concat({provide:h,useValue:!0}));else{const E=a.concat(p).concat({provide:h,useValue:!0},{provide:Dg,useValue:"platform"});!function l0(i){if(ii&&!ii.destroyed&&!ii.injector.get(Xa,!1))throw new Ce(400,"");ii=i.get(Zb);const o=i.get(r0,null);o&&o.forEach(a=>a())}(Ds.create({providers:E,name:l}))}return function BD(i){const o=qb();if(!o)throw new Ce(401,"");return o}()}}function qb(){return ii&&!ii.destroyed?ii:null}let Zb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Hm(i,o){let a;return a="noop"===i?new Bm:("zone.js"===i?void 0:i)||new $o({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:$o,useValue:E}];return E.run(()=>{const A=Ds.create({providers:b,parent:this.injector,name:a.moduleType.name}),M=a.create(A),P=M.injector.get(Ar,null);if(!P)throw new Ce(402,"");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:X=>{P.handleError(X)}});M.onDestroy(()=>{Gm(this._modules,M),j.unsubscribe()})}),function zb(i,o,a){try{const l=a();return Pf(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const j=M.injector.get(Mm);return j.runInitializers(),j.donePromise.then(()=>(function YI(i){Te(i,"Expected localeId to be defined"),"string"==typeof i&&(BE=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Pm,Ne)||Ne),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const h=Wb({},l);return function VD(i,o,a){const l=new vm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(a){const l=a.injector.get(d0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!a.instance.ngDoBootstrap)throw new Ce(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ce(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(it(Ds))},i.\u0275prov=Ot({token:i,factory:i.\u0275fac}),i})();function Wb(i,o){return Array.isArray(o)?o.reduce(Wb,i):Object.assign(Object.assign({},i),o)}let d0=(()=>{class i{constructor(a,l,h,p,_){this._zone=a,this._injector=l,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new N.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),b=new N.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{$o.assertNotInAngularZone(),pp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{$o.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),P.unsubscribe()}});this.isStable=(0,Y.T)(E,b.pipe((0,Z.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ce(405,"");let h;h=a instanceof fm?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(h.componentType);const p=function Gb(i){return i.isBoundToModule}(h)?void 0:this._injector.get(xn),E=h.create(Ds.NULL,[],l||h.selector,p),b=E.location.nativeElement,A=E.injector.get(jm,null),M=A&&E.injector.get(u0);return A&&M&&M.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),Gm(this.components,E),M&&M.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ce(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Gm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Nm,[]).concat(this._bootstrapListeners).forEach(h=>h(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(it($o),it(Ds),it(Ar),it(np),it(Mm))},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Gm(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let h0=!0,f0=!1;function jD(){return f0=!0,h0}function Kb(){if(f0)throw new Error("Cannot enable prod mode after platform setup.");h0=!1}let qm=(()=>{class i{}return i.__NG_ELEMENT_ID__=p0,i})();function p0(i){return function $D(i,o,a){if(js(i)&&!a){const l=br(i.index,o);return new ya(l,l)}return 47&i.type?new ya(o[16],o):null}(yn(),Ae(),16==(16&i))}class nC{constructor(){}supports(o){return wf(o)}create(o){return new y0(o)}}const zD=(i,o)=>o;class y0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||zD}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,h=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<iC(l,h,p)?a:l,E=iC(_,h,p),b=_.currentIndex;if(_===l)h--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)h++;else{p||(p=[]);const A=E-h,M=b-h;if(A!=M){for(let j=0;j<A;j++){const X=j<p.length?p[j]:p[j]=0,ve=X+j;M<=ve&&ve<A&&(p[j]=X+1)}p[_.previousIndex]=M-A}}E!==b&&o(_,E,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!wf(o))throw new Ce(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else h=0,function wi(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Bu()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,h),l=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,h)):o=this._addAfter(new Hr(a,l),p,h),o}_verifyReinsertion(o,a,l,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const h=null===a?this._itHead:a._next;return o._next=h,o._prev=a,null===h?this._itTail=o:h._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new rC),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rC),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Hr{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WD{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class rC{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new WD,this.map.set(a,l)),l.add(o)}get(o,a){const h=this.map.get(o);return h?h.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iC(i,o,a){const l=i.previousIndex;if(null===l)return l;let h=0;return a&&l<a.length&&(h=a[l]),l+o+h}class sC{constructor(){}supports(o){return o instanceof Map||cc(o)}create(){return new KD}}class KD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||cc(o)))throw new Ce(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(h,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,a);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const l=new YD(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class YD{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ym(){return new Qm([new nC])}let Qm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ym()),deps:[[i,new So,new mi]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(null!=l)return l;throw new Ce(901,"")}}return i.\u0275prov=Ot({token:i,providedIn:"root",factory:Ym}),i})();function Jm(){return new wh([new sC])}let wh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const h=l.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Jm()),deps:[[i,new So,new mi]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ce(901,"")}}return i.\u0275prov=Ot({token:i,providedIn:"root",factory:Jm}),i})();const lC=c0(null,"core",[{provide:s0,useValue:"unknown"},{provide:Zb,deps:[Ds]},{provide:u0,deps:[]},{provide:Fc,deps:[]}]);let JD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(it(d0))},i.\u0275mod=re({type:i}),i.\u0275inj=qt({}),i})()},3942:(Me,oe,k)=>{"use strict";k.d(oe,{Z:()=>Ce});var c=k(2090),q=k(4859),N=k(9681),Y=k(1877);class Z{constructor(we,pe){this._delegate=we,this.firebase=pe,(0,N._addComponent)(we,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(we,pe=N._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(we);return!et.isInitialized()&&"EXPLICIT"===(null===(st=et.getComponent())||void 0===st?void 0:st.instantiationMode)&&et.initialize(),et.getImmediate({identifier:pe})}_removeServiceInstance(we,pe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(pe)}_addComponent(we){(0,N._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,N._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ee=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ae(){const Qe=function ne(Qe){const we={},pe={__esModule:!0,initializeApp:function Ie(Ge,ue={}){const Q=N.initializeApp(Ge,ue);if((0,c.r3)(we,Q.name))return we[Q.name];const ce=new Qe(Q,pe);return we[Q.name]=ce,ce},app:et,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function be(Ge){const ue=Ge.name,Q=ue.replace("-compat","");if(N._registerComponent(Ge)&&"PUBLIC"===Ge.type){const ce=(me=et())=>{if("function"!=typeof me[Q])throw ee.create("invalid-app-argument",{appName:ue});return me[Q]()};void 0!==Ge.serviceProps&&(0,c.ZB)(ce,Ge.serviceProps),pe[Q]=ce,Qe.prototype[Q]=function(...me){return this._getService.bind(this,ue).apply(this,Ge.multipleInstances?me:[])}}return"PUBLIC"===Ge.type?pe[Q]:null},removeApp:function st(Ge){delete we[Ge]},useAsService:function He(Ge,ue){return"serverAuth"===ue?null:ue},modularAPIs:N}};function et(Ge){if(!(0,c.r3)(we,Ge=Ge||N._DEFAULT_ENTRY_NAME))throw ee.create("no-app",{appName:Ge});return we[Ge]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function Ee(){return Object.keys(we).map(Ge=>we[Ge])}}),et.App=Qe,pe}(Z);return Qe.INTERNAL=Object.assign(Object.assign({},Qe.INTERNAL),{createFirebaseNamespace:ae,extendNamespace:function we(pe){(0,c.ZB)(Qe,pe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Qe}(),$=new Y.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qe=self.firebase.SDK_VERSION;Qe&&Qe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ce=B;!function Re(Qe){(0,N.registerVersion)("@firebase/app-compat","0.1.21",Qe)}()},9681:(Me,oe,k)=>{"use strict";k.r(oe),k.d(oe,{FirebaseError:()=>Y.ZR,SDK_VERSION:()=>kr,_DEFAULT_ENTRY_NAME:()=>We,_addComponent:()=>Rt,_addOrOverwriteComponent:()=>pn,_apps:()=>Ye,_clearComponents:()=>Pt,_components:()=>wt,_getProvider:()=>qr,_registerComponent:()=>Ot,_removeServiceInstance:()=>qt,deleteApp:()=>is,getApp:()=>Nr,getApps:()=>rs,initializeApp:()=>Bi,onLog:()=>Xn,registerVersion:()=>Zr,setLogLevel:()=>Gn});var c=k(5861),q=k(4859),N=k(1877),Y=k(2090);class Z{constructor(xe){this.container=xe}getPlatformInfoString(){return this.container.getProviders().map(ot=>{if(function te(tt){const xe=tt.getComponent();return"VERSION"===(null==xe?void 0:xe.type)}(ot)){const _t=ot.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(ot=>ot).join(" ")}}const ee="@firebase/app",ae=new N.Yd("@firebase/app"),We="[DEFAULT]",Te={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ye=new Map,wt=new Map;function Rt(tt,xe){try{tt.container.addComponent(xe)}catch(ot){ae.debug(`Component ${xe.name} failed to register with FirebaseApp ${tt.name}`,ot)}}function pn(tt,xe){tt.container.addOrOverwriteComponent(xe)}function Ot(tt){const xe=tt.name;if(wt.has(xe))return ae.debug(`There were multiple attempts to register component ${xe}.`),!1;wt.set(xe,tt);for(const ot of Ye.values())Rt(ot,tt);return!0}function qr(tt,xe){const ot=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return ot&&ot.triggerHeartbeat(),tt.container.getProvider(xe)}function qt(tt,xe,ot=We){qr(tt,xe).clearInstance(ot)}function Pt(){wt.clear()}const si=new Y.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Fs{constructor(xe,ot,_t){this._isDeleted=!1,this._options=Object.assign({},xe),this._config=Object.assign({},ot),this._name=ot.name,this._automaticDataCollectionEnabled=ot.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(xe){this._isDeleted=xe}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const kr="9.6.10";function Bi(tt,xe={}){"object"!=typeof xe&&(xe={name:xe});const ot=Object.assign({name:We,automaticDataCollectionEnabled:!1},xe),_t=ot.name;if("string"!=typeof _t||!_t)throw si.create("bad-app-name",{appName:String(_t)});const Zt=Ye.get(_t);if(Zt){if((0,Y.vZ)(tt,Zt.options)&&(0,Y.vZ)(ot,Zt.config))return Zt;throw si.create("duplicate-app",{appName:_t})}const $t=new q.H0(_t);for(const U of wt.values())$t.addComponent(U);const H=new Fs(tt,ot,$t);return Ye.set(_t,H),H}function Nr(tt=We){const xe=Ye.get(tt);if(!xe)throw si.create("no-app",{appName:tt});return xe}function rs(){return Array.from(Ye.values())}function is(tt){return pt.apply(this,arguments)}function pt(){return(pt=(0,c.Z)(function*(tt){const xe=tt.name;Ye.has(xe)&&(Ye.delete(xe),yield Promise.all(tt.container.getProviders().map(ot=>ot.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function Zr(tt,xe,ot){var _t;let Zt=null!==(_t=Te[tt])&&void 0!==_t?_t:tt;ot&&(Zt+=`-${ot}`);const $t=Zt.match(/\s|\//),H=xe.match(/\s|\//);if($t||H){const U=[`Unable to register library "${Zt}" with version "${xe}":`];return $t&&U.push(`library name "${Zt}" contains illegal characters (whitespace or "/")`),$t&&H&&U.push("and"),H&&U.push(`version name "${xe}" contains illegal characters (whitespace or "/")`),void ae.warn(U.join(" "))}Ot(new q.wA(`${Zt}-version`,()=>({library:Zt,version:xe}),"VERSION"))}function Xn(tt,xe){if(null!==tt&&"function"!=typeof tt)throw si.create("invalid-log-argument");(0,N.Am)(tt,xe)}function Gn(tt){(0,N.Ub)(tt)}const gn="firebase-heartbeat-store";let er=null;function Ls(){return er||(er=(0,Y.X3)("firebase-heartbeat-database",1,(tt,xe)=>{0===xe&&tt.createObjectStore(gn)}).catch(tt=>{throw si.create("storage-open",{originalErrorMessage:tt.message})})),er}function Wt(){return(Wt=(0,c.Z)(function*(tt){try{return(yield Ls()).transaction(gn).objectStore(gn).get(sr(tt))}catch(xe){throw si.create("storage-get",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function ht(tt,xe){return It.apply(this,arguments)}function It(){return(It=(0,c.Z)(function*(tt,xe){try{const _t=(yield Ls()).transaction(gn,"readwrite");return yield _t.objectStore(gn).put(xe,sr(tt)),_t.complete}catch(ot){throw si.create("storage-set",{originalErrorMessage:ot.message})}})).apply(this,arguments)}function sr(tt){return`${tt.name}!${tt.options.appId}`}class go{constructor(xe){this.container=xe,this._heartbeatsCache=null;const ot=this.container.getProvider("app").getImmediate();this._storage=new yt(ot),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var xe=this;return(0,c.Z)(function*(){const _t=xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Zt=_r();if(null===xe._heartbeatsCache&&(xe._heartbeatsCache=yield xe._heartbeatsCachePromise),xe._heartbeatsCache.lastSentHeartbeatDate!==Zt&&!xe._heartbeatsCache.heartbeats.some($t=>$t.date===Zt))return xe._heartbeatsCache.heartbeats.push({date:Zt,agent:_t}),xe._heartbeatsCache.heartbeats=xe._heartbeatsCache.heartbeats.filter($t=>{const H=new Date($t.date).valueOf();return Date.now()-H<=2592e6}),xe._storage.overwrite(xe._heartbeatsCache)})()}getHeartbeatsHeader(){var xe=this;return(0,c.Z)(function*(){if(null===xe._heartbeatsCache&&(yield xe._heartbeatsCachePromise),null===xe._heartbeatsCache||0===xe._heartbeatsCache.heartbeats.length)return"";const ot=_r(),{heartbeatsToSend:_t,unsentEntries:Zt}=function or(tt,xe=1024){const ot=[];let _t=tt.slice();for(const Zt of tt){const $t=ot.find(H=>H.agent===Zt.agent);if($t){if($t.dates.push(Zt.date),vr(ot)>xe){$t.dates.pop();break}}else if(ot.push({agent:Zt.agent,dates:[Zt.date]}),vr(ot)>xe){ot.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:ot,unsentEntries:_t}}(xe._heartbeatsCache.heartbeats),$t=(0,Y.L)(JSON.stringify({version:2,heartbeats:_t}));return xe._heartbeatsCache.lastSentHeartbeatDate=ot,Zt.length>0?(xe._heartbeatsCache.heartbeats=Zt,yield xe._storage.overwrite(xe._heartbeatsCache)):(xe._heartbeatsCache.heartbeats=[],xe._storage.overwrite(xe._heartbeatsCache)),$t})()}}function _r(){return(new Date).toISOString().substring(0,10)}class yt{constructor(xe){this.app=xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,Y.hl)()&&(0,Y.eu)().then(()=>!0).catch(()=>!1)})()}read(){var xe=this;return(0,c.Z)(function*(){return(yield xe._canUseIndexedDBPromise)&&(yield function Ea(tt){return Wt.apply(this,arguments)}(xe.app))||{heartbeats:[]}})()}overwrite(xe){var ot=this;return(0,c.Z)(function*(){var _t;if(yield ot._canUseIndexedDBPromise){const $t=yield ot.read();return ht(ot.app,{lastSentHeartbeatDate:null!==(_t=xe.lastSentHeartbeatDate)&&void 0!==_t?_t:$t.lastSentHeartbeatDate,heartbeats:xe.heartbeats})}})()}add(xe){var ot=this;return(0,c.Z)(function*(){var _t;if(yield ot._canUseIndexedDBPromise){const $t=yield ot.read();return ht(ot.app,{lastSentHeartbeatDate:null!==(_t=xe.lastSentHeartbeatDate)&&void 0!==_t?_t:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...xe.heartbeats]})}})()}}function vr(tt){return(0,Y.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Gt(tt){Ot(new q.wA("platform-logger",xe=>new Z(xe),"PRIVATE")),Ot(new q.wA("heartbeat",xe=>new go(xe),"PRIVATE")),Zr(ee,"0.7.20",tt),Zr(ee,"0.7.20","esm2017"),Zr("fire-js","")}("")},4859:(Me,oe,k)=>{"use strict";k.d(oe,{H0:()=>ne,wA:()=>N});var c=k(5861),q=k(2090);class N{constructor(B,$,W){this.name=B,this.instanceFactory=$,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const Y="[DEFAULT]";class Z{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const W=new q.BH;if(this.instancesDeferred.set($,W),this.isInitialized($)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:$});$e&&W.resolve($e)}catch($e){}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const W=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),$e=null!==($=null==B?void 0:B.optional)&&void 0!==$&&$;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(Re){if($e)return null;throw Re}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ee(ae){return"EAGER"===ae.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:Y})}catch($){}for(const[$,W]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier($);try{const Re=this.getOrInitializeService({instanceIdentifier:$e});W.resolve(Re)}catch(Re){}}}}clearInstance(B=Y){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,c.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...$.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=Y){return this.instances.has(B)}getOptions(B=Y){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,W=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:W,options:$});for(const[Re,Ce]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(Re)&&Ce.resolve($e);return $e}onInit(B,$){var W;const $e=this.normalizeInstanceIdentifier($),Re=null!==(W=this.onInitCallbacks.get($e))&&void 0!==W?W:new Set;Re.add(B),this.onInitCallbacks.set($e,Re);const Ce=this.instances.get($e);return Ce&&B(Ce,$e),()=>{Re.delete(B)}}invokeOnInitCallbacks(B,$){const W=this.onInitCallbacks.get($);if(W)for(const $e of W)try{$e(B,$)}catch(Re){}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let W=this.instances.get(B);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(ae=B,ae===Y?void 0:ae),options:$}),this.instances.set(B,W),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(W,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,W)}catch($e){}var ae;return W||null}normalizeInstanceIdentifier(B=Y){return this.component?this.component.multipleInstances?B:Y:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ne{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new Z(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(Me,oe,k)=>{"use strict";k.d(oe,{Am:()=>ae,Ub:()=>ne,Yd:()=>ee,in:()=>q});const c=[];var q=(()=>{return(B=q||(q={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",q;var B})();const N={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Y=q.INFO,Z={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},te=(B,$,...W)=>{if($<B.logLevel)return;const $e=(new Date).toISOString(),Re=Z[$];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Re](`[${$e}]  ${B.name}:`,...W)};class ee{constructor($){this.name=$,this._logLevel=Y,this._logHandler=te,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in q))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?N[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...$),this._logHandler(this,q.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...$),this._logHandler(this,q.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,q.INFO,...$),this._logHandler(this,q.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,q.WARN,...$),this._logHandler(this,q.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...$),this._logHandler(this,q.ERROR,...$)}}function ne(B){c.forEach($=>{$.setLogLevel(B)})}function ae(B,$){for(const W of c){let $e=null;$&&$.level&&($e=N[$.level]),W.userLogHandler=null===B?null:(Re,Ce,...Qe)=>{const we=Qe.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch(st){return null}}).filter(pe=>pe).join(" ");Ce>=(null!=$e?$e:Re.logLevel)&&B({level:q[Ce].toLowerCase(),message:we,args:Qe,type:Re.name})}}}},5861:(Me,oe,k)=>{"use strict";function c(N,Y,Z,te,ee,ne,ae){try{var B=N[ne](ae),$=B.value}catch(W){return void Z(W)}B.done?Y($):Promise.resolve($).then(te,ee)}function q(N){return function(){var Y=this,Z=arguments;return new Promise(function(te,ee){var ne=N.apply(Y,Z);function ae($){c(ne,te,ee,ae,B,"next",$)}function B($){c(ne,te,ee,ae,B,"throw",$)}ae(void 0)})}}k.d(oe,{Z:()=>q})},3681:Me=>{"use strict";Me.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.10.1","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.10.0","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},Me=>{Me(Me.s=2666)}]);