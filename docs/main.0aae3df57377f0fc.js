"use strict";(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(nt,Ee,N)=>{N.d(Ee,{Dh:()=>de,GT:()=>fe,cc:()=>Me,hO:()=>He,on:()=>j,pX:()=>J,xv:()=>ue});var c=N(5e3),Y=N(127),O=N(5813);nt=N.hmd(nt);const te=["ngOnDestroy"],J=(we,st,et,Te={})=>new Proxy(we,{get:(_e,ve)=>et.runOutsideAngular(()=>{var Ge;if(we[ve])return(null===(Ge=null==Te?void 0:Te.spy)||void 0===Ge?void 0:Ge.get)&&Te.spy.get(ve,we[ve]),we[ve];if(te.indexOf(ve)>-1)return()=>{};const je=st.toPromise().then(ee=>{const z=ee&&ee[ve];return"function"==typeof z?z.bind(ee):z&&z.then?z.then(ne=>et.run(()=>ne)):et.run(()=>z)});return new Proxy(()=>{},{get:(ee,z)=>je[z],apply:(ee,z,ne)=>je.then(ge=>{var re;const Re=ge&&ge(...ne);return(null===(re=null==Te?void 0:Te.spy)||void 0===re?void 0:re.apply)&&Te.spy.apply(ve,ne,Re),Re})})})}),fe=(we,st)=>{st.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Te=>{Object.defineProperty(we.prototype,Te,Object.getOwnPropertyDescriptor(et.prototype||et,Te))})})};class se{constructor(st){return st}}const de=new c.OlP("angularfire2.app.options"),ue=new c.OlP("angularfire2.app.name");function j(we,st,et){const _e="object"==typeof et&&et||{};_e.name=_e.name||"string"==typeof et&&et||"[DEFAULT]";const Ge=Y.Z.apps.filter(je=>je&&je.name===_e.name)[0]||st.runOutsideAngular(()=>Y.Z.initializeApp(we,_e));try{JSON.stringify(we)!==JSON.stringify(Ge.options)&&$("error",`${Ge.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new se(Ge)}const $=(we,...st)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[we](...st)},Z={provide:se,useFactory:j,deps:[de,c.R0b,[new c.FiY,ue]]};let He=(()=>{class we{constructor(et){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",c.q4F.full,et.toString())}static initializeApp(et,Te){return{ngModule:we,providers:[{provide:de,useValue:et},{provide:ue,useValue:Te}]}}}return we.\u0275fac=function(et){return new(et||we)(c.LFG(c.Lbi))},we.\u0275mod=c.oAB({type:we}),we.\u0275inj=c.cJS({providers:[Z]}),we})();function Me(we,st,et,Te,_e){const[,ve,Ge]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===we)||[];if(ve)return function Ae(we,st){try{return we.toString()===st.toString()}catch(et){return we===st}}(_e,Ge)||(ye("error",`${st} was already initialized on the ${et} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:_e,was:Ge})),ve;{const je=Te();return globalThis.\u0275AngularfireInstanceCache.push([we,je,_e]),je}}const ze=!!nt.hot,ye=(we,...st)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[we](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ee,N)=>{N.d(Ee,{q4:()=>xl,iC:()=>Ol,HU:()=>gu,vb:()=>ed,JM:()=>zs});var c=N(5e3),Y=N(5867),O=N(5861),te=N(9681),J=N(2090),fe=N(4859),se=N(1877);const de="@firebase/installations",$="w:0.5.7",Z="FIS_v2",we=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(I){return I instanceof J.ZR&&I.code.includes("request-failed")}function et({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Te(I){return{token:I.token,requestStatus:2,expiresIn:ne(I.expiresIn),creationTime:Date.now()}}function _e(I,D){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(I,D){const F=(yield D.json()).error;return we.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ge({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function je(I,{refreshToken:D}){const M=Ge(I);return M.append("Authorization",function ge(I){return`${Z} ${I}`}(D)),M}function ee(I){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ne(I){return Number(I.replace("s","000"))}function re(I,D){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:M}){const F=et(I),W=Ge(I),X=D.getImmediate({optional:!0});if(X){const wt=yield X.getHeartbeatsHeader();wt&&W.append("x-firebase-client",wt)}const xe={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:Z,appId:I.appId,sdkVersion:$})},We=yield ee(()=>fetch(F,xe));if(We.ok){const wt=yield We.json();return{fid:wt.fid||M,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Te(wt.authToken)}}throw yield _e("Create Installation",We)})).apply(this,arguments)}function ae(I){return new Promise(D=>{setTimeout(D,I)})}const zt=/^[cdef][\w-]{21}$/;function ut(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function gt(I){return function It(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return zt.test(M)?M:""}catch(I){return""}}function on(I){return`${I.appName}!${I.appId}`}const an=new Map;function _i(I,D){const M=on(I);Wt(M,D),function Ut(I,D){const M=function ni(){return!er&&"BroadcastChannel"in self&&(er=new BroadcastChannel("[Firebase] FID Change"),er.onmessage=I=>{Wt(I.data.key,I.data.fid)}),er}();M&&M.postMessage({key:I,fid:D}),function Ds(){0===an.size&&er&&(er.close(),er=null)}()}(M,D)}function Wt(I,D){const M=an.get(I);if(M)for(const F of M)F(D)}let er=null;const Sr="firebase-installations-store";let Ji=null;function Xi(){return Ji||(Ji=(0,J.X3)("firebase-installations-database",1,(I,D)=>{0===D&&I.createObjectStore(Sr)})),Ji}function lt(I,D){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(I,D){const M=on(I),W=(yield Xi()).transaction(Sr,"readwrite"),X=W.objectStore(Sr),Se=yield X.get(M);return yield X.put(D,M),yield W.complete,(!Se||Se.fid!==D.fid)&&_i(I,D.fid),D})).apply(this,arguments)}function Kn(I){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(I){const D=on(I),F=(yield Xi()).transaction(Sr,"readwrite");yield F.objectStore(Sr).delete(D),yield F.complete})).apply(this,arguments)}function ri(I,D){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(I,D){const M=on(I),W=(yield Xi()).transaction(Sr,"readwrite"),X=W.objectStore(Sr),Se=yield X.get(M),xe=D(Se);return void 0===xe?yield X.delete(M):yield X.put(xe,M),yield W.complete,xe&&(!Se||Se.fid!==xe.fid)&&_i(I,xe.fid),xe})).apply(this,arguments)}function hn(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(I){let D;const M=yield ri(I.appConfig,F=>{const W=Ts(F),X=ca(I,W);return D=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function Ts(I){return Vt(I||{fid:ut(),registrationStatus:0})}function ca(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(we.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function Bt(I,D){return rt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:vt(I)}:{installationEntry:D}}function rt(){return(rt=(0,O.Z)(function*(I,D){try{const M=yield re(I,D);return lt(I.appConfig,M)}catch(M){throw st(M)&&409===M.customData.serverCode?yield Kn(I.appConfig):yield lt(I.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function vt(I){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(I){let D=yield Pi(I.appConfig);for(;1===D.registrationStatus;)yield ae(100),D=yield Pi(I.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield hn(I);return F||M}return D})).apply(this,arguments)}function Pi(I){return ri(I,D=>{if(!D)throw we.create("installation-not-found");return Vt(D)})}function Vt(I){return function io(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function fr(I,D){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},M){const F=dt(I,M),W=je(I,M),X=D.getImmediate({optional:!0});if(X){const wt=yield X.getHeartbeatsHeader();wt&&W.append("x-firebase-client",wt)}const xe={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:$,appId:I.appId}})},We=yield ee(()=>fetch(F,xe));if(We.ok)return Te(yield We.json());throw yield _e("Generate Auth Token",We)})).apply(this,arguments)}function dt(I,{fid:D}){return`${et(I)}/${D}/authTokens:generate`}function pr(I){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(I,D=!1){let M;const F=yield ri(I.appConfig,X=>{if(!Nt(X))throw we.create("not-registered");const Se=X.authToken;if(!D&&B(Se))return X;if(1===Se.requestStatus)return M=Ze(I,D),X;{if(!navigator.onLine)throw we.create("app-offline");const xe=H(X);return M=ht(I,xe),xe}});return M?yield M:F.authToken})).apply(this,arguments)}function Ze(I,D){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(I,D){let M=yield Ke(I.appConfig);for(;1===M.authToken.requestStatus;)yield ae(100),M=yield Ke(I.appConfig);const F=M.authToken;return 0===F.requestStatus?pr(I,D):F})).apply(this,arguments)}function Ke(I){return ri(I,D=>{if(!Nt(D))throw we.create("not-registered");return function ce(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function ht(I,D){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,O.Z)(function*(I,D){try{const M=yield fr(I,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield lt(I.appConfig,F),M}catch(M){if(!st(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield lt(I.appConfig,F)}else yield Kn(I.appConfig);throw M}})).apply(this,arguments)}function Nt(I){return void 0!==I&&2===I.registrationStatus}function B(I){return 2===I.requestStatus&&!function L(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function H(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Ve(){return(Ve=(0,O.Z)(function*(I){const D=I,{installationEntry:M,registrationPromise:F}=yield hn(D);return F?F.catch(console.error):pr(D).catch(console.error),M.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(I,D=!1){const M=I;return yield gr(M),(yield pr(M,D)).token})).apply(this,arguments)}function gr(I){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(I){const{registrationPromise:D}=yield hn(I);D&&(yield D)})).apply(this,arguments)}function $n(I){return we.create("missing-app-config-values",{valueName:I})}const ha="installations",Ne=I=>{const D=I.getProvider("app").getImmediate(),M=function es(I){if(!I||!I.options)throw $n("App Configuration");if(!I.name)throw $n("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!I.options[M])throw $n(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,te._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},xt=I=>{const D=I.getProvider("app").getImmediate(),M=(0,te._getProvider)(D,ha).getImmediate();return{getId:()=>function Q(I){return Ve.apply(this,arguments)}(M),getToken:W=>function mt(I){return qt.apply(this,arguments)}(M,W)}};(function ln(){(0,te._registerComponent)(new fe.wA(ha,Ne,"PUBLIC")),(0,te._registerComponent)(new fe.wA("installations-internal",xt,"PRIVATE"))})(),(0,te.registerVersion)(de,"0.5.7"),(0,te.registerVersion)(de,"0.5.7","esm2017");const rr="@firebase/remote-config",xn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dh{constructor(D,M,F,W){this.client=D,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${W}.`),W}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return W;D.eTag=W&&W.eTag;const X=yield M.client.fetch(D),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Se),X})()}}function Nc(I=navigator){return I.languages&&I.languages[0]||I.language}class Ka{constructor(D,M,F,W,X,Se){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=X,this.appId=Se}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},We={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:M.appId,language_code:Nc()},wt={method:"POST",headers:xe,body:JSON.stringify(We)},St=fetch(Se,wt),Ct=new Promise((hi,Ai)=>{D.signal.addEventListener(()=>{const vo=new Error("The operation was aborted.");vo.name="AbortError",Ai(vo)})});let Ln;try{yield Promise.race([St,Ct]),Ln=yield St}catch(hi){let Ai="fetch-client-network";throw"AbortError"===hi.name&&(Ai="fetch-timeout"),xn.create(Ai,{originalErrorMessage:hi.message})}let In=Ln.status;const zo=Ln.headers.get("ETag")||void 0;let _o,Mr;if(200===Ln.status){let hi;try{hi=yield Ln.json()}catch(Ai){throw xn.create("fetch-client-parse",{originalErrorMessage:Ai.message})}_o=hi.entries,Mr=hi.state}if("INSTANCE_STATE_UNSPECIFIED"===Mr?In=500:"NO_CHANGE"===Mr?In=304:("NO_TEMPLATE"===Mr||"EMPTY_CONFIG"===Mr)&&(_o={}),304!==In&&200!==In)throw xn.create("fetch-status",{httpStatus:In});return{status:In,eTag:zo,config:_o}})()}}class yp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function Pn(I,D){return new Promise((M,F)=>{const W=Math.max(D-Date.now(),0),X=setTimeout(M,W);I.addEventListener(()=>{clearTimeout(X),F(xn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const X=yield W.client.fetch(D);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function Oc(I){if(!(I instanceof J.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(X))throw X;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Se),W.attemptFetch(D,Se)}})()}}class Ya{constructor(D,M,F,W,X){this.app=D,this._client=M,this._storageCache=F,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function sl(I,D){const M=I.target.error||void 0;return xn.create(D,{originalErrorMessage:M&&M.message})}const ks="app_namespace_store";class Ep{constructor(D,M,F,W=function wp(){return new Promise((I,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(sl(F,"storage-open"))},M.onsuccess=F=>{I(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ks,{keyPath:"compositeKey"})}}catch(M){D(xn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,X)=>{const xe=F.transaction([ks],"readonly").objectStore(ks),We=M.createCompositeKey(D);try{const wt=xe.get(We);wt.onerror=St=>{X(sl(St,"storage-get"))},wt.onsuccess=St=>{const Ct=St.target.result;W(Ct?Ct.value:void 0)}}catch(wt){X(xn.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(D,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((X,Se)=>{const We=W.transaction([ks],"readwrite").objectStore(ks),wt=F.createCompositeKey(D);try{const St=We.put({compositeKey:wt,value:M});St.onerror=Ct=>{Se(sl(Ct,"storage-set"))},St.onsuccess=()=>{X()}}catch(St){Se(xn.create("storage-set",{originalErrorMessage:St&&St.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,X)=>{const xe=F.transaction([ks],"readwrite").objectStore(ks),We=M.createCompositeKey(D);try{const wt=xe.delete(We);wt.onerror=St=>{X(sl(St,"storage-delete"))},wt.onsuccess=()=>{W()}}catch(wt){X(xn.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),W=D.storage.getActiveConfig(),X=yield M;X&&(D.lastFetchStatus=X);const Se=yield F;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const xe=yield W;xe&&(D.activeConfig=xe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function oo(){return hh.apply(this,arguments)}function hh(){return(hh=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Oo(){(0,te._registerComponent)(new fe.wA("remote-config",function I(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),W=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xn.create("registration-window");if(!(0,J.hl)())throw xn.create("indexed-db-unavailable");const{projectId:X,apiKey:Se,appId:xe}=F.options;if(!X)throw xn.create("registration-project-id");if(!Se)throw xn.create("registration-api-key");if(!xe)throw xn.create("registration-app-id");const We=new Ep(xe,F.name,M=M||"firebase"),wt=new Fc(We),St=new se.Yd(rr);St.logLevel=se.in.ERROR;const Ct=new Ka(W,te.SDK_VERSION,M,X,Se,xe),Ln=new yp(Ct,We),In=new dh(Ln,We,wt,St),zo=new Ya(F,In,wt,We,St);return function sr(I){const D=(0,J.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(zo),zo},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(rr,"0.3.6"),(0,te.registerVersion)(rr,"0.3.6","esm2017")}();const ol="/firebase-messaging-sw.js",Rs="/firebase-cloud-messaging-push-scope",Hr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ao="google.c.a.c_id",pa="google.c.a.c_l",Lc="google.c.a.ts",bp="google.c.a.e";var Ns=(()=>{return(I=Ns||(Ns={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ns;var I})();function oi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ja(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let X=0;X<F.length;++X)W[X]=F.charCodeAt(X);return W}const Xa="fcm_token_details_db",or="fcm_token_object_Store";function fh(I){return eu.apply(this,arguments)}function eu(){return eu=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Xa))return null;let D=null;return(yield(0,J.X3)(Xa,5,function(){var F=(0,O.Z)(function*(W,X,Se,xe){var We;if(X<2||!W.objectStoreNames.contains(or))return;const wt=xe.objectStore(or),St=yield wt.index("fcmSenderId").get(I);if(yield wt.clear(),St)if(2===X){const Ct=St;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;D={token:Ct.fcmToken,createTime:null!==(We=Ct.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:oi(Ct.vapidKey)}}}else if(3===X){const Ct=St;D={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:oi(Ct.auth),p256dh:oi(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:oi(Ct.vapidKey)}}}else if(4===X){const Ct=St;D={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:oi(Ct.auth),p256dh:oi(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:oi(Ct.vapidKey)}}}});return function(W,X,Se,xe){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Xa),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Vc(D)?D:null}),eu.apply(this,arguments)}function Vc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ss="firebase-messaging-store";let ga=null;function al(){return ga||(ga=(0,J.X3)("firebase-messaging-database",1,(I,D)=>{0===D&&I.createObjectStore(ss)})),ga}function dn(I){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,O.Z)(function*(I){const D=lo(I),F=yield(yield al()).transaction(ss).objectStore(ss).get(D);if(F)return F;{const W=yield fh(I.appConfig.senderId);if(W)return yield Os(I,W),W}})).apply(this,arguments)}function Os(I,D){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(I,D){const M=lo(I),W=(yield al()).transaction(ss,"readwrite");return yield W.objectStore(ss).put(D,M),yield W.complete,D})).apply(this,arguments)}function Uc(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(I){const D=lo(I),F=(yield al()).transaction(ss,"readwrite");yield F.objectStore(ss).delete(D),yield F.complete})).apply(this,arguments)}function lo({appConfig:I}){return I.appId}const Mn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ma(I,D){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(I,D){const M=yield Fs(I),F=ft(D),W={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(qr(I.appConfig),W)).json()}catch(Se){throw Mn.create("token-subscribe-failed",{errorInfo:Se})}if(X.error)throw Mn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function yr(I,D){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,O.Z)(function*(I,D){const M=yield Fs(I),F=ft(D.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${qr(I.appConfig)}/${D.token}`,W)).json()}catch(Se){throw Mn.create("token-update-failed",{errorInfo:Se})}if(X.error)throw Mn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Mn.create("token-update-no-token");return X.token})).apply(this,arguments)}function os(I,D){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(I,D){const F={method:"DELETE",headers:yield Fs(I)};try{const X=yield(yield fetch(`${qr(I.appConfig)}/${D}`,F)).json();if(X.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw Mn.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function qr({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Fs(I){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*({appConfig:I,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ft({p256dh:I,auth:D,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:D,p256dh:I}};return F!==Hr&&(W.web.applicationPubKey=F),W}const iu=6048e5;function ya(I){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(I){const D=yield cl(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:oi(D.getKey("auth")),p256dh:oi(D.getKey("p256dh"))},F=yield dn(I.firebaseDependencies);if(F){if(Lo(F.subscriptionOptions,M))return Date.now()>=F.createTime+iu?ul(I,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield os(I.firebaseDependencies,F.token)}catch(W){console.warn(W)}return be(I.firebaseDependencies,M)}return be(I.firebaseDependencies,M)})).apply(this,arguments)}function ou(I){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(I){const D=yield dn(I.firebaseDependencies);D&&(yield os(I.firebaseDependencies,D.token),yield Uc(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function ul(I,D){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(I,D){try{const M=yield yr(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Os(I.firebaseDependencies,F),M}catch(M){throw yield ou(I),M}})).apply(this,arguments)}function be(I,D){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(I,D){const F={token:yield ma(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Os(I,F),F.token})).apply(this,arguments)}function cl(I,D){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ja(D)})})).apply(this,arguments)}function Lo(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Vo(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Zr(I,D){if(!D.notification)return;I.notification={};const M=D.notification.title;M&&(I.notification.title=M);const F=D.notification.body;F&&(I.notification.body=F);const W=D.notification.image;W&&(I.notification.image=W)}(D,I),function dl(I,D){!D.data||(I.data=D.data)}(D,I),function hl(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const M=D.fcmOptions.link;M&&(I.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function Bc(I){return"object"==typeof I&&!!I&&ao in I}function fl(I,D){const M=[];for(let F=0;F<I.length;F++)M.push(I.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function Vs(I){return Mn.create("missing-app-config-values",{valueName:I})}fl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),fl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ar{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function uu(I){if(!I||!I.options)throw Vs("App Configuration Object");if(!I.name)throw Vs("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const F of D)if(!M[F])throw Vs(F);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ai(I){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ol,{scope:Rs}),I.swRegistration.update().catch(()=>{})}catch(D){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Us(I,D){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ai(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function pl(I,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Hr)})).apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(I,D){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield pl(I,null==D?void 0:D.vapidKey),yield Us(I,null==D?void 0:D.serviceWorkerRegistration),ya(I)})).apply(this,arguments)}function _a(I,D,M){return va.apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(I,D,M){const F=ml(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[ao],message_name:M[pa],message_time:M[Lc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ml(I){switch(I){case Ns.NOTIFICATION_CLICKED:return"notification_open";case Ns.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function jc(){return(jc=(0,O.Z)(function*(I,D){const M=D.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===Ns.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Vo(M)):I.onMessageHandler.next(Vo(M)));const F=M.data;Bc(F)&&"1"===F[bp]&&(yield _a(I,M.messageType,F))})).apply(this,arguments)}const _l="@firebase/messaging",$c=I=>{const D=new ar(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function yl(I,D){return jc.apply(this,arguments)}(D,M)),D},ho=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function du(I,D){return gl.apply(this,arguments)}(D,F)}};function Gc(){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hc(){(0,te._registerComponent)(new fe.wA("messaging",$c,"PUBLIC")),(0,te._registerComponent)(new fe.wA("messaging-internal",ho,"PRIVATE")),(0,te.registerVersion)(_l,"0.9.11"),(0,te.registerVersion)(_l,"0.9.11","esm2017")}();const wl="analytics",Xm="firebase_id",wa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",Fn=new se.Yd("@firebase/analytics");function Zc(I){return Promise.all(I.map(D=>D.catch(M=>M)))}function Ip(I,D){const M=document.createElement("script");M.src=`${hu}?l=${I}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Uo(I,D,M,F,W,X){return zc.apply(this,arguments)}function zc(){return(zc=(0,O.Z)(function*(I,D,M,F,W,X){const Se=F[W];try{if(Se)yield D[Se];else{const We=(yield Zc(M)).find(wt=>wt.measurementId===W);We&&(yield D[We.appId])}}catch(xe){Fn.error(xe)}I("config",W,X)})).apply(this,arguments)}function bl(I,D,M,F,W){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(I,D,M,F,W){try{let X=[];if(W&&W.send_to){let Se=W.send_to;Array.isArray(Se)||(Se=[Se]);const xe=yield Zc(M);for(const We of Se){const wt=xe.find(Ct=>Ct.measurementId===We),St=wt&&D[wt.appId];if(!St){X=[];break}X.push(St)}}0===X.length&&(X=Object.values(D)),yield Promise.all(X),I("event",F,W||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function Cp(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(hu))return D;return null}const Rn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),xr=new class zr{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Bo(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Kc(I){return cn.apply(this,arguments)}function cn(){return(cn=(0,O.Z)(function*(I){var D;const{appId:M,apiKey:F}=I,W={method:"GET",headers:Bo(F)},X=wa.replace("{app-id}",M),Se=yield fetch(X,W);if(200!==Se.status&&304!==Se.status){let xe="";try{const We=yield Se.json();(null===(D=We.error)||void 0===D?void 0:D.message)&&(xe=We.error.message)}catch(We){}throw Rn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:xe})}return Se.json()})).apply(this,arguments)}function gh(I){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(I,D=xr,M){const{appId:F,apiKey:W,measurementId:X}=I.options;if(!F)throw Rn.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:F};throw Rn.create("no-api-key")}const Se=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Il;return setTimeout((0,O.Z)(function*(){xe.abort()}),void 0!==M?M:6e4),fu({appId:F,apiKey:W,measurementId:X},Se,xe,D)})).apply(this,arguments)}function fu(I,D,M){return ui.apply(this,arguments)}function ui(){return(ui=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:M},F,W=xr){const{appId:X,measurementId:Se}=I;try{yield Dt(F,D)}catch(xe){if(Se)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:X,measurementId:Se};throw xe}try{const xe=yield Kc(I);return W.deleteThrottleMetadata(X),xe}catch(xe){if(!Yc(xe)){if(W.deleteThrottleMetadata(X),Se)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:X,measurementId:Se};throw xe}const We=503===Number(xe.customData.httpStatus)?(0,J.$s)(M,W.intervalMillis,30):(0,J.$s)(M,W.intervalMillis),wt={throttleEndTimeMillis:Date.now()+We,backoffCount:M+1};return W.setThrottleMetadata(X,wt),Fn.debug(`Calling attemptFetch again in ${We} millis`),fu(I,wt,F,W)}})).apply(this,arguments)}function Dt(I,D){return new Promise((M,F)=>{const W=Math.max(D-Date.now(),0),X=setTimeout(M,W);I.addEventListener(()=>{clearTimeout(X),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Yc(I){if(!(I instanceof J.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Il{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Qc(){return go.apply(this,arguments)}function go(){return(go=(0,O.Z)(function*(){if(!(0,J.hl)())return Fn.warn(Rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(I){return Fn.warn(Rn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(I,D,M,F,W,X,Se){var xe;const We=gh(I);We.then(In=>{M[In.measurementId]=In.appId,I.options.measurementId&&In.measurementId!==I.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${In.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(In=>Fn.error(In)),D.push(We);const wt=Qc().then(In=>{if(In)return F.getId()}),[St,Ct]=yield Promise.all([We,wt]);Cp()||Ip(X,St.measurementId),W("js",new Date);const Ln=null!==(xe=null==Se?void 0:Se.config)&&void 0!==xe?xe:{};return Ln.origin="firebase",Ln.update=!0,null!=Ct&&(Ln[Xm]=Ct),W("config",St.measurementId,Ln),St.measurementId})).apply(this,arguments)}class jo{constructor(D){this.app=D}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},$s=[];const Ea={};let Hs,Ui,Vi="dataLayer",Dl=!1;function Ii(I,D,M){!function $o(){const I=[];if((0,J.ru)()&&I.push("This is a browser extension environment."),(0,J.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=Rn.create("invalid-analytics-context",{errorInfo:D});Fn.warn(M.message)}}();const F=I.options.appId;if(!F)throw Rn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Rn.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[F])throw Rn.create("already-exists",{id:F});if(!Dl){!function us(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Vi);const{wrappedGtag:X,gtagCore:Se}=function ph(I,D,M,F,W){let X=function(...Se){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function Wc(I,D,M,F){function X(){return(X=(0,O.Z)(function*(Se,xe,We){try{"event"===Se?yield bl(I,D,M,xe,We):"config"===Se?yield Uo(I,D,M,F,xe,We):I("set",xe)}catch(wt){Fn.error(wt)}})).apply(this,arguments)}return function W(Se,xe,We){return X.apply(this,arguments)}}(X,I,D,M),{gtagCore:X,wrappedGtag:window[W]}}(li,$s,Ea,Vi,"gtag");Ui=X,Hs=Se,Dl=!0}return li[F]=function Nn(I,D,M,F,W,X,Se){return ls.apply(this,arguments)}(I,$s,Ea,D,Hs,Vi,M),new jo(I)}function ba(){return(ba=(0,O.Z)(function*(I,D,M,F,W){if(W&&W.global)I("event",M,F);else{const X=yield D;I("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function gn(){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(I){return!1}})).apply(this,arguments)}const qs="@firebase/analytics";!function Sp(){(0,te._registerComponent)(new fe.wA(wl,(D,{options:M})=>Ii(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,te._registerComponent)(new fe.wA("analytics-internal",function I(D){try{const M=D.getProvider(wl).getImmediate();return{logEvent:(F,W,X)=>function Ap(I,D,M,F){I=(0,J.m9)(I),function Ho(I,D,M,F,W){return ba.apply(this,arguments)}(Ui,li[I.app.options.appId],D,M,F).catch(W=>Fn.error(W))}(M,F,W,X)}}catch(M){throw Rn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,te.registerVersion)(qs,"0.7.7"),(0,te.registerVersion)(qs,"0.7.7","esm2017")}();var Zs=N(4408),Ia=N(7565);const Al=new class mn extends Ia.v{}(class ds extends Zs.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var xp=N(4986),Sl=N(8505),Er=N(9468),ci=N(5363);const xl=new c.GfV("7.3.0"),hs="__angularfire_symbol__analyticsIsSupportedValue",Ti="__angularfire_symbol__analyticsIsSupported",$i="__angularfire_symbol__remoteConfigIsSupportedValue",Ca="__angularfire_symbol__remoteConfigIsSupported",Ml="__angularfire_symbol__messagingIsSupportedValue",kl="__angularfire_symbol__messagingIsSupported";function zs(I,D,M){if(D){if(1===D.length)return D[0];const X=D.filter(Se=>Se.app===M);if(1===X.length)return X[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ti]||(globalThis[Ti]=gn().then(I=>globalThis[hs]=I).catch(()=>globalThis[hs]=!1)),globalThis[kl]||(globalThis[kl]=Gc().then(I=>globalThis[Ml]=I).catch(()=>globalThis[Ml]=!1)),globalThis[Ca]||(globalThis[Ca]=oo().then(I=>globalThis[$i]=I).catch(()=>globalThis[$i]=!1));const ed=(I,D)=>{const M=D?[D]:(0,Y.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(I).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function mo(){}class pu{constructor(D,M=Al){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const W=this.zone;return this.delegate.schedule(function(Se){W.runGuarded(()=>{D.apply(this,[Se])})},M,F)}}class Hi{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mo,{},mo,mo)),M.pipe((0,Sl.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let gu=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new pu(Zone.current)),this.insideAngular=M.run(()=>new pu(Zone.current,xp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(c.LFG(c.R0b))},I.\u0275prov=c.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Gi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Ol(I){return Gi(),function yo(I){return function(M){return(M=M.lift(new Hi(I.ngZone))).pipe((0,Er.R)(I.outsideAngular),(0,ci.Q)(I.insideAngular))}}(Gi())(I)}},2090:(nt,Ee,N)=>{N.d(Ee,{$s:()=>io,BH:()=>Me,G6:()=>ee,L:()=>ue,LL:()=>It,Lj:()=>Lt,Mn:()=>Ge,Sg:()=>Ae,UG:()=>we,US:()=>se,X3:()=>ht,ZB:()=>Z,ZR:()=>ae,b$:()=>Te,d:()=>_e,eu:()=>ne,hl:()=>z,jU:()=>st,m9:()=>dt,ne:()=>lt,pd:()=>Ji,r3:()=>Wt,ru:()=>et,tV:()=>j,uI:()=>ye,vZ:()=>Ds,w1:()=>ve,xO:()=>Oi,xb:()=>er,z$:()=>ze,zI:()=>ge,zd:()=>Sr});var c=N(5861);const J=function(B){const L=[];let H=0;for(let ce=0;ce<B.length;ce++){let Q=B.charCodeAt(ce);Q<128?L[H++]=Q:Q<2048?(L[H++]=Q>>6|192,L[H++]=63&Q|128):55296==(64512&Q)&&ce+1<B.length&&56320==(64512&B.charCodeAt(ce+1))?(Q=65536+((1023&Q)<<10)+(1023&B.charCodeAt(++ce)),L[H++]=Q>>18|240,L[H++]=Q>>12&63|128,L[H++]=Q>>6&63|128,L[H++]=63&Q|128):(L[H++]=Q>>12|224,L[H++]=Q>>6&63|128,L[H++]=63&Q|128)}return L},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ce=[];for(let Q=0;Q<B.length;Q+=3){const Ve=B[Q],mt=Q+1<B.length,qt=mt?B[Q+1]:0,gr=Q+2<B.length,jt=gr?B[Q+2]:0;let un=(15&qt)<<2|jt>>6,Qn=63&jt;gr||(Qn=64,mt||(un=64)),ce.push(H[Ve>>2],H[(3&Ve)<<4|qt>>4],H[un],H[Qn])}return ce.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(J(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let H=0,ce=0;for(;H<B.length;){const Q=B[H++];if(Q<128)L[ce++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ve=B[H++];L[ce++]=String.fromCharCode((31&Q)<<6|63&Ve)}else if(Q>239&&Q<365){const gr=((7&Q)<<18|(63&B[H++])<<12|(63&B[H++])<<6|63&B[H++])-65536;L[ce++]=String.fromCharCode(55296+(gr>>10)),L[ce++]=String.fromCharCode(56320+(1023&gr))}else{const Ve=B[H++],mt=B[H++];L[ce++]=String.fromCharCode((15&Q)<<12|(63&Ve)<<6|63&mt)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,ce=[];for(let Q=0;Q<B.length;){const Ve=H[B.charAt(Q++)],qt=Q<B.length?H[B.charAt(Q)]:0;++Q;const jt=Q<B.length?H[B.charAt(Q)]:64;++Q;const At=Q<B.length?H[B.charAt(Q)]:64;if(++Q,null==Ve||null==qt||null==jt||null==At)throw Error();ce.push(Ve<<2|qt>>4),64!==jt&&(ce.push(qt<<4&240|jt>>2),64!==At&&ce.push(jt<<6&192|At))}return ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ue=function(B){return function(B){const L=J(B);return se.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return se.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Z(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!He(H)||(B[H]=Z(B[H],L[H]));return B}function He(B){return"__proto__"!==B}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,ce)=>{H?this.reject(H):this.resolve(ce),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,ce))}}}function Ae(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ce=L||"demo-project",Q=B.iat||0,Ve=B.sub||B.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${ce}`,aud:ce,iat:Q,exp:Q+3600,auth_time:Q,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(mt)),""].join(".")}function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ye(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function st(){return"object"==typeof self&&self.self===self}function et(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return ze().indexOf("Electron/")>=0}function ve(){const B=ze();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ge(){return ze().indexOf("MSAppHost/")>=0}function ee(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function ne(){return new Promise((B,L)=>{try{let H=!0;const ce="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ce);Q.onsuccess=()=>{Q.result.close(),H||self.indexedDB.deleteDatabase(ce),B(!0)},Q.onupgradeneeded=()=>{H=!1},Q.onerror=()=>{var Ve;L((null===(Ve=Q.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(H){L(H)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ae extends Error{constructor(L,H,ce){super(H),this.code=L,this.customData=ce,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,It.prototype.create)}}class It{constructor(L,H,ce){this.service=L,this.serviceName=H,this.errors=ce}create(L,...H){const ce=H[0]||{},Q=`${this.service}/${L}`,Ve=this.errors[L],mt=Ve?function zt(B,L){return B.replace(Sn,(H,ce)=>{const Q=L[ce];return null!=Q?String(Q):`<${ce}?>`})}(Ve,ce):"Error";return new ae(Q,`${this.serviceName}: ${mt} (${Q}).`,ce)}}const Sn=/\{\$([^}]+)}/g;function Wt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function er(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Ds(B,L){if(B===L)return!0;const H=Object.keys(B),ce=Object.keys(L);for(const Q of H){if(!ce.includes(Q))return!1;const Ve=B[Q],mt=L[Q];if(Ar(Ve)&&Ar(mt)){if(!Ds(Ve,mt))return!1}else if(Ve!==mt)return!1}for(const Q of ce)if(!H.includes(Q))return!1;return!0}function Ar(B){return null!==B&&"object"==typeof B}function Oi(B){const L=[];for(const[H,ce]of Object.entries(B))Array.isArray(ce)?ce.forEach(Q=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(ce));return L.length?"&"+L.join("&"):""}function Sr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(ce=>{if(ce){const[Q,Ve]=ce.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(Ve)}}),L}function Ji(B){const L=B.indexOf("?");if(!L)return"";const H=B.indexOf("#",L);return B.substring(L,H>0?H:void 0)}function lt(B,L){const H=new jr(B,L);return H.subscribe.bind(H)}class jr{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(ce=>{this.error(ce)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,ce){let Q;if(void 0===L&&void 0===H&&void 0===ce)throw new Error("Missing Observer.");Q=function jn(B,L){if("object"!=typeof B||null===B)return!1;for(const H of L)if(H in B&&"function"==typeof B[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:ce},void 0===Q.next&&(Q.next=ri),void 0===Q.error&&(Q.error=ri),void 0===Q.complete&&(Q.complete=ri);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(mt){}}),this.observers.push(Q),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(ce){"undefined"!=typeof console&&console.error&&console.error(ce)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ri(){}function io(B,L=1e3,H=2){const ce=L*Math.pow(H,B),Q=Math.round(.5*ce*(Math.random()-.5)*2);return Math.min(144e5,ce+Q)}function dt(B){return B&&B._delegate?B._delegate:B}function pr(B,L){return new Promise((H,ce)=>{B.onsuccess=Q=>{H(Q.target.result)},B.onerror=Q=>{var Ve;ce(`${L}: ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Ft{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,H){return new Ze(this._db.transaction.call(this._db,L,H))}createObjectStore(L,H){return new Ce(this._db.createObjectStore(L,H))}close(){this._db.close()}}class Ze{constructor(L){this._transaction=L,this.complete=new Promise((H,ce)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{ce(this._transaction.error)},this._transaction.onabort=()=>{ce(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new Ke(this._store.index(L))}createIndex(L,H,ce){return new Ke(this._store.createIndex(L,H,ce))}get(L){return pr(this._store.get(L),"Error reading from IndexedDB")}put(L,H){return pr(this._store.put(L,H),"Error writing to IndexedDB")}delete(L){return pr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return pr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ke{constructor(L){this._index=L}get(L){return pr(this._index.get(L),"Error reading from IndexedDB")}}function ht(B,L,H){return new Promise((ce,Q)=>{try{const Ve=indexedDB.open(B,L);Ve.onsuccess=mt=>{ce(new Ft(mt.target.result))},Ve.onerror=mt=>{var qt;Q(`Error opening indexedDB: ${null===(qt=mt.target.error)||void 0===qt?void 0:qt.message}`)},Ve.onupgradeneeded=mt=>{H(new Ft(Ve.result),mt.oldVersion,mt.newVersion,new Ze(Ve.transaction))}}catch(Ve){Q(`Error opening indexedDB: ${Ve.message}`)}})}function Lt(B){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,c.Z)(function*(B){return new Promise((L,H)=>{try{const ce=indexedDB.deleteDatabase(B);ce.onsuccess=()=>{L()},ce.onerror=Q=>{var Ve;H(`Error deleting indexedDB database "${B}": ${null===(Ve=Q.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(ce){H(`Error deleting indexedDB database "${B}": ${ce.message}`)}})})).apply(this,arguments)}},5547:(nt,Ee,N)=>{var c=N(5e3);let Y=null;function O(){return Y}const se=new c.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ue(){return(0,c.LFG)($)}()},providedIn:"platform"}),n})();const j=new c.OlP("Location Initialized");let $=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Z()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Z()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function He(){return new $((0,c.LFG)(se))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function we(n){const e=(0,c.LFG)(se).location;return new et((0,c.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const st=new c.OlP("appBaseHref");let et=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+ze(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+ze(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(st,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+ze(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+ze(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(de),c.LFG(st,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ae(je(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ze,n.joinWithSlash=Me,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(c.LFG(ye),c.LFG(de))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ve(){return new _e((0,c.LFG)(ye),(0,c.LFG)(de))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let Li=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class xs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ir=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new xs(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),ts(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ts(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ts(n,e){n.context.$implicit=e.item}let sr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Za("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Za("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function Za(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class Oc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class yp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const rs=new yp,_p=new Oc;let Ya=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return rs;if((0,c.F4k)(t))return _p;throw function Pn(n,e){return new c.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),is=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function or(n){return"server"===n}let tu=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new nu((0,c.LFG)(se),window)}),n})();class nu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ga(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ss(this.window.history)||ss(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ss(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Os extends class Fo extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Y||(Y=n)}(new Os)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Uc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function lo(n){uo=uo||document.createElement("a"),uo.setAttribute("href",n);const e=uo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function No(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let uo,nn=null;const mr=new c.OlP("TRANSITION_ID"),ma=[{provide:c.ip1,useFactory:function Mn(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[mr,se,c.zs3],multi:!0}];class wi{static init(){(0,c.VLi)(new wi)}addToWindow(e){c.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const o=c.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(E){h=h||E,u--,0==u&&r(h)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let yr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ps=new c.OlP("EventManagerPlugins");let os=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ps),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ru{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let qr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Fs=(()=>{class n extends qr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ls),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ls))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ls(n){O().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},iu=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?be(n,o,t):(o=o.replace(iu,n),t.push(o))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Lo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new dl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case c.ifc.ShadowDom:return new hl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(os),c.LFG(Fs),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Lo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ft[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ft[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,o&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class dl extends Lo{constructor(e,t,r,o){super(e),this.component=r;const u=be(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function ul(n){return"_ngcontent-%COMP%".replace(iu,n)}(o+"-"+r.id),this.hostAttr=function ll(n){return"_nghost-%COMP%".replace(iu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class hl extends Lo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=be(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Bc=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const fl=["alt","control","meta","shift"],Vs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ar={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let lu=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(fl.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),h+=E+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Us(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ar.hasOwnProperty(e)&&(e=ar[e]))}return Vs[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),fl.forEach(u=>{u!=o&&ai[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Ei(){Os.makeCurrent(),wi.init()},multi:!0},{provide:se,useFactory:function cu(){return(0,c.RDi)(document),document},deps:[]}]),_a=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function pl(){return new c.qLn},deps:[]},{provide:Ps,useClass:Bc,multi:!0,deps:[se,c.R0b,c.Lbi]},{provide:Ps,useClass:lu,multi:!0,deps:[se]},{provide:fn,useClass:fn,deps:[os,Fs,c.AFp]},{provide:c.FYo,useExisting:fn},{provide:qr,useExisting:Fs},{provide:Fs,useClass:Fs,deps:[se]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:os,useClass:os,deps:[Ps,c.R0b]},{provide:class dn{},useClass:yr,deps:[]}];let va=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:mr,useExisting:c.AFp},ma]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:_a,imports:[is,c.hGG]}),n})();"undefined"!=typeof window&&window;var kn=N(8996),Rn=N(3269);function pt(...n){const e=(0,Rn.yG)(n);return(0,kn.D)(n,e)}var ur=N(7579);class zr extends ur.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var xr=N(9751);const{isArray:Bo}=Array,{getPrototypeOf:Kc,prototype:cn,keys:gh}=Object;function bi(n){if(1===n.length){const e=n[0];if(Bo(e))return{args:e,keys:null};if(function fu(n){return n&&"object"==typeof n&&Kc(n)===cn}(e)){const t=gh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ui=N(4671),Dt=N(4004);const{isArray:Yc}=Array;function Qc(n){return(0,Dt.U)(e=>function Il(n,e){return Yc(e)?n(...e):n(e)}(n,e))}function go(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Nn=N(5403),ls=N(9672);function $s(n,e,t){n?(0,ls.f)(t,n,e):e()}var Ea=N(576);function Vi(n,e){const t=(0,Ea.m)(n)?n:()=>n,r=o=>o.error(t());return new xr.y(e?o=>e.schedule(r,0,o):r)}const Hs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ui=N(8189);function Tl(...n){return function Dl(){return(0,Ui.J)(1)}()((0,kn.D)(n,(0,Rn.yG)(n)))}var $o=N(8421);function Ii(n){return new xr.y(e=>{(0,$o.Xf)(n()).subscribe(e)})}var Ho=N(515),ba=N(727),vr=N(4482);function Ci(){return(0,vr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Nn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Jc extends xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ba.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Nn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ba.w0.EMPTY)}return e}refCount(){return Ci()(this)}}function En(n,e){return(0,vr.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,Nn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const S=u++;(0,$o.Xf)(n(E,S)).subscribe(o=(0,Nn.x)(r,k=>r.next(e?e(E,k,S,C++):k),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var cs=N(5698);function Di(...n){const e=(0,Rn.yG)(n);return(0,vr.e)((t,r)=>{(e?Tl(n,t,e):Tl(n,t)).subscribe(r)})}function Go(n,e,t,r,o){return(u,h)=>{let m=t,E=e,C=0;u.subscribe((0,Nn.x)(h,S=>{const k=C++;E=m?n(E,S,k):(m=!0,S),r&&h.next(E)},o&&(()=>{m&&h.next(E),h.complete()})))}}function wr(n,e){return(0,vr.e)(Go(n,e,arguments.length>=2,!0))}function Bi(n,e){return(0,vr.e)((t,r)=>{let o=0;t.subscribe((0,Nn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function ji(n){return(0,vr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Nn.x)(t,void 0,void 0,h=>{u=(0,$o.Xf)(n(h,ji(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var gn=N(5577);function Gs(n,e){return(0,Ea.m)(e)?(0,gn.z)(n,e,1):(0,gn.z)(n,1)}function Xc(n){return n<=0?()=>Ho.E:(0,vr.e)((e,t)=>{let r=[];e.subscribe((0,Nn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function bn(n=Dp){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe((0,Nn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Dp(){return new Hs}function Tp(n){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe((0,Nn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function qs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bi((o,u)=>n(o,u,r)):ui.y,(0,cs.q)(1),t?Tp(e):bn(()=>new Hs))}var Wr=N(8505);class Zs{constructor(e,t){this.id=e,this.url=t}}class ds extends Zs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ia extends Zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mn extends Zs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Al extends Zs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qo extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xp extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sl extends Zs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Er extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ci extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ti{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $i{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ml{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mt="primary";class Rl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hn(n){return new Rl(n)}const Nl="ngNavigationCancelingError";function zs(n){const e=Error("NavigationCancelingError: "+n);return e[Nl]=!0,e}function mo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Hi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!gu(n[o],e[o]))return!1;return!0}function gu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Gi(n){return Array.prototype.concat.apply([],n)}function td(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function di(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,kn.D)(Promise.resolve(n)):pt(n)}const yo={exact:function D(n,e,t){if(!St(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:F},Zo={exact:function I(n,e){return Hi(n,e)},subset:function M(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gu(n[t],e[t]))},ignored:()=>!0};function mu(n,e,t){return yo[t.paths](n.root,e.root,t.matrixParams)&&Zo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return W(n,e,e.segments,t)}function W(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!St(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!St(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(St(n.segments,o)&&X(n.segments,o,r)&&n.children[Mt])&&W(n.children[Mt],e,u,r)}}function X(n,e,t){return e.every((r,o)=>Zo[t](n[o].parameters,r.parameters))}class Se{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return zo.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _o(this)}}class We{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Da(this)}}function St(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ln{}class In{parse(e){const t=new rd(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Mr(e.root,!0)}`,r=function ey(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ai(t)}=${Ai(o)}`).join("&"):`${Ai(t)}=${Ai(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function vo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zo=new In;function _o(n){return n.segments.map(e=>Da(e)).join("/")}function Mr(n,e){if(!n.hasChildren())return _o(n);if(e){const t=n.children[Mt]?Mr(n.children[Mt],!1):"",r=[];return Gn(n.children,(o,u)=>{u!==Mt&&r.push(`${u}:${Mr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ct(n,e){let t=[];return Gn(n.children,(r,o)=>{o===Mt&&(t=t.concat(e(r,o)))}),Gn(n.children,(r,o)=>{o!==Mt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Mt?[Mr(n.children[Mt],!1)]:[`${o}:${Mr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${_o(n)}/${t[0]}`:`${_o(n)}/(${t.join("//")})`}}function hi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ai(n){return hi(n).replace(/%3B/gi,";")}function nd(n){return hi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Pl(n){return decodeURIComponent(n)}function Fl(n){return Pl(n.replace(/\+/g,"%20"))}function Da(n){return`${nd(n.path)}${function Mp(n){return Object.keys(n).map(e=>`;${nd(e)}=${nd(n[e])}`).join("")}(n.parameters)}`}const ty=/^[^\/()?;=#]+/;function fs(n){const e=n.match(ty);return e?e[0]:""}const Ll=/^[^=?&#]+/,ry=/^[^&#]+/;class rd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new xe(e,t)),r}parseSegment(){const e=fs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new We(Pl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fs(this.remaining);o&&(r=o,this.capture(r))}e[Pl(t)]=Pl(r)}parseQueryParam(e){const t=function ny(n){const e=n.match(Ll);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function kp(n){const e=n.match(ry);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Fl(t),u=Fl(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fs(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Mt]:new xe([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class iy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=mh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=mh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return yh(e,this._root).map(t=>t.value)}}function mh(n,e){if(n===e.value)return e;for(const t of e.children){const r=mh(n,t);if(r)return r}return null}function yh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yh(n,t);if(r.length)return r.unshift(e),r}return[]}class wo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class id extends iy{constructor(e,t){super(e),this.snapshot=t,od(this,e)}toString(){return this.snapshot.toString()}}function Ta(n,e){const t=function sy(n,e){const h=new yu([],{},{},"",{},Mt,e,null,n.root,-1,{});return new _h("",new wo(h,[]))}(n,e),r=new zr([new We("",{})]),o=new zr({}),u=new zr({}),h=new zr({}),m=new zr(""),E=new ps(r,o,h,m,u,Mt,e,t.root);return E.snapshot=t.root,new id(new wo(E,[]),t)}class ps{constructor(e,t,r,o,u,h,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(e=>Hn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(e=>Hn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function sd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yu{constructor(e,t,r,o,u,h,m,E,C,S,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=S,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _h extends iy{constructor(e,t){super(t),this.url=e,od(this,t)}toString(){return ad(this._root)}}function od(n,e){e.value._routerState=n,e.children.forEach(t=>od(n,t))}function ad(n){const e=n.children.length>0?` { ${n.children.map(ad).join(", ")} } `:"";return`${n.value}${e}`}function ud(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hi(e.params,t.params)||n.params.next(t.params),function pu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function vh(n,e){const t=Hi(n.params,e.params)&&function wt(n,e){return St(n,e)&&n.every((t,r)=>Hi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vh(n.parent,e.parent))}function Vl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function wh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Vl(n,r,o);return Vl(n,r)})}(n,e,t);return new wo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Vl(n,m)),h}}const r=function uy(n){return new ps(new zr(n.url),new zr(n.params),new zr(n.queryParams),new zr(n.fragment),new zr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Vl(n,u));return new wo(r,o)}}function Wo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _u(n){return"object"==typeof n&&null!=n&&n.outlets}function Rp(n,e,t,r,o){let u={};if(r&&Gn(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Se(t,u,o);const h=Eh(n,e,t);return new Se(h,u,o)}function Eh(n,e,t){const r={};return Gn(n.children,(o,u)=>{r[u]=o===e?t:Eh(o,e,t)}),new xe(n.segments,r)}class ly{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(_u);if(o&&o!==td(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fy(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return Ks(n,e,t);const r=function p0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(_u(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!Si(E,C,h))return u;r+=2}else{if(!Si(E,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new xe(n.segments.slice(r.pathIndex),n.children),Ks(u,0,o)}return r.match&&0===o.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?Ih(n,e,t):r.match?Ks(n,0,o):Ih(n,e,t)}function Ks(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function hy(n){return _u(n[0])?n[0].outlets:{[Mt]:n}}(t),o={};return Gn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=fy(n.children[h],e,u))}),Gn(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new xe(n.segments,o)}}function Ih(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(_u(u)){const E=vu(u.outlets);return new xe(r,E)}if(0===o&&Wo(t[0])){r.push(new We(n.segments[e].path,Ch(t[0]))),o++;continue}const h=_u(u)?u.outlets[Mt]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&Wo(m)?(r.push(new We(h,Ch(m))),o+=2):(r.push(new We(h,{})),o++)}return new xe(r,{})}function vu(n){const e={};return Gn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ih(new xe([],{}),0,t))}),e}function Ch(n){const e={};return Gn(n,(t,r)=>e[r]=`${t}`),e}function Si(n,e,t){return n==t.path&&Hi(e,t.parameters)}class Op{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ud(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Eo(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Gn(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Eo(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Eo(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Eo(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Ml(u.value.snapshot))}),e.children.length&&this.forwardEvent(new $i(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ud(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),ud(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function ld(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=E,h.outlet&&h.outlet.activateWith(o,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class cd{constructor(e,t){this.routes=e,this.module=t}}function Aa(n){return"function"==typeof n}function wu(n){return n instanceof Se}const Bl=Symbol("INITIAL_VALUE");function Ko(){return En(n=>function jo(...n){const e=(0,Rn.yG)(n),t=(0,Rn.jO)(n),{args:r,keys:o}=bi(n);if(0===r.length)return(0,kn.D)([],e);const u=new xr.y(function li(n,e,t=ui.y){return r=>{$s(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let E=0;E<o;E++)$s(e,()=>{const C=(0,kn.D)(n[E],e);let S=!1;C.subscribe((0,Nn.x)(r,k=>{u[E]=k,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>go(o,h):ui.y));return t?u.pipe(Qc(t)):u}(n.map(e=>e.pipe((0,cs.q)(1),Di(Bl)))).pipe(wr((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==Bl?o:(u===Bl&&(r=!0),r||!1!==u&&h!==t.length-1&&!wu(u)?o:u),e)},Bl),Bi(e=>e!==Bl),(0,Dt.U)(e=>wu(e)?e:!0===e),(0,cs.q)(1)))}class py{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jl,this.attachRef=null}}class jl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new py,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let $l=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new Sh(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(jl),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Sh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ps?this.route:e===jl?this.childContexts:this.parent.get(e,t)}}let xh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[$l],encapsulation:2}),n})();function Hl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];dd(r,Mh(e,r))}}function dd(n,e){n.children&&Hl(n.children,e)}function Mh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function kh(n){const e=n.children&&n.children.map(kh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=xh),t}function Qt(n){return n.outlet||Mt}function Rh(n,e){const t=n.filter(r=>Qt(r)===e);return t.push(...n.filter(r=>Qt(r)!==e)),t}const Fp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Eu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Fp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||mo)(t,n,e);if(!u)return Object.assign({},Fp);const h={};Gn(u.posParams,(E,C)=>{h[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Gl(n,e,t,r,o="corrected"){if(t.length>0&&function my(n,e,t){return t.some(r=>fd(n,e,r)&&Qt(r)!==Mt)}(n,t,r)){const h=new xe(e,function hd(n,e,t,r){const o={};o[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Qt(u)!==Mt){const h=new xe([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Qt(u)]=h}return o}(n,e,r,new xe(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function Lp(n,e,t){return t.some(r=>fd(n,e,r))}(n,t,r)){const h=new xe(n.segments,function gy(n,e,t,r,o,u){const h={};for(const m of r)if(fd(n,t,m)&&!o[Qt(m)]){const E=new xe([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[Qt(m)]=E}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function fd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yy(n,e,t,r){return!!(Qt(n)===r||r!==Mt&&fd(e,t,n))&&("**"===n.path||Eu(e,n,t).matched)}function _y(n,e,t){return 0===e.length&&!n.children[t]}class Yo{constructor(e){this.segmentGroup=e||null}}class br{constructor(e){this.urlTree=e}}function bo(n){return Vi(new Yo(n))}function ql(n){return Vi(new br(n))}class Oh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Gl(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Mt).pipe((0,Dt.U)(u=>this.createUrlTree(xa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ji(u=>{if(u instanceof br)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Yo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Mt).pipe((0,Dt.U)(o=>this.createUrlTree(xa(o),e.queryParams,e.fragment))).pipe(ji(o=>{throw o instanceof Yo?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new xe([],{[Mt]:e}):e;return new Se(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Dt.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,kn.D)(o).pipe(Gs(u=>{const h=r.children[u],m=Rh(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Dt.U)(E=>({segment:E,outlet:u})))}),wr((u,h)=>(u[h.outlet]=h.segment,u),{}),function Ap(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bi((o,u)=>n(o,u,r)):ui.y,Xc(1),t?Tp(e):bn(()=>new Hs))}())}expandSegment(e,t,r,o,u,h){return(0,kn.D)(r).pipe(Gs(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(ji(C=>{if(C instanceof Yo)return pt(null);throw C}))),qs(m=>!!m),ji((m,E)=>{if(m instanceof Hs||"EmptyError"===m.name)return _y(t,o,u)?pt(new xe([],{})):bo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return yy(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):bo(t):bo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ql(u):this.lineralizeSegments(r,u).pipe((0,gn.z)(h=>{const m=new xe(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:S}=Eu(t,o,u);if(!m)return bo(t);const k=this.applyRedirectCommands(E,o.redirectTo,S);return o.redirectTo.startsWith("/")?ql(k):this.lineralizeSegments(o,k).pipe((0,gn.z)(V=>this.expandSegment(e,t,r,V.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Dt.U)(k=>(r._loadedConfig=k,new xe(o,{})))):pt(new xe(o,{}));const{matched:h,consumedSegments:m,remainingSegments:E}=Eu(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,gn.z)(S=>{const k=S.module,V=S.routes,{segmentGroup:G,slicedSegments:ie}=Gl(t,m,E,V),Pe=new xe(G.segments,G.children);if(0===ie.length&&Pe.hasChildren())return this.expandChildren(k,V,Pe).pipe((0,Dt.U)(sn=>new xe(m,sn)));if(0===V.length&&0===ie.length)return pt(new xe(m,{}));const Le=Qt(r)===u;return this.expandSegment(k,Pe,V,ie,Le?Mt:u,!0).pipe((0,Dt.U)(at=>new xe(m.concat(at.segments),at.children)))})):bo(t)}getChildConfig(e,t,r){return t.children?pt(new cd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,gn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Dt.U)(u=>(t._loadedConfig=u,u))):function kr(n){return Vi(zs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):pt(new cd([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?pt(o.map(h=>{const m=e.get(h);let E;if(function Dh(n){return n&&Aa(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!Aa(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return di(E)})).pipe(Ko(),(0,Wr.b)(h=>{if(!wu(h))return;const m=zs(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Dt.U)(h=>!0===h)):pt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return pt(r);if(o.numberOfChildren>1||!o.children[Mt])return Vi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Se(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Gn(t.children,(m,E)=>{h[E]=this.createSegmentGroup(e,m,r,o)}),new xe(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function xa(n){const e={};for(const r of Object.keys(n.children)){const u=xa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function xi(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class Vp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ma{constructor(e,t){this.component=e,this.route=t}}function Fh(n,e,t){const r=n._root;return fi(r,e?e._root:null,t,[r.value])}function Zl(n,e,t){const r=function vy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function fi(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Eo(e);return n.children.forEach(h=>{(function Bp(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const E=function wy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!St(n.url,e.url);case"pathParamsOrQueryParamsChange":return!St(n.url,e.url)||!Hi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vh(n,e)||!Hi(n.queryParams,e.queryParams);default:return!vh(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Vp(r)):(u.data=h.data,u._resolvedData=h._resolvedData),fi(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ma(m.outlet.component,h))}else h&&ka(e,m,o),o.canActivateChecks.push(new Vp(r)),fi(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Gn(u,(h,m)=>ka(h,t.getContext(m),o)),o}function ka(n,e,t){const r=Eo(n),o=n.value;Gn(r,(u,h)=>{ka(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Ma(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Uh{}function Bh(n){return new xr.y(e=>e.error(n))}class jh{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Gl(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Mt);if(null===t)return null;const r=new yu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new wo(r,t),u=new _h(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=oy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=Rh(e,u),E=this.processSegmentGroup(m,h,u);if(null===E)return null;r.push(...E)}const o=$p(r);return function Cy(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return _y(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!yy(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const G=r.length>0?td(r).parameters:{};u=new yu(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,f(t),g(t)+r.length,A(e))}else{const G=Eu(t,e,r);if(!G.matched)return null;h=G.consumedSegments,m=G.remainingSegments,u=new yu(h,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,f(t),g(t)+h.length,A(e))}const E=function Dy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:S}=Gl(t,h,m,E.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===S.length&&C.hasChildren()){const G=this.processChildren(E,C);return null===G?null:[new wo(u,G)]}if(0===E.length&&0===S.length)return[new wo(u,[])];const k=Qt(e)===o,V=this.processSegment(E,C,S,k?Mt:o);return null===V?null:[new wo(u,V)]}}function Ty(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $p(n){const e=[],t=new Set;for(const r of n){if(!Ty(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=$p(r.children);e.push(new wo(r.value,o))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function A(n){return n.resolve||{}}function Ye(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ot(n){return En(e=>{const t=n(e);return t?(0,kn.D)(t).pipe((0,Dt.U)(()=>e)):pt(e)})}class Wl extends class Zi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bu=new c.OlP("ROUTES");class Iu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Dt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new cd(Gi(h.injector.get(bu,void 0,c.XFs.Self|c.XFs.Optional)).map(kh),h)}),ji(u=>{throw t._loader$=void 0,u}));return t._loader$=new Jc(o,()=>new ur.x).pipe(Ci()),t._loader$}loadModuleFactory(e){return di(e()).pipe((0,gn.z)(t=>t instanceof c.YKP?pt(t):(0,kn.D)(this.compiler.compileModuleAsync(t))))}}class Ay{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Qo(n){throw n}function pd(n,e,t){return e.parse("/")}function gd(n,e){return pt(null)}const Hh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},md={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rr=(()=>{class n{constructor(t,r,o,u,h,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ur.x,this.errorHandler=Qo,this.malformedUriErrorHandler=pd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:gd,afterPreactivation:gd},this.urlHandlingStrategy=new Ay,this.routeReuseStrategy=new Wl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const k=h.get(c.R0b);this.isNgZoneEnabled=k instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Ol(){return new Se(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Iu(h,m,V=>this.triggerEvent(new xl(V)),V=>this.triggerEvent(new hs(V))),this.routerState=Ta(this.currentUrlTree,this.rootComponentType),this.transitions=new zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bi(o=>0!==o.id),(0,Dt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),En(o=>{let u=!1,h=!1;return pt(o).pipe((0,Wr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),En(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Hp(m.source)&&(this.browserUrlTree=m.extractedUrl),pt(m).pipe(En(k=>{const V=this.transitions.getValue();return r.next(new ds(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions.getValue()?Ho.E:Promise.resolve(k)}),function Ph(n,e,t,r){return En(o=>function Sa(n,e,t,r,o){return new Oh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Dt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wr.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function R(n,e,t,r,o){return(0,gn.z)(u=>function Iy(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new jh(n,e,t,r,o,u).recognize();return null===h?Bh(new Uh):pt(h)}catch(h){return Bh(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Dt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wr.b)(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(G,k)}this.browserUrlTree=k.urlAfterRedirects}const V=new qo(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:G,source:ie,restoredState:Pe,extras:Le}=m,kt=new ds(V,this.serializeUrl(G),ie,Pe);r.next(kt);const at=Ta(G,this.rootComponentType).snapshot;return pt(Object.assign(Object.assign({},m),{targetSnapshot:at,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ho.E}),ot(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:G}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!G})}),(0,Wr.b)(m=>{const E=new xp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,Dt.U)(m=>Object.assign(Object.assign({},m),{guards:Fh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Ey(n,e){return(0,gn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?pt(Object.assign(Object.assign({},t),{guardsResult:!0})):function jp(n,e,t,r){return(0,kn.D)(n).pipe((0,gn.z)(o=>function zl(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?pt(u.map(m=>{const E=Zl(m,e,o);let C;if(function g0(n){return n&&Aa(n.canDeactivate)}(E))C=di(E.canDeactivate(n,e,t,r));else{if(!Aa(E))throw new Error("Invalid CanDeactivate guard");C=di(E(n,e,t,r))}return C.pipe(qs())})).pipe(Ko()):pt(!0)}(o.component,o.route,t,e,r)),qs(o=>!0!==o,!0))}(h,r,o,n).pipe((0,gn.z)(m=>m&&function Pp(n){return"boolean"==typeof n}(m)?function Ir(n,e,t,r){return(0,kn.D)(e).pipe(Gs(o=>Tl(function Vh(n,e){return null!==n&&e&&e(new Ti(n)),pt(!0)}(o.route.parent,r),function Lh(n,e){return null!==n&&e&&e(new Ca(n)),pt(!0)}(o.route,r),function Io(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function Up(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Ii(()=>pt(h.guards.map(E=>{const C=Zl(E,h.node,t);let S;if(function Ah(n){return n&&Aa(n.canActivateChild)}(C))S=di(C.canActivateChild(r,n));else{if(!Aa(C))throw new Error("Invalid CanActivateChild guard");S=di(C(r,n))}return S.pipe(qs())})).pipe(Ko())));return pt(u).pipe(Ko())}(n,o.path,t),function by(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const o=r.map(u=>Ii(()=>{const h=Zl(u,e,t);let m;if(function Th(n){return n&&Aa(n.canActivate)}(h))m=di(h.canActivate(e,n));else{if(!Aa(h))throw new Error("Invalid CanActivate guard");m=di(h(e,n))}return m.pipe(qs())}));return pt(o).pipe(Ko())}(n,o.route,t))),qs(o=>!0!==o,!0))}(r,u,n,e):pt(m)),(0,Dt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Wr.b)(m=>{if(wu(m.guardsResult)){const C=zs(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Sl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),Bi(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ot(m=>{if(m.guards.canActivateChecks.length)return pt(m).pipe((0,Wr.b)(E=>{const C=new Er(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),En(E=>{let C=!1;return pt(E).pipe(function q(n,e){return(0,gn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return pt(t);let u=0;return(0,kn.D)(o).pipe(Gs(h=>function oe(n,e,t,r){return function Ue(n,e,t,r){const o=Ye(n);if(0===o.length)return pt({});const u={};return(0,kn.D)(o).pipe((0,gn.z)(h=>function yt(n,e,t,r){const o=Zl(n,e,r);return di(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Wr.b)(m=>{u[h]=m}))),Xc(1),(0,gn.z)(()=>Ye(u).length===o.length?pt(u):Ho.E))}(n._resolve,n,e,r).pipe((0,Dt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),oy(n,t).resolve),null)))}(h.route,r,n,e)),(0,Wr.b)(()=>u++),Xc(1),(0,gn.z)(h=>u===o.length?pt(t):Ho.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Wr.b)(E=>{const C=new ci(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),ot(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:G}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!G})}),(0,Dt.U)(m=>{const E=function ay(n,e,t){const r=Vl(n,e._root,t?t._root:void 0);return new id(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Wr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Dt.U)(r=>(new Op(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Wr.b)({next(){u=!0},complete(){u=!0}}),function Sp(n){return(0,vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ji(m=>{if(h=!0,function ed(n){return n&&n[Nl]}(m)){const E=wu(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new mn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),k={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hp(o.source)};this.scheduleNavigation(S,"imperative",null,k,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new Al(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Ho.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const E=Object.assign({},h);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hl(t),this.config=t.map(kh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,S=E?this.currentUrlTree.fragment:h;let k=null;switch(m){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),function Ws(n,e,t,r,o){if(0===t.length)return Rp(e.root,e.root,e.root,r,o);const u=function cy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ly(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Gn(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new ly(t,e,r)}(t);if(u.toRoot())return Rp(e.root,e.root,new xe([],{}),r,o);const h=function Np(n,e,t){if(n.isAbsolute)return new bh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new bh(u,u===e.root,0)}const r=Wo(n.commands[0])?0:1;return function dy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new bh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?Ks(h.segmentGroup,h.index,u.commands):fy(h.segmentGroup,h.index,u.commands);return Rp(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,k,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=wu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Gh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Hh):!1===r?Object.assign({},md):r,wu(t))return mu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return mu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ia(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,E;if(this.disposed)return Promise.resolve(!1);let C,S,k;h?(C=h.resolve,S=h.reject,k=h.promise):k=new Promise((ie,Pe)=>{C=ie,S=Pe});const V=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):G=0,this.setTransition({id:V,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:S,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(ie=>Promise.reject(ie))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new mn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Hp(n){return"imperative"!==n}let Sy=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=h,this.commands=null,this.onChanges=new ur.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:_d(this.skipLocationChange),replaceUrl:_d(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:_d(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rr),c.Y36(ps),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),yd=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new ur.x,this.subscription=t.events.subscribe(u=>{u instanceof Ia&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){if(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:_d(this.skipLocationChange),replaceUrl:_d(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:_d(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rr),c.Y36(ps),c.Y36(ye))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function _d(n){return""===n||!!n}let xy=(()=>{class n{constructor(t,r,o,u,h,m){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=h,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(E=>{E instanceof Ia&&this.update()})}ngAfterContentInit(){pt(this.links.changes,this.linksWithHrefs.changes,pt(null)).pipe((0,Ui.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,kn.D)(r).pipe((0,Ui.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function My(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rr),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Sy,8),c.Y36(yd,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(c.Suo(o,Sy,5),c.Suo(o,yd,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class ky{}class m0{preload(e,t){return pt(null)}}let y0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Iu(o,r,E=>t.triggerEvent(new xl(E)),E=>t.triggerEvent(new hs(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Bi(t=>t instanceof Ia),Gs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,kn.D)(o).pipe((0,Ui.J)(),(0,Dt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,gn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Rr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(ky))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Gp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ia&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new kl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const gs=new c.OlP("ROUTER_CONFIGURATION"),Ny=new c.OlP("ROUTER_FORROOT_GUARD"),_0=[_e,{provide:Ln,useClass:In},{provide:Rr,useFactory:function Py(n,e,t,r,o,u,h={},m,E){const C=new Rr(null,n,e,t,r,o,Gi(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function E0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(S=>{var k,V;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),C},deps:[Ln,jl,_e,c.zs3,c.Sil,bu,gs,[class $h{},new c.FiY],[class Cn{},new c.FiY]]},jl,{provide:ps,useFactory:function qp(n){return n.routerState.root},deps:[Rr]},y0,m0,class Ry{preload(e,t){return t().pipe(ji(()=>pt(null)))}},{provide:gs,useValue:{enableTracing:!1}}];function fI(){return new c.PXZ("Router",Rr)}let Kl=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[_0,Oy(t),{provide:Ny,useFactory:w0,deps:[[Rr,new c.FiY,new c.tp0]]},{provide:gs,useValue:r||{}},{provide:ye,useFactory:v0,deps:[de,[new c.tBr(st),new c.FiY],gs]},{provide:Gp,useFactory:pI,deps:[Rr,tu,gs]},{provide:ky,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:m0},{provide:c.PXZ,multi:!0,useFactory:fI},[vd,{provide:c.ip1,multi:!0,useFactory:b0,deps:[vd]},{provide:Ly,useFactory:Fy,deps:[vd]},{provide:c.tb,multi:!0,useExisting:Ly}]]}}static forChild(t){return{ngModule:n,providers:[Oy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ny,8),c.LFG(Rr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function pI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Gp(n,e,t)}function v0(n,e,t={}){return t.useHash?new Te(n,e):new et(n,e)}function w0(n){return"guarded"}function Oy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:bu,multi:!0,useValue:n}]}let vd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ur.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Rr),h=this.injector.get(gs);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(gs),o=this.injector.get(y0),u=this.injector.get(Gp),h=this.injector.get(Rr),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function b0(n){return n.appInitializer.bind(n)}function Fy(n){return n.bootstrapListener.bind(n)}const Ly=new c.OlP("Router Initializer"),I0=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:104,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto","p-8"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"video",1),c._UZ(2,"source",2),c.qZA(),c._UZ(3,"div",3),c.TgZ(4,"div",4),c._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),c.qZA(),c.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),c._uU(13,"Clip it and ship it!"),c.qZA(),c.TgZ(14,"p"),c._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),c.qZA()()()(),c.TgZ(16,"section",9)(17,"h1",10),c._uU(18," Latest "),c.qZA(),c.TgZ(19,"div",11)(20,"a",12),c._UZ(21,"img",13),c.TgZ(22,"div",14)(23,"div",15)(24,"div",16),c.O4$(),c.TgZ(25,"svg",17),c._UZ(26,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(27,"div",19)(28,"h2",20),c._uU(29,"Game Highlighting Clip"),c.qZA(),c.TgZ(30,"p",21),c._uU(31," Luis Ramirez \xb7 "),c.TgZ(32,"span",22),c._uU(33,"March 31, 2020"),c.qZA()()()(),c.TgZ(34,"a",12),c._UZ(35,"img",23),c.TgZ(36,"div",14)(37,"div",15)(38,"div",16),c.O4$(),c.TgZ(39,"svg",17),c._UZ(40,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(41,"div",19)(42,"h2",20),c._uU(43,"Game Highlighting Clip"),c.qZA(),c.TgZ(44,"p",21),c._uU(45," Luis Ramirez \xb7 "),c.TgZ(46,"span",22),c._uU(47,"March 31, 2020"),c.qZA()()()(),c.TgZ(48,"a",12),c._UZ(49,"img",24),c.TgZ(50,"div",14)(51,"div",15)(52,"div",16),c.O4$(),c.TgZ(53,"svg",17),c._UZ(54,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(55,"div",19)(56,"h2",20),c._uU(57,"Game Highlighting Clip"),c.qZA(),c.TgZ(58,"p",21),c._uU(59," Luis Ramirez \xb7 "),c.TgZ(60,"span",22),c._uU(61,"March 31, 2020"),c.qZA()()()(),c.TgZ(62,"a",12),c._UZ(63,"img",23),c.TgZ(64,"div",14)(65,"div",15)(66,"div",16),c.O4$(),c.TgZ(67,"svg",17),c._UZ(68,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(69,"div",19)(70,"h2",20),c._uU(71,"Game Highlighting Clip"),c.qZA(),c.TgZ(72,"p",21),c._uU(73," Luis Ramirez \xb7 "),c.TgZ(74,"span",22),c._uU(75,"March 31, 2020"),c.qZA()()()(),c.TgZ(76,"a",12),c._UZ(77,"img",24),c.TgZ(78,"div",14)(79,"div",15)(80,"div",16),c.O4$(),c.TgZ(81,"svg",17),c._UZ(82,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(83,"div",19)(84,"h2",20),c._uU(85,"Game Highlighting Clip"),c.qZA(),c.TgZ(86,"p",21),c._uU(87," Luis Ramirez \xb7 "),c.TgZ(88,"span",22),c._uU(89,"March 31, 2020"),c.qZA()()()(),c.TgZ(90,"a",12),c._UZ(91,"img",13),c.TgZ(92,"div",14)(93,"div",15)(94,"div",16),c.O4$(),c.TgZ(95,"svg",17),c._UZ(96,"path",18),c.qZA()()()(),c.kcU(),c.TgZ(97,"div",19)(98,"h2",20),c._uU(99,"Game Highlighting Clip"),c.qZA(),c.TgZ(100,"p",21),c._uU(101," Luis Ramirez \xb7 "),c.TgZ(102,"span",22),c._uU(103,"March 31, 2020"),c.qZA()()()()()())},styles:[""]}),n})()},{path:"about",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4","px-12"]],template:function(t,r){1&t&&(c.TgZ(0,"p",0),c._uU(1," This is a basic about page to demonstrate basic routing capabilities.\n"),c.qZA())},styles:[""]}),n})()},{path:"clip/:id",component:(()=>{class n{constructor(t){this.route=t,this.id=""}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ps))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-clip"]],decls:57,vars:1,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","data-setup","{}",1,"video-js","vjs-theme-forest","mx-auto"],["src","assets/video/hero.webm","type","video/webm"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["routerLink","/clip/b",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Uploaded By Luis on "),c.TgZ(6,"span"),c._uU(7,"March 25, 2022"),c.qZA()(),c.TgZ(8,"div",4)(9,"video",5),c._UZ(10,"source",6),c.qZA()()()(),c.TgZ(11,"div",7)(12,"h2",8),c._uU(13,"More Clips"),c.qZA(),c.TgZ(14,"div",9)(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"div",4)(18,"div",12)(19,"div",13),c.O4$(),c.TgZ(20,"svg",14),c._UZ(21,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(22,"div",16)(23,"h2",17),c._uU(24,"Game Highlighting Clip"),c.qZA(),c.TgZ(25,"p",18),c._uU(26," Luis Ramirez \xb7 "),c.TgZ(27,"span",19),c._uU(28,"March 31, 2020"),c.qZA()()()(),c.TgZ(29,"a",20),c._UZ(30,"img",21),c.TgZ(31,"div",4)(32,"div",12)(33,"div",13),c.O4$(),c.TgZ(34,"svg",14),c._UZ(35,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(36,"div",16)(37,"h2",17),c._uU(38,"Game Highlighting Clip"),c.qZA(),c.TgZ(39,"p",18),c._uU(40," Luis Ramirez \xb7 "),c.TgZ(41,"span",19),c._uU(42,"March 31, 2020"),c.qZA()()()(),c.TgZ(43,"a",20),c._UZ(44,"img",22),c.TgZ(45,"div",4)(46,"div",12)(47,"div",13),c.O4$(),c.TgZ(48,"svg",14),c._UZ(49,"path",15),c.qZA()()()(),c.kcU(),c.TgZ(50,"div",16)(51,"h2",17),c._uU(52,"Game Highlighting Clip"),c.qZA(),c.TgZ(53,"p",18),c._uU(54," Luis Ramirez \xb7 "),c.TgZ(55,"span",19),c._uU(56,"March 31, 2020"),c.qZA()()()()()()),2&t&&(c.xp6(3),c.Oqu(r.id))},directives:[yd],styles:[""]}),n})()},{path:"**",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"404"),c.qZA(),c._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),c.qZA(),c.TgZ(15,"div",14)(16,"h2",15),c._uU(17,"Page not found"),c.qZA(),c.TgZ(18,"p"),c._uU(19,"Looks like the page you're looking for is gone or doesn't exist."),c.qZA()())},styles:[""]}),n})()}];let Uy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kl.forRoot(I0)],Kl]}),n})();var me=N(5861),C0=N(4986),D0=N(5032);function A0(n,e){return e?t=>Tl(e.pipe((0,cs.q)(1),function mI(){return(0,vr.e)((n,e)=>{n.subscribe((0,Nn.x)(e,D0.Z))})}()),t.pipe(A0(n))):(0,gn.z)((t,r)=>n(t,r).pipe((0,cs.q)(1),function T0(n){return(0,Dt.U)(()=>n)}(t)))}var yI=N(3532);var vI=N(6451),zp=N(5363),wI=N(6063);class EI extends ur.x{constructor(e=1/0,t=1/0,r=wI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)m=E;m&&r.splice(0,m+1)}}}var x0=N(3099);function M0(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,x0.B)({connector:()=>new EI(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function k0(n,e){return(0,Ea.m)(e)?En(()=>n,e):En(()=>n)}var By=N(9468),it=N(5813),Ys=N(2011);N(5867);var Ra=N(9681),Zy=N(4859),$t=N(2090),Du=N(1877);const V0=new Map,II={activated:!1,tokenObservers:[]},U0={initialized:!1,enabled:!1};function Kr(n){return V0.get(n)||II}function Do(n,e){V0.set(n,e)}function zy(){return U0}class lA{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new $t.BH,yield function cA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new $t.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zi=new $t.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TI(n){if(!Kr(n).activated)throw zi.create("use-before-activation",{appName:n.name})}function Zh(n,e){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const k=yield o.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(k){throw zi.create("fetch-network-error",{originalErrorMessage:k.message})}if(200!==h.status)throw zi.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(k){throw zi.create("fetch-parse-error",{originalErrorMessage:k.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),S=Date.now();return{token:m.attestationToken,expireTimeMillis:S+C,issuedAtTimeMillis:S}})).apply(this,arguments)}function H0(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Qs="firebase-app-check-store";let Yp=null;function Qp(){return Yp||(Yp=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(zi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Qs,{keyPath:"compositeKey"})}}catch(t){e(zi.create("storage-open",{originalErrorMessage:t.message}))}}),Yp)}function Tu(){return(Tu=(0,me.Z)(function*(n,e){const r=(yield Qp()).transaction(Qs,"readwrite"),u=r.objectStore(Qs).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=E=>{h()},r.onerror=E=>{var C;m(zi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Xo=new Du.Yd("@firebase/app-check");function e_(n,e){return(0,$t.hl)()?function G0(n,e){return function wd(n,e){return Tu.apply(this,arguments)}(function Ed(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Xo.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function n_(){return zy().enabled}function Wh(){return r_.apply(this,arguments)}function r_(){return(r_=(0,me.Z)(function*(){const n=zy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const fA={error:"UNKNOWN_ERROR"};function Z0(n){return $t.US.encodeString(JSON.stringify(n),!1)}function Kh(n){return i_.apply(this,arguments)}function i_(){return(i_=(0,me.Z)(function*(n,e=!1){const t=n.app;TI(t);const r=Kr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&tg(E)&&(o=E)}if(!e&&o&&tg(o))return{token:o.token};let m,h=!1;if(n_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zh(H0(t,yield Wh()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const E=yield r.exchangeTokenPromise;return yield e_(t,E),Do(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Xo.warn(E.message):Xo.error(E),u=E}return o?(m={token:o.token},Do(t,Object.assign(Object.assign({},r),{token:o})),yield e_(t,o)):m=pA(u),h&&W0(t,m),m})).apply(this,arguments)}function s_(n,e){const t=Kr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Do(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function z0(n){const{app:e}=n,t=Kr(e);let r=t.tokenRefresher;r||(r=function ms(n){const{app:e}=n;return new lA((0,me.Z)(function*(){let r;if(r=Kr(e).token?yield Kh(n,!0):yield Kh(n),r.error)throw r.error}),()=>!0,()=>{const t=Kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Do(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function W0(n,e){const t=Kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function tg(n){return n.expireTimeMillis-Date.now()>0}function pA(n){return{token:Z0(fA),error:n}}class gA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Kr(this.app);for(const t of e)s_(this.app,t.next);return Promise.resolve()}}const sw="app-check-internal";!function rg(){(0,Ra._registerComponent)(new Zy.wA("app-check",n=>function K0(n,e){return new gA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sw).initialize()})),(0,Ra._registerComponent)(new Zy.wA(sw,n=>function mA(n){return{getToken:e=>Kh(n,e),addTokenListener:e=>function eg(n,e,t,r){const{app:o}=n,u=Kr(o),h={next:t,error:r,type:e};if(Do(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&tg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),z0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>z0(n))}(n,"INTERNAL",e),removeTokenListener:e=>s_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ra.registerVersion)("@firebase/app-check","0.5.5")}();class Qh{constructor(){return(0,it.vb)("app-check")}}"undefined"!=typeof window&&window;var og=N(127);const ag=new c.OlP("angularfire2.auth.use-emulator"),h_=new c.OlP("angularfire2.auth.settings"),ug=new c.OlP("angularfire2.auth.tenant-id"),bd=new c.OlP("angularfire2.auth.langugage-code"),lw=new c.OlP("angularfire2.auth.use-device-language"),lg=new c.OlP("angularfire.auth.persistence"),f_=(n,e,t,r,o,u,h,m)=>(0,Ys.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),h)for(const[C,S]of Object.entries(h))E.settings[C]=S;return m&&E.setPersistence(m),E},[t,r,o,u,h,m]);let xu=(()=>{class n{constructor(t,r,o,u,h,m,E,C,S,k,V,G){const ie=new ur.x,Pe=pt(void 0).pipe((0,zp.Q)(h.outsideAngular),En(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,4087)))),(0,Dt.U)(()=>(0,Ys.on)(t,u,r)),(0,Dt.U)(Le=>f_(Le,u,m,C,S,k,E,V)),M0({bufferSize:1,refCount:!1}));if(or(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{Pe.pipe(qs()).subscribe();const kt=Pe.pipe(En(_t=>_t.getRedirectResult().then(Rt=>Rt,()=>null)),it.iC,M0({bufferSize:1,refCount:!1})),at=Pe.pipe(En(_t=>new xr.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>_t.onAuthStateChanged(Je=>Rt.next(Je),Je=>Rt.error(Je),()=>Rt.complete()))})))),sn=Pe.pipe(En(_t=>new xr.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>_t.onIdTokenChanged(Je=>Rt.next(Je),Je=>Rt.error(Je),()=>Rt.complete()))}))));this.authState=kt.pipe(k0(at),(0,By.R)(h.outsideAngular),(0,zp.Q)(h.insideAngular)),this.user=kt.pipe(k0(sn),(0,By.R)(h.outsideAngular),(0,zp.Q)(h.insideAngular)),this.idToken=this.user.pipe(En(_t=>_t?(0,kn.D)(_t.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(En(_t=>_t?(0,kn.D)(_t.getIdTokenResult()):pt(null))),this.credential=(0,vI.T)(kt,ie,this.authState.pipe(Bi(_t=>!_t))).pipe((0,Dt.U)(_t=>(null==_t?void 0:_t.user)?_t:null),(0,By.R)(h.outsideAngular),(0,zp.Q)(h.insideAngular))}return(0,Ys.pX)(this,Pe,u,{spy:{apply:(Le,kt,at)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&at.then(sn=>ie.next(sn))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ys.Dh),c.LFG(Ys.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(it.HU),c.LFG(ag,8),c.LFG(h_,8),c.LFG(ug,8),c.LFG(bd,8),c.LFG(lw,8),c.LFG(lg,8),c.LFG(Qh,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cw=(()=>{class n{constructor(){og.Z.registerVersion("angularfire",it.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[xu]}),n})();function p_(){return(0,vr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Nn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function GI(n,e){return n===e}N(4087);var Xe,dw=N(3942),Id="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ea={},m_=m_||{},Et=Id||self;function cg(){}function y_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Jh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ys="closure_uid_"+(1e9*Math.random()>>>0),__=0;function hw(n,e,t){return n.call.apply(n.bind,arguments)}function fw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hw:fw).apply(null,arguments)}function Xh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Mu(){this.s=this.s,this.o=this.o}var zI={};Mu.prototype.s=!1,Mu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function qI(n){return Object.prototype.hasOwnProperty.call(n,ys)&&n[ys]||(n[ys]=++__)}(this);delete zI[n]}},Mu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const v_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},WI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function gw(n){return Array.prototype.concat.apply([],arguments)}function w_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function E_(n){return/^[\s\xa0]*$/.test(n)}var pi,KI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qr(n,e){return-1!=n.indexOf(e)}function b_(n,e){return n<e?-1:n>e?1:0}e:{var I_=Et.navigator;if(I_){var YI=I_.userAgent;if(YI){pi=YI;break e}}pi=""}function _s(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QI(n){const e={};for(const t in n)e[t]=n[t];return e}var JI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C_(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<JI.length;u++)t=JI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function dg(n){return dg[" "](n),n}dg[" "]=cg;var hg,n,XI=Qr(pi,"Opera"),ef=Qr(pi,"Trident")||Qr(pi,"MSIE"),D_=Qr(pi,"Edge"),tf=D_||ef,yw=Qr(pi,"Gecko")&&!(Qr(pi.toLowerCase(),"webkit")&&!Qr(pi,"Edge"))&&!(Qr(pi,"Trident")||Qr(pi,"MSIE"))&&!Qr(pi,"Edge"),T_=Qr(pi.toLowerCase(),"webkit")&&!Qr(pi,"Edge");function _w(){var n=Et.document;return n?n.documentMode:void 0}e:{var A_="",S_=(n=pi,yw?/rv:([^\);]+)(\)|;)/.exec(n):D_?/Edge\/([\d\.]+)/.exec(n):ef?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):T_?/WebKit\/(\S+)/.exec(n):XI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(S_&&(A_=S_?S_[1]:""),ef){var x_=_w();if(null!=x_&&x_>parseFloat(A_)){hg=String(x_);break e}}hg=A_}var eC={};var nf=Et.document&&ef&&(_w()||parseInt(hg,10))||void 0,tC=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",cg,e),Et.removeEventListener("test",cg,e)}catch(t){}return n}();function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Yl(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yw){e:{try{dg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ta[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yl.Z.h.call(this)}}gi.prototype.h=function(){this.defaultPrevented=!0},Yr(Yl,gi);var ta={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),mi=0;function Ql(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++mi,this.ca=this.fa=!1}function Jl(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Mi(n){this.src=n,this.g={},this.h=0}function rf(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=v_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Jl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ru(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Mi.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=Ru(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Ql(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Nu="closure_lm_"+(1e6*Math.random()|0),Ou={};function Xl(n,e,t,r,o){if(r&&r.once)return tc(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Xl(n,e[u],t,r,o);return null}return t=mg(t),n&&n[Na]?n.N(e,t,Jh(r)?!!r.capture:!!r,o):ec(n,e,t,!1,r,o)}function ec(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=Jh(o)?!!o.capture:!!o,m=pg(n);if(m||(n[Nu]=m=new Mi(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function Cd(){var e=ww;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tC||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(M_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function tc(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)tc(n,e[u],t,r,o);return null}return t=mg(t),n&&n[Na]?n.O(e,t,Jh(r)?!!r.capture:!!r,o):ec(n,e,t,!0,r,o)}function nc(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)nc(n,e[u],t,r,o);else r=Jh(r)?!!r.capture:!!r,t=mg(t),n&&n[Na]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ru(u=n.g[e],t,r,o))&&(Jl(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ru(e,t,r,o)),(t=-1<n?e[n]:null)&&Pu(t))}function Pu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Na])rf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(M_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pg(e))?(rf(t,n),0==t.h&&(t.src=null,e[Nu]=null)):Jl(n)}}}function M_(n){return n in Ou?Ou[n]:Ou[n]="on"+n}function ww(n,e){if(n.ca)n=!0;else{e=new Yl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Pu(n),n=t.call(r,e)}return n}function pg(n){return(n=n[Nu])instanceof Mi?n:null}var gg="__closure_events_fn_"+(1e9*Math.random()>>>0);function mg(n){return"function"==typeof n?n:(n[gg]||(n[gg]=function(e){return n.handleEvent(e)}),n[gg])}function Cr(){Mu.call(this),this.i=new Mi(this),this.P=this,this.I=null}function Or(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var o=e;C_(e=new gi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=sf(h,r,!0,e)&&o}if(o=sf(h=e.g=n,r,!0,e)&&o,o=sf(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=sf(h=e.g=t[u],r,!1,e)&&o}function sf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,E=h.ia||h.src;h.fa&&rf(n.i,h),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Yr(Cr,Mu),Cr.prototype[Na]=!0,Cr.prototype.removeEventListener=function(n,e,t,r){nc(this,n,e,t,r)},Cr.prototype.M=function(){if(Cr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jl(t[r]);delete n.g[e],n.h--}}this.I=null},Cr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Cr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var yg=Et.JSON.stringify;function nC(){var n=O_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var R_,bw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Iw,n=>n.reset());class Iw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Cw(n){Et.setTimeout(()=>{throw n},0)}function k_(n,e){R_||function Dw(){var n=Et.Promise.resolve(void 0);R_=function(){n.then(rC)}}(),N_||(R_(),N_=!0),O_.add(n,e)}var N_=!1,O_=new class Ew{constructor(){this.h=this.g=null}add(e,t){const r=bw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function rC(){for(var n;n=nC();){try{n.h.call(n.g)}catch(t){Cw(t)}var e=bw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}N_=!1}function _g(n,e){Cr.call(this),this.h=n||1,this.g=e||Et,this.j=Nr(this.kb,this),this.l=Date.now()}function Tw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function P_(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function vg(n){n.g=P_(()=>{n.g=null,n.i&&(n.i=!1,vg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(_g,Cr),(Xe=_g.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Or(this,"tick"),this.da&&(Tw(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){_g.Z.M.call(this),Tw(this),delete this.g};class F_ extends Mu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vg(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function af(n){Mu.call(this),this.h=n,this.g={}}Yr(af,Mu);var iC=[];function sC(n,e,t,r){Array.isArray(t)||(t&&(iC[0]=t.toString()),t=iC);for(var o=0;o<t.length;o++){var u=Xl(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function oC(n){_s(n.g,function(e,t){this.g.hasOwnProperty(t)&&Pu(e)},n),n.g={}}function wg(){this.g=!0}function Dd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function aC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return yg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}af.prototype.M=function(){af.Z.M.call(this),oC(this)},af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wg.prototype.Aa=function(){this.g=!1},wg.prototype.info=function(){};var Fu={},Sw=null;function uf(){return Sw=Sw||new Cr}function lf(n){gi.call(this,Fu.Ma,n)}function cf(n){const e=uf();Or(e,new lf(e,n))}function L_(n,e){gi.call(this,Fu.STAT_EVENT,n),this.stat=e}function ki(n){const e=uf();Or(e,new L_(e,n))}function xw(n,e){gi.call(this,Fu.Na,n),this.size=e}function df(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Fu.Ma="serverreachability",Yr(lf,gi),Fu.STAT_EVENT="statevent",Yr(L_,gi),Fu.Na="timingevent",Yr(xw,gi);var Eg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Mw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bg(){}function V_(){}bg.prototype.h=null;var ff,Ad={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hf(){gi.call(this,"d")}function Rw(){gi.call(this,"c")}function Ig(){}function Cg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new af(this),this.P=Nw,this.W=new _g(n=tf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Sd}function Sd(){this.i=null,this.g="",this.h=!1}Yr(hf,gi),Yr(Rw,gi),Yr(Ig,bg),Ig.prototype.g=function(){return new XMLHttpRequest},Ig.prototype.i=function(){return{}},ff=new Ig;var Nw=45e3,pf={},xd={};function U_(n,e,t){n.K=1,n.v=bf(na(e)),n.s=t,n.U=!0,gf(n,null)}function gf(n,e){n.F=Date.now(),yf(n),n.A=na(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Bw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Sd,n.g=iE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new F_(Nr(n.Ia,n,n.g),n.O)),sC(n.V,n.g,"readystatechange",n.gb),e=n.H?QI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),cf(1),function Aw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var S=C[0];C=C[1];var k=S.split("_");h=2<=k.length&&"type"==k[1]?h+(S+"=")+C+"&":h+(S+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function mf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Dg(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=DA(n,t),o==xd){4==e&&(n.o=4,ki(14),r=!1),Dd(n.j,n.m,null,"[Incomplete Response]");break}if(o==pf){n.o=4,ki(15),Dd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dd(n.j,n.m,o,null),vf(n,o)}mf(n)&&o!=xd&&o!=pf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),tv(e),e.L=!0,ki(11))):(Dd(n.j,n.m,t,"[Invalid Chunked Response]"),Lu(n),Md(n))}function DA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xd:(t=Number(e.substring(t,r)),isNaN(t)?pf:(r+=1)+t>e.length?xd:(e=e.substr(r,t),n.C=r+t,e))}function yf(n){n.Y=Date.now()+n.P,_f(n,n.P)}function _f(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=df(Nr(n.eb,n),e)}function rc(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function Md(n){0==n.l.G||n.I||eE(n.l,n)}function Lu(n){rc(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Tw(n.W),oC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function vf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||q_(t.i,n)))if(t.I=n.N,!n.J&&q_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=df(Nr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Og(t),Sf(t)}ev(t),ki(18)}if(1>=Hw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else oc(t,11)}else if((n.J||t.g==n)&&Og(t),!E_(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const S=C[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const k=C[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ie=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;!u.g&&(Qr(ie,"spdy")||Qr(ie,"quic")||Qr(ie,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(xg(u,u.h),u.h=null))}if(r.D){const Pe=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.sa=Pe,yn(r.F,r.D,Pe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=rE(r,r.H?r.la:null,r.W),h.J){Gw(r.i,h);var m=h,E=r.K;E&&m.setTimeout(E),m.B&&(rc(m),yf(m)),r.g=h}else Jw(r);0<t.l.length&&xf(t)}else"stop"!=C[0]&&"close"!=C[0]||oc(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?oc(t,7):Rg(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}cf(4)}catch(C){}}function Tg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(y_(n)||"string"==typeof n)WI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(y_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Ow(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(y_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Vu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Vu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Ag(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];ic(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)ic(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function ic(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Cg.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==Pa(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const S=Pa(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>S)&&(3!=S||tf||this.g&&(this.h.h||this.g.ga()||Q_(this.g)))){this.I||4!=S||7==e||cf(8==e||0>=k?3:2),rc(this);var t=this.g.ba();this.N=t;t:if(mf(this)){var r=Q_(this.g);n="";var o=r.length,u=4==Pa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Lu(this),Md(this);var h="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function CA(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E_(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ki(12),Lu(this),Md(this);break e}Dd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vf(this,t)}this.U?(Dg(this,S,h),tf&&this.i&&3==S&&(sC(this.V,this.W,"tick",this.fb),this.W.start())):(Dd(this.j,this.m,h,null),vf(this,h)),4==S&&Lu(this),this.i&&!this.I&&(4==S?eE(this.l,this):(this.i=!1,yf(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,ki(12)):(this.o=0,ki(13)),Lu(this),Md(this)}}}catch(S){}},Xe.fb=function(){if(this.g){var n=Pa(this.g),e=this.g.ga();this.C<e.length&&(rc(this),Dg(this,n,e),this.i&&4!=n&&yf(this))}},Xe.cancel=function(){this.I=!0,Lu(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Td(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(cf(3),ki(17)),Lu(this),this.o=2,Md(this)):_f(this,this.Y-n)},(Xe=Vu.prototype).R=function(){Ag(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Ag(this),this.g.concat()},Xe.get=function(n,e){return ic(this.h,n)?this.h[n]:e},Xe.set=function(n,e){ic(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var B_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oa(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Oa){this.g=void 0!==e?e:n.g,Sg(this,n.j),this.s=n.s,wf(this,n.i),Ef(this,n.m),this.l=n.l,e=n.h;var t=new Nd;t.i=e.i,e.g&&(t.g=new Vu(e.g),t.h=e.h),j_(this,t),this.o=n.o}else n&&(t=String(n).match(B_))?(this.g=!!e,Sg(this,t[1]||"",!0),this.s=kd(t[2]||""),wf(this,t[3]||"",!0),Ef(this,t[4]),this.l=kd(t[5]||"",!0),j_(this,t[6]||"",!0),this.o=kd(t[7]||"")):(this.g=!!e,this.h=new Nd(null,this.g))}function na(n){return new Oa(n)}function Sg(n,e,t){n.j=t?kd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wf(n,e,t){n.i=t?kd(e,!0):e}function Ef(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function j_(n,e,t){e instanceof Nd?(n.h=e,function jw(n,e){e&&!n.j&&(Uu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(lr(this,r),Bw(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Rd(e,uC)),n.h=new Nd(e,n.g))}function yn(n,e,t){n.h.set(e,t)}function bf(n){return yn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Vw),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Vw(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Oa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rd(e,$_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rd(e,$_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rd(t,"/"==t.charAt(0)?TA:Uw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rd(t,lC)),n.join("")};var $_=/[#\/\?@]/g,Uw=/[#\?:]/g,TA=/[#\?]/g,uC=/[#\?@]/g,lC=/#/g;function Nd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Uu(n){n.g||(n.g=new Vu,n.h=0,n.i&&function Pw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lr(n,e){Uu(n),e=Od(n,e),ic(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,ic((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Ag(n)))}function H_(n,e){return Uu(n),e=Od(n,e),ic(n.g.h,e)}function Bw(n,e,t){lr(n,e),0<t.length&&(n.i=null,n.g.set(Od(n,e),w_(t)),n.h+=t.length)}function Od(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function G_(n){this.l=n||$w,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ea&&Et.g.Ea()&&Et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=Nd.prototype).add=function(n,e){Uu(this),this.i=null,n=Od(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Uu(this),this.g.forEach(function(t,r){WI(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){Uu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){Uu(this);var e=[];if("string"==typeof n)H_(this,n)&&(e=gw(e,this.g.get(Od(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=gw(e,n[t])}return e},Xe.set=function(n,e){return Uu(this),this.i=null,H_(this,n=Od(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var $w=10;function sc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Hw(n){return n.h?1:n.g?n.g.size:0}function q_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xg(n,e){n.g?n.g.add(e):n.h=e}function Gw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Z_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return w_(n.i)}function qw(){}function Zw(){this.g=new qw}function z_(n,e,t){const r=t||"";try{Tg(n,function(o,u){let h=o;Jh(o)&&(h=yg(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Mg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function If(n){this.l=n.$b||null,this.j=n.ib||!1}function vs(n,e){Cr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ws,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}G_.prototype.cancel=function(){if(this.i=Z_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},qw.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},qw.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},Yr(If,bg),If.prototype.g=function(){return new vs(this.l,this.j)},If.prototype.i=function(n){return function(){return n}}({}),Yr(vs,Cr);var ws=0;function Js(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Pd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Fd(n)}function Fd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=vs.prototype).open=function(n,e){if(this.readyState!=ws)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Fd(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pd(this)),this.readyState=ws},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Fd(this)),this.g&&(this.readyState=3,Fd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Js(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pd(this):Fd(this),3==this.readyState&&Js(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Pd(this))},Xe.Ta=function(n){this.g&&(this.response=n,Pd(this))},Xe.ha=function(){this.g&&Pd(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dC=Et.JSON.parse;function cr(n){Cr.call(this),this.headers=new Vu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zw,this.K=this.L=!1}Yr(cr,Cr);var zw="",hC=/^https?$/i,W_=["POST","PUT"];function fC(n){return"content-type"==n.toLowerCase()}function K_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ww(n),Df(n)}function Ww(n){n.D||(n.D=!0,Or(n,"complete"),Or(n,"error"))}function Y_(n){if(n.h&&void 0!==m_&&(!n.C[1]||4!=Pa(n)||2!=n.ba()))if(n.v&&4==Pa(n))P_(n.Fa,0,n);else if(Or(n,"readystatechange"),4==Pa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(B_)[1]||null;if(!o&&Et.self&&Et.self.location){var u=Et.self.location.protocol;o=u.substr(0,u.length-1)}r=!hC.test(o?o.toLowerCase():"")}t=r}if(t)Or(n,"complete"),Or(n,"success");else{n.m=6;try{var h=2<Pa(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",Ww(n)}}finally{Df(n)}}}function Df(n,e){if(n.g){Tf(n);const t=n.g,r=n.C[0]?cg:null;n.g=null,n.C=null,e||Or(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Tf(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function Pa(n){return n.g?n.g.readyState:0}function Q_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Af(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Kw(n){let e="";return _s(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yn(n,e,t))}function Bu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function kg(n){this.za=0,this.l=[],this.h=new wg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bu("baseRetryDelayMs",5e3,n),this.$a=Bu("retryDelaySeedMs",1e4,n),this.Ya=Bu("forwardChannelMaxRetries",2,n),this.ra=Bu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new G_(n&&n.concurrentRequestLimit),this.Ca=new Zw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Rg(n){if(J_(n),3==n.G){var e=n.V++,t=na(n.F);yn(t,"SID",n.J),yn(t,"RID",e),yn(t,"TYPE","terminate"),Mf(n,t),(e=new Cg(n,n.h,e,void 0)).K=2,e.v=bf(na(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=iE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yf(e)}nE(n)}function Sf(n){n.g&&(tv(n),n.g.cancel(),n.g=null)}function J_(n){Sf(n),n.u&&(Et.clearTimeout(n.u),n.u=null),Og(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function Ng(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&xf(n)}function xf(n){sc(n.i)||n.m||(n.m=!0,k_(n.Ha,n),n.C=0)}function X_(n,e){var t;t=e?e.m:n.V++;const r=na(n.F);yn(r,"SID",n.J),yn(r,"RID",t),yn(r,"AID",n.U),Mf(n,r),n.o&&n.s&&Af(r,n.o,n.s),t=new Cg(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Qw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),xg(n.i,t),U_(t,r,e)}function Mf(n,e){n.j&&Tg({},function(t,r){yn(e,r,t)})}function Qw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Nr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const S=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{z_(S,h,"req"+C+"_")}catch(k){r&&r(S)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Jw(n){n.g||n.u||(n.Y=1,k_(n.Ga,n),n.A=0)}function ev(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=df(Nr(n.Ga,n),tE(n,n.A)),n.A++,0))}function tv(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function Xw(n){n.g=new Cg(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=na(n.oa);yn(e,"RID","rpc"),yn(e,"SID",n.J),yn(e,"CI",n.N?"0":"1"),yn(e,"AID",n.U),Mf(n,e),yn(e,"TYPE","xmlhttp"),n.o&&n.s&&Af(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=bf(na(e)),t.s=null,t.U=!0,gf(t,n)}function Og(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function eE(n,e){var t=null;if(n.g==e){Og(n),tv(n),n.g=null;var r=2}else{if(!q_(n.i,e))return;t=e.D,Gw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Or(r=uf(),new xw(r,t,e,o)),xf(n)}else Jw(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Yw(n,e){return!(Hw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=df(Nr(n.Ha,n,e),tE(n,n.C)),n.C++,0)))}(n,e)||2==r&&ev(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:oc(n,5);break;case 4:oc(n,10);break;case 3:oc(n,6);break;default:oc(n,2)}}function tE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function oc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Nr(n.jb,n);t||(t=new Oa("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Sg(t,"https"),bf(t)),function ra(n,e){const t=new wg;if(Et.Image){const r=new Image;r.onload=Xh(Mg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xh(Mg,t,r,"TestLoadImage: error",!1,e),r.onabort=Xh(Mg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xh(Mg,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ki(2);n.G=0,n.j&&n.j.va(e),nE(n),J_(n)}function nE(n){n.G=0,n.I=-1,n.j&&((0!=Z_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,w_(n.l),n.l.length=0),n.j.ua())}function rE(n,e,t){let r=function Fw(n){return n instanceof Oa?na(n):new Oa(n,void 0)}(t);if(""!=r.i)e&&wf(r,e+"."+r.i),Ef(r,r.m);else{const o=Et.location;r=function Lw(n,e,t,r){var o=new Oa(null,void 0);return n&&Sg(o,n),e&&wf(o,e),t&&Ef(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&_s(n.aa,function(o,u){yn(r,u,o)}),t=n.sa,(e=n.D)&&t&&yn(r,e,t),yn(r,"VER",n.ma),Mf(n,r),r}function iE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Ba&&!n.qa?new If({ib:!0}):n.qa)).L=n.H,e}function sE(){}function Pg(){if(ef&&!(10<=Number(nf)))throw Error("Environmental error: no available transport.")}function Es(n,e){Cr.call(this),this.g=new kg(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!E_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ac(this)}function oE(n){hf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function aE(){Rw.call(this),this.status=1}function ac(n){this.g=n}(Xe=cr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ff.g(),this.C=function kw(n){return n.h||(n.h=n.i())}(this.u?this.u:ff),this.g.onreadystatechange=Nr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void K_(this,u)}n=t||"";const o=new Vu(this.headers);r&&Tg(r,function(u,h){o.set(h,u)}),r=function pw(n){e:{var e=fC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Et.FormData&&n instanceof Et.FormData,!(0<=v_(W_,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tf(this),0<this.B&&((this.K=function Cf(n){return ef&&function fg(){return function mw(n){var e=eC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=KI(String(hg)).split("."),t=KI("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=b_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||b_(0==o[2].length,0==u[2].length)||b_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.pa,this)):this.A=P_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){K_(this,u)}},Xe.pa=function(){void 0!==m_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Or(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Or(this,"complete"),Or(this,"abort"),Df(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Df(this,!0)),cr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?Y_(this):this.cb())},Xe.cb=function(){Y_(this)},Xe.ba=function(){try{return 2<Pa(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dC(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=kg.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Cg(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=QI(u),C_(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qw(this,o,e),yn(t=na(this.F),"RID",n),yn(t,"CVER",22),this.D&&yn(t,"X-HTTP-Session-Id",this.D),Mf(this,t),this.o&&u&&Af(t,this.o,u),xg(this.i,o),this.Ra&&yn(t,"TYPE","init"),this.ja?(yn(t,"$req",e),yn(t,"SID","null"),o.$=!0,U_(o,t,null)):U_(o,t,e),this.G=2}}else 3==this.G&&(n?X_(this,n):0==this.l.length||sc(this.i)||X_(this))},Xe.Ga=function(){if(this.u=null,Xw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=df(Nr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ki(10),Sf(this),Xw(this))},Xe.ab=function(){null!=this.v&&(this.v=null,Sf(this),ev(this),ki(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ki(2)):(this.h.info("Failed to ping google.com"),ki(1))},(Xe=sE.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Pg.prototype.g=function(n,e){return new Es(n,e)},Yr(Es,Cr),Es.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),k_(Nr(n.hb,n,e))),ki(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=rE(n,null,n.W),xf(n)},Es.prototype.close=function(){Rg(this.g)},Es.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ng(this.g,e)}else this.v?((e={}).__data__=yg(n),Ng(this.g,e)):Ng(this.g,n)},Es.prototype.M=function(){this.g.j=null,delete this.j,Rg(this.g),delete this.g,Es.Z.M.call(this)},Yr(oE,hf),Yr(aE,Rw),Yr(ac,sE),ac.prototype.xa=function(){Or(this.g,"a")},ac.prototype.wa=function(n){Or(this.g,new oE(n))},ac.prototype.va=function(n){Or(this.g,new aE(n))},ac.prototype.ua=function(){Or(this.g,"b")},Pg.prototype.createWebChannel=Pg.prototype.g,Es.prototype.send=Es.prototype.u,Es.prototype.open=Es.prototype.m,Es.prototype.close=Es.prototype.close,Eg.NO_ERROR=0,Eg.TIMEOUT=8,Eg.HTTP_ERROR=6,Mw.COMPLETE="complete",V_.EventType=Ad,Ad.OPEN="a",Ad.CLOSE="b",Ad.ERROR="c",Ad.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.La,cr.prototype.getLastErrorCode=cr.prototype.Da,cr.prototype.getStatus=cr.prototype.ba,cr.prototype.getResponseJson=cr.prototype.Qa,cr.prototype.getResponseText=cr.prototype.ga,cr.prototype.send=cr.prototype.ea;var uE=ea.createWebChannelTransport=function(){return new Pg},lE=ea.getStatEventTarget=function(){return uf()},Fg=ea.ErrorCode=Eg,cE=ea.EventType=Mw,dE=ea.Event=Fu,nv=ea.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hE=ea.FetchXmlHttpFactory=If,kf=ea.WebChannel=V_,fE=ea.XhrIo=cr;const rv="@firebase/firestore";class Vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");let Ld="9.6.10";const ju=new Du.Yd("@firebase/firestore");function $u(){return ju.logLevel}function Oe(n,...e){if(ju.logLevel<=Du.in.DEBUG){const t=e.map(Lg);ju.debug(`Firestore (${Ld}): ${n}`,...t)}}function Dr(n,...e){if(ju.logLevel<=Du.in.ERROR){const t=e.map(Lg);ju.error(`Firestore (${Ld}): ${n}`,...t)}}function Vd(n,...e){if(ju.logLevel<=Du.in.WARN){const t=e.map(Lg);ju.warn(`Firestore (${Ld}): ${n}`,...t)}}function Lg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: `+n;throw Dr(e),new Error(e)}function ke(n,e){n||tt()}function qe(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends $t.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Vg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vn.UNAUTHENTICATED))}shutdown(){}}class qn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class SA{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Pr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Pr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke("string"==typeof r.accessToken),new Rf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ke(null===e||"string"==typeof e),new Vn(e)}}class pE{constructor(e,t,r){this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class gC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new pE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke("string"==typeof t.token),this.p=t.token,new gE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Wi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function yE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Wi.A=-1;class _E{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=yE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Ud(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Bd(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Jn(0,0))}static max(){return new bt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function vE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ia(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class jd{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends jd{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const yC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends jd{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return yC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new De(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new De(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new De(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new De(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class sa{constructor(e){this.fields=e,e.sort(Zn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ud(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(n){if(ke(!!n),"string"==typeof n){let e=0;const t=vC.exec(n);if(ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hu(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function sv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ov(n){const e=n.mapValue.fields.__previous_value__;return sv(e)?ov(e):e}function Nf(n){const e=Fa(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class wC{constructor(e,t,r,o,u,h,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Gu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}function $d(n){return null==n}function Ug(n){return 0===n&&1/n==-1/0}function EC(n){return"number"==typeof n&&Number.isInteger(n)&&!Ug(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Zt.fromString(e))}static fromName(e){return new Be(Zt.fromString(e).popFirst(5))}static empty(){return new Be(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Zt(e.slice()))}}const Of={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wE={nullValue:"NULL_VALUE"};function uc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sv(n)?4:IE(n)?9:10:tt()}function So(n,e){if(n===e)return!0;const t=uc(n);if(t!==uc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nf(n).isEqual(Nf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Fa(r.timestampValue),h=Fa(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Hu(n.bytesValue).isEqual(Hu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Un(r.geoPointValue.latitude)===Un(o.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Un(r.integerValue)===Un(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Un(r.doubleValue),h=Un(o.doubleValue);return u===h?Ug(u)===Ug(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Ud(n.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(vE(u)!==vE(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!So(u[m],h[m])))return!1;return!0}(n,e);default:return tt()}var o}function La(n,e){return void 0!==(n.values||[]).find(t=>So(t,e))}function qu(n,e){if(n===e)return 0;const t=uc(n),r=uc(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Un(o.integerValue||o.doubleValue),m=Un(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return EE(n.timestampValue,e.timestampValue);case 4:return EE(Nf(n),Nf(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Hu(o),m=Hu(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let E=0;E<h.length&&E<m.length;E++){const C=Ht(h[E],m[E]);if(0!==C)return C}return Ht(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Ht(Un(o.latitude),Un(u.latitude));return 0!==h?h:Ht(Un(o.longitude),Un(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let E=0;E<h.length&&E<m.length;++E){const C=qu(h[E],m[E]);if(C)return C}return Ht(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const h=o.fields||{},m=Object.keys(h),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const k=Ht(m[S],C[S]);if(0!==k)return k;const V=qu(h[m[S]],E[C[S]]);if(0!==V)return V}return Ht(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function EE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=Fa(n),r=Fa(e),o=Ht(t.seconds,r.seconds);return 0!==o?o:Ht(t.nanos,r.nanos)}function Hd(n){return av(n)}function av(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Fa(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hu(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=av(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${av(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function Gd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function Pf(n){return!!n&&"arrayValue"in n}function bE(n){return!!n&&"nullValue"in n}function lc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jg(n){return!!n&&"mapValue"in n}function qd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ia(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function uv(n,e){return void 0===n?e:void 0===e||qu(n,e)>0?n:e}function CE(n,e){return void 0===n?e:void 0===e||qu(n,e)<0?n:e}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qd(t)}setAll(e){let t=Zn.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=qd(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());jg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];jg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ia(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Jr(qd(this.value))}}function DE(n){const e=[];return ia(n.fields,(t,r)=>{const o=new Zn([t]);if(jg(r)){const u=DE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new sa(e)}class pn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new pn(e,0,bt.min(),bt.min(),Jr.empty(),0)}static newFoundDocument(e,t,r){return new pn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new pn(e,2,t,bt.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,bt.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $g{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Hg(n){return n.fields.find(e=>2===e.kind)}function cc(n){return n.fields.filter(e=>2!==e.kind)}$g.UNKNOWN_ID=-1;class Gg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ff{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ff(0,Va.min())}}function TE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new Va(o,Be.empty(),e)}function lv(n){return new Va(n.readTime,n.key,-1)}class Va{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Va(bt.min(),Be.empty(),-1)}static max(){return new Va(bt.max(),Be.empty(),-1)}}function AE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}class bC{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function SE(n,e=null,t=[],r=[],o=null,u=null,h=null){return new bC(n,e,t,r,o,u,h)}function dc(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Hd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),$d(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hd(r)).join(",")),e.P=t}return e.P}function Lf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!NE(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!So(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OE(n.startAt,e.startAt)&&OE(n.endAt,e.endAt)}function qg(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zg(n,e){return n.filters.filter(t=>t instanceof Xr&&t.field.isEqual(e))}class Xr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new xE(e,t,r):"array-contains"===t?new RE(e,r):"in"===t?new DC(e,r):"not-in"===t?new TC(e,r):"array-contains-any"===t?new AC(e,r):new Xr(e,t,r)}static V(e,t,r){return"in"===t?new ME(e,r):new CC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(qu(t,this.value)):null!==t&&uc(this.value)===uc(t)&&this.v(qu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xE extends Xr{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class ME extends Xr{constructor(e,t){super(e,"in",t),this.keys=kE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class CC extends Xr{constructor(e,t){super(e,"not-in",t),this.keys=kE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class RE extends Xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pf(t)&&La(t.arrayValue,this.value)}}class DC extends Xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&La(this.value.arrayValue,t)}}class TC extends Xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!La(this.value.arrayValue,t)}}class AC extends Xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}class oa{constructor(e,t){this.position=e,this.inclusive=t}}class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function NE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function zg(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?Be.comparator(Be.fromName(h.referenceValue),t.key):qu(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function OE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!So(n.position[t],e.position[t]))return!1;return!0}class Ua{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function Wg(n,e,t,r,o,u,h,m){return new Ua(n,e,t,r,o,u,h,m)}function Zd(n){return new Ua(n)}function Vf(n){return!$d(n.limit)&&"F"===n.limitType}function Kg(n){return!$d(n.limit)&&"L"===n.limitType}function Yg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cv(n){for(const e of n.filters)if(e.S())return e.field;return null}function Qg(n){return null!==n.collectionGroup}function Uf(n){const e=qe(n);if(null===e.D){e.D=[];const t=cv(e),r=Yg(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Zu(t)),e.D.push(new Zu(Zn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Zu(Zn.keyField(),u))}}}return e.D}function Xs(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=SE(e.path,e.collectionGroup,Uf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Uf(e))t.push(new Zu(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new oa(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new oa(e.startAt.position,!e.startAt.inclusive):null;e.C=SE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Bf(n,e,t){return new Ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jf(n,e){return Lf(Xs(n),Xs(e))&&n.limitType===e.limitType}function hc(n){return`${dc(Xs(n))}|lt:${n.limitType}`}function fc(n){return`Query(target=${function IC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Hd(r.value)}`;var r}).join(", ")}]`),$d(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Hd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Hd(t)).join(",")),`Target(${e})`}(Xs(n))}; limitType=${n.limitType})`}function dv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=zg(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,Uf(t),r)||t.endAt&&!function(o,u,h){const m=zg(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,Uf(t),r)));var t,r}function SC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hv(n){return(e,t)=>{let r=!1;for(const o of Uf(n)){const u=xC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function xC(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),E=h.data.field(o);return null!==m&&null!==E?qu(m,E):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function PE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ug(e)?"-0":e}}function FE(n){return{integerValue:""+n}}function LE(n,e){return EC(e)?FE(e):PE(n,e)}class $f{constructor(){this._=void 0}}function VE(n,e,t){return n instanceof aa?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof pc?pv(n,e):n instanceof zu?UE(n,e):function(r,o){const u=Hf(r,o),h=Jg(u)+Jg(r.k);return Bg(u)&&Bg(r.k)?FE(h):PE(r.M,h)}(n,e)}function fv(n,e,t){return n instanceof pc?pv(n,e):n instanceof zu?UE(n,e):t}function Hf(n,e){return n instanceof zd?Bg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class aa extends $f{}class pc extends $f{constructor(e){super(),this.elements=e}}function pv(n,e){const t=BE(e);for(const r of n.elements)t.some(o=>So(o,r))||t.push(r);return{arrayValue:{values:t}}}class zu extends $f{constructor(e){super(),this.elements=e}}function UE(n,e){let t=BE(e);for(const r of n.elements)t=t.filter(o=>!So(o,r));return{arrayValue:{values:t}}}class zd extends $f{constructor(e,t){super(),this.M=e,this.k=t}}function Jg(n){return Un(n.integerValue||n.doubleValue)}function BE(n){return Pf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xg{constructor(e,t){this.field=e,this.transform=t}}class kC{constructor(e,t){this.version=e,this.transformResults=t}}class Dn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ba{}function xA(n,e,t){n instanceof tm?function(r,o,u){const h=r.value.clone(),m=mv(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Wu?function(r,o,u){if(!Gf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=mv(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(nm(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function em(n,e,t){var o;n instanceof tm?function(r,o,u){if(!Gf(r.precondition,o))return;const h=r.value.clone(),m=yv(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(gv(o),h).setHasLocalMutations()}(n,e,t):n instanceof Wu?function(r,o,u){if(!Gf(r.precondition,o))return;const h=yv(r.fieldTransforms,u,o),m=o.data;m.setAll(nm(r)),m.setAll(h),o.convertToFoundDocument(gv(o),m).setHasLocalMutations()}(n,e,t):Gf(n.precondition,o=e)&&o.convertToNoDocument(bt.min())}function RC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Hf(r.transform,o||null);null!=u&&(null==t&&(t=Jr.empty()),t.set(r.field,u))}return t||null}function NC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ud(t,r,(o,u)=>function MC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof pc&&r instanceof pc||t instanceof zu&&r instanceof zu?Ud(t.elements,r.elements,So):t instanceof zd&&r instanceof zd?So(t.k,r.k):t instanceof aa&&r instanceof aa);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function gv(n){return n.isFoundDocument()?n.version:bt.min()}class tm extends Ba{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Wu extends Ba{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function nm(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function mv(n,e,t){const r=new Map;ke(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,fv(h,m,t[o]))}return r}function yv(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,VE(u,h,e))}return r}class Wd extends Ba{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class _v extends Ba{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class OC{constructor(e){this.count=e}}var dr,Kt;function jE(n){switch(n){default:return tt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function $E(n){if(void 0===n)return Dr("GRPC error has no .code"),le.UNKNOWN;switch(n){case dr.OK:return le.OK;case dr.CANCELLED:return le.CANCELLED;case dr.UNKNOWN:return le.UNKNOWN;case dr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case dr.INTERNAL:return le.INTERNAL;case dr.UNAVAILABLE:return le.UNAVAILABLE;case dr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case dr.NOT_FOUND:return le.NOT_FOUND;case dr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case dr.ABORTED:return le.ABORTED;case dr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case dr.DATA_LOSS:return le.DATA_LOSS;default:return tt()}}(Kt=dr||(dr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return iv(this.inner)}size(){return this.innerSize}}class Tn{constructor(e,t){this.comparator=e,this.root=t||Fr.EMPTY}insert(e,t){return new Tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new Tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qf(this.root,e,this.comparator,!0)}}class qf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Fr.RED,this.left=null!=o?o:Fr.EMPTY,this.right=null!=u?u:Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Fr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Fr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Fr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Tn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vv(this.data.getIterator())}getIteratorFrom(e){return new vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gc(n){return n.hasNext()?n.getNext():void 0}const HE=new Tn(Be.comparator);function eo(){return HE}const GE=new Tn(Be.comparator);function wv(){return GE}function Zf(){return new Ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const PC=new Tn(Be.comparator),FC=new _n(Be.comparator);function Yt(...n){let e=FC;for(const t of n)e=e.add(t);return e}const LC=new _n(Ht);function Kd(){return LC}class Ki{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,zf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ki(bt.min(),r,Kd(),eo(),Yt())}}class zf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new zf(Tr.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class mc{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Yd{constructor(e,t){this.targetId=e,this.$=t}}class qE{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ZE{constructor(){this.B=0,this.L=Kf(),this.U=Tr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Yt(),t=Yt(),r=Yt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new zf(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=Kf()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class VC{constructor(e){this.nt=e,this.st=new Map,this.it=eo(),this.rt=Wf(),this.ot=new _n(Ht)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(qg(u))if(0===r){const h=new Be(u.path);this.ct(t,h,pn.newNoDocument(h,bt.min()))}else ke(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&qg(m.target)){const E=new Be(m.target.path);null!==this.it.get(E)||this.It(h,E)||this.ct(h,E,pn.newNoDocument(E,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=Yt();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new Ki(e,t,this.ot,this.it,r);return this.it=eo(),this.rt=Wf(),this.ot=new _n(Ht),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new ZE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new _n(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new ZE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Wf(){return new Tn(Be.comparator)}function Kf(){return new Tn(Be.comparator)}const UC={asc:"ASCENDING",desc:"DESCENDING"},BC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zE{constructor(e,t){this.databaseId=e,this.N=t}}function Qd(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rm(n,e){return n.N?e.toBase64():e.toUint8Array()}function WE(n,e){return Qd(n,e.toTimestamp())}function Lr(n){return ke(!!n),bt.fromTimestamp(function(e){const t=Fa(e);return new Jn(t.seconds,t.nanos)}(n))}function Ev(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jC(n){const e=Zt.fromString(n);return ke(zC(e)),e}function yc(n,e){return Ev(n.databaseId,e.path)}function to(n,e){const t=jC(e);if(t.get(1)!==n.databaseId.projectId)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(KE(t))}function im(n,e){return Ev(n.databaseId,e)}function sm(n){const e=jC(n);return 4===e.length?Zt.emptyPath():KE(e)}function _c(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KE(n){return ke(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function YE(n,e,t){return{name:yc(n,e),fields:t.value.mapValue.fields}}function QE(n,e,t){const r=to(n,e.name),o=Lr(e.updateTime),u=new Jr({mapValue:{fields:e.fields}}),h=pn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function vc(n,e){let t;if(e instanceof tm)t={update:YE(n,e.key,e.value)};else if(e instanceof Wd)t={delete:yc(n,e.key)};else if(e instanceof Wu)t={update:YE(n,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof _v))return tt();t={verify:yc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof aa)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof pc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof zu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof zd)return{fieldPath:u.field.canonicalString(),increment:h.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:WE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function om(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Dn.updateTime(Lr(o.updateTime)):void 0!==o.exists?Dn.exists(o.exists):Dn.none():Dn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(ke("REQUEST_TIME"===h.setToServerValue),m=new aa):"appendMissingElements"in h?m=new pc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new zu(h.removeAllFromArray.values||[]):"increment"in h?m=new zd(u,h.increment):tt();const E=Zn.fromServerFormat(h.fieldPath);return new Xg(E,m)}(n,o)):[];var o;if(e.update){const o=to(n,e.update.name),u=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new sa((e.updateMask.fieldPaths||[]).map(C=>Zn.fromServerFormat(C)));return new Wu(o,u,h,t,r)}return new tm(o,u,t,r)}if(e.delete){const o=to(n,e.delete);return new Wd(o,t)}if(e.verify){const o=to(n,e.verify);return new _v(o,t)}return tt()}function bv(n,e){return{documents:[im(n,e.path)]}}function Iv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=im(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=im(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(S=>function(k){if("=="===k.op){if(lc(k.value))return{unaryFilter:{field:wc(k.field),op:"IS_NAN"}};if(bE(k.value))return{unaryFilter:{field:wc(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(lc(k.value))return{unaryFilter:{field:wc(k.field),op:"IS_NOT_NAN"}};if(bE(k.value))return{unaryFilter:{field:wc(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wc(k.field),op:tb(k.op),value:k.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:wc((S=C).field),direction:GC(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(C=e.limit,n.N||$d(C)?C:{value:C});var C,m,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function XE(n){let e=sm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ke(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Cv(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(S=>{return new Zu(hr((k=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(S){let k;return k="object"==typeof S?S.value:S,$d(k)?null:k}(t.limit));let E=null;var S;t.startAt&&(E=new oa((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new oa(S.values||[],!S.before)}(t.endAt)),Wg(e,o,h,u,m,"F",E,C)}function Cv(n){return n?void 0!==n.unaryFilter?[qC(n)]:void 0!==n.fieldFilter?[Jd(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Cv(e)).reduce((e,t)=>e.concat(t)):tt():[]}function GC(n){return UC[n]}function tb(n){return BC[n]}function wc(n){return{fieldPath:n.canonicalString()}}function hr(n){return Zn.fromServerFormat(n.fieldPath)}function Jd(n){return Xr.create(hr(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function qC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=hr(n.unaryFilter.field);return Xr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=hr(n.unaryFilter.field);return Xr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hr(n.unaryFilter.field);return Xr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hr(n.unaryFilter.field);return Xr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function ZC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=am(e)),e=WC(n.get(t),e);return am(e)}function WC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function am(n){return n+"\x01\x01"}function xo(n){const e=n.length;if(ke(e>=2),2===e)return ke("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&tt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:tt()}u=h+2}return new Zt(r)}const Dv=["userId","batchId"];function um(n,e){return[n,zn(e)]}function nb(n,e,t){return[n,zn(e),t]}const Tv={},rb=["prefixPath","collectionGroup","readTime","documentId"],ib=["prefixPath","collectionGroup","documentId"],lm=["collectionGroup","readTime","prefixPath","documentId"],Av=["canonicalId","targetId"],MA=["targetId","path"],sb=["path","targetId"],KC=["collectionId","parent"],ob=["indexId","uid"],cm=["uid","sequenceNumber"],ab=["indexId","uid","arrayValue","directionalValue","documentKey"],YC=["indexId","uid","documentKey"],Sv=["userId","collectionPath","documentId"],xv=["userId","collectionPath","largestBatchId"],kA=["userId","collectionGroup","largestBatchId"],ub=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QC=[...ub,"documentOverlays"],Mv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lb=[...Mv,"indexConfiguration","indexState","indexEntries"],cb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},E=>r(E))}),h=!0,u===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class dm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Pr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Yf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Nv(r.target.error);this.At.reject(new Yf(e,o))}}static open(e,t,r,o){try{return new dm(t,e.transaction(o,r))}catch(u){throw new Yf(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hb(t)}}class Mo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Mo.Vt((0,$t.z$)())&&Dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Qu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,$t.hl)())return!1;if(Mo.St())return!0;const e=(0,$t.z$)(),t=Mo.Vt(e),r=0<t&&t<10,o=Mo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new Yf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new De(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new De(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Yf(e,m))},u.onupgradeneeded=h=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=dm.open(u.db,e,h?"readonly":"readwrite",r),C=o(E).next(S=>(E.bt(),S)).catch(S=>(E.abort(S),he.reject(S))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class db{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Qu(this.Ft.delete())}}class Yf extends De{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yu(n){return"IndexedDbTransactionError"===n.name}class hb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qu(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Qu(this.store.add(e))}get(e){return Qu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Qu(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Qu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Gt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new he((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=u=>{const h=Nv(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const E=new db(m),C=t(m.primaryKey,m.value,E);if(C instanceof he){const S=C.catch(k=>(E.done(),he.reject(k)));r.push(S)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qu(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Nv(r.target.error);t(o)}})}let Rv=!1;function Nv(n){const e=Mo.Vt((0,$t.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rv||(Rv=!0,setTimeout(()=>{throw r},0)),r}}return n}class fb extends kv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ei(n,e){const t=qe(n);return Mo.xt(t.Ht,e)}class hm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&xA(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&em(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&em(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&Ud(this.mutations,e.mutations,(t,r)=>NC(t,r))&&Ud(this.baseMutations,e.baseMutations,(t,r)=>NC(t,r))}}class pb{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ke(e.mutations.length===r.length);let o=PC;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new pb(e,t,r,o)}}class gb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ec{constructor(e,t,r,o,u=bt.min(),h=bt.min(),m=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Ec(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class JC{constructor(e){this.Jt=e}}function XC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ov(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yc(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Qd(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Xd(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Xd(e.version)}}var o,u;return r}function Ov(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Xd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ua(n){const e=new Jn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Qf(n,e){const t=(e.baseMutations||[]).map(u=>om(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>om(n.Jt,u)),o=Jn.fromMillis(e.localWriteTimeMs);return new hm(e.batchId,o,t,r)}function eh(n){const e=ua(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ua(n.lastLimboFreeSnapshotVersion):bt.min();let r;var o;return void 0!==n.query.documents?(ke(1===(o=n.query).documents.length),r=Xs(Zd(sm(o.documents[0])))):r=Xs(XE(n.query)),new Ec(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function fm(n,e){const t=Xd(e.snapshotVersion),r=Xd(e.lastLimboFreeSnapshotVersion);let o;o=qg(e.target)?bv(n.Jt,e.target):Iv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function pm(n){const e=XE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Bf(e,e.limit,"L"):e}function gm(n,e){return new gb(e.largestBatchId,om(n.Jt,e.overlayMutation))}function eD(n,e){const t=e.path.lastSegment();return[n,zn(e.path.popLast()),t]}class Pv{getBundleMetadata(e,t){return Fv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:ua(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Fv(e).put({bundleId:(r=t).id,createTime:Xd(Lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Lv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:pm(o.bundledQuery),readTime:ua(o.readTime)};var o})}saveNamedQuery(e,t){return Lv(e).put({name:(r=t).name,readTime:Xd(Lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Fv(n){return ei(n,"bundles")}function Lv(n){return ei(n,"namedQueries")}class mm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new mm(e,t.uid||"")}getOverlay(e,t){return ym(e).get(eD(this.userId,t)).next(r=>r?gm(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new gb(t,h);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(zn(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(ym(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Zf(),u=zn(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ym(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const E of m){const C=gm(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Zf();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ym(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,S)=>{const k=gm(this.M,C);u.size()<o||k.largestBatchId===h?(u.set(k.getKey(),k),h=k.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return ym(e).put(function(r,o,u){const[h,m,E]=eD(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:vc(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function ym(n){return ei(n,"documentOverlays")}class bc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ug(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Hu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?IE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function tD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function _m(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=tD(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}bc.fe=new bc;class nD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=_m(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=_m(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class NA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class OA{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Vv{constructor(){this.De=new nD,this.Ce=new NA(this.De),this.xe=new OA(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Ju{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ju(this.indexId,this.documentKey,this.arrayValue,r)}}function Ic(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mb(n.arrayValue,e.arrayValue),0!==t?t:(t=mb(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function mb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Hg(e);if(void 0!==t&&!this.Be(t))return!1;const r=cc(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rD{constructor(){this.qe=new Jf}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Jf{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _n(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _n(Zt.comparator)).toArray()}}const vm=new Uint8Array(0);class ko{constructor(e){this.user=e,this.Ge=new Jf,this.Ke=new Ku(t=>dc(t),(t,r)=>Lf(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:zn(o)};return yb(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Bd(t),""],!1,!0);return yb(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(xo(h.parent))}return r})}addFieldIndex(e,t){const r=wm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=wm(e),o=Em(e),u=Cc(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Cc(e);let o=!0;const u=new Map;return he.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=Yt();return he.forEach(u,(m,E)=>{var C;Oe("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(at=>`${at.fieldPath}:${at.kind}`).join(",")}`} to execute ${dc(t)}`);const S=function(at,sn){const _t=Hg(sn);if(void 0===_t)return null;for(const Rt of Zg(at,_t.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(E,m),k=function(at,sn){const _t=new Map;for(const Rt of cc(sn))for(const Je of Zg(at,Rt.fieldPath))switch(Je.op){case"==":case"in":_t.set(Rt.fieldPath.canonicalString(),Je.value);break;case"not-in":case"!=":return _t.set(Rt.fieldPath.canonicalString(),Je.value),Array.from(_t.values())}return null}(E,m),V=function(at,sn){const _t=[];let Rt=!0;for(const Pt of cc(sn)){let Br,Ga=!0;for(const Xn of Zg(at,Pt.fieldPath)){let An,no=!0;switch(Xn.op){case"<":case"<=":An="nullValue"in(Je=Xn.value)?wE:"booleanValue"in Je?{booleanValue:!1}:"integerValue"in Je||"doubleValue"in Je?{doubleValue:NaN}:"timestampValue"in Je?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Je?{stringValue:""}:"bytesValue"in Je?{bytesValue:""}:"referenceValue"in Je?Gd(Gu.empty(),Be.empty()):"geoPointValue"in Je?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Je?{arrayValue:{}}:"mapValue"in Je?{mapValue:{}}:tt();break;case"==":case"in":case">=":An=Xn.value;break;case">":An=Xn.value,no=!1;break;case"!=":case"not-in":An=wE}uv(Br,An)===An&&(Br=An,Ga=no)}if(null!==at.startAt)for(let Xn=0;Xn<at.orderBy.length;++Xn)if(at.orderBy[Xn].field.isEqual(Pt.fieldPath)){const An=at.startAt.position[Xn];uv(Br,An)===An&&(Br=An,Ga=at.startAt.inclusive);break}if(void 0===Br)return null;_t.push(Br),Rt&&(Rt=Ga)}var Je;return new oa(_t,Rt)}(E,m),G=function(at,sn){const _t=[];let Rt=!0;for(const Pt of cc(sn)){let Br,Ga=!0;for(const Xn of Zg(at,Pt.fieldPath)){let An,no=!0;switch(Xn.op){case">=":case">":An="nullValue"in(Je=Xn.value)?{booleanValue:!1}:"booleanValue"in Je?{doubleValue:NaN}:"integerValue"in Je||"doubleValue"in Je?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Je?{stringValue:""}:"stringValue"in Je?{bytesValue:""}:"bytesValue"in Je?Gd(Gu.empty(),Be.empty()):"referenceValue"in Je?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Je?{arrayValue:{}}:"arrayValue"in Je?{mapValue:{}}:"mapValue"in Je?Of:tt(),no=!1;break;case"==":case"in":case"<=":An=Xn.value;break;case"<":An=Xn.value,no=!1;break;case"!=":case"not-in":An=Of}CE(Br,An)===An&&(Br=An,Ga=no)}if(null!==at.endAt)for(let Xn=0;Xn<at.orderBy.length;++Xn)if(at.orderBy[Xn].field.isEqual(Pt.fieldPath)){const An=at.endAt.position[Xn];CE(Br,An)===An&&(Br=An,Ga=at.endAt.inclusive);break}if(void 0===Br)return null;_t.push(Br),Rt&&(Rt=Ga)}var Je;return new oa(_t,Rt)}(E,m),ie=this.je(m,E,V),Pe=this.je(m,E,G),Le=this.We(m,E,k),kt=this.ze(m.indexId,S,ie,!!V&&V.inclusive,Pe,!!G&&G.inclusive,Le);return he.forEach(kt,at=>r.Kt(at,t.limit).next(sn=>{sn.forEach(_t=>{h=h.add(new Be(xo(_t.documentKey)))})}))}).next(()=>h)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,u,h,m){const E=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=E/(null!=t?t.length:1),S=[];for(let k=0;k<E;++k){const V=t?this.He(t[k/C]):vm,G=r?this.Je(e,V,r[k%C],o):this.Ye(e),ie=u?this.Xe(e,V,u[k%C],h):this.Ye(e+1);S.push(...this.createRange(G,ie,m.map(Pe=>this.Je(e,V,Pe,!0))))}return S}Je(e,t,r,o){const u=new Ju(e,Be.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Ju(e,Be.empty(),t,r);return o?u.ke():u}Ye(e){return new Ju(e,Be.empty(),vm,vm)}getFieldIndex(e,t){const r=new PA(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const h=u.filter(m=>r.$e(m));return h.sort((m,E)=>E.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new Vv;for(const o of cc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);bc.fe.Zt(u,h)}return r.Se()}He(e){const t=new Vv;return bc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Vv);let u=0;for(const h of cc(e)){const m=r[u++];for(const E of o)if(this.tn(t,h.fieldPath)&&Pf(m))o=this.en(o,h,m);else{const C=E.Ne(h.kind);bc.fe.Zt(m,C)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const E=new Vv;E.seed(m.Se()),bc.fe.Zt(h,E.Ne(t.kind)),u.push(E)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof Xr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=wm(e),o=Em(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return he.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{h.push(function(C,S){const k=S?new Ff(S.sequenceNumber,new Va(ua(S.readTime),new Be(xo(S.documentKey)),S.largestBatchId)):Ff.empty(),V=C.fields.map(([G,ie])=>new Gg(Zn.fromServerFormat(G),ie));return new $g(C.indexId,C.collectionGroup,V,k)}(m,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ht(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=wm(e),u=Em(e);return this.sn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:Xd((V=r).readTime),documentKey:zn(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?he.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,E=>this.rn(e,o,E).next(C=>{const S=this.on(u,E);return C.isEqual(S)?he.resolve():this.un(e,u,C,S)}))))})}an(e,t,r){return Cc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:zn(t.key.path)})}cn(e,t,r){return Cc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,zn(t.key.path)])}rn(e,t,r){const o=Cc(e);let u=new _n(Ic);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,zn(t.path)])},(h,m)=>{u=u.add(new Ju(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}on(e,t){let r=new _n(Ic);const o=this.Ze(t,e);if(null==o)return r;const u=Hg(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Pf(h))for(const m of h.arrayValue.values||[])r=r.add(new Ju(t.indexId,e.key,this.He(m),o))}else r=r.add(new Ju(t.indexId,e.key,vm,o));return r}un(e,t,r,o){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,E,C,S){const k=h.getIterator(),V=m.getIterator();let G=gc(k),ie=gc(V);for(;G||ie;){let Pe=!1,Le=!1;if(G&&ie){const kt=E(G,ie);kt<0?Le=!0:kt>0&&(Pe=!0)}else null!=G?Le=!0:Pe=!0;Pe?(C(ie),ie=gc(V)):Le?(S(G),G=gc(k)):(G=gc(k),ie=gc(V))}}(r,o,Ic,h=>{u.push(this.an(e,t,h))},h=>{u.push(this.cn(e,t,h))}),he.waitFor(u)}sn(e){let t=1;return Em(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>Ic(h,m)).filter((h,m,E)=>!m||0!==Ic(h,E[m-1]));const o=[];o.push(e);for(const h of r){const m=Ic(h,e),E=Ic(h,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(h),o.push(h.ke());else if(E>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,""],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,""]));return u}}function yb(n){return ei(n,"collectionParents")}function Cc(n){return ei(n,"indexEntries")}function wm(n){return ei(n,"indexConfiguration")}function Em(n){return ei(n,"indexState")}const bm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:h},(S,k,V)=>(m++,V.delete()));u.push(E.next(()=>{ke(1===m)}));const C=[];for(const S of t.mutations){const k=nb(e,S.key.path,t.batchId);u.push(o.delete(k)),C.push(S.key)}return he.waitFor(u).next(()=>C)}function Im(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class Cm{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){ke(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Cm(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xu(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=th(e),h=Xu(e);return h.add({}).next(m=>{ke("number"==typeof m);const E=new hm(m,t,r,o),C=function(V,G,ie){const Pe=ie.baseMutations.map(kt=>vc(V.Jt,kt)),Le=ie.mutations.map(kt=>vc(V.Jt,kt));return{userId:G,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:Pe,mutations:Le}}(this.M,this.userId,E),S=[];let k=new _n((V,G)=>Ht(V.canonicalString(),G.canonicalString()));for(const V of o){const G=nb(this.userId,V.key.path,m);k=k.add(V.key.path.popLast()),S.push(h.put(C)),S.push(u.put(G,Tv))}return k.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.hn[m]=E.keys()}),he.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return Xu(e).get(t).next(r=>r?(ke(r.userId===this.userId),Qf(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xu(e).Wt({index:"userMutationsIndex",range:o},(h,m,E)=>{m.userId===this.userId&&(ke(m.batchId>=r),u=Qf(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xu(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Qf(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=um(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return th(e).Wt({range:o},(h,m,E)=>{const[C,S,k]=h,V=xo(S);if(C===this.userId&&t.path.isEqual(V))return Xu(e).get(k).next(G=>{if(!G)throw tt();ke(G.userId===this.userId),u.push(Qf(this.M,G))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ht);const o=[];return t.forEach(u=>{const h=um(this.userId,u.path),m=IDBKeyRange.lowerBound(h),E=th(e).Wt({range:m},(C,S,k)=>{const[V,G,ie]=C,Pe=xo(G);V===this.userId&&u.path.isEqual(Pe)?r=r.add(ie):k.done()});o.push(E)}),he.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=um(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new _n(Ht);return th(e).Wt({range:h},(E,C,S)=>{const[k,V,G]=E,ie=xo(V);k===this.userId&&r.isPrefixOf(ie)?ie.length===o&&(m=m.add(G)):S.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Xu(e).get(u).next(h=>{if(null===h)throw tt();ke(h.userId===this.userId),r.push(Qf(this.M,h))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Uv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return th(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const E=xo(u[1]);o.push(E)}else m.done()}).next(()=>{ke(0===o.length)})})}containsKey(e,t){return Bv(e,this.userId,t)}_n(e){return Dm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bv(n,e,t){const r=um(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return th(n).Wt({range:u,jt:!0},(m,E,C)=>{const[S,k,V]=m;S===e&&k===o&&(h=!0),C.done()}).next(()=>h)}function Xu(n){return ei(n,"mutations")}function th(n){return ei(n,"documentMutations")}function Dm(n){return ei(n,"mutationQueues")}class ti{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new ti(0)}static gn(){return new ti(-1)}}class iD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new ti(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>bt.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xf(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(ke(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Xf(e).Wt((h,m)=>{const E=eh(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>he.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Xf(e).Wt((r,o)=>{const u=eh(o);t(u)})}yn(e){return _b(e).get("targetGlobalKey").next(t=>(ke(null!==t),t))}pn(e,t){return _b(e).put("targetGlobalKey",t)}In(e,t){return Xf(e).put(fm(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=dc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Xf(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,E)=>{const C=eh(m);Lf(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ja(e);return t.forEach(h=>{const m=zn(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=ja(e);return he.forEach(t,u=>{const h=zn(u.path);return he.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ja(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ja(e);let u=Yt();return o.Wt({range:r,jt:!0},(h,m,E)=>{const C=xo(h[1]),S=new Be(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=zn(t.path),o=IDBKeyRange.bound([r],[Bd(r)],!1,!0);let u=0;return ja(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],E,C)=>{0!==h&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Xf(e).get(t).next(r=>r?eh(r):null)}}function Xf(n){return ei(n,"targets")}function _b(n){return ei(n,"targetGlobal")}function ja(n){return ei(n,"targetDocuments")}function Dc(n){return jv.apply(this,arguments)}function jv(){return jv=(0,me.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==cb)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),jv.apply(this,arguments)}function $v([n,e],[t,r]){const o=Ht(n,t);return 0===o?Ht(e,r):o}class sD{constructor(e){this.En=e,this.buffer=new _n($v),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$v(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Yu(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Dc(o)}yield t.vn(e)}))}}class vb{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Wi.A);const r=new sD(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(bm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bm):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,u,h,m,E,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),o=this.params.maximumSequenceNumbersToCollect):o=k,h=Date.now(),this.nthSequenceNumber(e,o))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),$u()<=Du.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-S}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${k} documents in `+(C-E)+`ms\nTotal Duration: ${C-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:k})))}}class wb{constructor(e,t){this.db=e,this.garbageCollector=new vb(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return Tm(e,r)}removeReference(e,t,r){return Tm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Tm(e,t)}Mn(e,t){return function(r,o){let u=!1;return Dm(r).zt(h=>Bv(r,h,o).next(m=>(m&&(u=!0),he.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.kn(e,(h,m)=>{if(m<=t){const E=this.Mn(e,h).next(C=>{if(!C)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,bt.min()),ja(e).delete([0,zn(h.path)])))});o.push(E)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Tm(e,t)}kn(e,t){const r=ja(e);let o,u=Wi.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:E,sequenceNumber:C})=>{0===h?(u!==Wi.A&&t(new Be(xo(o)),u),u=C,o=E):u=Wi.A}).next(()=>{u!==Wi.A&&t(new Be(xo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tm(n,e){return ja(n).put((r=n.currentSequenceNumber,{targetId:0,path:zn(e.path),sequenceNumber:r}));var r}class Eb{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bb{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return el(e).put(r)}removeEntry(e,t,r){return el(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Ov(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=pn.newInvalidDocument(t);return el(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ep(t))},(o,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return el(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ep(t))},(o,u)=>{r={document:this.Fn(t,u),size:Im(u)}}).next(()=>r)}getEntries(e,t){let r=eo();return this.Bn(e,t,(o,u)=>{const h=this.Fn(o,u);r=r.insert(o,h)}).next(()=>r)}Ln(e,t){let r=eo(),o=new Tn(Be.comparator);return this.Bn(e,t,(u,h)=>{const m=this.Fn(u,h);r=r.insert(u,m),o=o.insert(u,Im(h))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let o=new _n(qv);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(ep(o.first()),ep(o.last())),h=o.getIterator();let m=h.getNext();return el(e).Wt({index:"documentKeyIndex",range:u},(E,C,S)=>{const k=Be.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&qv(m,k)<0;)r(m,null),m=h.getNext();m&&m.isEqual(k)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?S.Ut(ep(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Ov(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return el(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=eo();for(const E of h){const C=this.Fn(Be.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=eo();const h=Gv(t,r),m=Gv(t,Va.max());return el(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(E,C,S)=>{const k=this.Fn(Be.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new Hv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Am(e).get("remoteDocumentGlobalKey").next(t=>(ke(!!t),t))}On(e,t){return Am(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function RA(n,e){let t;if(e.document)t=QE(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=ua(e.noDocument.readTime);t=pn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Be.fromSegments(e.unknownDocument.path),o=ua(e.unknownDocument.version);t=pn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Jn(r[0],r[1]);return bt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return pn.newInvalidDocument(e)}}class Hv extends Eb{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Ku(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new _n((u,h)=>Ht(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const E=XC(this.qn.M,h);o=o.add(u.path.popLast()),r+=Im(E)-m.size,t.push(this.qn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=XC(this.qn.M,h.convertToNoDocument(bt.min()));t.push(this.qn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function Am(n){return ei(n,"remoteDocumentGlobal")}function el(n){return ei(n,"remoteDocumentsV14")}function ep(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gv(n,e){const t=e.documentKey.path.toArray();return[n,Ov(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qv(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Be.comparator(n,e)}class oD{constructor(e){this.M=e}kt(e,t,r,o){const u=new dm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dv,{unique:!0}),m.createObjectStore("documentMutations"),Ib(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Ib(e)),h=h.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Dv,{unique:!0});const S=E.store("mutations"),k=C.map(V=>S.put(V));return he.waitFor(k)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Kn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&o>=7&&(h=h.next(()=>this.jn(u))),r<8&&o>=8&&(h=h.next(()=>this.Wn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.zn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:Sv});E.createIndex("collectionPathOverlayIndex",xv,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",kA,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:rb});E.createIndex("documentKeyIndex",ib),E.createIndex("collectionGroupIndex",lm)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ob}).createIndex("sequenceNumberIndex",cm,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:ab}).createIndex("documentKeyIndex",YC,{unique:!1})}(e)})),h}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Im(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>he.forEach(m,E=>{ke(E.userId===u.userId);const C=Qf(this.M,E);return Uv(e,u.userId,C).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const E=new Zt(h),C=[0,zn(E)];u.push(t.get(C).next(S=>S?he.resolve():t.put({targetId:0,path:zn(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:KC});const r=t.store("collectionParents"),o=new Jf,u=h=>{if(o.add(h)){const m=h.lastSegment(),E=h.popLast();return r.put({collectionId:m,parent:zn(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const E=new Zt(h);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,E],C)=>{const S=xo(m);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=eh(o),h=fm(this.M,u);return t.put(h)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),E=(C=h,C.document?new Be(Zt.fromString(C.document.name).popFirst(5)):C.noDocument?Be.fromSegments(C.noDocument.path):C.unknownDocument?Be.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(S))}).next(()=>he.waitFor(o))}}function Ib(n){n.createObjectStore("targetDocuments",{keyPath:MA}).createIndex("documentTargetsIndex",sb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Av,{unique:!0}),n.createObjectStore("targetGlobal")}const Cb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Db{constructor(e,t,r,o,u,h,m,E,C,S,k=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=h,this.document=m,this.Yn=C,this.Xn=S,this.Zn=k,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=V=>Promise.resolve(),!Db.vt())throw new De(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wb(this,o),this.cs=t+"main",this.M=new JC(E),this.hs=new Mo(this.cs,this.Zn,new oD(this.M)),this.ls=new iD(this.referenceDelegate,this.M),this.fs=new bb(this.M),this.ds=new Pv,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&Dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,Cb);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Wi(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Yu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return nh(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return Sm(e).delete(this.clientId)}Vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ei(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ss(u,18e5),m=u.filter(E=>-1===h.indexOf(E));return he.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):nh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,Cb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sm(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new fb(t,Wi.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Sm(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Cm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new ko(e)}getDocumentOverlayCache(e){return mm.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.Zn)?lb:13===h?Mv:12===h?QC:11===h?ub:void tt();var h;let m;return this.hs.runTransaction(e,o,u,E=>(m=new fb(E,this.ts?this.ts.next():Wi.A),"readwrite-primary"===t?this.Ts(m).next(C=>!!C||this.Es(m)).next(C=>{if(!C)throw Dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new De(le.FAILED_PRECONDITION,cb);return r(m)}).next(C=>this.Rs(m).next(()=>C)):this.Fs(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}Fs(e){return nh(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(le.FAILED_PRECONDITION,Cb)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nh(e).put("owner",t)}static vt(){return Mo.vt()}As(e){const t=nh(e);return t.get("owner").next(r=>this.bs(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,$t.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Dr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function nh(n){return ei(n,"owner")}function Sm(n){return ei(n,"clientMetadata")}function Zv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class aD{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):Qg(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new Be(t)).next(r=>{let o=wv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let u=wv();return this.indexManager.getCollectionParents(e,o).next(h=>he.forEach(h,m=>{const E=(C=t,S=m.child(o),new Ua(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.Ws(e,E,r).next(C=>{C.forEach((S,k)=>{u=u.insert(S,k)})})}).next(()=>u))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const E=m.key;let C=o.get(E);null==C&&(C=pn.newInvalidDocument(E),o=o.insert(E,C)),em(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,h)=>{dv(t,h)||(o=o.remove(u))}),o))}}class Tb{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=Yt(),o=Yt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Tb(e,t.fromCache,r,o)}}class uD{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(bt.min())?this.Zs(e,t):this.Xs.qs(e,o).next(u=>{const h=this.ti(t,u);return(Vf(t)||Kg(t))&&this.ei(t.limitType,h,o,r)?this.Zs(e,t):($u()<=Du.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fc(t)),this.Xs.Ks(e,t,TE(r,-1)).next(m=>(h.forEach(E=>{m=m.insert(E.key,E)}),m)))});var u}ti(e,t){let r=new _n(hv(e));return t.forEach((o,u)=>{dv(e,u)&&(r=r.add(u))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Zs(e,t){return $u()<=Du.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",fc(t)),this.Xs.Ks(e,t,Va.min())}}class LA{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new Tn(Ht),this.ii=new Ku(u=>dc(u),Lf),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new aD(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function lD(n,e,t,r){return new LA(n,e,t,r)}function cD(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(u=>(o=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let E=Yt();for(const C of o){h.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}for(const C of u){m.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}return t.ai.qs(r,E).next(C=>({ci:C,removedBatchIds:h,addedBatchIds:m}))})})}),zv.apply(this,arguments)}function xm(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(h,m,E,C){const S=E.batch,k=S.keys();let V=he.resolve();return k.forEach(G=>{V=V.next(()=>C.getEntry(m,G)).next(ie=>{const Pe=E.docVersions.get(G);ke(null!==Pe),ie.version.compareTo(Pe)<0&&(S.applyToRemoteDocument(ie,E),ie.isValidDocument()&&(ie.setReadTime(E.commitVersion),C.addEntry(ie)))})}),V.next(()=>h.$s.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function Ab(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function dD(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((C,S)=>{const k=o.get(S);if(!k)return;m.push(t.ls.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,C.addedDocuments,S)));let V=k.withSequenceNumber(u.currentSequenceNumber);var G,ie,Pe;e.targetMismatches.has(S)?V=V.withResumeToken(Tr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),o=o.insert(S,V),ie=V,Pe=C,(0===(G=k).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(u,V))});let E=eo();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(Wv(u,h,e.documentUpdates).next(C=>{E=C})),!r.isEqual(bt.min())){const C=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>h.apply(u)).next(()=>t.ai.Gs(u,E)).next(()=>E)}).then(u=>(t.si=o,u))}function Wv(n,e,t){let r=Yt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=eo();return t.forEach((h,m)=>{const E=o.get(h);m.isNoDocument()&&m.version.isEqual(bt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",m.version)}),u})}function Tc(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Ac(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):t.ls.allocateTargetId(r).next(h=>(o=new Ec(e,h,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function tl(n,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,me.Z)(function*(n,e,t){const r=qe(n),o=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Yu(h))throw h;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),tp.apply(this,arguments)}function Mm(n,e,t){const r=qe(n);let o=bt.min(),u=Yt();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,E,C){const S=qe(m),k=S.ii.get(C);return void 0!==k?he.resolve(S.si.get(k)):S.ls.getTargetData(E,C)}(r,h,Xs(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(h,m.targetId).next(E=>{u=E})}).next(()=>r.ni.Ks(h,e,t?o:bt.min(),t?u:Yt())).next(m=>(np(r,SC(e),m),{documents:m,hi:u})))}function km(n,e){const t=qe(n),r=qe(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function Rm(n,e){const t=qe(n),r=t.ri.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,TE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(np(t,e,o),o))}function np(n,e,t){let r=bt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function Sb(){return Sb=(0,me.Z)(function*(n,e,t,r){const o=qe(n);let u=Yt(),h=eo();for(const C of t){const S=e.li(C.metadata.name);C.document&&(u=u.add(S));const k=e.fi(C);k.setReadTime(e.di(C.metadata.readTime)),h=h.insert(S,k)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),E=yield Ac(o,(C=r,Xs(Zd(Zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Wv(C,m,h).next(S=>(m.apply(C),S)).next(S=>o.ls.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.ls.addMatchingKeys(C,u,E.targetId)).next(()=>o.ai.Gs(C,S)).next(()=>S)))}),Sb.apply(this,arguments)}function UA(n,e){return xb.apply(this,arguments)}function xb(){return xb=(0,me.Z)(function*(n,e,t=Yt()){const r=yield Ac(n,Xs(pm(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Lr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.ds.saveNamedQuery(u,e);const m=r.withResumeToken(Tr.EMPTY_BYTE_STRING,h);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(u,m).next(()=>o.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.ls.addMatchingKeys(u,t,r.targetId)).next(()=>o.ds.saveNamedQuery(u,e))})}),xb.apply(this,arguments)}class Mb{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Lr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:pm(r.bundledQuery),readTime:Lr(r.readTime)}),he.resolve();var r}}class hD{constructor(){this.overlays=new Tn(Be.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=Zf(),u=t.length+1,h=new Be(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Tn((C,S)=>C-S);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=Zf(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const m=Zf(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,S)=>m.set(C,S)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new gb(t,r));let u=this.mi.get(t);void 0===u&&(u=Yt(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class Kv{constructor(){this.gi=new _n(Vr.yi),this.pi=new _n(Vr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Vr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Vr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Be(new Zt([])),r=new Vr(t,e),o=new Vr(t,e+1),u=[];return this.pi.forEachInRange([r,o],h=>{this.Ei(h),u.push(h.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Be(new Zt([])),r=new Vr(t,e),o=new Vr(t,e+1);let u=Yt();return this.pi.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Vr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Be.comparator(e.key,t.key)||Ht(e.Vi,t.Vi)}static Ii(e,t){return Ht(e.Vi,t.Vi)||Be.comparator(e.key,t.key)}}class fD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new _n(Vr.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const u=this.vi;this.vi++;const h=new hm(u,t,r,o);this.$s.push(h);for(const m of o)this.Si=this.Si.add(new Vr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(h)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),u=o<0?0:o;return he.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vr(t,0),o=new Vr(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,o],h=>{const m=this.Di(h.Vi);u.push(m)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Ht);return t.forEach(o=>{const u=new Vr(o,0),h=new Vr(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,h],m=>{r=r.add(m.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const h=new Vr(new Be(u),0);let m=new _n(Ht);return this.Si.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Vi)),!0)},h),he.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ke(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,o=>{const u=new Vr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Vr(t,0),o=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class kb{constructor(e){this.ki=e,this.docs=new Tn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=eo();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():pn.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=eo();const u=new Be(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:E}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||AE(lv(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Rb(this)}getSize(e){return he.resolve(this.size)}}class Rb extends Eb{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Nb{constructor(e){this.persistence=e,this.Oi=new Ku(t=>dc(t),Lf),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Kv,this.targetCount=0,this.Bi=ti.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new ti(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Oi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class pD{constructor(e,t){this.Li={},this.overlays={},this.ts=new Wi(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Nb(this),this.indexManager=new rD,this.fs=new kb(r=>this.referenceDelegate.Ui(r)),this.M=new JC(t),this.ds=new Mb(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new fD(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new gD(this.ts.next());return this.referenceDelegate.qi(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class gD extends kv{constructor(e){super(),this.currentSequenceNumber=e}}class Nm{constructor(e){this.persistence=e,this.Qi=new Kv,this.ji=null}static Wi(e){return new Nm(e)}get zi(){if(this.ji)return this.ji;throw tt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const o=Be.fromPath(r);return this.Hi(e,o).next(u=>{u||t.removeEntry(o,bt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Om(n,e){return`firestore_clients_${n}_${e}`}function mD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pm(n,e){return`firestore_targets_${n}_${e}`}class rh{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new De(o.error.code,o.error.message))),h?new rh(e,t,o.state,u):(Dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new De(r.error.code,r.error.message))),u?new rp(e,r.state,o):(Dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Kd();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=EC(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new Fm(e,u):(Dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ob{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ob(t.clientId,t.onlineState):(Dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Pb{constructor(){this.activeTargetIds=Kd()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fb{constructor(e,t,r,o,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Tn(Ht),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Om(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Pb),this.ar=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const u=e.getItem(Om(e.persistenceKey,o));if(u){const h=Fm.Ji(o,u);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Pm(this.persistenceKey,e));if(r){const o=rp.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pm(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let h=Wi.A;if(null!=u)try{const m=JSON.parse(u);ke("number"==typeof m),h=m}catch(m){Dr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==Wi.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new rh(this.currentUser,e,t,r),u=mD(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=mD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=Pm(this.persistenceKey,e),u=new rp(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Fm.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return rh.Ji(new Vn(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return rp.Ji(o,t)}wr(e){return Ob.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),h=[],m=[];return u.forEach(E=>{o.has(E)||h.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Kd();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Lb{constructor(){this.Fr=new Pb,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Pb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yD{Br(e){}shutdown(){}}class _D{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const BA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jA{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class $A extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const h=this.oo(e,t);Oe("RestConnection","Sending: ",h,r);const m={};return this.uo(m,o,u),this.ao(e,h,m,r).then(E=>(Oe("RestConnection","Received: ",E),E),E=>{throw Vd("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}co(e,t,r,o,u){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ld,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${BA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((u,h)=>{const m=new fE;m.listenOnce(cE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Fg.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Fg.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),h(new De(le.DEADLINE_EXCEEDED,"Request time out"));break;case Fg.HTTP_ERROR:const S=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const k=m.getResponseJson().error;if(k&&k.status&&k.message){const V=function(G){const ie=G.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ie)>=0?ie:le.UNKNOWN}(k.status);h(new De(V,k.message))}else h(new De(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new De(le.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=uE(),h=lE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new hE({})),this.uo(m.initMessageHeaders,t,r),(0,$t.uI)()||(0,$t.b$)()||(0,$t.d)()||(0,$t.w1)()||(0,$t.Mn)()||(0,$t.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Oe("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let S=!1,k=!1;const V=new jA({jr:ie=>{k?Oe("Connection","Not sending because WebChannel is closed:",ie):(S||(Oe("Connection","Opening WebChannel transport."),C.open(),S=!0),Oe("Connection","WebChannel sending:",ie),C.send(ie))},Wr:()=>C.close()}),G=(ie,Pe,Le)=>{ie.listen(Pe,kt=>{try{Le(kt)}catch(at){setTimeout(()=>{throw at},0)}})};return G(C,kf.EventType.OPEN,()=>{k||Oe("Connection","WebChannel transport opened.")}),G(C,kf.EventType.CLOSE,()=>{k||(k=!0,Oe("Connection","WebChannel transport closed"),V.eo())}),G(C,kf.EventType.ERROR,ie=>{k||(k=!0,Vd("Connection","WebChannel transport errored:",ie),V.eo(new De(le.UNAVAILABLE,"The operation could not be completed")))}),G(C,kf.EventType.MESSAGE,ie=>{var Pe;if(!k){const Le=ie.data[0];ke(!!Le);const kt=Le,at=kt.error||(null===(Pe=kt[0])||void 0===Pe?void 0:Pe.error);if(at){Oe("Connection","WebChannel received error:",at);const sn=at.status;let _t=function(Je){const Pt=dr[Je];if(void 0!==Pt)return $E(Pt)}(sn),Rt=at.message;void 0===_t&&(_t=le.INTERNAL,Rt="Unknown error status: "+sn+" with message "+at.message),k=!0,V.eo(new De(_t,Rt)),C.close()}else Oe("Connection","WebChannel received:",Le),V.no(Le)}}),G(h,dE.STAT_EVENT,ie=>{ie.stat===nv.PROXY?Oe("Connection","Detected buffering proxy"):ie.stat===nv.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.Zr()},0),V}}function vD(){return"undefined"!=typeof window?window:null}function Lm(){return"undefined"!=typeof document?document:null}function Vm(n){return new zE(n,!0)}class Vb{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class wD{constructor(e,t,r,o,u,h,m,E){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Vb(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,me.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,me.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new De(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,me.Z)(function*(){e.state=0,e.start()}))}qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HA extends wD{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function JE(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:tt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(ke(void 0===C||"string"==typeof C),Tr.fromBase64String(C||"")):(ke(void 0===C||C instanceof Uint8Array),Tr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(E){const C=void 0===E.code?le.UNKNOWN:$E(E.code);return new De(C,E.message||"")}(h);t=new qE(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=to(n,r.document.name),u=Lr(r.document.updateTime),h=new Jr({mapValue:{fields:r.document.fields}}),m=pn.newFoundDocument(o,u,h);t=new mc(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=to(n,r.document),u=r.readTime?Lr(r.readTime):bt.min(),h=pn.newNoDocument(o,u);t=new mc([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=to(n,r.document);t=new mc([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new OC(r.count||0);t=new Yd(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return bt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?Lr(u.readTime):bt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=_c(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=qg(m)?{documents:bv(o,m)}:{query:Iv(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=rm(o,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(h.readTime=Qd(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function eb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=_c(this.M),t.removeTarget=e,this.Oo(t)}}class i extends wD{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function HC(n,e){return n&&n.length>0?(ke(void 0!==e),n.map(t=>function(r,o){let u=Lr(r.updateTime?r.updateTime:o);return u.isEqual(bt.min())&&(u=Lr(o)),new kC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.Jo(r,t)}return ke(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=_c(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>vc(this.M,r))};this.Oo(t)}}class s extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(le.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(le.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class a{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Dr(t),this.su=!1):Oe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class l{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,me.Z)(function*(){var E;pe(h)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,me.Z)(function*(C){const S=qe(C);S.lu.add(4),yield _(S),S._u.set("Unknown"),S.lu.delete(4),yield d(S)}),function(C){return E.apply(this,arguments)})(h))}))}),this._u=new a(r,o)}}function d(n){return p.apply(this,arguments)}function p(){return p=(0,me.Z)(function*(n){if(pe(n))for(const e of n.fu)yield e(!0)}),p.apply(this,arguments)}function _(n){return w.apply(this,arguments)}function w(){return w=(0,me.Z)(function*(n){for(const e of n.fu)yield e(!1)}),w.apply(this,arguments)}function b(n,e){const t=qe(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),K(t)?U(t):$m(t).Co()&&x(t,e))}function T(n,e){const t=qe(n),r=$m(t);t.hu.delete(e),r.Co()&&P(t,e),0===t.hu.size&&(r.Co()?r.ko():pe(t)&&t._u.set("Unknown"))}function x(n,e){n.wu.Z(e.targetId),$m(n).Qo(e)}function P(n,e){n.wu.Z(e),$m(n).jo(e)}function U(n){n.wu=new VC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),$m(n).start(),n._u.iu()}function K(n){return pe(n)&&!$m(n).Do()&&n.hu.size>0}function pe(n){return 0===qe(n).lu.size}function Fe(n){n.wu=void 0}function $e(n){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,me.Z)(function*(n){n.hu.forEach((e,t)=>{x(n,e)})}),Qe.apply(this,arguments)}function Ie(n,e){return ct.apply(this,arguments)}function ct(){return ct=(0,me.Z)(function*(n,e){Fe(n),K(n)?(n._u.uu(e),U(n)):n._u.set("Unknown")}),ct.apply(this,arguments)}function Gt(n,e,t){return rn.apply(this,arguments)}function rn(){return rn=(0,me.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof qE&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yi(n,r)}else if(e instanceof mc?n.wu.ut(e):e instanceof Yd?n.wu._t(e):n.wu.ht(e),!t.isEqual(bt.min()))try{const r=yield Ab(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.wu.yt(u);return h.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.hu.get(E);C&&o.hu.set(E,C.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const E=o.hu.get(m);if(!E)return;o.hu.set(m,E.withResumeToken(Tr.EMPTY_BYTE_STRING,E.snapshotVersion)),P(o,m);const C=new Ec(E.target,m,1,E.sequenceNumber);x(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield yi(n,r)}var r}),rn.apply(this,arguments)}function yi(n,e,t){return $a.apply(this,arguments)}function $a(){return $a=(0,me.Z)(function*(n,e,t){if(!Yu(e))throw e;n.lu.add(1),yield _(n),n._u.set("Offline"),t||(t=()=>Ab(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield d(n)}))}),$a.apply(this,arguments)}function Um(n,e){return e().catch(t=>yi(n,t,e))}function nl(n){return ip.apply(this,arguments)}function ip(){return ip=(0,me.Z)(function*(n){const e=qe(n),t=ih(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;Yv(e);)try{const o=yield Tc(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,Qv(e,o)}catch(o){yield yi(e,o)}Bm(e)&&jm(e)}),ip.apply(this,arguments)}function Yv(n){return pe(n)&&n.cu.length<10}function Qv(n,e){n.cu.push(e);const t=ih(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Bm(n){return pe(n)&&!ih(n).Do()&&n.cu.length>0}function jm(n){ih(n).start()}function Jv(n){return sp.apply(this,arguments)}function sp(){return sp=(0,me.Z)(function*(n){ih(n).Xo()}),sp.apply(this,arguments)}function bM(n){return ED.apply(this,arguments)}function ED(){return ED=(0,me.Z)(function*(n){const e=ih(n);for(const t of n.cu)e.Ho(t.mutations)}),ED.apply(this,arguments)}function IM(n,e,t){return bD.apply(this,arguments)}function bD(){return bD=(0,me.Z)(function*(n,e,t){const r=n.cu.shift(),o=pb.from(r,e,t);yield Um(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield nl(n)}),bD.apply(this,arguments)}function CM(n,e){return ID.apply(this,arguments)}function ID(){return ID=(0,me.Z)(function*(n,e){var t;e&&ih(n).zo&&(yield(t=(0,me.Z)(function*(r,o){if(jE(u=o.code)&&u!==le.ABORTED){const h=r.cu.shift();ih(r).No(),yield Um(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield nl(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Bm(n)&&jm(n)}),ID.apply(this,arguments)}function GA(n,e){return CD.apply(this,arguments)}function CD(){return CD=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=pe(t);t.lu.add(3),yield _(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield d(t)}),CD.apply(this,arguments)}function DD(n,e){return TD.apply(this,arguments)}function TD(){return TD=(0,me.Z)(function*(n,e){const t=qe(n);e?(t.lu.delete(2),yield d(t)):e||(t.lu.add(2),yield _(t),t._u.set("Unknown"))}),TD.apply(this,arguments)}function $m(n){return n.mu||(n.mu=function(e,t,r){const o=qe(e);return o.tu(),new HA(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:$e.bind(null,n),Jr:Ie.bind(null,n),Ko:Gt.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.mu.No(),K(n)?U(n):n._u.set("Unknown")):(yield n.mu.stop(),Fe(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function ih(n){return n.gu||(n.gu=function(e,t,r){const o=qe(e);return o.tu(),new i(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:Jv.bind(null,n),Jr:CM.bind(null,n),Yo:bM.bind(null,n),Jo:IM.bind(null,n)}),n.fu.push(function(){var e=(0,me.Z)(function*(t){t?(n.gu.No(),yield nl(n)):(yield n.gu.stop(),n.cu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class AD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new AD(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(Dr("AsyncQueue",`${e}: ${n}`),Yu(n))return new De(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Gm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=wv(),this.sortedSet=new Tn(this.comparator)}static emptySet(e){return new Gm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Gm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class qA{constructor(){this.yu=new Tn(Be.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class qm{constructor(e,t,r,o,u,h,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new qm(e,t,Gm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class DM{constructor(){this.Iu=void 0,this.listeners=[]}}class TM{constructor(){this.queries=new Ku(e=>hc(e),jf),this.onlineState="Unknown",this.Tu=new Set}}function SD(n,e){return xD.apply(this,arguments)}function xD(){return xD=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new DM),o)try{u.Iu=yield t.onListen(r)}catch(h){const m=Hm(h,`Initialization of query '${fc(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&RD(t)}),xD.apply(this,arguments)}function MD(n,e){return kD.apply(this,arguments)}function kD(){return kD=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),kD.apply(this,arguments)}function AM(n,e){const t=qe(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Au(o)&&(r=!0);h.Iu=o}}r&&RD(t)}function SM(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function RD(n){n.Tu.forEach(e=>{e.next()})}class ND{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class xM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class ZA{constructor(e){this.M=e}li(e){return to(this.M,e)}fi(e){return e.metadata.exists?QE(this.M,e.document,!1):pn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Lr(e)}}class MM{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new ZA(this.M);for(const o of e)if(o.metadata.queries){const u=r.li(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||Yt()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function VA(n,e,t,r){return Sb.apply(this,arguments)}(e.localStore,new ZA(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield UA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function zA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WA{constructor(e){this.key=e}}class KA{constructor(e){this.key=e}}class YA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Yt(),this.mutatedKeys=Yt(),this.Lu=hv(e),this.Uu=new Gm(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new qA,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const E=Vf(this.query)&&o.size===this.query.limit?o.last():null,C=Kg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,k)=>{const V=o.get(S),G=dv(this.query,k)?k:null,ie=!!V&&this.mutatedKeys.has(V.key),Pe=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Le=!1;V&&G?V.data.isEqual(G.data)?ie!==Pe&&(r.track({type:3,doc:G}),Le=!0):this.Qu(V,G)||(r.track({type:2,doc:G}),Le=!0,(E&&this.Lu(G,E)>0||C&&this.Lu(G,C)<0)&&(m=!0)):!V&&G?(r.track({type:0,doc:G}),Le=!0):V&&!G&&(r.track({type:1,doc:V}),Le=!0,(E||C)&&(m=!0)),Le&&(G?(h=h.add(G),u=Pe?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))}),Vf(this.query)||Kg(this.query))for(;h.size>this.query.limit;){const S=Vf(this.query)?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:h,Ku:r,ei:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((C,S)=>function(k,V){const G=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return G(k)-G(V)}(C.type,S.type)||this.Lu(C.doc,S.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,E=m!==this.$u;return this.$u=m,0!==u.length||E?{snapshot:new qm(this.query,e.Uu,o,u,e.mutatedKeys,0===m,E,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new qA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Yt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new KA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new WA(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=Yt();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return qm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class kM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class RM{constructor(e){this.key=e,this.Xu=!1}}class NM{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Zu={},this.ta=new Ku(m=>hc(m),jf),this.ea=new Map,this.na=new Set,this.sa=new Tn(Be.comparator),this.ia=new Map,this.ra=new Kv,this.oa={},this.ua=new Map,this.aa=ti.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function OM(n,e){return OD.apply(this,arguments)}function OD(){return OD=(0,me.Z)(function*(n,e){const t=rT(n);let r,o;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const h=yield Ac(t.localStore,Xs(e));t.isPrimaryClient&&b(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield PD(t,e,r,"current"===m)}return o}),OD.apply(this,arguments)}function PD(n,e,t,r){return FD.apply(this,arguments)}function FD(){return FD=(0,me.Z)(function*(n,e,t,r){n.ha=(S,k,V)=>{return(G=(0,me.Z)(function*(ie,Pe,Le,kt){let at=Pe.view.Gu(Le);at.ei&&(at=yield Mm(ie.localStore,Pe.query,!1).then(({documents:Rt})=>Pe.view.Gu(Rt,at)));const sn=kt&&kt.targetChanges.get(Pe.targetId),_t=Pe.view.applyChanges(at,ie.isPrimaryClient,sn);return ZD(ie,Pe.targetId,_t.zu),_t.snapshot}),function(ie,Pe,Le,kt){return G.apply(this,arguments)})(n,S,k,V);var G};const o=yield Mm(n.localStore,e,!0),u=new YA(e,o.hi),h=u.Gu(o.documents),m=zf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(h,n.isPrimaryClient,m);ZD(n,t,E.zu);const C=new kM(e,t,u);return n.ta.set(e,C),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),E.snapshot}),FD.apply(this,arguments)}function PM(n,e){return LD.apply(this,arguments)}function LD(){return LD=(0,me.Z)(function*(n,e){const t=qe(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(u=>!jf(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield tl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),T(t.remoteStore,r.targetId),Zm(t,r.targetId)}).catch(Dc))):(Zm(t,r.targetId),yield tl(t.localStore,r.targetId,!0))}),LD.apply(this,arguments)}function VD(){return VD=(0,me.Z)(function*(n,e,t){const r=iT(n);try{const o=yield function(u,h){const m=qe(u),E=Jn.now(),C=h.reduce((k,V)=>k.add(V.key),Yt());let S;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>m.ai.qs(k,C).next(V=>{S=V;const G=[];for(const ie of h){const Pe=RC(ie,S.get(ie.key));null!=Pe&&G.push(new Wu(ie.key,Pe,DE(Pe.value.mapValue),Dn.exists(!0)))}return m.$s.addMutationBatch(k,E,G,h)})).then(k=>(k.applyToLocalDocumentSet(S),{batchId:k.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let E=u.oa[u.currentUser.toKey()];E||(E=new Tn(Ht)),E=E.insert(h,m),u.oa[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Sc(r,o.changes),yield nl(r.remoteStore)}catch(o){const u=Hm(o,"Failed to persist write");t.reject(u)}}),VD.apply(this,arguments)}function QA(n,e){return UD.apply(this,arguments)}function UD(){return UD=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield dD(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.ia.get(u);h&&(ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Xu=!0:o.modifiedDocuments.size>0?ke(h.Xu):o.removedDocuments.size>0&&(ke(h.Xu),h.Xu=!1))}),yield Sc(t,r,e)}catch(r){yield Dc(r)}}),UD.apply(this,arguments)}function JA(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((u,h)=>{const m=h.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=qe(u);m.onlineState=h;let E=!1;m.queries.forEach((C,S)=>{for(const k of S.listeners)k.Eu(h)&&(E=!0)}),E&&RD(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LM(n,e,t){return BD.apply(this,arguments)}function BD(){return BD=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),u=o&&o.key;if(u){let h=new Tn(Be.comparator);h=h.insert(u,pn.newNoDocument(u,bt.min()));const m=Yt().add(u),E=new Ki(bt.min(),new Map,new _n(Ht),h,m);yield QA(r,E),r.sa=r.sa.remove(u),r.ia.delete(e),zD(r)}else yield tl(r.localStore,e,!1).then(()=>Zm(r,e,t)).catch(Dc)}),BD.apply(this,arguments)}function VM(n,e){return jD.apply(this,arguments)}function jD(){return jD=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield xm(t.localStore,e);qD(t,r,null),GD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Sc(t,o)}catch(o){yield Dc(o)}}),jD.apply(this,arguments)}function UM(n,e,t){return $D.apply(this,arguments)}function $D(){return $D=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,h){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.$s.lookupMutationBatch(E,h).next(S=>(ke(null!==S),C=S.keys(),m.$s.removeMutationBatch(E,S))).next(()=>m.$s.performConsistencyCheck(E)).next(()=>m.ai.qs(E,C))})}(r.localStore,e);qD(r,e,t),GD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Sc(r,o)}catch(o){yield Dc(o)}}),$D.apply(this,arguments)}function HD(){return HD=(0,me.Z)(function*(n,e){const t=qe(n);pe(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=qe(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=Hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),HD.apply(this,arguments)}function GD(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function qD(n,e,t){const r=qe(n);let o=r.oa[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function Zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||XA(n,r)})}function XA(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(T(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),zD(n))}function ZD(n,e,t){for(const r of t)r instanceof WA?(n.ra.addReference(r.key,e),jM(n,r)):r instanceof KA?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||XA(n,r.key)):tt()}function jM(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.na.add(r),zD(n))}function zD(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Be(Zt.fromString(e)),r=n.aa.next();n.ia.set(r,new RM(t)),n.sa=n.sa.insert(t,r),b(n.remoteStore,new Ec(Xs(Zd(t.path)),r,2,Wi.A))}}function Sc(n,e,t){return WD.apply(this,arguments)}function WD(){return WD=(0,me.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],h=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,E)=>{h.push(r.ha(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=Tb.Js(E.targetId,C);u.push(S)}}))}),yield Promise.all(h),r.Zu.Ko(o),yield(m=(0,me.Z)(function*(E,C){const S=qe(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>he.forEach(C,V=>he.forEach(V.zs,G=>S.persistence.referenceDelegate.addReference(k,V.targetId,G)).next(()=>he.forEach(V.Hs,G=>S.persistence.referenceDelegate.removeReference(k,V.targetId,G)))))}catch(k){if(!Yu(k))throw k;Oe("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const V=k.targetId;if(!k.fromCache){const G=S.si.get(V),Pe=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);S.si=S.si.insert(V,Pe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),WD.apply(this,arguments)}function $M(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield cD(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(h=>{h.forEach(m=>{m.reject(new De(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Sc(t,r.ci)}var o}),KD.apply(this,arguments)}function HM(n,e){const t=qe(n),r=t.ia.get(e);if(r&&r.Xu)return Yt().add(r.key);{let o=Yt();const u=t.ea.get(e);if(!u)return o;for(const h of u){const m=t.ta.get(h);o=o.unionWith(m.view.qu)}return o}}function GM(n,e){return YD.apply(this,arguments)}function YD(){return YD=(0,me.Z)(function*(n,e){const t=qe(n),r=yield Mm(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&ZD(t,e.targetId,o.zu),o}),YD.apply(this,arguments)}function qM(n,e){return QD.apply(this,arguments)}function QD(){return QD=(0,me.Z)(function*(n,e){const t=qe(n);return Rm(t.localStore,e).then(r=>Sc(t,r))}),QD.apply(this,arguments)}function ZM(n,e,t,r){return JD.apply(this,arguments)}function JD(){return JD=(0,me.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(h,m){const E=qe(h),C=qe(E.$s);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.ln(S,m).next(k=>k?E.ai.qs(S,k):he.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield nl(o.remoteStore):"acknowledged"===t||"rejected"===t?(qD(o,e,r||null),GD(o,e),m=e,qe(qe(o.localStore).$s).dn(m)):tt(),yield Sc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),JD.apply(this,arguments)}function XD(){return XD=(0,me.Z)(function*(n,e){const t=qe(n);if(rT(t),iT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield eS(t,r.toArray());t.ca=!0,yield DD(t.remoteStore,!0);for(const u of o)b(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Zm(t,h),tl(t.localStore,h,!0))),T(t.remoteStore,h)}),yield o,yield eS(t,r),function(u){const h=qe(u);h.ia.forEach((m,E)=>{T(h.remoteStore,E)}),h.ra.bi(),h.ia=new Map,h.sa=new Tn(Be.comparator)}(t),t.ca=!1,yield DD(t.remoteStore,!1)}}),XD.apply(this,arguments)}function eS(n,e,t){return eT.apply(this,arguments)}function eT(){return eT=(0,me.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const h of e){let m;const E=r.ea.get(h);if(E&&0!==E.length){m=yield Ac(r.localStore,Xs(E[0]));for(const C of E){const S=r.ta.get(C),k=yield GM(r,S);k.snapshot&&u.push(k.snapshot)}}else{const C=yield km(r.localStore,h);m=yield Ac(r.localStore,C),yield PD(r,tS(C),h,!1)}o.push(m)}return r.Zu.Ko(u),o}),eT.apply(this,arguments)}function tS(n){return Wg(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WM(n){const e=qe(n);return qe(qe(e.localStore).persistence).Os()}function KM(n,e,t,r){return tT.apply(this,arguments)}function tT(){return tT=(0,me.Z)(function*(n,e,t,r){const o=qe(n);if(o.ca)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield Rm(o.localStore,SC(u[0])),m=Ki.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Sc(o,h,m);break}case"rejected":yield tl(o.localStore,e,!0),Zm(o,e,r);break;default:tt()}}),tT.apply(this,arguments)}function YM(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,me.Z)(function*(n,e,t){const r=rT(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield km(r.localStore,o),h=yield Ac(r.localStore,u);yield PD(r,tS(u),h.targetId,!1),b(r.remoteStore,h)}for(const o of t)r.ea.has(o)&&(yield tl(r.localStore,o,!1).then(()=>{T(r.remoteStore,o),Zm(r,o)}).catch(Dc))}}),nT.apply(this,arguments)}function rT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LM.bind(null,e),e.Zu.Ko=AM.bind(null,e.eventManager),e.Zu.la=SM.bind(null,e.eventManager),e}function iT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UM.bind(null,e),e}class nS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=Vm(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return lD(this.persistence,new uD,e.initialUser,this.M)}_a(e){return new pD(Nm.Wi,this.M)}da(e){return new Lb}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class rS extends nS{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield iT(r.ga.syncEngine),yield nl(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return lD(this.persistence,new uD,e.initialUser,this.M)}wa(e){return new FA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Zv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new Db(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vD(),Lm(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Lb}}class JM extends rS{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof Fb&&(r.sharedClientState.syncEngine={kr:ZM.bind(null,o),Mr:KM.bind(null,o),Or:YM.bind(null,o),Os:WM.bind(null,o),Nr:qM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,me.Z)(function*(h){yield function zM(n,e){return XD.apply(this,arguments)}(r.ga.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}da(e){const t=vD();if(!Fb.vt(t))throw new De(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Zv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class sT{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>JA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=$M.bind(null,r.syncEngine),yield DD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new TM}createDatastore(e){const t=Vm(e.databaseInfo.databaseId),r=new $A(e.databaseInfo);return new s(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>JA(this.syncEngine,m,0),h=_D.vt()?new _D:new yD,new l(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,E,C){const S=new NM(r,o,u,h,m,E);return C&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);Oe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield _(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function iS(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ub{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class XM{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Pr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,me.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new xM(JSON.parse(u),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,me.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class e1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,h){const m=qe(u),E=_c(m.M)+"/documents",C={documents:h.map(G=>yc(m.M,G))},S=yield m.co("BatchGetDocuments",E,C),k=new Map;S.forEach(G=>{const ie=function $C(n,e){return"found"in e?function(t,r){ke(!!r.found);const o=to(t,r.found.name),u=Lr(r.found.updateTime),h=new Jr({mapValue:{fields:r.found.fields}});return pn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){ke(!!r.missing),ke(!!r.readTime);const o=to(t,r.missing),u=Lr(r.readTime);return pn.newNoDocument(o,u)}(n,e):tt()}(m.M,G);k.set(ie.key.toString(),ie)});const V=[];return h.forEach(G=>{const ie=k.get(G.toString());ke(!!ie),V.push(ie)}),V}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Be.fromPath(o);e.mutations.push(new _v(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const h=qe(o),m=_c(h.M)+"/documents",E={writes:u.map(C=>vc(h.M,C))};yield h.ro("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Dn.updateTime(t):Dn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new De(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dn.updateTime(t)}return Dn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class t1{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new Vb(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,me.Z)(function*(){const t=new e1(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ca(u)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!$d(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!jE(t)}return!1}}class n1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Vn.UNAUTHENTICATED,this.clientId=_E.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,me.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Hm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function sS(n,e){return oT.apply(this,arguments)}function oT(){return oT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield cD(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),oT.apply(this,arguments)}function oS(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield uT(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>GA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>GA(e.remoteStore,u)),n.onlineComponents=e}),aT.apply(this,arguments)}function uT(n){return lT.apply(this,arguments)}function lT(){return lT=(0,me.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield sS(n,new nS)),n.offlineComponents}),lT.apply(this,arguments)}function Bb(n){return cT.apply(this,arguments)}function cT(){return cT=(0,me.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield oS(n,new sT)),n.onlineComponents}),cT.apply(this,arguments)}function aS(n){return uT(n).then(e=>e.persistence)}function dT(n){return uT(n).then(e=>e.localStore)}function uS(n){return Bb(n).then(e=>e.remoteStore)}function hT(n){return Bb(n).then(e=>e.syncEngine)}function zm(n){return fT.apply(this,arguments)}function fT(){return fT=(0,me.Z)(function*(n){const e=yield Bb(n),t=e.eventManager;return t.onListen=OM.bind(null,e.syncEngine),t.onUnlisten=PM.bind(null,e.syncEngine),t}),fT.apply(this,arguments)}function lS(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,h,m,E){const C=new Ub({next:k=>{u.enqueueAndForget(()=>MD(o,S));const V=k.docs.has(h);!V&&k.fromCache?E.reject(new De(le.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&k.fromCache&&m&&"server"===m.source?E.reject(new De(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new ND(Zd(h.path),C,{includeMetadataChanges:!0,Du:!0});return SD(o,S)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}function cS(n,e,t={}){const r=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,h,m,E){const C=new Ub({next:k=>{u.enqueueAndForget(()=>MD(o,S)),k.fromCache&&"server"===m.source?E.reject(new De(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new ND(h,C,{includeMetadataChanges:!0,Du:!0});return SD(o,S)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}const dS=new Map;function pT(n,e,t){if(!t)throw new De(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hS(n,e,t,r){if(!0===e&&!0===r)throw new De(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fS(n){if(!Be.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pS(n){if(Be.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jb(n);throw new De(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gS(n,e){if(e<=0)throw new De(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mS({}),this._settingsFrozen=!1,e instanceof Gu?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new De(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(o.options.projectId)}(e))}get app(){if(!this._app)throw new De(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Vg;switch(t.type){case"gapi":const r=t.client;return ke(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new gC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new De(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dS.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),dS.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class rl extends Yi{constructor(e,t,r){super(e,t,Zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Be(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function yS(n,e,...t){if(n=(0,$t.m9)(n),pT("collection","path",e),n instanceof Xv){const r=Zt.fromString(e,...t);return pS(r),new rl(n,null,r)}{if(!(n instanceof Bn||n instanceof rl))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return pS(r),new rl(n.firestore,null,r)}}function $b(n,e,...t){if(n=(0,$t.m9)(n),1===arguments.length&&(e=_E.R()),pT("doc","path",e),n instanceof Xv){const r=Zt.fromString(e,...t);return fS(r),new Bn(n,null,new Be(r))}{if(!(n instanceof Bn||n instanceof rl))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return fS(r),new Bn(n.firestore,n instanceof rl?n.converter:null,new Be(r))}}function _S(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),(n instanceof Bn||n instanceof rl)&&(e instanceof Bn||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vS(n,e){return n=(0,$t.m9)(n),e=(0,$t.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&jf(n._query,e._query)&&n.converter===e.converter}class f1{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Vb(this,"async_queue_retry"),this.Ua=()=>{const t=Lm();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Lm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Lm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Pr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,me.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Yu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Dr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=AD.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(o),o}qa(){this.Fa&&tt()}verifyOperationInProgress(){}ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function gT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class p1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wn extends Xv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new f1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wS(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||wS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wC(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new n1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ES(n,e,t){const r=new Pr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield sS(n,t),yield oS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function bS(n){if(n._initialized||n._terminated)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(Tr.fromBase64String(e))}catch(t){throw new De(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class op{constructor(e){this._methodName=e}}class Hb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const C1=/^__.*__$/;class D1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new tm(e,this.data,t,this.fieldTransforms)}}class IS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Gb{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Gb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return zb(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(CS(this.Ya)&&C1.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class T1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Vm(e)}uc(e,t,r,o=!1){return new Gb({Ya:e,methodName:t,oc:r,path:Zn.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function ap(n){const e=n._freezeSettings(),t=Vm(n._databaseId);return new T1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qb(n,e,t,r,o,u={}){const h=n.uc(u.merge||u.mergeFields?2:0,e,t,o);vT("Data must be an object, but it was:",h,r);const m=AS(r,h);let E,C;if(u.merge)E=new sa(h.fieldMask),C=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const k of u.mergeFields){const V=wT(e,k,t);if(!h.contains(V))throw new De(le.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);xS(S,V)||S.push(V)}E=new sa(S),C=h.fieldTransforms.filter(k=>E.covers(k.field))}else E=null,C=h.fieldTransforms;return new D1(new Jr(m),E,C)}class e0 extends op{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}function DS(n,e,t){return new Gb({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class mT extends op{_toFieldTransform(e){return new Xg(e.path,new aa)}isEqual(e){return e instanceof mT}}class A1 extends op{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=DS(this,e,!0),r=this.ac.map(u=>up(u,t)),o=new pc(r);return new Xg(e.path,o)}isEqual(e){return this===e}}class S1 extends op{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=DS(this,e,!0),r=this.ac.map(u=>up(u,t)),o=new zu(r);return new Xg(e.path,o)}isEqual(e){return this===e}}class x1 extends op{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new zd(e.M,LE(e.M,this.cc));return new Xg(e.path,t)}isEqual(e){return this===e}}function yT(n,e,t,r){const o=n.uc(1,e,t);vT("Data must be an object, but it was:",o,r);const u=[],h=Jr.empty();ia(r,(E,C)=>{const S=Zb(e,E,t);C=(0,$t.m9)(C);const k=o.nc(S);if(C instanceof e0)u.push(S);else{const V=up(C,k);null!=V&&(u.push(S),h.set(S,V))}});const m=new sa(u);return new IS(h,m,o.fieldTransforms)}function _T(n,e,t,r,o,u){const h=n.uc(1,e,t),m=[wT(e,r,t)],E=[o];if(u.length%2!=0)throw new De(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(wT(e,u[V])),E.push(u[V+1]);const C=[],S=Jr.empty();for(let V=m.length-1;V>=0;--V)if(!xS(C,m[V])){const G=m[V];let ie=E[V];ie=(0,$t.m9)(ie);const Pe=h.nc(G);if(ie instanceof e0)C.push(G);else{const Le=up(ie,Pe);null!=Le&&(C.push(G),S.set(G,Le))}}const k=new sa(C);return new IS(S,k,h.fieldTransforms)}function TS(n,e,t,r=!1){return up(t,n.uc(r?4:3,e))}function up(n,e){if(SS(n=(0,$t.m9)(n)))return vT("Unsupported field value:",e,n),AS(n,e);if(n instanceof op)return function(t,r){if(!CS(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=up(h,r.sc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,$t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return LE(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Jn.fromDate(t);return{timestampValue:Qd(r.M,o)}}if(t instanceof Jn){const o=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qd(r.M,o)}}if(t instanceof Hb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:rm(r.M,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ev(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${jb(t)}`)}(n,e)}function AS(n,e){const t={};return iv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(n,(r,o)=>{const u=up(o,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function SS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof Hb||n instanceof il||n instanceof Bn||n instanceof op)}function vT(n,e,t){if(!SS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jb(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function wT(n,e,t){if((e=(0,$t.m9)(e))instanceof xc)return e._internalPath;if("string"==typeof e)return Zb(n,e);throw zb("Field path arguments must be of type string or ",n,!1,void 0,t)}const M1=new RegExp("[~\\*/\\[\\]]");function Zb(n,e,t){if(e.search(M1)>=0)throw zb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xc(...e.split("."))._internalPath}catch(r){throw zb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zb(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${r}`),h&&(E+=` in document ${o}`),E+=")"),new De(le.INVALID_ARGUMENT,m+n+E)}function xS(n,e){return n.some(t=>t.isEqual(e))}class t0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new k1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class k1 extends t0{data(){return super.data()}}function Wb(n,e){return"string"==typeof e?Zb(n,e):e instanceof xc?e._internalPath:e._delegate._internalPath}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mc extends t0{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new n0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Wb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class n0 extends Mc{data(e={}){return super.data(e)}}class sh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new lp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new n0(this._firestore,this._userDataWriter,r.key,r,new lp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new n0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new lp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new n0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new lp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),C=u.indexOf(h.doc.key)),{type:R1(h.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function R1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function MS(n,e){return n instanceof Mc&&e instanceof Mc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sh&&e instanceof sh&&n._firestore===e._firestore&&vS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kS(n){if(Kg(n)&&0===n.explicitOrderBy.length)throw new De(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}function oh(n,...e){for(const t of e)n=t._apply(n);return n}class N1 extends r0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=ap(e.firestore),r=function(o,u,h,m,E,C,S){let k;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new De(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){LS(S,C);const G=[];for(const ie of S)G.push(FS(m,o,ie));k={arrayValue:{values:G}}}else k=FS(m,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||LS(S,C),k=TS(h,"where",S,"in"===C||"not-in"===C);const V=Xr.create(E,C,k);return function(G,ie){if(ie.S()){const Le=cv(G);if(null!==Le&&!Le.isEqual(ie.field))throw new De(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ie.field.toString()}'`);const kt=Yg(G);null!==kt&&VS(0,ie.field,kt)}const Pe=function(Le,kt){for(const at of Le.filters)if(kt.indexOf(at.op)>=0)return at.op;return null}(G,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==Pe)throw new De(le.INVALID_ARGUMENT,Pe===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${Pe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Yi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new Ua(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class P1 extends r0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Zu(o,u);return function(m,E){if(null===Yg(m)){const C=cv(m);null!==C&&VS(0,C,E.field)}}(r,h),h}(e._query,this.hc,this.dc);return new Yi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ua(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RS extends r0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Yi(e.firestore,e.converter,Bf(e._query,this._c,this.wc))}}class NS extends r0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=PS(e,this.type,this.mc,this.gc);return new Yi(e.firestore,e.converter,(o=t,new Ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class OS extends r0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=PS(e,this.type,this.mc,this.gc);return new Yi(e.firestore,e.converter,(o=t,new Ua((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function PS(n,e,t,r){if(t[0]=(0,$t.m9)(t[0]),t[0]instanceof t0)return function(o,u,h,m,E){if(!m)throw new De(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const S of Uf(o))if(S.field.isKeyField())C.push(Gd(u,m.key));else{const k=m.data.field(S.field);if(sv(k))throw new De(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const V=S.field.canonicalString();throw new De(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(k)}return new oa(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=ap(n.firestore);return function(u,h,m,E,C,S){const k=u.explicitOrderBy;if(C.length>k.length)throw new De(le.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let G=0;G<C.length;G++){const ie=C[G];if(k[G].field.isKeyField()){if("string"!=typeof ie)throw new De(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ie}`);if(!Qg(u)&&-1!==ie.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ie}' contains a slash.`);const Pe=u.path.child(Zt.fromString(ie));if(!Be.isDocumentKey(Pe))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const Le=new Be(Pe);V.push(Gd(h,Le))}else{const Pe=TS(m,E,ie);V.push(Pe)}}return new oa(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function FS(n,e,t){if("string"==typeof(t=(0,$t.m9)(t))){if(""===t)throw new De(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qg(e)&&-1!==t.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!Be.isDocumentKey(r))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gd(n,new Be(r))}if(t instanceof Bn)return Gd(n,t._key);throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jb(t)}.`)}function LS(n,e){if(!Array.isArray(n)||0===n.length)throw new De(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new De(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function VS(n,e,t){if(!t.isEqual(e))throw new De(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ET{convertValue(e,t="none"){switch(uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return ia(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Hb(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ov(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nf(e));default:return null}}convertTimestamp(e){const t=Fa(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);ke(zC(r));const o=new Gu(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return o.isEqual(t)||Dr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Kb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class H1 extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class US{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ap(e)}set(e,t,r){this._verifyNotCommitted();const o=ah(e,this._firestore),u=Kb(o.converter,t,r),h=qb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Dn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=ah(e,this._firestore);let h;return h="string"==typeof(t=(0,$t.m9)(t))||t instanceof xc?_T(this._dataReader,"WriteBatch.update",u._key,t,r,o):yT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ah(e,this._firestore);return this._mutations=this._mutations.concat(new Wd(t._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ah(n,e){if((n=(0,$t.m9)(n)).firestore!==e)throw new De(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cp extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function BS(n,e,t){n=Jt(n,Bn);const r=Jt(n.firestore,Wn),o=Kb(n.converter,e,t);return Wm(r,[qb(ap(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Dn.none())])}function jS(n,e,t,...r){n=Jt(n,Bn);const o=Jt(n.firestore,Wn),u=ap(o);let h;return h="string"==typeof(e=(0,$t.m9)(e))||e instanceof xc?_T(u,"updateDoc",n._key,e,t,r):yT(u,"updateDoc",n._key,e),Wm(o,[h.toMutation(n._key,Dn.exists(!0))])}function $S(n,...e){var t,r,o;n=(0,$t.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||gT(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(gT(e[h])){const k=e[h];e[h]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[h+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[h+2]=null===(o=k.complete)||void 0===o?void 0:o.bind(k)}let E,C,S;if(n instanceof Bn)C=Jt(n.firestore,Wn),S=Zd(n._key.path),E={next:k=>{e[h]&&e[h](bT(C,n,k))},error:e[h+1],complete:e[h+2]};else{const k=Jt(n,Yi);C=Jt(k.firestore,Wn),S=k._query;const V=new cp(C);E={next:G=>{e[h]&&e[h](new sh(C,V,k,G))},error:e[h+1],complete:e[h+2]},kS(n._query)}return function(k,V,G,ie){const Pe=new Ub(ie),Le=new ND(V,Pe,G);return k.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return SD(yield zm(k),Le)})),()=>{Pe.pa(),k.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return MD(yield zm(k),Le)}))}}(Ur(C),S,m,E)}function Wm(n,e){return function(t,r){const o=new Pr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function FM(n,e,t){return VD.apply(this,arguments)}(yield hT(t),r,o)})),o.promise}(Ur(n),e)}function bT(n,e,t){const r=t.docs.get(e._key),o=new cp(n);return new Mc(n,o,e._key,r,new lp(t.hasPendingWrites,t.fromCache),e.converter)}class X1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ap(e)}get(e){const t=ah(e,this._firestore),r=new H1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new t0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new t0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=ah(e,this._firestore),u=Kb(o.converter,t,r),h=qb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=ah(e,this._firestore);let h;return h="string"==typeof(t=(0,$t.m9)(t))||t instanceof xc?_T(this._dataReader,"Transaction.update",u._key,t,r,o):yT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=ah(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ah(e,this._firestore),r=new cp(this._firestore);return super.get(e).then(o=>new Mc(this._firestore,r,t._key,o._document,new lp(!1,!1),t.converter))}}function IT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GS(){if("undefined"==typeof Uint8Array)throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function qS(){if(!function _C(){return"undefined"!=typeof atob}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ld=Ra.SDK_VERSION,(0,Ra._registerComponent)(new Zy.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Wn(o,new SA(t.getProvider("auth-internal")),new mE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Ra.registerVersion)(rv,"3.4.7",n),(0,Ra.registerVersion)(rv,"3.4.7","esm2017")}();class s0{constructor(e){this._delegate=e}static fromBase64String(e){return qS(),new s0(il.fromBase64String(e))}static fromUint8Array(e){return GS(),new s0(il.fromUint8Array(e))}toBase64(){return qS(),this._delegate.toBase64()}toUint8Array(){return GS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function CT(n){return function uk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class lk{enableIndexedDbPersistence(e,t){return function m1(n,e){bS(n=Jt(n,Wn));const t=Ur(n),r=n._freezeSettings(),o=new sT;return ES(t,o,new rS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function y1(n){bS(n=Jt(n,Wn));const e=Ur(n),t=n._freezeSettings(),r=new sT;return ES(e,r,new JM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function _1(n){if(n._initialized&&!n._terminated)throw new De(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Mo.vt())return Promise.resolve();const o=r+"main";yield Mo.delete(o)}),function(r){return t.apply(this,arguments)})(Zv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function d1(n,e,t,r={}){var o;const u=(n=Jt(n,Xv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Vd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Vn.MOCK_USER;else{h=(0,$t.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new De(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Vn(E)}n._authCredentials=new qn(new Rf(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function w1(n){return function r1(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield aS(n),t=yield uS(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.lu.delete(0),d(o)}(t)}))}(Ur(n=Jt(n,Wn)))}(this._delegate)}disableNetwork(){return function E1(n){return function i1(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield aS(n),t=yield uS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=qe(o);u.lu.add(0),yield _(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ur(n=Jt(n,Wn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function v1(n){return function(e){const t=new Pr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function BM(n,e){return HD.apply(this,arguments)}(yield hT(e),t)})),t.promise}(Ur(n=Jt(n,Wn)))}(this._delegate)}onSnapshotsInSync(e){return function J1(n,e){return function a1(n,e){const t=new Ub(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield zm(n),o=t,qe(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield zm(n),o=t,void qe(r).Tu.delete(o);var r,o}))}}(Ur(n=Jt(n,Wn)),gT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,yS(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,$b(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Is(this,function h1(n,e){if(n=Jt(n,Xv),pT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new Ua(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ek(n,e){return function u1(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(o=n,Bb(o).then(u=>u.datastore));var o;new t1(n.asyncQueue,r,e,t).run()})),t.promise}(Ur(n=Jt(n,Wn)),t=>e(new X1(n,t)))}(this._delegate,t=>e(new zS(this,t)))}batch(){return Ur(this._delegate),new WS(new US(this._delegate,e=>Wm(this._delegate,e)))}loadBundle(e){return function b1(n,e){const t=Ur(n=Jt(n,Wn)),r=new p1;return function l1(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return iS(E,C);if(E instanceof ArrayBuffer)return iS(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new XM(E,h);var E}(t,Vm(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function QM(n,e,t){const r=qe(n);var o;(o=(0,me.Z)(function*(u,h,m){try{const E=yield h.getMetadata();if(yield function(V,G){const ie=qe(V),Pe=Lr(G.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Le=>ie.ds.getBundleMetadata(Le,G.id)).then(Le=>!!Le&&Le.createTime.compareTo(Pe)>=0)}(u.localStore,E))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=E).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(zA(E));const C=new MM(E,u.localStore,h.M);let S=yield h.fa();for(;S;){const V=yield C.Nu(S);V&&m._updateProgress(V),S=yield h.fa()}const k=yield C.complete();return yield Sc(u,k.Ou,void 0),yield function(V,G){const ie=qe(V);return ie.persistence.runTransaction("Save bundle","readwrite",Pe=>ie.ds.saveBundleMetadata(Pe,G))}(u.localStore,E),m._completeWith(k.progress),Promise.resolve(k.Mu)}catch(E){return Vd("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var V}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield hT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function I1(n,e){return function c1(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.ds.getNamedQuery(u,r))}(yield dT(n),e)}))}(Ur(n=Jt(n,Wn)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Is(this,t):null)}}class Yb extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new s0(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class zS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Yb(e)}get(e){const t=hp(e);return this._delegate.get(t).then(r=>new o0(this._firestore,new Mc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=hp(e);return r?(IT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=hp(e);return this._delegate.delete(t),this}}class WS{constructor(e){this._delegate=e}set(e,t,r){const o=hp(e);return r?(IT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=hp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new n0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new a0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=dp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new dp(e,new Yb(e),t),o.set(t,u)),u}}dp.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new Bn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new la(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,yS(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$t.m9)(e))instanceof Bn&&_S(this._delegate,e)}set(e,t){t=IT("DocumentReference.set",t);try{return t?BS(this._delegate,e,t):BS(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jS(this._delegate,e):jS(this._delegate,e,t,...r)}catch(o){throw bs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function Y1(n){return Wm(Jt(n.firestore,Wn),[new Wd(n._key,Dn.none())])}(this._delegate)}onSnapshot(...e){const t=KS(e),r=YS(e,o=>new o0(this.firestore,new Mc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return $S(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function q1(n){n=Jt(n,Bn);const e=Jt(n.firestore,Wn),t=Ur(e),r=new cp(e);return function s1(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,h){try{const m=yield function(E,C){const S=qe(E);return S.persistence.runTransaction("read document","readonly",k=>S.ai.Bs(k,C))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new De(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Hm(m,`Failed to get document '${u} from cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield dT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Mc(e,r,n._key,o,new lp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Z1(n){n=Jt(n,Bn);const e=Jt(n.firestore,Wn);return lS(Ur(e),n._key,{source:"server"}).then(t=>bT(e,n,t))}(this._delegate):function G1(n){n=Jt(n,Bn);const e=Jt(n.firestore,Wn);return lS(Ur(e),n._key).then(t=>bT(e,n,t))}(this._delegate),t.then(r=>new o0(this.firestore,new Mc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?dp.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function KS(n){for(const e of n)if("object"==typeof e&&!CT(e))return e;return{}}function YS(n,e){var t,r;let o;return o=CT(n[0])?n[0]:CT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class o0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return MS(this._delegate,e._delegate)}}class a0 extends o0{data(e){const t=this._delegate.data(e);return function pC(n,e){n||tt()}(void 0!==t),t}}class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Yb(e)}where(e,t,r){try{return new Is(this.firestore,oh(this._delegate,function O1(n,e,t){const r=e,o=Wb("where",n);return new N1(o,r,t)}(e,t,r)))}catch(o){throw bs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Is(this.firestore,oh(this._delegate,function F1(n,e="asc"){const t=e,r=Wb("orderBy",n);return new P1(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Is(this.firestore,oh(this._delegate,function L1(n){return gS("limit",n),new RS("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Is(this.firestore,oh(this._delegate,function V1(n){return gS("limitToLast",n),new RS("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Is(this.firestore,oh(this._delegate,function U1(...n){return new NS("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Is(this.firestore,oh(this._delegate,function B1(...n){return new NS("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Is(this.firestore,oh(this._delegate,function j1(...n){return new OS("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Is(this.firestore,oh(this._delegate,function $1(...n){return new OS("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return vS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function W1(n){n=Jt(n,Yi);const e=Jt(n.firestore,Wn),t=Ur(e),r=new cp(e);return function o1(n,e){const t=new Pr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,h){try{const m=yield Mm(o,u,!0),E=new YA(u,m.hi),C=E.Gu(m.documents),S=E.applyChanges(C,!1);h.resolve(S.snapshot)}catch(m){const E=Hm(m,`Failed to execute query '${u} against cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield dT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new sh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function K1(n){n=Jt(n,Yi);const e=Jt(n.firestore,Wn),t=Ur(e),r=new cp(e);return cS(t,n._query,{source:"server"}).then(o=>new sh(e,r,n,o))}(this._delegate):function z1(n){n=Jt(n,Yi);const e=Jt(n.firestore,Wn),t=Ur(e),r=new cp(e);return kS(n._query),cS(t,n._query).then(o=>new sh(e,r,n,o))}(this._delegate),t.then(r=>new DT(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=KS(e),r=YS(e,o=>new DT(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return $S(this._delegate,t,r)}withConverter(e){return new Is(this.firestore,this._delegate.withConverter(e?dp.getInstance(this.firestore,e):null))}}class dk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new a0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new a0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new a0(this._firestore,r))})}isEqual(e){return MS(this._delegate,e._delegate)}}class Km extends Is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?$b(this._delegate):$b(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function Q1(n,e){const t=Jt(n.firestore,Wn),r=$b(n),o=Kb(n.converter,e);return Wm(t,[qb(ap(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Dn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return _S(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?dp.getInstance(this.firestore,e):null))}}function hp(n){return Jt(n,Bn)}class TT{constructor(...e){this._delegate=new xc(...e)}static documentId(){return new TT(Zn.keyField().canonicalString())}isEqual(e){return(e=(0,$t.m9)(e))instanceof xc&&this._delegate._internalPath.isEqual(e._internalPath)}}class fp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function nk(){return new mT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fp(e)}static delete(){const e=function tk(){return new e0("deleteField")}();return e._methodName="FieldValue.delete",new fp(e)}static arrayUnion(...e){const t=function rk(...n){return new A1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fp(t)}static arrayRemove(...e){const t=function ik(...n){return new S1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fp(t)}static increment(e){const t=function sk(n){return new x1("increment",n)}(e);return t._methodName="FieldValue.increment",new fp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const hk={Firestore:ZS,GeoPoint:Hb,Timestamp:Jn,Blob:s0,Transaction:zS,WriteBatch:WS,DocumentReference:la,DocumentSnapshot:o0,Query:Is,QueryDocumentSnapshot:a0,QuerySnapshot:DT,CollectionReference:Km,FieldPath:TT,FieldValue:fp,setLogLevel:function ck(n){!function AA(n){ju.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function QS(n,e){return function gk(n,e=C0.z){return new xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function AT(n,e){return QS(n,e).pipe((0,Dt.U)(t=>({payload:t,type:"query"})))}function Qb(n,e){return AT(n,e).pipe(Di(void 0),p_(),(0,Dt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const E=o.find(S=>S.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function JS(n,e,t){return Qb(n,t).pipe(wr((r,o)=>function yk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function _k(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ST(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ST(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ST(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function g_(n,e=ui.y){return n=null!=n?n:GI,(0,vr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Nn.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,Dt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function ST(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function XS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function pk(n){(function fk(n,e){n.INTERNAL.registerComponent(new Zy.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},hk)))})(n,(e,t)=>new ZS(e,t,new lk)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(dw.Z);class ex{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Qb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Di(void 0),p_(),Bi(([r,o])=>o.length>0||!r),(0,Dt.U)(([r,o])=>o),it.iC)}auditTrail(e){return this.stateChanges(e).pipe(wr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XS(e);return JS(this.query,t,this.afs.schedulers.outsideAngular).pipe(it.iC)}valueChanges(e={}){return AT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),it.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(it.iC)}add(e){return this.ref.add(e)}doc(e){return new tx(this.ref.doc(e),this.afs)}}class tx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=ix(r,t);return new ex(o,u,this.afs)}snapshotChanges(){return function mk(n,e){return QS(n,e).pipe(Di(void 0),p_(),(0,Dt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(it.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kn.D)(this.ref.get(e)).pipe(it.iC)}}class vk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Qb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bi(t=>t.length>0),it.iC):Qb(this.query,this.afs.schedulers.outsideAngular).pipe(it.iC)}auditTrail(e){return this.stateChanges(e).pipe(wr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=XS(e);return JS(this.query,t,this.afs.schedulers.outsideAngular).pipe(it.iC)}valueChanges(e={}){return AT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),it.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(it.iC)}}const nx=new c.OlP("angularfire2.enableFirestorePersistence"),rx=new c.OlP("angularfire2.firestore.persistenceSettings"),wk=new c.OlP("angularfire2.firestore.settings"),Ek=new c.OlP("angularfire2.firestore.use-emulator");function ix(n,e=(t=>t)){return{query:e(n),ref:n}}let sx=(()=>{class n{constructor(t,r,o,u,h,m,E,C,S,k,V,G,ie,Pe,Le,kt,at){this.schedulers=E;const sn=(0,Ys.on)(t,m,r),_t=S;k&&f_(sn,m,V,ie,Pe,Le,G,kt),[this.firestore,this.persistenceEnabled$]=(0,Ys.cc)(`${sn.name}.firestore`,"AngularFirestore",sn.name,()=>{const Rt=m.runOutsideAngular(()=>sn.firestore());if(u&&Rt.settings(u),_t&&Rt.useEmulator(..._t),o&&!or(h)){const Je=()=>{try{return(0,kn.D)(Rt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Pt){return"undefined"!=typeof console&&console.warn(Pt),pt(!1)}};return[Rt,m.runOutsideAngular(Je)]}return[Rt,pt(!1)]},[u,_t,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=ix(o,r),m=this.schedulers.ngZone.run(()=>u);return new ex(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new vk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new tx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ys.Dh),c.LFG(Ys.xv,8),c.LFG(nx,8),c.LFG(wk,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(it.HU),c.LFG(rx,8),c.LFG(Ek,8),c.LFG(xu,8),c.LFG(ag,8),c.LFG(h_,8),c.LFG(ug,8),c.LFG(bd,8),c.LFG(lw,8),c.LFG(lg,8),c.LFG(Qh,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bk=(()=>{class n{constructor(){og.Z.registerVersion("angularfire",it.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:nx,useValue:!0},{provide:rx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[sx]}),n})(),xT=(()=>{class n{constructor(t,r,o,u){this.auth=t,this.db=r,this.router=o,this.route=u,this.redirect=!1,this.usersColleciton=r.collection("users"),this.isAuthenticated$=t.user.pipe((0,Dt.U)(h=>!!h)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function S0(n,e=C0.z){const t=function _I(n=0,e,t=C0.P){let r=-1;return null!=e&&((0,yI.K)(e)?t=e:r=e),new xr.y(o=>{let u=function Co(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let h=0;return t.schedule(function(){o.closed||(o.next(h++),0<=r?this.schedule(void 0,r):o.complete())},u)})}(n,e);return A0(()=>t)}(1e3)),this.router.events.pipe(Bi(h=>h instanceof Ia),(0,Dt.U)(h=>this.route.firstChild),En(h=>{var m;return null!==(m=null==h?void 0:h.data)&&void 0!==m?m:pt({})})).subscribe(h=>{var m;this.redirect=null!==(m=h.authOnly)&&void 0!==m&&m})}createUser(t){var r=this;return(0,me.Z)(function*(){if(!t.password)throw new Error("Password not provided!");const o=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);if(!o.user)throw new Error("User can't be found");yield r.usersColleciton.doc(o.user.uid).set({name:t.name,email:t.email,age:t.age,phoneNumber:t.phoneNumber}),yield o.user.updateProfile({displayName:t.name})})()}logout(t){var r=this;return(0,me.Z)(function*(){t&&t.preventDefault(),yield r.auth.signOut(),r.redirect&&(yield r.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xu),c.LFG(sx),c.LFG(Rr),c.LFG(ps))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MT=(()=>{class n{constructor(){this.modals=[]}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(r=>r.id!==t)}isModalOpen(t){var r;return Boolean(null===(r=this.modals.find(o=>o.id===t))||void 0===r?void 0:r.visible)}toggleModal(t){const r=this.modals.find(o=>o.id===t);r&&(r.visible=!r.visible)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ik(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",15),c.NdJ("click",function(o){return c.CHM(t),c.oxw().openModal(o)}),c._uU(2,"Login / Register"),c.qZA()()}}const ox=function(){return{exact:!0}},Ck=function(){return{sort:"1"}};function Dk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li")(1,"a",16),c._uU(2," Manage"),c.qZA()(),c.TgZ(3,"li")(4,"a",17),c._uU(5,"Upload"),c.qZA()(),c.TgZ(6,"li")(7,"a",18),c.NdJ("click",function(o){return c.CHM(t),c.oxw().auth.logout(o)}),c._uU(8,"Logout"),c.qZA()()}2&n&&(c.xp6(1),c.Q6J("routerLinkActiveOptions",c.DdM(3,ox))("queryParams",c.DdM(4,Ck)),c.xp6(3),c.Q6J("routerLinkActiveOptions",c.DdM(5,ox)))}let Tk=(()=>{class n{constructor(t,r){this.modal=t,this.auth=r,this.isAuthenticated=!1}ngOnInit(){}openModal(t){t.preventDefault(),this.modal.toggleModal("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(MT),c.Y36(xT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary","px-8"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"px-2",3,"click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),c._uU(3,"Clipz"),c.qZA(),c.TgZ(4,"div",3)(5,"ul",4),c.YNc(6,Ik,3,0,"li",5),c.ALo(7,"async"),c.YNc(8,Dk,9,6,"ng-template",null,6,c.W1O),c.TgZ(10,"li",7)(11,"a",8),c._uU(12,"About"),c.qZA()()(),c.TgZ(13,"ul",9)(14,"li")(15,"a",10),c._UZ(16,"img",11),c.TgZ(17,"span",12),c._uU(18,"English"),c.qZA()()(),c.TgZ(19,"li",13)(20,"a",10),c._UZ(21,"img",14),c.TgZ(22,"span",12),c._uU(23,"French"),c.qZA()()()()()()()),2&t){const o=c.MAs(9);c.xp6(6),c.Q6J("ngIf",!c.lcZ(7,2,r.auth.isAuthenticated$))("ngIfElse",o)}},directives:[yd,sr,xy],pipes:[Ya],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();const Ak=[[["","heading",""]],"*"],Sk=function(n){return{hidden:n}},xk=["[heading]","*"];let Mk=(()=>{class n{constructor(t,r){this.modal=t,this.el=r,this.modalID="",console.log(r)}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(t){t.preventDefault(),this.modal.toggleModal(this.modalID)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(MT),c.Y36(c.SBq))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:xk,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(c.F$t(Ak),c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c.NdJ("click",function(u){return r.closeModal(u)}),c._UZ(3,"div",3),c.qZA(),c.TgZ(4,"span",4),c._uU(5,"\u200b"),c.qZA(),c.TgZ(6,"div",5)(7,"div",6)(8,"div",7),c.Hsn(9),c.TgZ(10,"div",8),c.NdJ("click",function(u){return r.closeModal(u)}),c._uU(11," \u2715 "),c.qZA()(),c.Hsn(12,1),c.qZA()()()()),2&t&&c.Q6J("ngClass",c.VKq(1,Sk,!r.modal.isModalOpen(r.modalID)))},directives:[Li],styles:[""]}),n})();const kk=["*"];let ax=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:kk,decls:2,vars:2,template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div"),c.Hsn(1),c.qZA()),2&t&&c.ekj("hidden",!r.active)},styles:[""]}),n})();const Rk=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function Nk(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"li",2)(1,"a",3),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().selectTab(u)}),c._uU(2),c.qZA()()}if(2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngClass",c.WLB(2,Rk,!t.active,t.active)),c.xp6(1),c.Oqu(t.tabTitle)}}const Ok=["*"];let Pk=(()=>{class n{constructor(){this.tabs=new c.n_E}ngAfterContentInit(){var t;const r=null===(t=this.tabs)||void 0===t?void 0:t.filter(o=>o.active);(!r||0===r.length)&&this.selectTab(this.tabs.first)}selectTab(t){var r;return null===(r=this.tabs)||void 0===r||r.forEach(o=>o.active=!1),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,o){if(1&t&&c.Suo(o,ax,4),2&t){let u;c.iGM(u=c.CRH())&&(r.tabs=u)}},ngContentSelectors:Ok,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"ul",0),c.YNc(1,Nk,3,5,"li",1),c.qZA(),c.Hsn(2)),2&t&&(c.xp6(1),c.Q6J("ngForOf",r.tabs))},directives:[ir,Li],styles:[""]}),n})();const Fk=["*"];let ux=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:Fk,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c.Hsn(1),c.qZA()),2&t&&c.Q6J("ngClass",r.bgColor)},directives:[Li],styles:[""]}),n})(),lx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),pp=(()=>{class n extends lx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Ha=new c.OlP("NgValueAccessor"),Uk={provide:Ha,useExisting:(0,c.Gpc)(()=>u0),multi:!0},jk=new c.OlP("CompositionEventMode");let u0=(()=>{class n extends lx{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Bk(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(jk,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([Uk]),c.qOj]}),n})();function uh(n){return null==n||0===n.length}function dx(n){return null!=n&&"number"==typeof n.length}const Ni=new c.OlP("NgValidators"),lh=new c.OlP("NgAsyncValidators"),$k=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ro{static min(e){return function hx(n){return e=>{if(uh(e.value)||uh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function fx(n){return e=>{if(uh(e.value)||uh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return px(e)}static requiredTrue(e){return function gx(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function mx(n){return uh(n.value)||$k.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function yx(n){return e=>uh(e.value)||!dx(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function _x(n){return e=>dx(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return vx(e)}static nullValidator(e){return null}static compose(e){return Dx(e)}static composeAsync(e){return Tx(e)}}function px(n){return uh(n.value)?{required:!0}:null}function vx(n){if(!n)return Jb;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(uh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function Jb(n){return null}function wx(n){return null!=n}function Ex(n){const e=(0,c.QGY)(n)?(0,kn.D)(n):n;return(0,c.CqO)(e),e}function bx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ix(n,e){return e.map(t=>t(n))}function Cx(n){return n.map(e=>function Hk(n){return!n.validate}(e)?e:t=>e.validate(t))}function Dx(n){if(!n)return null;const e=n.filter(wx);return 0==e.length?null:function(t){return bx(Ix(t,e))}}function kT(n){return null!=n?Dx(Cx(n)):null}function Tx(n){if(!n)return null;const e=n.filter(wx);return 0==e.length?null:function(t){return function Lk(...n){const e=(0,Rn.jO)(n),{args:t,keys:r}=bi(n),o=new xr.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let E=h,C=h;for(let S=0;S<h;S++){let k=!1;(0,$o.Xf)(t[S]).subscribe((0,Nn.x)(u,V=>{k||(k=!0,C--),m[S]=V},()=>E--,void 0,()=>{(!E||!k)&&(C||u.next(r?go(r,m):m),u.complete())}))}});return e?o.pipe(Qc(e)):o}(Ix(t,e).map(Ex)).pipe((0,Dt.U)(bx))}}function RT(n){return null!=n?Tx(Cx(n)):null}function Ax(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Sx(n){return n._rawValidators}function xx(n){return n._rawAsyncValidators}function NT(n){return n?Array.isArray(n)?n:[n]:[]}function Xb(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mx(n,e){const t=NT(e);return NT(n).forEach(o=>{Xb(t,o)||t.push(o)}),t}function kx(n,e){return NT(e).filter(t=>!Xb(n,t))}class Rx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=RT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ch extends Rx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cs extends Rx{get formDirective(){return null}get path(){return null}}class Nx{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let OT=(()=>{class n extends Nx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(ch,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),PT=(()=>{class n extends Nx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function l0(n,e){VT(n,e),e.valueAccessor.writeValue(n.value),function Qk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Px(n,e)})}(n,e),function Xk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Jk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Px(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Yk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),iI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function VT(n,e){const t=Sx(n);null!==e.validator?n.setValidators(Ax(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=xx(n);null!==e.asyncValidator?n.setAsyncValidators(Ax(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();rI(e._rawValidators,o),rI(e._rawAsyncValidators,o)}function iI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Sx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=xx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return rI(e._rawValidators,r),rI(e._rawAsyncValidators,r),t}function Px(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Fx(n,e){VT(n,e)}function UT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Vx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===u0?t=u:function nR(n){return Object.getPrototypeOf(n.constructor)===pp}(u)?r=u:o=u}),o||r||t||null}function jT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const c0="VALID",sI="INVALID",Ym="PENDING",d0="DISABLED";function HT(n){return(oI(n)?n.validators:n)||null}function Ux(n){return Array.isArray(n)?kT(n):n||null}function GT(n,e){return(oI(e)?e.asyncValidators:n)||null}function Bx(n){return Array.isArray(n)?RT(n):n||null}function oI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const jx=n=>n instanceof kc,qT=n=>n instanceof aI;function $x(n){return jx(n)?n.value:n.getRawValue()}function Hx(n,e){const t=qT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function Gx(n,e){qT(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new c.vHH(1002,"")})}class ZT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ux(this._rawValidators),this._composedAsyncValidatorFn=Bx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===c0}get invalid(){return this.status===sI}get pending(){return this.status==Ym}get disabled(){return this.status===d0}get enabled(){return this.status!==d0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ux(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Bx(e)}addValidators(e){this.setValidators(Mx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kx(e,this._rawAsyncValidators))}hasValidator(e){return Xb(this._rawValidators,e)}hasAsyncValidator(e){return Xb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ym,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=c0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===c0||this.status===Ym)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?d0:c0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ym,this._hasOwnPendingAsyncValidator=!0;const t=Ex(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function rR(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=qT(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof sR)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?d0:this.errors?sI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ym)?Ym:this._anyControlsHaveStatus(sI)?sI:c0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){oI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class kc extends ZT{constructor(e=null,t,r){super(HT(t),GT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class aI extends ZT{constructor(e,t,r){super(HT(t),GT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Gx(this,e),Object.keys(e).forEach(r=>{Hx(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=$x(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class sR extends ZT{constructor(e,t,r){super(HT(t),GT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Gx(this,e),e.forEach((r,o)=>{Hx(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>$x(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const oR={provide:Cs,useExisting:(0,c.Gpc)(()=>uI)},h0=(()=>Promise.resolve(null))();let uI=(()=>{class n extends Cs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new c.vpe,this.form=new aI({},kT(t),RT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){h0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),l0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){h0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){h0.then(()=>{const r=this._findContainer(t.path),o=new aI({});Fx(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){h0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){h0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Vx(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ni,10),c.Y36(lh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([oR]),c.qOj]}),n})();const uR={provide:ch,useExisting:(0,c.Gpc)(()=>zT)},zx=(()=>Promise.resolve(null))();let zT=(()=>{class n extends ch{constructor(t,r,o,u,h){super(),this._changeDetectorRef=h,this.control=new kc,this._registered=!1,this.update=new c.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=BT(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){l0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zx.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;zx.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function tI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cs,9),c.Y36(Ni,10),c.Y36(lh,10),c.Y36(Ha,10),c.Y36(c.sBO,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[c._Bn([uR]),c.qOj,c.TTD]}),n})(),WT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const KT=new c.OlP("NgModelWithFormControlWarning"),fR={provide:ch,useExisting:(0,c.Gpc)(()=>YT)};let YT=(()=>{class n extends ch{constructor(t,r,o,u){super(),this._ngModelWarningConfig=u,this.update=new c.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=BT(0,o)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&nI(r,this,!1),l0(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}UT(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&nI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Ni,10),c.Y36(lh,10),c.Y36(Ha,10),c.Y36(KT,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[c._Bn([fR]),c.qOj,c.TTD]}),n})();const pR={provide:Cs,useExisting:(0,c.Gpc)(()=>lI)};let lI=(()=>{class n extends Cs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(iI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return l0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){nI(t.control||null,t,!1),jT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Vx(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(nI(r||null,t),jx(o)&&(l0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Fx(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function eR(n,e){return iI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){VT(this.form,this),this._oldForm&&iI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ni,10),c.Y36(lh,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([pR]),c.qOj,c.TTD]}),n})(),gp=(()=>{class n{constructor(){this._validator=Jb}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Jb,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const AR={provide:Ni,useExisting:(0,c.Gpc)(()=>cI),multi:!0};let cI=(()=>{class n extends gp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function CR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>px}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([AR]),c.qOj]}),n})();const RR={provide:Ni,useExisting:(0,c.Gpc)(()=>tA),multi:!0};let tA=(()=>{class n extends gp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>vx(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[c._Bn([RR]),c.qOj]}),n})(),cM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kx]]}),n})(),NR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[cM]}),n})(),dM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:KT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[cM]}),n})();function OR(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.Oqu(t.alertMsg)}}function PR(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Email is invalid "),c.qZA())}function FR(n,e){1&n&&(c.TgZ(0,"p",12),c._uU(1," Password is invalid "),c.qZA())}let LR=(()=>{class n{constructor(t){this.auth=t,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait till we log you in...",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var t=this;return(0,me.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait till we log you in...",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch(r){return t.inSubmission=!1,t.alertMsg="An unexpected error has occured. Plz try again later",t.alertColor="red",void console.error(r)}t.alertMsg="You're now successfully logged in.",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xu))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(c.YNc(0,OR,2,2,"app-alert",0),c.TgZ(1,"form",1,2),c.NdJ("ngSubmit",function(){return r.login()}),c.TgZ(3,"div",3)(4,"label",4),c._uU(5,"Email"),c.qZA(),c.TgZ(6,"input",5,6),c.NdJ("ngModelChange",function(u){return r.credentials.email=u}),c.qZA(),c.YNc(8,PR,2,0,"p",7),c.qZA(),c.TgZ(9,"div",3)(10,"label",4),c._uU(11,"Password"),c.qZA(),c.TgZ(12,"input",8,9),c.NdJ("ngModelChange",function(u){return r.credentials.password=u}),c.qZA(),c.YNc(14,FR,2,0,"p",7),c.qZA(),c.TgZ(15,"button",10),c._uU(16," Submit "),c.qZA()()),2&t){const o=c.MAs(2),u=c.MAs(7),h=c.MAs(13);c.Q6J("ngIf",r.showAlert),c.xp6(6),c.Q6J("ngModel",r.credentials.email),c.xp6(2),c.Q6J("ngIf",u.errors&&u.touched&&u.dirty),c.xp6(4),c.Q6J("ngModel",r.credentials.password),c.xp6(2),c.Q6J("ngIf",h.errors&&h.touched&&h.dirty),c.xp6(1),c.Q6J("disabled",o.invalid||r.inSubmission)}},directives:[sr,ux,WT,PT,uI,u0,cI,tA,OT,zT],styles:[""]}),n})();class VR{static match(e,t){return r=>{const o=r.get(e),u=r.get(t);if(!o||!u)return console.error("Form controls can't be found in the form group"),{controlNotFound:!1};const h=o.value===u.value?null:{noMatch:!0};return u.setErrors(h),h}}}let UR=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(o=>o.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(xu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var BR=N(655);const dI=new c.OlP("ngx-mask config"),hM=new c.OlP("new ngx-mask config"),fM=new c.OlP("initial ngx-mask config"),jR={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new c.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},$R=["Hh:m0:s0","Hh:m0","m0:s0"],HR=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let pM=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,o,u,h)=>{var m,E;let C=[],S="";if(Array.isArray(u)){const Pe=new RegExp(u.map(Le=>"[\\^$.|?*+()".indexOf(Le)>=0?`\\${Le}`:Le).join("|"));C=r.split(Pe),S=null!==(E=null===(m=r.match(Pe))||void 0===m?void 0:m[0])&&void 0!==E?E:""}else C=r.split(u),S=u;const k=C.length>1?`${S}${C[1]}`:"";let V=C[0];const G=this.separatorLimit.replace(/\s/g,"");G&&+G&&(V="-"===V[0]?`-${V.slice(1,V.length).slice(0,G.length)}`:V.slice(0,G.length));const ie=/(\d+)(\d{3})/;for(;o&&ie.test(V);)V=V.replace(ie,"$1"+o+"$2");return void 0===h?V+k:0===h?V:V+k.substr(0,h+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const o=r.split(".");return o.length>1?Number(o[o.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var o,u,h;for(let m=(null===(o=this.suffix)||void 0===o?void 0:o.length)-1;m>=0;m--){const E=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(E)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(h=this.suffix)||void 0===h?void 0:h.length))))return r.replace(E,"")}return r},this.checkInputPrecision=(r,o,u)=>{if(o<1/0){if(Array.isArray(u)){const E=u.find(C=>C!==this.thousandSeparator);u=E||u[0]}const h=new RegExp(this._charToRegExpExpression(u)+`\\d{${o}}.*$`),m=r.match(h);m&&m[0].length-1>o&&(r=r.substring(0,r.length-(m[0].length-1-o))),0===o&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[o,u]=r;return this.customPattern=u,this.applyMask(t,o)}applyMask(t,r,o=0,u=!1,h=!1,m=(()=>{})){var E,C;if(!r||"string"!=typeof t)return"";let S=0,k="",V=!1,G=!1,ie=1,Pe=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Le=t.toString().split("");"IP"===r&&(this.ipError=Le.filter(Je=>"."===Je).length<3&&Le.length<7,r="099.099.099.099");const kt=[];for(let Je=0;Je<t.length;Je++)(null===(E=t[Je])||void 0===E?void 0:E.match("\\d"))&&kt.push(t[Je]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==kt.length&&14!==kt.length,r=kt.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const Je=this.getPrecision(r);t=this.checkInputPrecision(t,Je,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),k=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!h?t.slice(1,t.length):t,h&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const Je=this._charToRegExpExpression(this.thousandSeparator);let Pt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Je,"");if(Array.isArray(this.decimalMarker))for(const mp of this.decimalMarker)Pt=Pt.replace(this._charToRegExpExpression(mp),"");else Pt=Pt.replace(this._charToRegExpExpression(this.decimalMarker),"");const Br=new RegExp("["+Pt+"]");(t.match(Br)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const Ga=this.getPrecision(r),Xn=(t=this.checkInputPrecision(t,Ga,this.decimalMarker)).replace(new RegExp(Je,"g"),"");k=this._formatWithSeparators(Xn,this.thousandSeparator,this.decimalMarker,Ga);const An=k.indexOf(",")-t.indexOf(","),no=k.length-t.length;if(no>0&&","!==k[o]){G=!0;let mp=0;do{this._shift.add(o+mp),mp++}while(mp<no)}else 0!==An&&o>0&&!(k.indexOf(",")>=o&&o>3)||!(k.indexOf(".")>=o&&o>3)&&no<=0?(this._shift.clear(),G=!0,ie=no,this._shift.add(o+=no)):this._shift.clear()}else for(let Je=0,Pt=Le[0];Je<Le.length&&S!==r.length;Je++,Pt=Le[Je])if(this._checkSymbolMask(Pt,r[S])&&"?"===r[S+1])k+=Pt,S+=2;else if("*"===r[S+1]&&V&&this._checkSymbolMask(Pt,r[S+2]))k+=Pt,S+=3,V=!1;else if(this._checkSymbolMask(Pt,r[S])&&"*"===r[S+1])k+=Pt,V=!0;else if("?"===r[S+1]&&this._checkSymbolMask(Pt,r[S+2]))k+=Pt,S+=3;else if(this._checkSymbolMask(Pt,r[S])){if("H"===r[S]&&Number(Pt)>2){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}if("h"===r[S]&&"2"===k&&Number(Pt)>3){S+=1,Je--;continue}if("m"===r[S]&&Number(Pt)>5){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}if("s"===r[S]&&Number(Pt)>5){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}const Br=31;if("d"===r[S]&&(Number(Pt)>3&&this.leadZeroDateTime||Number(t.slice(S,S+2))>Br||"/"===t[S+1])){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}if("M"===r[S]){const Xn=0===S&&(Number(Pt)>2||Number(t.slice(S,S+2))>12||"/"===t[S+1]),An=t.slice(S-3,S-1).includes("/")&&("/"===t[S-2]&&Number(t.slice(S-1,S+1))>12&&"/"!==t[S]||"/"===t[S]||"/"===t[S-3]&&Number(t.slice(S-2,S))>12&&"/"!==t[S-1]||"/"===t[S-1]),no=Number(t.slice(S-3,S-1))<=Br&&!t.slice(S-3,S-1).includes("/")&&"/"===t[S-1]&&(Number(t.slice(S,S+2))>12||"/"===t[S+1]),mp=Number(t.slice(S-3,S-1))>Br&&!t.slice(S-3,S-1).includes("/")&&!t.slice(S-2,S).includes("/")&&Number(t.slice(S-2,S))>12,vN=Number(t.slice(S-3,S-1))<=Br&&!t.slice(S-3,S-1).includes("/")&&"/"!==t[S-1]&&Number(t.slice(S-1,S+1))>12;if(Number(Pt)>1&&this.leadZeroDateTime||Xn||An||no||mp||vN){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}}k+=Pt,S++}else-1!==this.maskSpecialCharacters.indexOf(r[S])?(k+=r[S],S++,this._shiftStep(r,S,Le.length),Je--):this.maskSpecialCharacters.indexOf(Pt)>-1&&this.maskAvailablePatterns[r[S]]&&(null===(C=this.maskAvailablePatterns[r[S]])||void 0===C?void 0:C.optional)?(!!Le[S]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(k+=Le[S]),S++,Je--):"*"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(Pt)===this.maskExpression[S+2]&&V||"?"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(Pt)===this.maskExpression[S+2]&&V?(S+=3,k+=Pt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Pt)<0&&Pt!==this.placeHolderCharacter&&(Pe=!0);k.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(k+=r[r.length-1]);let at=o+1;for(;this._shift.has(at);)ie++,at++;let sn=u?S:this._shift.has(o)?ie:0;Pe&&sn--,m(sn,G),ie<0&&this._shift.clear();let _t=!1;h&&(_t=Le.every(Je=>this.maskSpecialCharacters.includes(Je)));let Rt=`${this.prefix}${_t?"":k}${this.suffix}`;return 0===k.length&&(Rt=`${this.prefix}${k}`),Rt}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,o)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===o&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,o){const u=/[*?]/g.test(t.slice(0,r))?o:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,o){return Array.isArray(r)?r.filter(u=>u!==o).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(dI))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),gM=(()=>{class n extends pM{constructor(t,r,o,u){super(r),this.document=t,this._config=r,this._elementRef=o,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=h=>{}}applyMask(t,r,o=0,u=!1,h=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const E=t&&"number"==typeof this.selStart?t[this.selStart]:"";let C="";if(this.hiddenInput&&!this.writingValue){let G=this.actualValue.split("");""!==t&&G.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>G.length?G.splice(this.selStart,0,E):t.length<G.length&&(G.length-t.length==1?G.splice(this.selStart-1,1):G.splice(this.selStart,this.selEnd-this.selStart))):G=[],this.showMaskTyped&&(t=this.removeMask(t)),C=this.actualValue.length&&G.length<=t.length?this.shiftTypedSymbols(G.join("")):t}C=Boolean(C)&&C.length?C:t;const S=super.applyMask(C,r,o,u,h,m);if(this.actualValue=this.getActualValue(S),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(G=>!this._compareOrIncludes(G,this.decimalMarker,this.thousandSeparator))),this.formControlResult(S),!this.showMaskTyped)return this.hiddenInput&&S&&S.length?this.hideInput(S,this.maskExpression):S;const k=S.length,V=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const G=this._numberSkipedSymbols(S);return S+V.slice(k+G)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?S+V:S+V.slice(k)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let o=r.exec(t),u=0;for(;null!=o;)u+=1,o=r.exec(t);return u}applyValueChanges(t,r,o,u=(()=>{})){const h=this._elementRef.nativeElement;h.value=this.applyMask(h.value,this.maskExpression,t,r,o,u),h!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((o,u)=>{var h,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(h=this.maskAvailablePatterns[r[u]])||void 0===h?void 0:h.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:o}).join("")}getActualValue(t){const r=t.split("").filter((o,u)=>this._checkSymbolMask(o,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&o===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,h)=>{if(this.maskSpecialCharacters.includes(t[h+1])&&t[h+1]!==this.maskExpression[h+1])return r=u,t[h+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(o=>this._findSpecialChar(o)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const o=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&o.push(t[u]);return o.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>3&&o.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>6&&o.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const o=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return o;const h=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&h.push(t[m]);return h.length<=3?o.slice(h.length,o.length):h.length>3&&h.length<=6?o.slice(h.length+1,o.length):h.length>6&&h.length<=9?o.slice(h.length+2,o.length):h.length>9&&h.length<11?o.slice(h.length+3,o.length):11===h.length?"":12===h.length?u.slice(17===t.length?16:15,u.length):h.length>12&&h.length<=14?u.slice(h.length+4,u.length):""}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let o=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(o=o.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,o):Number(o):o}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(se),c.LFG(dI),c.LFG(c.SBq),c.LFG(c.Qsj))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),GR=(()=>{class n{constructor(t,r,o){this.document=t,this._maskService=r,this._config=o,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new c.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:o,patterns:u,prefix:h,suffix:m,thousandSeparator:E,decimalMarker:C,dropSpecialCharacters:S,hiddenInput:k,showMaskTyped:V,placeHolderCharacter:G,shownMaskExpression:ie,showTemplate:Pe,clearIfNotMatch:Le,validation:kt,separatorLimit:at,allowNegativeNumbers:sn,leadZeroDateTime:_t,triggerOnMaskChange:Rt}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((Je,Pt)=>Je.length-Pt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),o){if(!o.currentValue||!Array.isArray(o.currentValue))return;this._maskService.maskSpecialCharacters=o.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),h&&(this._maskService.prefix=h.currentValue),m&&(this._maskService.suffix=m.currentValue),E&&(this._maskService.thousandSeparator=E.currentValue),C&&(this._maskService.decimalMarker=C.currentValue),S&&(this._maskService.dropSpecialCharacters=S.currentValue),k&&(this._maskService.hiddenInput=k.currentValue),V&&(this._maskService.showMaskTyped=V.currentValue),G&&(this._maskService.placeHolderCharacter=G.currentValue),ie&&(this._maskService.shownMaskExpression=ie.currentValue),Pe&&(this._maskService.showTemplate=Pe.currentValue),Le&&(this._maskService.clearIfNotMatch=Le.currentValue),kt&&(this._maskService.validation=kt.currentValue),at&&(this._maskService.separatorLimit=at.currentValue),sn&&(this._maskService.allowNegativeNumbers=sn.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Je=>"-"!==Je))),_t&&(this._maskService.leadZeroDateTime=_t.currentValue),Rt&&(this._maskService.triggerOnMaskChange=Rt.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||HR.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if($R.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const o in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[o].optional&&(this._maskValue.indexOf(o)!==this._maskValue.lastIndexOf(o)?r+=this._maskValue.split("").filter(h=>h===o).join("").length:-1!==this._maskValue.indexOf(o)&&r++,-1!==this._maskValue.indexOf(o)&&t.toString().length>=this._maskValue.indexOf(o)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const o=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<o)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){!t&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const o=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,h=!1;if(this._maskService.applyValueChanges(o,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(E,C)=>{this._justPasted=!1,u=E,h=C}),this.document.activeElement!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+o+u:o+("Backspace"!==this._code||h?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const h=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==h&&(r.value=h),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const o=t.target;if(this._inputValue=o.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===o.value.length&&(o.selectionStart=o.selectionEnd),8===t.keyCode&&0!==o.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&o.selectionStart<=this.prefix.length)o.setSelectionRange(this.prefix.length,o.selectionEnd);else if(this._inputValue.length!==o.selectionStart&&1!==o.selectionStart)for(;this.specialCharacters.includes(this._inputValue[o.selectionStart-1].toString())&&(this.prefix.length>=1&&o.selectionStart>this.prefix.length||0===this.prefix.length);)o.setSelectionRange(o.selectionStart-1,o.selectionEnd);this.checkSelectionOnDeletion(o),this._maskService.prefix.length&&o.selectionStart<=this._maskService.prefix.length&&o.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=o.selectionStart;8===t.keyCode&&!o.readOnly&&0===u&&o.selectionEnd===o.value.length&&0!==o.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<o.selectionStart?o.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(o.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=o.selectionStart,this._maskService.selEnd=o.selectionEnd}writeValue(t){return(0,BR.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),"number"==typeof t&&(t=String(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,o,u)=>{if(this._start="{"===o?u:this._start,"}"!==o)return this._maskService._findSpecialChar(o)?r+o:r;this._end=u;const h=Number(t.slice(this._start+1,this._end));return r+new Array(h+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(o=>":"!==o).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,o;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(o=this._maskService.removeMask(t))||void 0===o?void 0:o.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(se),c.Y36(gM),c.Y36(dI))},n.\u0275dir=c.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&c.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[c._Bn([{provide:Ha,useExisting:(0,c.Gpc)(()=>n),multi:!0},{provide:Ni,useExisting:(0,c.Gpc)(()=>n),multi:!0},gM]),c.TTD]}),n})();function qR(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let ZR=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:hM,useValue:t},{provide:fM,useValue:jR},{provide:dI,useFactory:qR,deps:[fM,hM]},pM]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const mM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function zR(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Password must be at least 8 characters, must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number "),c.qZA())}function WR(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Please fill the field "),c.qZA())}function KR(n,e){if(1&n&&(c.TgZ(0,"p",3),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.xp6(1),c.AsE(" The input that you've passed in is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," chars long. Plz type at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," chars. ")}}function YR(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," You shall enter a valid email. "),c.qZA())}function QR(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1,"Value too low."),c.qZA())}function JR(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1,"Value too high."),c.qZA())}function XR(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Passwords don't match. "),c.qZA())}function eN(n,e){1&n&&(c.TgZ(0,"p",3),c._uU(1," Email was taken. Please try to register with another email. "),c.qZA())}function tN(n,e){if(1&n&&(c.ynx(0),c.YNc(1,zR,2,0,"p",2),c.YNc(2,WR,2,0,"p",2),c.YNc(3,KR,2,2,"p",2),c.YNc(4,YR,2,0,"p",2),c.YNc(5,QR,2,0,"p",2),c.YNc(6,JR,2,0,"p",2),c.YNc(7,XR,2,0,"p",2),c.YNc(8,eN,2,0,"p",2),c.BQk()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),c.xp6(1),c.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken)}}mM.KeyboardEvent||(mM.KeyboardEvent=function(n,e){});let nN=(()=>{class n{constructor(){this.control=new kc,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(c._UZ(0,"input",0),c.YNc(1,tN,9,8,"ng-container",1)),2&t&&(c.Q6J("formControl",r.control)("type",r.type)("placeholder",r.placeholder)("mask",r.format)("dropSpecialCharacters",!1),c.xp6(1),c.Q6J("ngIf",r.control.touched&&r.control.dirty))},directives:[u0,GR,OT,YT,sr],styles:[""]}),n})();function rN(n,e){if(1&n&&(c.TgZ(0,"app-alert",11),c._uU(1),c.qZA()),2&n){const t=c.oxw();c.Q6J("color",t.alertColor),c.xp6(1),c.hij(" ",t.alertMsg,"\n")}}let iN=(()=>{class n{constructor(t,r){this.auth=t,this.emailTaken=r,this.inSubmittion=!1,this.name=new kc("",[Ro.required,Ro.minLength(3)]),this.email=new kc("",[Ro.required,Ro.email],[this.emailTaken.validate]),this.age=new kc("",[Ro.required,Ro.min(18),Ro.max(128)]),this.password=new kc("",[Ro.required,Ro.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/)]),this.confirm_password=new kc("",[Ro.required]),this.phoneNumber=new kc("",[Ro.required,Ro.minLength(13),Ro.maxLength(13)]),this.showAlert=!1,this.alertMsg="Creating your account...",this.alertColor="blue",this.registerForm=new aI({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[VR.match("password","confirm_password")])}register(){var t=this;return(0,me.Z)(function*(){t.inSubmittion=!0,t.showAlert=!0,t.alertMsg="Creating your account...",t.alertColor="blue";try{yield t.auth.createUser(t.registerForm.value)}catch(r){return console.error(r),t.alertMsg="An unexpected error occured. Plz try again later",t.alertColor="red",void(t.inSubmittion=!1)}t.alertMsg="Success! Your account has been created",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xT),c.Y36(UR))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Type Password",3,"control"],["type","password","placeholder","Retype password",3,"control"],["placeholder","Enter Phone Number","format","(000)00-00-00",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(c.YNc(0,rN,2,2,"app-alert",0),c.TgZ(1,"form",1),c.NdJ("ngSubmit",function(){return r.register()}),c.TgZ(2,"div",2)(3,"label",3),c._uU(4,"Name"),c.qZA(),c._UZ(5,"app-input",4),c.qZA(),c.TgZ(6,"div",2)(7,"label",3),c._uU(8,"Email"),c.qZA(),c._UZ(9,"app-input",5),c.qZA(),c.TgZ(10,"div",2)(11,"label",3),c._uU(12,"Age"),c.qZA(),c._UZ(13,"app-input",6),c.qZA(),c.TgZ(14,"div",2)(15,"label",3),c._uU(16,"Password"),c.qZA(),c._UZ(17,"app-input",7),c.qZA(),c.TgZ(18,"div",2)(19,"label",3),c._uU(20,"Confirm Password"),c.qZA(),c._UZ(21,"app-input",8),c.qZA(),c.TgZ(22,"div",2)(23,"label",3),c._uU(24,"Phone Number"),c.qZA(),c._UZ(25,"app-input",9),c.qZA(),c.TgZ(26,"button",10),c._uU(27," Submit "),c.qZA()()),2&t&&(c.Q6J("ngIf",r.showAlert),c.xp6(1),c.Q6J("formGroup",r.registerForm),c.xp6(4),c.Q6J("control",r.name),c.xp6(4),c.Q6J("control",r.email),c.xp6(4),c.Q6J("control",r.age),c.xp6(4),c.Q6J("control",r.password),c.xp6(4),c.Q6J("control",r.confirm_password),c.xp6(4),c.Q6J("control",r.phoneNumber),c.xp6(1),c.Q6J("disabled",r.registerForm.invalid||r.inSubmittion))},directives:[sr,ux,WT,PT,lI,nN],styles:[""]}),n})(),sN=(()=>{class n{constructor(t){this.modal=t}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(MT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,r){1&t&&(c.TgZ(0,"app-modal",0)(1,"p",1),c._uU(2,"Your Account"),c.qZA(),c.TgZ(3,"app-tabs-container")(4,"app-tab",2),c._UZ(5,"app-login"),c.qZA(),c.TgZ(6,"app-tab",3),c._UZ(7,"app-register"),c.qZA()()())},directives:[Mk,Pk,ax,LR,iN],styles:[""]}),n})();function oN(n,e){1&n&&c._UZ(0,"app-auth-modal")}let aN=(()=>{class n{constructor(t){this.auth=t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(c._UZ(0,"app-nav")(1,"router-outlet"),c.YNc(2,oN,1,0,"app-auth-modal",0),c.ALo(3,"async")),2&t&&(c.xp6(2),c.Q6J("ngIf",!c.lcZ(3,1,r.auth.isAuthenticatedWithDelay$)))},directives:[Tk,$l,sr,sN],pipes:[Ya],styles:[""]}),n})(),uN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[is,dM,ZR.forRoot()]]}),n})(),lN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[is,uN,dM,NR]]}),n})();const nA_firebase={apiKey:"AIzaSyAaapwLuJHwgfSTd69HCvVOEw0qXewodlk",authDomain:"clips-42.firebaseapp.com",projectId:"clips-42",storageBucket:"clips-42.appspot.com",messagingSenderId:"107676987763",appId:"1:107676987763:web:425ddf7115e5e99a495506",measurementId:"G-2LK24R1FYZ"};let cN=(()=>{class n{constructor(t,r){this.router=t,this.route=r,this.videoOrder="1"}ngOnInit(){this.route.queryParamMap.subscribe(t=>{this.videoOrder="2"===t.params.sort?t.params.sort:"1"})}sort(t){const{value:r}=t.target;this.router.navigate([],{relativeTo:this.route,queryParams:{sort:r}})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Rr),c.Y36(ps))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-manage"]],decls:112,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],["href","#",1,"font-bold","mb-2"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400"],[1,"hidden"],[1,"text-2xl","font-bold"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeholder","Enter Title",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"a",2),c._uU(3,"Upload Videos"),c.qZA(),c.TgZ(4,"select",3),c.NdJ("change",function(u){return r.sort(u)}),c.TgZ(5,"option",4),c._uU(6,"Recent Uploads"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Oldest Uploads"),c.qZA()()()(),c.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"a",9),c._UZ(13,"img",10),c.qZA(),c.TgZ(14,"div",11)(15,"a",12),c._uU(16," Game Highlighting Clip "),c.qZA(),c.TgZ(17,"a",13),c._uU(18," Copy Link "),c.qZA()(),c.TgZ(19,"div",14)(20,"a",15)(21,"span",16),c._uU(22,"build"),c.qZA()(),c.TgZ(23,"a",17)(24,"span",16),c._uU(25,"delete"),c.qZA()()()(),c.TgZ(26,"div",8)(27,"a",9),c._UZ(28,"img",10),c.qZA(),c.TgZ(29,"div",11)(30,"a",12),c._uU(31," Game Highlighting Clip "),c.qZA(),c.TgZ(32,"a",13),c._uU(33," Copy Link "),c.qZA()(),c.TgZ(34,"div",14)(35,"a",15)(36,"span",16),c._uU(37,"build"),c.qZA()(),c.TgZ(38,"a",17)(39,"span",16),c._uU(40,"delete"),c.qZA()()()(),c.TgZ(41,"div",8)(42,"a",9),c._UZ(43,"img",10),c.qZA(),c.TgZ(44,"div",11)(45,"a",12),c._uU(46," Game Highlighting Clip "),c.qZA(),c.TgZ(47,"a",13),c._uU(48," Copy Link "),c.qZA()(),c.TgZ(49,"div",14)(50,"a",15)(51,"span",16),c._uU(52,"build"),c.qZA()(),c.TgZ(53,"a",17)(54,"span",16),c._uU(55,"delete"),c.qZA()()()(),c.TgZ(56,"div",8)(57,"a",9),c._UZ(58,"img",10),c.qZA(),c.TgZ(59,"div",11)(60,"a",12),c._uU(61," Game Highlighting Clip "),c.qZA(),c.TgZ(62,"a",13),c._uU(63," Copy Link "),c.qZA()(),c.TgZ(64,"div",14)(65,"a",15)(66,"span",16),c._uU(67,"build"),c.qZA()(),c.TgZ(68,"a",17)(69,"span",16),c._uU(70,"delete"),c.qZA()()()(),c.TgZ(71,"div",8)(72,"a",9),c._UZ(73,"img",10),c.qZA(),c.TgZ(74,"div",11)(75,"a",12),c._uU(76," Game Highlighting Clip "),c.qZA(),c.TgZ(77,"a",13),c._uU(78," Copy Link "),c.qZA()(),c.TgZ(79,"div",14)(80,"a",15)(81,"span",16),c._uU(82,"build"),c.qZA()(),c.TgZ(83,"a",17)(84,"span",16),c._uU(85,"delete"),c.qZA()()()(),c.TgZ(86,"div",8)(87,"a",9),c._UZ(88,"img",10),c.qZA(),c.TgZ(89,"div",11)(90,"a",12),c._uU(91," Game Highlighting Clip "),c.qZA(),c.TgZ(92,"a",13),c._uU(93," Copy Link "),c.qZA()(),c.TgZ(94,"div",14)(95,"a",15)(96,"span",16),c._uU(97,"build"),c.qZA()(),c.TgZ(98,"a",17)(99,"span",16),c._uU(100,"delete"),c.qZA()()()()()(),c.TgZ(101,"div",18)(102,"p",19),c._uU(103,"Edit Video"),c.qZA(),c.TgZ(104,"form")(105,"div",20)(106,"label",21),c._uU(107,"Title"),c.qZA(),c._UZ(108,"input",22),c.qZA(),c.TgZ(109,"div",23)(110,"button",24),c._uU(111," Update "),c.qZA()()()()),2&t&&(c.xp6(5),c.Q6J("selected","1"===r.videoOrder),c.xp6(2),c.Q6J("selected","2"===r.videoOrder))},directives:[yd],styles:[""]}),n})(),dN=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-upload"]],decls:25,vars:0,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],[1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],[1,"border-8","cursor-pointer","border-green-400"],["src","assets/img/1.jpg"],[1,"border-8","cursor-pointer","border-transparent"],["src","assets/img/2.jpg"],["src","assets/img/3.jpg"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["type","text",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2),c._uU(3,"Upload Video"),c.qZA(),c.TgZ(4,"div",3)(5,"h5"),c._uU(6,"Drop your file here (mp4 only!)"),c.qZA()(),c.TgZ(7,"div")(8,"form")(9,"h2",4),c._uU(10,"Select a Thumbnail"),c.qZA(),c.TgZ(11,"div",5)(12,"div",6),c._UZ(13,"img",7),c.qZA(),c.TgZ(14,"div",8),c._UZ(15,"img",9),c.qZA(),c.TgZ(16,"div",8),c._UZ(17,"img",10),c.qZA()(),c.TgZ(18,"div",11)(19,"label",12),c._uU(20,"Title"),c.qZA(),c._UZ(21,"input",13),c.qZA(),c.TgZ(22,"div",14)(23,"button",15),c._uU(24," Publish "),c.qZA()()()()()())},styles:[""]}),n})();var hN=N(9635);const rA=(0,Dt.U)(n=>!!n);let iA=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(o,u)=>{const h=o.data.authGuardPipe||(()=>rA);return this.auth.user.pipe((0,cs.q)(1),h(o,u),(0,Dt.U)(m=>"boolean"==typeof m?m:Array.isArray(m)?this.router.createUrlTree(m):this.router.parseUrl(m)))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Rr),c.LFG(xu))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const yM=()=>(0,hN.z)(rA,(0,Dt.U)(e=>e||"/")),gN=[{path:"manage",component:cN,data:{authOnly:!0,authGuardPipe:yM},canActivate:[iA]},{path:"upload",component:dN,data:{authOnly:!0,authGuardPipe:yM},canActivate:[iA]},{path:"manage-clips",redirectTo:"manage"}];let mN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Kl.forChild(gN)],Kl]}),n})(),yN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[is,mN]]}),n})(),_N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[aN]}),n.\u0275inj=c.cJS({providers:[],imports:[[va,lN,Ys.hO.initializeApp(nA_firebase),cw,bk,yN,Uy]]}),n})();(0,c.G48)(),og.Z.initializeApp(nA_firebase);let _M=!1;og.Z.auth().onAuthStateChanged(()=>{_M||gl().bootstrapModule(_N).catch(n=>console.error(n)),_M=!0})},5867:(nt,Ee,N)=>{N.d(Ee,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=N(9681);(0,c.registerVersion)("firebase","9.6.10","app")},127:(nt,Ee,N)=>{N.d(Ee,{Z:()=>c.Z});var c=N(3942);c.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(nt,Ee,N)=>{N.r(Ee);var c=N(5861),Y=N(3942),O=N(2090),te=N(9681),J=N(655),fe=N(1877),se=N(4859);const Ae=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new fe.Yd("@firebase/auth");function et(y,...f){st.logLevel<=fe.in.ERROR&&st.error(`Auth (${te.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw je(y,...f)}function _e(y,...f){return je(y,...f)}function ve(y,f,g){const v=Object.assign(Object.assign({},ze()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function Ge(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(y,"argument-error"),ve(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return ye.create(y,...f)}function ee(y,f,...g){if(!y)throw je(f,...g)}function z(y){const f="INTERNAL ASSERTION FAILED: "+y;throw et(f),new Error(f)}function ne(y,f){y||z(f)}const ge=new Map;function re(y){ne(y instanceof Function,"Expected a class definition");let f=ge.get(y);return f?(ne(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ge.set(y,f),f)}function It(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function zt(){return"http:"===Sn()||"https:"===Sn()}function Sn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class on{constructor(f,g){this.shortDelay=f,this.longDelay=g,ne(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function an(y,f){ne(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class _i{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qi=new on(3e4,6e4);function Wt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ut(y,f,g,v){return er.apply(this,arguments)}function er(){return(er=(0,c.Z)(function*(y,f,g,v,A={}){return ni(y,A,(0,c.Z)(function*(){let R={},q={};v&&("GET"===f?q=v:R={body:JSON.stringify(v)});const oe=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),_i.fetch()(Sr(y,y.config.apiHost,g,oe),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ni(y,f,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Xt),f);try{const A=new Ji(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw Xi(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const oe=R.ok?q.errorMessage:q.error.message,[Ue,Ye]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Xi(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ue)throw Xi(y,"email-already-in-use",q);const yt=v[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw ve(y,yt,Ye);Te(y,yt)}}catch(A){if(A instanceof O.ZR)throw A;Te(y,"network-request-failed")}})).apply(this,arguments)}function Ar(y,f,g,v){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,c.Z)(function*(y,f,g,v,A={}){const R=yield Ut(y,f,g,v,A);return"mfaPendingCredential"in R&&Te(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Sr(y,f,g,v){const A=`${f}${g}?${v}`;return y.config.emulator?an(y.config,A):`${y.config.apiScheme}://${A}`}class Ji{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),Qi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xi(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=_e(y,f,v);return A.customData._tokenResponse=g,A}function jr(){return(jr=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Kn(y,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ri(y,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function hn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ca(){return(ca=(0,c.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),A=rt(v);ee(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:A,token:v,authTime:hn(Bt(A.auth_time)),issuedAtTime:hn(Bt(A.iat)),expirationTime:hn(Bt(A.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Bt(y){return 1e3*Number(y)}function rt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return et("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(et("Failed to decode base64 JWT payload"),null)}catch(A){return et("Caught error parsing JWT payload as JSON",A),null}}function tr(y,f){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Vt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class io{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,c.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class fr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nr(y){return dt.apply(this,arguments)}function dt(){return(dt=(0,c.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),A=yield tr(y,ri(g,{idToken:v}));ee(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const q=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?Ce(R.providerUserInfo):[],oe=Ze(y.providerData,q),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==oe?void 0:oe.length)),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new fr(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,ot)})).apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(y){const f=(0,O.m9)(y);yield nr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ze(y,f){return[...y.filter(v=>!f.some(A=>A.providerId===v.providerId)),...f]}function Ce(y){return y.map(f=>{var{providerId:g}=f,v=(0,J._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ht(){return(ht=(0,c.Z)(function*(y,f){const g=yield ni(y,{},(0,c.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,q=Sr(y,A,"/v1/token",`key=${R}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",_i.fetch()(q,{method:"POST",headers:oe,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ee(f.idToken,"internal-error"),ee(void 0!==f.idToken,"internal-error"),ee(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function vt(y){const f=rt(y);return ee(f,"internal-error"),ee(void 0!==f.exp,"internal-error"),ee(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,c.Z)(function*(){return ee(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:q}=yield function Ke(y,f){return ht.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(A,R,Number(q))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:A,expirationTime:R}=g,q=new Lt;return v&&(ee("string"==typeof v,"internal-error",{appName:f}),q.refreshToken=v),A&&(ee("string"==typeof A,"internal-error",{appName:f}),q.accessToken=A),R&&(ee("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Lt,this.toJSON())}_performRefresh(){return z("not implemented")}}function Nt(y,f){ee("string"==typeof y||void 0===y,"internal-error",{appName:f})}class B{constructor(f){var{uid:g,auth:v,stsTokenManager:A}=f,R=(0,J._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new io(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new fr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const v=yield tr(g,g.stsTokenManager.getToken(g.auth,f));return ee(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function Ts(y){return ca.apply(this,arguments)}(this,f)}reload(){return function pr(y){return Ft.apply(this,arguments)}(this)}_assign(f){this!==f&&(ee(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new B(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,c.Z)(function*(){let A=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield nr(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield tr(f,function lt(y,f){return jr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,A,R,q,oe,Ue,Ye,yt;const ot=null!==(v=g.displayName)&&void 0!==v?v:void 0,Cn=null!==(A=g.email)&&void 0!==A?A:void 0,Zi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Wl=null!==(q=g.photoURL)&&void 0!==q?q:void 0,bu=null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,Iu=null!==(Ue=g._redirectEventId)&&void 0!==Ue?Ue:void 0,$h=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,Ay=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:Qo,emailVerified:pd,isAnonymous:gd,providerData:Hh,stsTokenManager:md}=g;ee(Qo&&md,f,"internal-error");const Rr=Lt.fromJSON(this.name,md);ee("string"==typeof Qo,f,"internal-error"),Nt(ot,f.name),Nt(Cn,f.name),ee("boolean"==typeof pd,f,"internal-error"),ee("boolean"==typeof gd,f,"internal-error"),Nt(Zi,f.name),Nt(Wl,f.name),Nt(bu,f.name),Nt(Iu,f.name),Nt($h,f.name),Nt(Ay,f.name);const Gh=new B({uid:Qo,auth:f,email:Cn,emailVerified:pd,displayName:ot,isAnonymous:gd,photoURL:Wl,phoneNumber:Zi,tenantId:bu,stsTokenManager:Rr,createdAt:$h,lastLoginAt:Ay});return Hh&&Array.isArray(Hh)&&(Gh.providerData=Hh.map(Hp=>Object.assign({},Hp))),Iu&&(Gh._redirectEventId=Iu),Gh}static _fromIdTokenResponse(f,g,v=!1){return(0,c.Z)(function*(){const A=new Lt;A.updateFromServerResponse(g);const R=new B({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:v});return yield nr(R),R})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,c.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,c.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,c.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function ce(y,f,g){return`firebase:${y}:${f}:${g}`}class Q{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:A,name:R}=this.auth;this.fullUserKey=ce(this.userKey,A.apiKey,R),this.fullPersistenceKey=ce("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?B._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Q(re(H),f,v);const A=(yield Promise.all(g.map(function(){var Ye=(0,c.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=A[0]||re(H);const q=ce(v,f.config.apiKey,f.name);let oe=null;for(const Ye of g)try{const yt=yield Ye._get(q);if(yt){const ot=B._fromJSON(f,yt);Ye!==R&&(oe=ot),R=Ye;break}}catch(yt){}const Ue=A.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],oe&&(yield R._set(q,oe.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,c.Z)(function*(yt){if(yt!==R)try{yield yt._remove(q)}catch(ot){}});return function(yt){return Ye.apply(this,arguments)}}())),new Q(R,f,v)):new Q(R,f,v)})()}}function Ve(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(jt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(mt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(At(f))return"Blackberry";if(un(f))return"Webos";if(qt(f))return"Safari";if((f.includes("chrome/")||gr(f))&&!f.includes("edge/"))return"Chrome";if(vn(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function mt(y=(0,O.z$)()){return/firefox\//i.test(y)}function qt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function gr(y=(0,O.z$)()){return/crios\//i.test(y)}function jt(y=(0,O.z$)()){return/iemobile/i.test(y)}function vn(y=(0,O.z$)()){return/android/i.test(y)}function At(y=(0,O.z$)()){return/blackberry/i.test(y)}function un(y=(0,O.z$)()){return/webos/i.test(y)}function Qn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function es(y=(0,O.z$)()){return Qn(y)||vn(y)||un(y)||At(y)||/windows phone/i.test(y)||jt(y)}function ha(y,f=[]){let g;switch(y){case"Browser":g=Ve((0,O.z$)());break;case"Worker":g=`${Ve((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${te.SDK_VERSION}/${v}`}class ii{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=re(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,R;if(!v._deleted&&(v.persistenceManager=yield Q.create(v,f),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var v;let A=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,q=null==A?void 0:A._redirectEventId,oe=yield g.tryRedirectSignIn(f);(!R||R===q)&&(null==oe?void 0:oe.user)&&(A=oe.user)}return A?A._redirectEventId?(ee(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){try{yield nr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function gt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&ee(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){if(!g._deleted)return f&&ee(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,c.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(re(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,c.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&re(f)||g._popupRedirectResolver;ee(v,g,"argument-error"),g.redirectPersistenceManager=yield Q.create(g,[re(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ha(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function Ne(y){return(0,O.m9)(y)}class xt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function On(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class en{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return z("not implemented")}_getIdTokenResponse(f){return z("not implemented")}_linkToIdToken(f,g){return z("not implemented")}_getReauthenticationResolver(f){return z("not implemented")}}function xn(y,f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:resetPassword",Wt(y,f))})).apply(this,arguments)}function Tt(y,f){return No.apply(this,arguments)}function No(){return(No=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Li(y,f){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",Wt(y,f))})).apply(this,arguments)}function ir(){return(ir=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithPassword",Wt(y,f))})).apply(this,arguments)}function ts(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:sendOobCode",Wt(y,f))})).apply(this,arguments)}function sr(y,f){return tn.apply(this,arguments)}function tn(){return(tn=(0,c.Z)(function*(y,f){return ts(y,f)})).apply(this,arguments)}function Za(y,f){return za.apply(this,arguments)}function za(){return(za=(0,c.Z)(function*(y,f){return ts(y,f)})).apply(this,arguments)}function vi(y,f){return si.apply(this,arguments)}function si(){return(si=(0,c.Z)(function*(y,f){return ts(y,f)})).apply(this,arguments)}function Rc(y,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,c.Z)(function*(y,f){return ts(y,f)})).apply(this,arguments)}function $r(){return($r=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",Wt(y,f))})).apply(this,arguments)}function Nc(){return(Nc=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",Wt(y,f))})).apply(this,arguments)}class Ka extends en{constructor(f,g,v,A=null){super("password",v),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Ka(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new Ka(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function xs(y,f){return ir.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Wa(y,f){return $r.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,c.Z)(function*(){switch(v.signInMethod){case"password":return Tt(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function dh(y,f){return Nc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Pn(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithIdp",Wt(y,f))})).apply(this,arguments)}class rs extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new rs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A}=g,R=(0,J._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const q=new rs(v,A);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return Pn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Pn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Pn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function _p(y,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:sendVerificationCode",Wt(y,f))})).apply(this,arguments)}function ks(){return(ks=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,f))})).apply(this,arguments)}function Pc(){return(Pc=(0,c.Z)(function*(y,f){const g=yield Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,f));if(g.temporaryProof)throw Xi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const wp={USER_NOT_FOUND:"user-not-found"};function Fc(){return(Fc=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",Wt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),wp)})).apply(this,arguments)}class Oo extends en{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Oo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Oo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function sl(y,f){return ks.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function vp(y,f){return Pc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Ep(y,f){return Fc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}=f;return v||g||A||R?new Oo({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}):null}}class oo{constructor(f){var g,v,A,R,q,oe;const Ue=(0,O.zd)((0,O.pd)(f)),Ye=null!==(g=Ue.apiKey)&&void 0!==g?g:null,yt=null!==(v=Ue.oobCode)&&void 0!==v?v:null,ot=function Qm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);ee(Ye&&yt&&ot,"argument-error"),this.apiKey=Ye,this.operation=ot,this.code=yt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Ue.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(oe=Ue.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const g=function Qa(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new oo(g)}catch(v){return null}}}let ol=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return Ka._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=oo.parseLink(v);return ee(A,"argument-error"),Ka._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Rs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Hr extends Rs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Po extends Hr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ee("providerId"in g&&"signInMethod"in g,"argument-error"),rs._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ee(f.idToken||f.accessToken,"argument-error"),rs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Po.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Po.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:R,nonce:q,providerId:oe}=f;if(!v&&!A&&!g&&!R||!oe)return null;try{return new Po(oe)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:R})}catch(Ue){return null}}}let ao=(()=>{class y extends Hr{constructor(){super("facebook.com")}static credential(g){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),pa=(()=>{class y extends Hr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Lc=(()=>{class y extends Hr{constructor(){super("github.com")}static credential(g){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class is extends en{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Pn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Pn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Pn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A,pendingToken:R}=g;return v&&A&&R&&v===A?new is(v,R):null}static _create(f,g){return new is(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oi extends Rs{constructor(f){ee(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return oi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return oi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=is.fromJSON(f);return ee(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return is._create(v,g)}catch(A){return null}}}let Ja=(()=>{class y extends Hr{constructor(){super("twitter.com")}static credential(g,v){return rs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Xa(y,f){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signUp",Wt(y,f))})).apply(this,arguments)}class or{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,A=!1){return(0,c.Z)(function*(){const R=yield B._fromIdTokenResponse(f,v,A),q=fh(v);return new or({user:R,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const A=fh(v);return new or({user:f,providerId:A,_tokenResponse:v,operationType:g})})()}}function fh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Vc(){return(Vc=(0,c.Z)(function*(y){var f;const g=Ne(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new or({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Xa(g,{returnSecureToken:!0}),A=yield or._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class tu extends O.ZR{constructor(f,g,v,A){var R;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,tu.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,A){return new tu(f,g,v,A)}}function nu(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?tu._fromErrorAndOperation(y,R,f,v):R})}function ss(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function al(){return(al=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);yield Os(!0,g,f);const{providerUserInfo:v}=yield Kn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=ss(v||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function dn(y,f){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,c.Z)(function*(y,f,g=!1){const v=yield tr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return or._forOperation(y,"link",v)})).apply(this,arguments)}function Os(y,f,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,c.Z)(function*(y,f,g){yield nr(f);const A=!1===y?"provider-already-linked":"no-such-provider";ee(ss(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function Uc(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,c.Z)(function*(y,f,g=!1){const{auth:v}=y,A="reauthenticate";try{const R=yield tr(y,nu(v,A,f,y),g);ee(R.idToken,v,"internal-error");const q=rt(R.idToken);ee(q,v,"internal-error");const{sub:oe}=q;return ee(y.uid===oe,v,"user-mismatch"),or._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Te(v,"user-mismatch"),R}})).apply(this,arguments)}function lo(y,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,c.Z)(function*(y,f,g=!1){const v="signIn",A=yield nu(y,v,f),R=yield or._fromIdTokenResponse(y,v,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Mn(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,c.Z)(function*(y,f){return lo(Ne(y),f)})).apply(this,arguments)}function wi(y,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Os(!1,g,f.providerId),dn(g,f)})).apply(this,arguments)}function Ps(y,f){return os.apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(y,f){return Uc((0,O.m9)(y),f)})).apply(this,arguments)}function ru(y,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,c.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithCustomToken",Wt(y,f))})).apply(this,arguments)}function Ls(){return(Ls=(0,c.Z)(function*(y,f){const g=Ne(y),v=yield ru(g,{token:f,returnSecureToken:!0}),A=yield or._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ft{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?iu._fromServerResponse(f,g):Te(f,"internal-error")}}class iu extends ft{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new iu(g)}}function ya(y,f,g){var v;ee((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ee(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ee(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ou(){return(ou=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&ya(v,A,g),yield Za(v,A)})).apply(this,arguments)}function ul(){return(ul=(0,c.Z)(function*(y,f,g){yield xn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function be(){return(be=(0,c.Z)(function*(y,f){yield Li((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ot(y,f){return cl.apply(this,arguments)}function cl(){return(cl=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield xn(g,{oobCode:f}),A=v.requestType;switch(ee(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,g,"internal-error");default:ee(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=ft._fromServerResponse(Ne(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Lo(){return(Lo=(0,c.Z)(function*(y,f){const{data:g}=yield Ot((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(y,f,g){const v=Ne(y),A=yield Xa(v,{returnSecureToken:!0,email:f,password:g}),R=yield or._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Bc(){return(Bc=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};ee(g.handleCodeInApp,v,"argument-error"),g&&ya(v,A,g),yield vi(v,A)})).apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=ol.credentialWithLink(f,g||It());return ee(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Mn(v,A)})).apply(this,arguments)}function ar(y,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:createAuthUri",Wt(y,f))})).apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(y,f){const v={identifier:f,continueUri:zt()?It():"http://localhost"},{signinMethods:A}=yield ar((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function pl(){return(pl=(0,c.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ya(g.auth,A,f);const{email:R}=yield sr(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function du(){return(du=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ya(v.auth,R,g);const{email:q}=yield Rc(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function gl(y,f){return _a.apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(y,f){return Ut(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ml(){return(ml=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield tr(v,gl(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const oe=v.providerData.find(({providerId:Ue})=>"password"===Ue);oe&&(oe.displayName=v.displayName,oe.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function _l(y,f,g){return co.apply(this,arguments)}function co(){return(co=(0,c.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield tr(y,Tt(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ho{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Hc extends ho{constructor(f,g,v,A){super(f,g,v),this.username=A}}class Gc extends ho{constructor(f,g){super(f,"facebook.com",g)}}class fo extends Hc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Bs extends ho{constructor(f,g){super(f,"google.com",g)}}class vl extends Hc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function _r(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function $c(y){var f,g;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ho(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new Gc(R,A);case"github.com":return new fo(R,A);case"google.com":return new Bs(R,A);case"twitter.com":return new vl(R,A,y.screenName||null);case"custom":case"anonymous":return new ho(R,null);default:return new ho(R,v,A)}}(g)}class as{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new as("enroll",f)}static _fromMfaPendingCredential(f){return new as("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return as._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return as._fromIdtoken(f.multiFactorSession.idToken)}return null}}class wa{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=Ne(f),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(oe=>ft._fromServerResponse(v,oe));ee(A.mfaPendingCredential,v,"internal-error");const q=as._fromMfaPendingCredential(A.mfaPendingCredential);return new wa(q,R,function(){var oe=(0,c.Z)(function*(Ue){const Ye=yield Ue._process(v,q);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const ot=yield or._fromIdTokenResponse(v,g.operationType,yt);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return ee(g.user,v,"internal-error"),or._forOperation(g.user,g.operationType,yt);default:Te(v,"internal-error")}});return function(Ue){return oe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Fn(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:start",Wt(y,f))}class us{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>ft._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new us(f)}getSession(){var f=this;return(0,c.Z)(function*(){return as._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,c.Z)(function*(){const A=f,R=yield v.getSession(),q=yield tr(v.user,A._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){const v="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),R=yield tr(g.user,function Ip(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Uo=new WeakMap,bl="__sak";class po{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(bl,"1"),this.storage.removeItem(bl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class y extends po{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Wc(){const y=(0,O.z$)();return qt(y)||Qn(y)}()&&function $n(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=es(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),R=this.localCache[v];A!==R&&g(v,R,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((oe,Ue,Ye)=>{this.notifyListeners(oe,Ye)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(g.newValue!==oe)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const R=()=>{const oe=this.storage.getItem(A);!v&&this.localCache[A]===oe||this.notifyListeners(A,oe)},q=this.storage.getItem(A);!function da(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,R=this;return(0,c.Z)(function*(){yield A().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,c.Z)(function*(){const R=yield v().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,A=this;return(0,c.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),ur=(()=>{class y extends po{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let xr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,c.Z)(function*(){const A=g,{eventId:R,eventType:q,data:oe}=A.data,Ue=v.handlersMap[q];if(!(null==Ue?void 0:Ue.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Ye=Array.from(Ue).map(function(){var ot=(0,c.Z)(function*(Cn){return Cn(A.origin,oe)});return function(Cn){return ot.apply(this,arguments)}}()),yt=yield function zr(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:yt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Bo(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Kc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var A=this;return(0,c.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,oe;return new Promise((Ue,Ye)=>{const yt=Bo("",20);R.port1.start();const ot=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);oe={messageChannel:R,onMessage(Cn){const Zi=Cn;if(Zi.data.eventId===yt)switch(Zi.data.status){case"ack":clearTimeout(ot),q=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ue(Zi.data.response);break;default:clearTimeout(ot),clearTimeout(q),Ye(new Error("invalid_response"))}}},A.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:f,eventId:yt,data:g},[R.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function cn(){return window}function bi(){return void 0!==cn().WorkerGlobalScope&&"function"==typeof cn().importScripts}function ui(){return(ui=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Il="firebaseLocalStorageDb",go="firebaseLocalStorage",Nn="fbase_key";class ls{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function jo(y,f){return y.transaction([go],f?"readwrite":"readonly").objectStore(go)}function $s(){const y=indexedDB.open(Il,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(go,{keyPath:Nn})}catch(A){g(A)}}),y.addEventListener("success",(0,c.Z)(function*(){const v=y.result;v.objectStoreNames.contains(go)?f(v):(v.close(),yield function li(){const y=indexedDB.deleteDatabase(Il);return new ls(y).toPromise()}(),f(yield $s()))}))})}function Ea(y,f,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(y,f,g){const v=jo(y,!0).put({[Nn]:f,value:g});return new ls(v).toPromise()})).apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(y,f){const g=jo(y,!1).get(f),v=yield new ls(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ui(y,f){const g=jo(y,!0).delete(f);return new ls(g).toPromise()}const Ii=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield $s()),g.db})()}_withRetries(g){var v=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(A++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return bi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=xr._getInstance(function Yc(){return bi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,c.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,c.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function fu(){return ui.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Kc(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,c.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Dt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield $s();return yield Ea(g,bl,"1"),yield Ui(g,bl),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,c.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(R=>Ea(R,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,c.Z)(function*(){const A=yield v._withRetries(R=>function Cl(y,f){return Hs.apply(this,arguments)}(R,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,c.Z)(function*(){return v._withPendingWrite((0,c.Z)(function*(){return yield v._withRetries(A=>Ui(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const v=yield g._withRetries(q=>{const oe=jo(q,!1).getAll();return new ls(oe).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:q,value:oe}of v)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(oe)&&(g.notifyListeners(q,oe),A.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ho(y,f){return Ut(y,"POST","/v2/accounts/mfaSignIn:start",Wt(y,f))}function Ci(){return(Ci=(0,c.Z)(function*(y){return(yield Ut(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function En(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=A=>{const R=_e("internal-error");R.customData=A,g(R)},v.type="text/javascript",v.charset="UTF-8",function Jc(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function cs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const wr=1e12;class Bi{constructor(f){this.auth=f,this.counter=wr,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new ji(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||wr;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||wr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var v;return null===(v=g._widgets.get(f||wr))||void 0===v||v.execute(),""})()}}class ji{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;ee(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gn(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gs=cs("rcb"),Xc=new on(3e4,6e4);class Dp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cn().grecaptcha}load(f,g=""){return ee(function Tp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(cn().grecaptcha):new Promise((v,A)=>{const R=cn().setTimeout(()=>{A(_e(f,"network-request-failed"))},Xc.get());cn()[Gs]=()=>{cn().clearTimeout(R),delete cn()[Gs];const oe=cn().grecaptcha;if(!oe)return void A(_e(f,"internal-error"));const Ue=oe.render;oe.render=(Ye,yt)=>{const ot=Ue(Ye,yt);return this.counter++,ot},this.hostLanguage=g,v(oe)},En(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Gs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!cn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ap{load(f){return(0,c.Z)(function*(){return new Bi(f)})()}clearedOneInstance(){}}const qs="recaptcha",Wr={theme:"light",type:"image"};class Sp{constructor(f,g=Object.assign({},Wr),v){this.parameters=g,this.type=qs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;ee(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ap:new Dp,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const q=oe=>{!oe||(f.tokenChangeListeners.delete(q),R(oe))};f.tokenChangeListeners.add(q),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=cn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){ee(zt()&&!bi(),f.auth,"internal-error"),yield function Zs(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function vr(y){return Ci.apply(this,arguments)}(f.auth);ee(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ds{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Oo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function mn(){return(mn=(0,c.Z)(function*(y,f,g){const v=Ne(y),A=yield Er(v,f,(0,O.m9)(g));return new ds(A,R=>Mn(v,R))})).apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Os(!1,v,"phone");const A=yield Er(v.auth,f,(0,O.m9)(g));return new ds(A,R=>wi(v,R))})).apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=yield Er(v.auth,f,(0,O.m9)(g));return new ds(A,R=>Ps(v,R))})).apply(this,arguments)}function Er(y,f,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,c.Z)(function*(y,f,g){var v;const A=yield g.verify();try{let R;if(ee("string"==typeof A,y,"argument-error"),ee(g.type===qs,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return ee("enroll"===q.type,y,"internal-error"),(yield Fn(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ee("signin"===q.type,y,"internal-error");const oe=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ee(oe,y,"missing-multi-factor-info"),(yield Ho(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield _p(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return q}}finally{g._reset()}})).apply(this,arguments)}function hs(){return(hs=(0,c.Z)(function*(y,f){yield dn((0,O.m9)(y),f)})).apply(this,arguments)}let Ti=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Ne(g)}verifyPhoneNumber(g,v){return Er(this.auth,g,(0,O.m9)(v))}static credential(g,v){return Oo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?Oo._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function $i(y,f){return f?re(f):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ca extends en{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Pn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Pn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Pn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Ml(y){return lo(y.auth,new Ca(y),y.bypassAuthState)}function kl(y){const{auth:f,user:g}=y;return ee(g,f,"internal-error"),Uc(g,new Ca(y),y.bypassAuthState)}function Mt(y){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return ee(g,f,"internal-error"),dn(g,new Ca(y),y.bypassAuthState)})).apply(this,arguments)}class Hn{constructor(f,g,v,A,R=!1){this.auth=f,this.resolver=v,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(v,A){f.pendingPromise={resolve:v,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:R,tenantId:q,error:oe,type:Ue}=f;if(oe)return void g.reject(oe);const Ye={auth:g.auth,requestUri:v,sessionId:A,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ue)(Ye))}catch(yt){g.reject(yt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Ml;case"linkViaPopup":case"linkViaRedirect":return Mt;case"reauthViaPopup":case"reauthViaRedirect":return kl;default:Te(this.auth,"internal-error")}}resolve(f){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nl=new on(2e3,1e4);function ed(){return(ed=(0,c.Z)(function*(y,f,g){const v=Ne(y);Ge(y,f,Rs);const A=$i(v,g);return new Gi(v,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function pu(){return(pu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ge(v.auth,f,Rs);const A=$i(v.auth,g);return new Gi(v.auth,"reauthViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}function gu(){return(gu=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ge(v.auth,f,Rs);const A=$i(v.auth,g);return new Gi(v.auth,"linkViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}let Gi=(()=>{class y extends Hn{constructor(g,v,A,R,q){super(g,v,R,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const v=yield g.execute();return ee(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,c.Z)(function*(){ne(1===g.filter.length,"Popup operations only handle one event");const v=Bo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Nl.get())};g()}}return y.currentPopupAction=null,y})();const qi=new Map;class Gn extends Hn{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let v=qi.get(g.auth._key());if(!v){try{const R=(yield function di(y,f){return Ol.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(A){v=()=>Promise.reject(A)}qi.set(g.auth._key(),v)}return g.bypassAuthState||qi.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const A=yield v.auth._redirectUserForId(f.eventId);if(A)return v.user=A,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Ol(){return(Ol=(0,c.Z)(function*(y,f){const g=D(f),v=I(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function yo(y,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,c.Z)(function*(y,f){return I(y)._set(D(f),"true")})).apply(this,arguments)}function I(y){return re(y._redirectPersistence)}function D(y){return ce("pendingRedirect",y.config.apiKey,y.name)}function W(){return(W=(0,c.Z)(function*(y,f,g){const v=Ne(y);Ge(y,f,Rs);const A=$i(v,g);return yield yo(A,v),A._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ge(v.auth,f,Rs);const A=$i(v.auth,g);yield yo(A,v.auth);const R=yield _o(v);return A._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function St(){return(St=(0,c.Z)(function*(y,f,g){const v=(0,O.m9)(y);Ge(v.auth,f,Rs);const A=$i(v.auth,g);yield Os(!1,v,f.providerId),yield yo(A,v.auth);const R=yield _o(v);return A._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Ln(){return(Ln=(0,c.Z)(function*(y,f){return yield Ne(y)._initializationPromise,In(y,f,!1)})).apply(this,arguments)}function In(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,c.Z)(function*(y,f,g=!1){const v=Ne(y),A=$i(v,f),q=yield new Gn(v,A,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,f)),q})).apply(this,arguments)}function _o(y){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,c.Z)(function*(y){const f=Bo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ai{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Pl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nd(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!nd(f)){const A=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vo(f))}saveEventToCache(f){this.cachedEventUids.add(vo(f)),this.lastProcessedEventTime=Date.now()}}function vo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function nd({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Fl(y){return Da.apply(this,arguments)}function Da(){return(Da=(0,c.Z)(function*(y,f={}){return Ut(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Mp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ey=/^https?/;function fs(){return(fs=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Fl(y);for(const g of f)try{if(Ll(g))return}catch(v){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function Ll(y){const f=It(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!ey.test(g))return!1;if(Mp.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const ny=new on(3e4,6e4);function ry(){const y=cn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let rd=null;function iy(y){return rd=rd||function kp(y){return new Promise((f,g)=>{var v,A,R;function q(){ry(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ry(),g(_e(y,"network-request-failed"))},timeout:ny.get()})}if(null===(A=null===(v=cn().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=cn().gapi)||void 0===R?void 0:R.load)){const oe=cs("iframefcb");return cn()[oe]=()=>{gapi.load?q():g(_e(y,"network-request-failed"))},En(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ue=>g(Ue))}q()}}).catch(f=>{throw rd=null,f})}(y),rd}const mh=new on(5e3,15e3),Eo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},id=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ta(y){const f=y.config;ee(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?an(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:te.SDK_VERSION},A=id.get(y.config.apiHost);A&&(v.eid=A);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function ps(){return ps=(0,c.Z)(function*(y){const f=yield iy(y),g=cn().gapi;return ee(g,y,"internal-error"),f.open({where:document.body,url:Ta(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eo,dontclear:!0},v=>new Promise(function(){var A=(0,c.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const oe=_e(y,"network-request-failed"),Ue=cn().setTimeout(()=>{q(oe)},mh.get());function Ye(){cn().clearTimeout(Ue),R(v)}v.ping(Ye).then(Ye,()=>{q(oe)})});return function(R,q){return A.apply(this,arguments)}}()))}),ps.apply(this,arguments)}const oy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ad{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function wh(y,f,g,v,A,R){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:te.SDK_VERSION,eventId:A};if(f instanceof Rs){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,Ye]of Object.entries(R||{}))q[Ue]=Ye}if(f instanceof Hr){const Ue=f.getScopes().filter(Ye=>""!==Ye);Ue.length>0&&(q.scopes=Ue.join(","))}y.tenantId&&(q.tid=y.tenantId);const oe=q;for(const Ue of Object.keys(oe))void 0===oe[Ue]&&delete oe[Ue];return`${function uy({config:y}){return y.emulator?an(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(oe).slice(1)}`}const Ws="webStorageSupport";class Eh extends class Rp{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return z("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Eh(f)}_finalizeEnroll(f,g,v){return function Zc(y,f){return Ut(y,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ba(y,f){return Ut(y,"POST","/v2/accounts/mfaSignIn:finalize",Wt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ly=(()=>{class y{constructor(){}static assertion(g){return Eh._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var cy="@firebase/auth",bh="0.19.11";class Np{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var A;f((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ks(){return window}function vu(){return(vu=(0,c.Z)(function*(y,f,g){var v;const{BuildInfo:A}=Ks();ne(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Aa(f.sessionId),q={};return Qn()?q.ibi=A.packageName:vn()?q.apn=A.packageName:Te(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=R,wh(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(y){const{BuildInfo:f}=Ks(),g={};Qn()?g.iosBundleId=f.packageName:vn()?g.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Fl(y,g)})).apply(this,arguments)}function ld(){return(ld=(0,c.Z)(function*(y,f,g){const{cordova:v}=Ks();let A=()=>{};try{yield new Promise((R,q)=>{let oe=null;function Ue(){var ot;R();const Cn=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Cn&&Cn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ye(){oe||(oe=window.setTimeout(()=>{q(_e(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Ue),document.addEventListener("resume",Ye,!1),vn()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",yt,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function Aa(y){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,c.Z)(function*(y){const f=wu(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wu(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function hy(y){(0,te._registerComponent)(new se.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=v.options;return((oe,Ue)=>{ee(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),ee(!(null==q?void 0:q.includes(":")),"argument-error",{appName:oe.name});const Ye={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ha(y)},yt=new ii(oe,Ue,Ye);return function ae(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(re);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(yt,g),yt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new se.wA("auth-internal",f=>{const g=Ne(f.getProvider("auth").getImmediate());return new Np(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(cy,bh,function dy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,te.registerVersion)(cy,bh,"esm2017")}("Browser");class Th extends Ai{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Bl(y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,c.Z)(function*(y){const f=yield $l()._get(Sh(y));return f&&(yield $l()._remove(Sh(y))),f})).apply(this,arguments)}function jl(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function $l(){return re(Rn)}function Sh(y){return ce("authEvent",y.config.apiKey,y.name)}function dd(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function hd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Lp(y=(0,O.z$)()){return!("file:"!==hd()&&"ionic:"!==hd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){try{const y=self.localStorage,f=Bo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Yo(y=(0,O.z$)()){return function yy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function _y(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return bo()&&(0,O.hl)()}return!1}function bo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ql(){return(function my(){return"http:"===hd()||"https:"===hd()}()||(0,O.ru)()||Lp())&&!function fd(){return(0,O.b$)()||(0,O.UG)()}()&&br()&&!bo()}function Nh(){return Lp()&&"undefined"!=typeof document}function Sa(){return(Sa=(0,c.Z)(function*(){return!!Nh()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const xi={LOCAL:"local",NONE:"none",SESSION:"session"},xa=ee,Ph="persistence";function Ma(y){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,c.Z)(function*(y){yield y._initializationPromise;const f=Zl(),g=ce(Ph,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Zl(){var y;try{return(null===(y=function Oh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const vy=ee;class fi{constructor(){this.browserResolver=re(class Wo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ur,this._completeRedirectFn=In}_openPopup(f,g,v,A){var R=this;return(0,c.Z)(function*(){var q;ne(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const oe=wh(f,g,v,It(),A);return function ud(y,f,g,v=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let oe="";const Ue=Object.assign(Object.assign({},oy),{width:v.toString(),height:A.toString(),top:R,left:q}),Ye=(0,O.z$)().toLowerCase();g&&(oe=gr(Ye)?"_blank":g),mt(Ye)&&(f=f||"http://localhost",Ue.scrollbars="yes");const yt=Object.entries(Ue).reduce((Cn,[Zi,Wl])=>`${Cn}${Zi}=${Wl},`,"");if(function qa(y=(0,O.z$)()){var f;return Qn(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==oe)return function vh(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",oe),new ad(null);const ot=window.open(f||"",oe,yt);ee(ot,y,"popup-blocked");try{ot.focus()}catch(Cn){}return new ad(ot)}(f,oe,Bo())})()}_openRedirect(f,g,v,A){var R=this;return(0,c.Z)(function*(){return yield R._originValidation(f),function gh(y){cn().location.href=y}(wh(f,g,v,It(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(ne(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const v=yield function sy(y){return ps.apply(this,arguments)}(f),A=new Ai(f);return v.register("authEvent",R=>(ee(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=v,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ws,{type:Ws},A=>{var R;const q=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Ws];void 0!==q&&g(!!q),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ty(y){return fs.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return es()||qt()||Qn()}}),this.cordovaResolver=re(class kh{constructor(){this._redirectPersistence=ur,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=In}_initialize(f){var g=this;return(0,c.Z)(function*(){const v=f._key();let A=g.eventManagers.get(v);return A||(A=new Th(f),g.eventManagers.set(v,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,A){var R=this;return(0,c.Z)(function*(){!function cd(y){var f,g,v,A,R,q,oe,Ue,Ye,yt;const ot=Ks();ee("function"==typeof(null===(f=null==ot?void 0:ot.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(g=null==ot?void 0:ot.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(R=null===(A=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ue=null===(oe=null===(q=null==ot?void 0:ot.cordova)||void 0===q?void 0:q.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(yt=null===(Ye=null==ot?void 0:ot.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function mu(){qi.clear()}(),yield R._originValidation(f);const oe=function Ah(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:jl(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(f,v,A);yield function g0(y,f){return $l()._set(Sh(y),f)}(f,oe);const Ue=yield function Ih(y,f,g){return vu.apply(this,arguments)}(f,oe,g),Ye=yield function Ul(y){const{cordova:f}=Ks();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let A=null;v?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function so(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Ue);return function Op(y,f,g){return ld.apply(this,arguments)}(f,q,Ye)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Ch(y){return Si.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:R}=Ks(),q=setTimeout((0,c.Z)(function*(){yield Bl(f),g.onEvent(Rh())}),500),oe=function(){var yt=(0,c.Z)(function*(ot){clearTimeout(q);const Cn=yield Bl(f);let Zi=null;Cn&&(null==ot?void 0:ot.url)&&(Zi=function py(y,f){var g,v;const A=function Hl(y){const f=dd(y),g=f.link?decodeURIComponent(f.link):void 0,v=dd(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return dd(A).link||A||v||g||y}(f);if(A.includes("/__/auth/callback")){const R=dd(A),q=R.firebaseError?function xh(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ue=oe?_e(oe):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Cn,ot.url)),g.onEvent(Zi||Rh())});return function(Cn){return yt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,oe);const Ue=A,Ye=`${R.packageName.toLowerCase()}://`;Ks().handleOpenURL=function(){var yt=(0,c.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ye)&&oe({url:ot}),"function"==typeof Ue)try{Ue(ot)}catch(Cn){console.error(Cn)}});return function(ot){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ur,this._completeRedirectFn=In}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,A){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,A)})()}_openRedirect(f,g,v,A){var R=this;return(0,c.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Nh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function kr(){return Sa.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Bp(y){return y.unwrap()}function ka(y){return jp(y)}function jp(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ti.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=pa;break;case"facebook.com":v=ao;break;case"github.com":v=Lc;break;case"twitter.com":v=Ja;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:oe,nonce:Ue}=f;return R||q||A||oe?oe?g.startsWith("saml.")?is._create(g,oe):rs._fromParams({providerId:g,signInMethod:g,pendingToken:oe,idToken:A,accessToken:R}):new Po(g).credential({idToken:A,accessToken:R,rawNonce:Ue}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Ir(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Ey(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new by(y,function hu(y,f){var g;const v=(0,O.m9)(y),A=f;return ee(f.customData.operationType,v,"argument-error"),ee(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),wa._fromError(v,A)}(y,f));else if(v){const A=jp(f),R=f;A&&(R.credential=A,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:ka(g),additionalUserInfo:_r(g),user:Io.getOrCreate(A)}})}function Lh(y,f){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>Ir(y,g.confirm(v))}})).apply(this,arguments)}class by{constructor(f,g){this.resolver=g,this.auth=function wy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ir(Bp(this.auth),this.resolver.resolveSignIn(f))}}class Io{constructor(f){this._delegate=f,this.multiFactor=function zc(y){const f=(0,O.m9)(y);return Uo.has(f)||Uo.set(f,us._fromUser(f)),Uo.get(f)}(f)}static getOrCreate(f){return Io.USER_MAP.has(f)||Io.USER_MAP.set(f,new Io(f)),Io.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return Ir(g.auth,wi(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,c.Z)(function*(){return Lh(v.auth,function Al(y,f,g){return qo.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return Ir(g.auth,function Hi(y,f,g){return gu.apply(this,arguments)}(g._delegate,f,fi))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ma(Ne(g.auth)),function We(y,f,g){return function wt(y,f,g){return St.apply(this,arguments)}(y,f,g)}(g._delegate,f,fi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return Ir(g.auth,Ps(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Lh(this.auth,function xp(y,f,g){return Sl.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ir(this.auth,function mo(y,f,g){return pu.apply(this,arguments)}(this._delegate,f,fi))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Ma(Ne(g.auth)),function X(y,f,g){return function Se(y,f,g){return xe.apply(this,arguments)}(y,f,g)}(g._delegate,f,fi)})()}sendEmailVerification(f){return function Ei(y,f){return pl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function ga(y,f){return al.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function yl(y,f){return _l((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function jc(y,f){return _l((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function xl(y,f){return hs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function va(y,f){return ml.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function cu(y,f,g){return du.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Io.USER_MAP=new WeakMap;const zl=ee;let Uh=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;zl(A,"invalid-api-key",{appName:g.name}),zl(A,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?fi:void 0;this._delegate=v.initialize({options:{persistence:Iy(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function ln(y,f,g){const v=Ne(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=rr(f),{host:q,port:oe}=function As(y){const f=rr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const R=A[1];return{host:R,port:On(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:On(q)}}}(f);v.config.emulator={url:`${R}//${q}${null===oe?"":`:${oe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Fi(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function ll(y,f){return be.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ot(this._delegate,g)}confirmPasswordReset(g,v){return function au(y,f,g){return ul.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,c.Z)(function*(){return Ir(A._delegate,function Vo(y,f,g){return Zr.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function lu(y,f){return Us.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function fl(y,f){const g=oo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){zl(ql(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Ct(y,f){return Ln.apply(this,arguments)}(g._delegate,fi);return v?Ir(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Fp(y,f){Ne(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:R,error:q,complete:oe}=Bh(g,v,A);return this._delegate.onAuthStateChanged(R,q,oe)}onIdTokenChanged(g,v,A){const{next:R,error:q,complete:oe}=Bh(g,v,A);return this._delegate.onIdTokenChanged(R,q,oe)}sendSignInLinkToEmail(g,v){return function hl(y,f,g){return Bc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function su(y,f,g){return ou.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,c.Z)(function*(){let A;switch(function Vp(y,f){xa(Object.values(xi).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?xa(f!==xi.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?xa(f===xi.NONE,y,"unsupported-persistence-type"):bo()?xa(f===xi.NONE||f===xi.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):xa(f===xi.NONE||br(),y,"unsupported-persistence-type")}(v._delegate,g),g){case xi.SESSION:A=ur;break;case xi.LOCAL:A=(yield re(Ii)._isAvailable())?Ii:Rn;break;case xi.NONE:A=H;break;default:return Te("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ir(this._delegate,function eu(y){return Vc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ir(this._delegate,Mn(this._delegate,g))}signInWithCustomToken(g){return Ir(this._delegate,function Fs(y,f){return Ls.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Ir(this._delegate,function dl(y,f,g){return Mn((0,O.m9)(y),ol.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Ir(this._delegate,function uu(y,f,g){return Vs.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Lh(this._delegate,function Ia(y,f,g){return mn.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,c.Z)(function*(){return zl(ql(),v._delegate,"operation-not-supported-in-this-environment"),Ir(v._delegate,function zs(y,f,g){return ed.apply(this,arguments)}(v._delegate,g,fi))})()}signInWithRedirect(g){var v=this;return(0,c.Z)(function*(){return zl(ql(),v._delegate,"operation-not-supported-in-this-environment"),yield Ma(v._delegate),function M(y,f,g){return function F(y,f,g){return W.apply(this,arguments)}(y,f,g)}(v._delegate,g,fi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function fn(y,f){return Lo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=xi,y})();function Bh(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const A=v;return{next:q=>A(q&&Io.getOrCreate(q)),error:f,complete:g}}function Iy(y,f){const g=function Up(y,f){const g=Zl();if(!g)return[];const v=ce(Ph,y,f);switch(g.getItem(v)){case xi.NONE:return[H];case xi.LOCAL:return[Ii,ur];case xi.SESSION:return[ur];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ii)&&g.push(Ii),"undefined"!=typeof window)for(const v of[Rn,ur])g.includes(v)||g.push(v);return g.includes(H)||g.push(H),g}class jh{constructor(){this.providerId="phone",this._delegate=new Ti(Bp(Y.Z.auth()))}static credential(f,g){return Ti.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}jh.PHONE_SIGN_IN_METHOD=Ti.PHONE_SIGN_IN_METHOD,jh.PROVIDER_ID=Ti.PROVIDER_ID;const Cy=ee;class Dy{constructor(f,g,v=Y.Z.app()){var A;Cy(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Sp(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $p(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Uh(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ol,FacebookAuthProvider:ao,GithubAuthProvider:Lc,GoogleAuthProvider:pa,OAuthProvider:Po,SAMLAuthProvider:oi,PhoneAuthProvider:jh,PhoneMultiFactorGenerator:ly,RecaptchaVerifier:Dy,TwitterAuthProvider:Ja,Auth:Uh,AuthCredential:en,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Y.Z)},9751:(nt,Ee,N)=>{N.d(Ee,{y:()=>de});var c=N(930),Y=N(727),O=N(8822),te=N(9635),J=N(2416),fe=N(576),se=N(2806);let de=(()=>{class Z{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Ae=new Z;return Ae.source=this,Ae.operator=Me,Ae}subscribe(Me,Ae,ze){const ye=function $(Z){return Z&&Z instanceof c.Lv||function j(Z){return Z&&(0,fe.m)(Z.next)&&(0,fe.m)(Z.error)&&(0,fe.m)(Z.complete)}(Z)&&(0,Y.Nn)(Z)}(Me)?Me:new c.Hp(Me,Ae,ze);return(0,se.x)(()=>{const{operator:we,source:st}=this;ye.add(we?we.call(ye,st):st?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Ae){Me.error(Ae)}}forEach(Me,Ae){return new(Ae=ue(Ae))((ze,ye)=>{const we=new c.Hp({next:st=>{try{Me(st)}catch(et){ye(et),we.unsubscribe()}},error:ye,complete:ze});this.subscribe(we)})}_subscribe(Me){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(Me)}[O.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=ue(Me))((Ae,ze)=>{let ye;this.subscribe(we=>ye=we,we=>ze(we),()=>Ae(ye))})}}return Z.create=He=>new Z(He),Z})();function ue(Z){var He;return null!==(He=null!=Z?Z:J.v.Promise)&&void 0!==He?He:Promise}},7579:(nt,Ee,N)=>{N.d(Ee,{x:()=>se});var c=N(9751),Y=N(727);const te=(0,N(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=N(8737),fe=N(2806);let se=(()=>{class ue extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Z=new de(this,this);return Z.operator=$,Z}_throwIfClosed(){if(this.closed)throw new te}next($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next($)}})}error($){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Z}=this;for(;Z.length;)Z.shift().error($)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Z,isStopped:He,observers:Me}=this;return Z||He?Y.Lc:(this.currentObservers=null,Me.push($),new Y.w0(()=>{this.currentObservers=null,(0,J.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:Z,thrownError:He,isStopped:Me}=this;Z?$.error(He):Me&&$.complete()}asObservable(){const $=new c.y;return $.source=this,$}}return ue.create=(j,$)=>new de(j,$),ue})();class de extends se{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Z||Z.call($,j)}error(j){var $,Z;null===(Z=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Z||Z.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,Z;return null!==(Z=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==Z?Z:Y.Lc}}},930:(nt,Ee,N)=>{N.d(Ee,{Hp:()=>ze,Lv:()=>Z});var c=N(576),Y=N(727),O=N(2416),te=N(7849),J=N(5032);const fe=ue("C",void 0,void 0);function ue(Te,_e,ve){return{kind:Te,value:_e,error:ve}}var j=N(3410),$=N(2806);class Z extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=et}static create(_e,ve,Ge){return new ze(_e,ve,Ge)}next(_e){this.isStopped?st(function de(Te){return ue("N",Te,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?st(function se(Te){return ue("E",void 0,Te)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?st(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Me(Te,_e){return He.call(Te,_e)}class Ae{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch(Ge){ye(Ge)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch(Ge){ye(Ge)}else ye(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){ye(ve)}}}class ze extends Z{constructor(_e,ve,Ge){let je;if(super(),(0,c.m)(_e)||!_e)je={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=Ge?Ge:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(_e),ee.unsubscribe=()=>this.unsubscribe(),je={next:_e.next&&Me(_e.next,ee),error:_e.error&&Me(_e.error,ee),complete:_e.complete&&Me(_e.complete,ee)}):je=_e}this.destination=new Ae(je)}}function ye(Te){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Te):(0,te.h)(Te)}function st(Te,_e){const{onStoppedNotification:ve}=O.v;ve&&j.z.setTimeout(()=>ve(Te,_e))}const et={closed:!0,next:J.Z,error:function we(Te){throw Te},complete:J.Z}},727:(nt,Ee,N)=>{N.d(Ee,{Lc:()=>fe,w0:()=>J,Nn:()=>se});var c=N(576);const O=(0,N(3888).d)(ue=>function($){ue(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Z,He)=>`${He+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var te=N(8737);class J{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:Z}=this;if((0,c.m)(Z))try{Z()}catch(Me){j=Me instanceof O?Me.errors:[Me]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Me of He)try{de(Me)}catch(Ae){j=null!=j?j:[],Ae instanceof O?j=[...j,...Ae.errors]:j.push(Ae)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)de(j);else{if(j instanceof J){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,te.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,te.P)($,j),j instanceof J&&j._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const fe=J.EMPTY;function se(ue){return ue instanceof J||ue&&"closed"in ue&&(0,c.m)(ue.remove)&&(0,c.m)(ue.add)&&(0,c.m)(ue.unsubscribe)}function de(ue){(0,c.m)(ue)?ue():ue.unsubscribe()}},2416:(nt,Ee,N)=>{N.d(Ee,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ee,N)=>{N.d(Ee,{E:()=>Y});const Y=new(N(9751).y)(J=>J.complete())},8996:(nt,Ee,N)=>{N.d(Ee,{D:()=>_e});var c=N(8421),Y=N(5363),O=N(9468),fe=N(9751),de=N(2202),ue=N(576),j=N(9672);function Z(ve,Ge){if(!ve)throw new Error("Iterable cannot be null");return new fe.y(je=>{(0,j.f)(je,Ge,()=>{const ee=ve[Symbol.asyncIterator]();(0,j.f)(je,Ge,()=>{ee.next().then(z=>{z.done?je.complete():je.next(z.value)})},0,!0)})})}var He=N(3670),Me=N(8239),Ae=N(1144),ze=N(6495),ye=N(2206),we=N(4532),st=N(3260);function _e(ve,Ge){return Ge?function Te(ve,Ge){if(null!=ve){if((0,He.c)(ve))return function te(ve,Ge){return(0,c.Xf)(ve).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(ve,Ge);if((0,Ae.z)(ve))return function se(ve,Ge){return new fe.y(je=>{let ee=0;return Ge.schedule(function(){ee===ve.length?je.complete():(je.next(ve[ee++]),je.closed||this.schedule())})})}(ve,Ge);if((0,Me.t)(ve))return function J(ve,Ge){return(0,c.Xf)(ve).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(ve,Ge);if((0,ye.D)(ve))return Z(ve,Ge);if((0,ze.T)(ve))return function $(ve,Ge){return new fe.y(je=>{let ee;return(0,j.f)(je,Ge,()=>{ee=ve[de.h](),(0,j.f)(je,Ge,()=>{let z,ne;try{({value:z,done:ne}=ee.next())}catch(ge){return void je.error(ge)}ne?je.complete():je.next(z)},0,!0)}),()=>(0,ue.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,Ge);if((0,st.L)(ve))return function et(ve,Ge){return Z((0,st.Q)(ve),Ge)}(ve,Ge)}throw(0,we.z)(ve)}(ve,Ge):(0,c.Xf)(ve)}},8421:(nt,Ee,N)=>{N.d(Ee,{Xf:()=>He});var c=N(655),Y=N(1144),O=N(8239),te=N(9751),J=N(3670),fe=N(2206),se=N(4532),de=N(6495),ue=N(3260),j=N(576),$=N(7849),Z=N(8822);function He(Te){if(Te instanceof te.y)return Te;if(null!=Te){if((0,J.c)(Te))return function Me(Te){return new te.y(_e=>{const ve=Te[Z.L]();if((0,j.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,Y.z)(Te))return function Ae(Te){return new te.y(_e=>{for(let ve=0;ve<Te.length&&!_e.closed;ve++)_e.next(Te[ve]);_e.complete()})}(Te);if((0,O.t)(Te))return function ze(Te){return new te.y(_e=>{Te.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,$.h)})}(Te);if((0,fe.D)(Te))return we(Te);if((0,de.T)(Te))return function ye(Te){return new te.y(_e=>{for(const ve of Te)if(_e.next(ve),_e.closed)return;_e.complete()})}(Te);if((0,ue.L)(Te))return function st(Te){return we((0,ue.Q)(Te))}(Te)}throw(0,se.z)(Te)}function we(Te){return new te.y(_e=>{(function et(Te,_e){var ve,Ge,je,ee;return(0,c.mG)(this,void 0,void 0,function*(){try{for(ve=(0,c.KL)(Te);!(Ge=yield ve.next()).done;)if(_e.next(Ge.value),_e.closed)return}catch(z){je={error:z}}finally{try{Ge&&!Ge.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(je)throw je.error}}_e.complete()})})(Te,_e).catch(ve=>_e.error(ve))})}},6451:(nt,Ee,N)=>{N.d(Ee,{T:()=>fe});var c=N(8189),Y=N(8421),O=N(515),te=N(3269),J=N(8996);function fe(...se){const de=(0,te.yG)(se),ue=(0,te._6)(se,1/0),j=se;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,c.J)(ue)((0,J.D)(j,de)):O.E}},5403:(nt,Ee,N)=>{N.d(Ee,{x:()=>Y});var c=N(930);function Y(te,J,fe,se,de){return new O(te,J,fe,se,de)}class O extends c.Lv{constructor(J,fe,se,de,ue,j){super(J),this.onFinalize=ue,this.shouldUnsubscribe=j,this._next=fe?function($){try{fe($)}catch(Z){J.error(Z)}}:super._next,this._error=de?function($){try{de($)}catch(Z){J.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch($){J.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(nt,Ee,N)=>{N.d(Ee,{U:()=>O});var c=N(4482),Y=N(5403);function O(te,J){return(0,c.e)((fe,se)=>{let de=0;fe.subscribe((0,Y.x)(se,ue=>{se.next(te.call(J,ue,de++))}))})}},8189:(nt,Ee,N)=>{N.d(Ee,{J:()=>O});var c=N(5577),Y=N(4671);function O(te=1/0){return(0,c.z)(Y.y,te)}},5577:(nt,Ee,N)=>{N.d(Ee,{z:()=>de});var c=N(4004),Y=N(8421),O=N(4482),te=N(9672),J=N(5403),se=N(576);function de(ue,j,$=1/0){return(0,se.m)(j)?de((Z,He)=>(0,c.U)((Me,Ae)=>j(Z,Me,He,Ae))((0,Y.Xf)(ue(Z,He))),$):("number"==typeof j&&($=j),(0,O.e)((Z,He)=>function fe(ue,j,$,Z,He,Me,Ae,ze){const ye=[];let we=0,st=0,et=!1;const Te=()=>{et&&!ye.length&&!we&&j.complete()},_e=Ge=>we<Z?ve(Ge):ye.push(Ge),ve=Ge=>{Me&&j.next(Ge),we++;let je=!1;(0,Y.Xf)($(Ge,st++)).subscribe((0,J.x)(j,ee=>{null==He||He(ee),Me?_e(ee):j.next(ee)},()=>{je=!0},void 0,()=>{if(je)try{for(we--;ye.length&&we<Z;){const ee=ye.shift();Ae?(0,te.f)(j,Ae,()=>ve(ee)):ve(ee)}Te()}catch(ee){j.error(ee)}}))};return ue.subscribe((0,J.x)(j,_e,()=>{et=!0,Te()})),()=>{null==ze||ze()}}(Z,He,ue,$)))}},5363:(nt,Ee,N)=>{N.d(Ee,{Q:()=>te});var c=N(9672),Y=N(4482),O=N(5403);function te(J,fe=0){return(0,Y.e)((se,de)=>{se.subscribe((0,O.x)(de,ue=>(0,c.f)(de,J,()=>de.next(ue),fe),()=>(0,c.f)(de,J,()=>de.complete(),fe),ue=>(0,c.f)(de,J,()=>de.error(ue),fe)))})}},3099:(nt,Ee,N)=>{N.d(Ee,{B:()=>fe});var c=N(8996),Y=N(5698),O=N(7579),te=N(930),J=N(4482);function fe(de={}){const{connector:ue=(()=>new O.x),resetOnError:j=!0,resetOnComplete:$=!0,resetOnRefCountZero:Z=!0}=de;return He=>{let Me=null,Ae=null,ze=null,ye=0,we=!1,st=!1;const et=()=>{null==Ae||Ae.unsubscribe(),Ae=null},Te=()=>{et(),Me=ze=null,we=st=!1},_e=()=>{const ve=Me;Te(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,Ge)=>{ye++,!st&&!we&&et();const je=ze=null!=ze?ze:ue();Ge.add(()=>{ye--,0===ye&&!st&&!we&&(Ae=se(_e,Z))}),je.subscribe(Ge),Me||(Me=new te.Hp({next:ee=>je.next(ee),error:ee=>{st=!0,et(),Ae=se(Te,j,ee),je.error(ee)},complete:()=>{we=!0,et(),Ae=se(Te,$),je.complete()}}),(0,c.D)(ve).subscribe(Me))})(He)}}function se(de,ue,...j){return!0===ue?(de(),null):!1===ue?null:ue(...j).pipe((0,Y.q)(1)).subscribe(()=>de())}},9468:(nt,Ee,N)=>{N.d(Ee,{R:()=>Y});var c=N(4482);function Y(O,te=0){return(0,c.e)((J,fe)=>{fe.add(O.schedule(()=>J.subscribe(fe),te))})}},5698:(nt,Ee,N)=>{N.d(Ee,{q:()=>te});var c=N(515),Y=N(4482),O=N(5403);function te(J){return J<=0?()=>c.E:(0,Y.e)((fe,se)=>{let de=0;fe.subscribe((0,O.x)(se,ue=>{++de<=J&&(se.next(ue),J<=de&&se.complete())}))})}},8505:(nt,Ee,N)=>{N.d(Ee,{b:()=>J});var c=N(576),Y=N(4482),O=N(5403),te=N(4671);function J(fe,se,de){const ue=(0,c.m)(fe)||se||de?{next:fe,error:se,complete:de}:fe;return ue?(0,Y.e)((j,$)=>{var Z;null===(Z=ue.subscribe)||void 0===Z||Z.call(ue);let He=!0;j.subscribe((0,O.x)($,Me=>{var Ae;null===(Ae=ue.next)||void 0===Ae||Ae.call(ue,Me),$.next(Me)},()=>{var Me;He=!1,null===(Me=ue.complete)||void 0===Me||Me.call(ue),$.complete()},Me=>{var Ae;He=!1,null===(Ae=ue.error)||void 0===Ae||Ae.call(ue,Me),$.error(Me)},()=>{var Me,Ae;He&&(null===(Me=ue.unsubscribe)||void 0===Me||Me.call(ue)),null===(Ae=ue.finalize)||void 0===Ae||Ae.call(ue)}))}):te.y}},4408:(nt,Ee,N)=>{N.d(Ee,{o:()=>J});var c=N(727);class Y extends c.w0{constructor(se,de){super()}schedule(se,de=0){return this}}const O={setInterval(fe,se,...de){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(fe,se,...de):setInterval(fe,se,...de)},clearInterval(fe){const{delegate:se}=O;return((null==se?void 0:se.clearInterval)||clearInterval)(fe)},delegate:void 0};var te=N(8737);class J extends Y{constructor(se,de){super(se,de),this.scheduler=se,this.work=de,this.pending=!1}schedule(se,de=0){if(this.closed)return this;this.state=se;const ue=this.id,j=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(j,ue,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(j,this.id,de),this}requestAsyncId(se,de,ue=0){return O.setInterval(se.flush.bind(se,this),ue)}recycleAsyncId(se,de,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return de;O.clearInterval(de)}execute(se,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(se,de);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,de){let j,ue=!1;try{this.work(se)}catch($){ue=!0,j=$||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:se,scheduler:de}=this,{actions:ue}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(ue,this),null!=se&&(this.id=this.recycleAsyncId(de,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ee,N)=>{N.d(Ee,{v:()=>O});var c=N(6063);class Y{constructor(J,fe=Y.now){this.schedulerActionCtor=J,this.now=fe}schedule(J,fe=0,se){return new this.schedulerActionCtor(this,J).schedule(se,fe)}}Y.now=c.l.now;class O extends Y{constructor(J,fe=Y.now){super(J,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:fe}=this;if(this._active)return void fe.push(J);let se;this._active=!0;do{if(se=J.execute(J.state,J.delay))break}while(J=fe.shift());if(this._active=!1,se){for(;J=fe.shift();)J.unsubscribe();throw se}}}},4986:(nt,Ee,N)=>{N.d(Ee,{P:()=>te,z:()=>O});var c=N(4408);const O=new(N(7565).v)(c.o),te=O},6063:(nt,Ee,N)=>{N.d(Ee,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(nt,Ee,N)=>{N.d(Ee,{z:()=>c});const c={setTimeout(Y,O,...te){const{delegate:J}=c;return(null==J?void 0:J.setTimeout)?J.setTimeout(Y,O,...te):setTimeout(Y,O,...te)},clearTimeout(Y){const{delegate:O}=c;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(nt,Ee,N)=>{N.d(Ee,{h:()=>Y});const Y=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ee,N)=>{N.d(Ee,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(nt,Ee,N)=>{N.d(Ee,{_6:()=>fe,jO:()=>te,yG:()=>J});var c=N(576),Y=N(3532);function O(se){return se[se.length-1]}function te(se){return(0,c.m)(O(se))?se.pop():void 0}function J(se){return(0,Y.K)(O(se))?se.pop():void 0}function fe(se,de){return"number"==typeof O(se)?se.pop():de}},8737:(nt,Ee,N)=>{function c(Y,O){if(Y){const te=Y.indexOf(O);0<=te&&Y.splice(te,1)}}N.d(Ee,{P:()=>c})},3888:(nt,Ee,N)=>{function c(Y){const te=Y(J=>{Error.call(J),J.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}N.d(Ee,{d:()=>c})},2806:(nt,Ee,N)=>{N.d(Ee,{O:()=>te,x:()=>O});var c=N(2416);let Y=null;function O(J){if(c.v.useDeprecatedSynchronousErrorHandling){const fe=!Y;if(fe&&(Y={errorThrown:!1,error:null}),J(),fe){const{errorThrown:se,error:de}=Y;if(Y=null,se)throw de}}else J()}function te(J){c.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=J)}},9672:(nt,Ee,N)=>{function c(Y,O,te,J=0,fe=!1){const se=O.schedule(function(){te(),fe?Y.add(this.schedule(null,J)):this.unsubscribe()},J);if(Y.add(se),!fe)return se}N.d(Ee,{f:()=>c})},4671:(nt,Ee,N)=>{function c(Y){return Y}N.d(Ee,{y:()=>c})},1144:(nt,Ee,N)=>{N.d(Ee,{z:()=>c});const c=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(nt,Ee,N)=>{N.d(Ee,{D:()=>Y});var c=N(576);function Y(O){return Symbol.asyncIterator&&(0,c.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(nt,Ee,N)=>{function c(Y){return"function"==typeof Y}N.d(Ee,{m:()=>c})},3670:(nt,Ee,N)=>{N.d(Ee,{c:()=>O});var c=N(8822),Y=N(576);function O(te){return(0,Y.m)(te[c.L])}},6495:(nt,Ee,N)=>{N.d(Ee,{T:()=>O});var c=N(2202),Y=N(576);function O(te){return(0,Y.m)(null==te?void 0:te[c.h])}},8239:(nt,Ee,N)=>{N.d(Ee,{t:()=>Y});var c=N(576);function Y(O){return(0,c.m)(null==O?void 0:O.then)}},3260:(nt,Ee,N)=>{N.d(Ee,{L:()=>te,Q:()=>O});var c=N(655),Y=N(576);function O(J){return(0,c.FC)(this,arguments,function*(){const se=J.getReader();try{for(;;){const{value:de,done:ue}=yield(0,c.qq)(se.read());if(ue)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(de)}}finally{se.releaseLock()}})}function te(J){return(0,Y.m)(null==J?void 0:J.getReader)}},3532:(nt,Ee,N)=>{N.d(Ee,{K:()=>Y});var c=N(576);function Y(O){return O&&(0,c.m)(O.schedule)}},4482:(nt,Ee,N)=>{N.d(Ee,{A:()=>Y,e:()=>O});var c=N(576);function Y(te){return(0,c.m)(null==te?void 0:te.lift)}function O(te){return J=>{if(Y(J))return J.lift(function(fe){try{return te(fe,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(nt,Ee,N)=>{function c(){}N.d(Ee,{Z:()=>c})},9635:(nt,Ee,N)=>{N.d(Ee,{U:()=>O,z:()=>Y});var c=N(4671);function Y(...te){return O(te)}function O(te){return 0===te.length?c.y:1===te.length?te[0]:function(fe){return te.reduce((se,de)=>de(se),fe)}}},7849:(nt,Ee,N)=>{N.d(Ee,{h:()=>O});var c=N(2416),Y=N(3410);function O(te){Y.z.setTimeout(()=>{const{onUnhandledError:J}=c.v;if(!J)throw te;J(te)})}},4532:(nt,Ee,N)=>{function c(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ee,{z:()=>c})},655:(nt,Ee,N)=>{function te(z,ne){var ge={};for(var re in z)Object.prototype.hasOwnProperty.call(z,re)&&ne.indexOf(re)<0&&(ge[re]=z[re]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(re=Object.getOwnPropertySymbols(z);Re<re.length;Re++)ne.indexOf(re[Re])<0&&Object.prototype.propertyIsEnumerable.call(z,re[Re])&&(ge[re[Re]]=z[re[Re]])}return ge}function de(z,ne,ge,re){return new(ge||(ge=Promise))(function(ae,It){function zt(gt){try{ut(re.next(gt))}catch(on){It(on)}}function Sn(gt){try{ut(re.throw(gt))}catch(on){It(on)}}function ut(gt){gt.done?ae(gt.value):function Re(ae){return ae instanceof ge?ae:new ge(function(It){It(ae)})}(gt.value).then(zt,Sn)}ut((re=re.apply(z,ne||[])).next())})}function ye(z){return this instanceof ye?(this.v=z,this):new ye(z)}function we(z,ne,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,re=ge.apply(z,ne||[]),ae=[];return Re={},It("next"),It("throw"),It("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function It(an){re[an]&&(Re[an]=function(_i){return new Promise(function(Xt,Qi){ae.push([an,_i,Xt,Qi])>1||zt(an,_i)})})}function zt(an,_i){try{!function Sn(an){an.value instanceof ye?Promise.resolve(an.value.v).then(ut,gt):on(ae[0][2],an)}(re[an](_i))}catch(Xt){on(ae[0][3],Xt)}}function ut(an){zt("next",an)}function gt(an){zt("throw",an)}function on(an,_i){an(_i),ae.shift(),ae.length&&zt(ae[0][0],ae[0][1])}}function et(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ne=z[Symbol.asyncIterator];return ne?ne.call(z):(z=function Z(z){var ne="function"==typeof Symbol&&Symbol.iterator,ge=ne&&z[ne],re=0;if(ge)return ge.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&re>=z.length&&(z=void 0),{value:z&&z[re++],done:!z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ge={},re("next"),re("throw"),re("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function re(ae){ge[ae]=z[ae]&&function(It){return new Promise(function(zt,Sn){!function Re(ae,It,zt,Sn){Promise.resolve(Sn).then(function(ut){ae({value:ut,done:zt})},It)}(zt,Sn,(It=z[ae](It)).done,It.value)})}}}N.d(Ee,{FC:()=>we,KL:()=>et,_T:()=>te,mG:()=>de,qq:()=>ye})},5e3:(nt,Ee,N)=>{N.d(Ee,{$8M:()=>cs,$Z:()=>Nw,AFp:()=>pm,ALo:()=>HE,AaK:()=>de,AsE:()=>kg,BQk:()=>rc,CHM:()=>cl,CRH:()=>Iv,CZH:()=>fm,CqO:()=>Tg,DdM:()=>mv,EJc:()=>nD,EpF:()=>Lu,F$t:()=>wf,F4k:()=>Ow,FYo:()=>hv,FiY:()=>hi,G48:()=>Ib,GfV:()=>$f,Gpc:()=>$,Hsn:()=>Ef,JOm:()=>oe,LFG:()=>We,LSH:()=>Eu,Lbi:()=>Lv,MAs:()=>Iw,NdJ:()=>Vu,O4$:()=>qc,OlP:()=>bn,Oqu:()=>Af,PXZ:()=>Dc,Q6J:()=>pf,QGY:()=>vf,Qsj:()=>xC,R0b:()=>ko,RDi:()=>ss,Rgc:()=>Yd,SBq:()=>fc,Sil:()=>Ic,Suo:()=>bv,TTD:()=>ao,TgZ:()=>gf,VKq:()=>yv,VLi:()=>th,W1O:()=>wc,WLB:()=>Wd,X6Q:()=>oD,XFs:()=>lt,Xpm:()=>Nt,Y36:()=>Sd,YKP:()=>Gf,YNc:()=>Ew,Yjl:()=>gr,Yz7:()=>Xt,ZZ4:()=>Om,_Bn:()=>Vf,_UZ:()=>Dg,_Vd:()=>Bf,_c5:()=>Lb,_uU:()=>Kw,aQg:()=>rh,c2e:()=>bc,cJS:()=>Wt,cg1:()=>Oe,dDg:()=>Cm,deG:()=>Dp,dqk:()=>Vt,eFA:()=>$v,ekj:()=>z_,g9A:()=>Fv,h0i:()=>Dn,hGG:()=>yD,hij:()=>Bu,iGM:()=>om,ifc:()=>Bt,ip1:()=>eh,kL8:()=>Vd,kcU:()=>Jm,lG2:()=>qt,lcZ:()=>GE,n5z:()=>Jc,n_E:()=>mc,oAB:()=>Q,oxw:()=>na,q4F:()=>VE,qLn:()=>Ir,qOj:()=>tf,qZA:()=>mf,sBO:()=>Sm,sIi:()=>nf,s_b:()=>Kf,soG:()=>_m,tBr:()=>Mr,tb:()=>mm,tp0:()=>vo,uIk:()=>rf,vHH:()=>Ae,vpe:()=>Ki,wAp:()=>ke,xp6:()=>Ys,ynx:()=>_f,z2F:()=>Hv,zSh:()=>ug,zs3:()=>ys});var c=N(7579),Y=N(727),O=N(9751),te=N(6451),J=N(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function se(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=fe({__forward_ref__:fe});function $(i){return i.__forward_ref__=$,i.toString=function(){return de(this())},i}function Z(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class Ae extends Error{constructor(s,a){super(function ze(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Ae(-201,`No provider for ${we(i)} found${a}`)}function ut(i,s){null==i&&function gt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ut(i){return er(i,Oi)||er(i,Ji)}function er(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ar(i){return i&&(i.hasOwnProperty(Sr)||i.hasOwnProperty(Xi))?i[Sr]:null}const Oi=fe({\u0275prov:fe}),Sr=fe({\u0275inj:fe}),Ji=fe({ngInjectableDef:fe}),Xi=fe({ngInjectorDef:fe});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let jr;function jn(i){const s=jr;return jr=i,s}function ri(i,s,a){const l=Ut(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&lt.Optional?null:void 0!==s?s:void _e(de(i),"Injector")}function hn(i){return{toString:i}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),Bt=(()=>{return(i=Bt||(Bt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Bt;var i})();const rt="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,tr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=rt||"undefined"!=typeof global&&global||vt||tr,nr={},dt=[],pr=fe({\u0275cmp:fe}),Ft=fe({\u0275dir:fe}),Ze=fe({\u0275pipe:fe}),Ce=fe({\u0275mod:fe}),Ke=fe({\u0275fac:fe}),ht=fe({__NG_ELEMENT_ID__:fe});let Lt=0;function Nt(i){return hn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Bt.Emulated,id:"c",styles:i.styles||dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,_=i.pipes;return l.id+=Lt++,l.inputs=mt(i.inputs,a),l.outputs=mt(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,l})}function L(i){return jt(i)||function vn(i){return i[Ft]||null}(i)}function H(i){return function At(i){return i[Ze]||null}(i)}const ce={};function Q(i){return hn(()=>{const s={type:i.type,bootstrap:i.bootstrap||dt,declarations:i.declarations||dt,imports:i.imports||dt,exports:i.exports||dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(ce[i.id]=i.type),s})}function mt(i,s){if(null==i)return nr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,s&&(s[d]=p)}return a}const qt=Nt;function gr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function jt(i){return i[pr]||null}function un(i,s){const a=i[Ce]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function vi(i){return Array.isArray(i)&&"object"==typeof i[1]}function si(i){return Array.isArray(i)&&!0===i[1]}function Rc(i){return 0!=(8&i.flags)}function Ms(i){return 2==(2&i.flags)}function Wa(i){return 1==(1&i.flags)}function $r(i){return null!==i.template}function dh(i){return 0!=(512&i[2])}function Hr(i,s){return i.hasOwnProperty(Ke)?i[Ke]:null}class Po{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ao(){return pa}function pa(i){return i.type.prototype.ngOnChanges&&(i.setInput=bp),Lc}function Lc(){const i=Ns(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===nr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function bp(i,s,a,l){const d=Ns(i)||function oi(i,s){return i[is]=s}(i,{previous:nr,current:null}),p=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];p[w]=new Po(b&&b.currentValue,s,_===nr),i[l]=s}ao.ngInherit=!0;const is="__ngSimpleChanges__";function Ns(i){return i[is]||null}let nu;function ss(i){nu=i}function dn(i){return!!i.listen}const Fo={createRenderer:(i,s)=>function ga(){return void 0!==nu?nu:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function lo(i,s){return nn(s[i])}function mr(i,s){return nn(s[i.index])}function ma(i,s){return i.data[s]}function wi(i,s){return i[s]}function yr(i,s){const a=s[i];return vi(a)?a:a[0]}function Ps(i){return 4==(4&i[2])}function os(i){return 128==(128&i[2])}function qr(i,s){return null==s?null:i[s]}function Fs(i){i[18]=0}function Ls(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ft={lFrame:ho(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function au(){return ft.bindingsEnabled}function be(){return ft.lFrame.lView}function Ot(){return ft.lFrame.tView}function cl(i){return ft.lFrame.contextLView=i,i[8]}function fn(){let i=Lo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Lo(){return ft.lFrame.currentTNode}function Zr(i,s){const a=ft.lFrame;a.currentTNode=i,a.isParent=s}function dl(){return ft.lFrame.isParent}function hl(){ft.lFrame.isParent=!1}function uu(){return ft.isInCheckNoChangesMode}function Vs(i){ft.isInCheckNoChangesMode=i}function ar(){const i=ft.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Us(){return ft.lFrame.bindingIndex++}function Ei(i){const s=ft.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function du(i,s){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,_a(s)}function _a(i){ft.lFrame.currentDirectiveIndex=i}function ml(){return ft.lFrame.currentQueryIndex}function yl(i){ft.lFrame.currentQueryIndex=i}function jc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function _l(i,s,a){if(a&lt.SkipSelf){let d=s,p=i;for(;!(d=d.parent,null!==d||a&lt.Host||(d=jc(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;s=d,i=p}const l=ft.lFrame=$c();return l.currentTNode=s,l.lView=i,!0}function co(i){const s=$c(),a=i[1];ft.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function $c(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?ho(i):s}function ho(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Hc(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Gc=Hc;function fo(){const i=Hc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function _r(){return ft.lFrame.selectedIndex}function js(i){ft.lFrame.selectedIndex=i}function wn(){const i=ft.lFrame;return ma(i.tView,i.selectedIndex)}function qc(){ft.lFrame.currentNamespace="svg"}function Jm(){!function wl(){ft.lFrame.currentNamespace=null}()}function as(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:x}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function wa(i,s,a){Zc(i,s,3,a)}function hu(i,s,a,l){(3&i[2])===a&&Zc(i,s,a,l)}function Fn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Zc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<p||-1==p)&&(Ip(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function Ip(i,s,a,l){const d=a[l]<0,p=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Uo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function pt(i,s,a){const l=dn(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=p,w=a[++d];zr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),d++}}return d}function ur(i){return 3===i||4===i||6===i}function zr(i){return 64===i.charCodeAt(0)}function xr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Bo(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Bo(i,s,a,l,d){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function Kc(i){return-1!==i}function cn(i){return 32767&i}function bi(i,s){let a=function gh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let fu=!0;function ui(i){const s=fu;return fu=i,s}let Qc=0;function Nn(i,s){const a=jo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ls(l.data,i),ls(s,null),ls(l.blueprint,null));const d=li(i,s),p=i.injectorIndex;if(Kc(d)){const _=cn(d),w=bi(d,s),b=w[1].data;for(let T=0;T<8;T++)s[p+T]=w[_+T]|b[_+T]}return s[p+8]=d,p}function ls(i,s){i.push(0,0,0,0,0,0,0,0,s)}function jo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function li(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const p=d[1],_=p.type;if(l=2===_?p.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function $s(i,s,a){!function go(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ht)&&(l=a[ht]),null==l&&(l=a[ht]=Qc++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Vi(i,s,a){if(a&lt.Optional)return i;_e(s,"NodeInjector")}function Cl(i,s,a,l){if(a&lt.Optional&&void 0===l&&(l=null),0==(a&(lt.Self|lt.Host))){const d=i[9],p=jn(void 0);try{return d?d.get(s,l,a&lt.Optional):ri(s,l,a&lt.Optional)}finally{jn(p)}}return Vi(l,s,a)}function Hs(i,s,a,l=lt.Default,d){if(null!==i){const p=function Ho(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ht)?i[ht]:void 0;return"number"==typeof s?s>=0?255&s:Dl:s}(a);if("function"==typeof p){if(!_l(s,i,l))return l&lt.Host?Vi(d,a,l):Cl(s,a,l,d);try{const _=p(l);if(null!=_||l&lt.Optional)return _;_e(a)}finally{Gc()}}else if("number"==typeof p){let _=null,w=jo(i,s),b=-1,T=l&lt.Host?s[16][6]:null;for((-1===w||l&lt.SkipSelf)&&(b=-1===w?li(i,s):s[w+8],-1!==b&&vr(l,!1)?(_=s[1],w=cn(b),s=bi(b,s)):w=-1);-1!==w;){const x=s[1];if(ba(p,w,x.data)){const P=Tl(w,s,a,_,l,T);if(P!==Ui)return P}b=s[w+8],-1!==b&&vr(l,s[1].data[w+8]===T)&&ba(p,w,s)?(_=x,w=cn(b),s=bi(b,s)):w=-1}}}return Cl(s,a,l,d)}const Ui={};function Dl(){return new Ci(fn(),be())}function Tl(i,s,a,l,d,p){const _=s[1],w=_.data[i+8],x=$o(w,_,a,null==l?Ms(w)&&fu:l!=_&&0!=(3&w.type),d&lt.Host&&p===w);return null!==x?Ii(s,_,x,w):Ui}function $o(i,s,a,l,d){const p=i.providerIndexes,_=s.data,w=1048575&p,b=i.directiveStart,x=p>>20,U=d?w+x:i.directiveEnd;for(let K=l?w:w+x;K<U;K++){const pe=_[K];if(K<b&&a===pe||K>=b&&pe.type===a)return K}if(d){const K=_[b];if(K&&$r(K)&&K.type===a)return b}return null}function Ii(i,s,a,l){let d=i[a];const p=s.data;if(function zc(i){return i instanceof Uo}(d)){const _=d;_.resolving&&function st(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(p[a]));const w=ui(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?jn(_.injectImpl):null;_l(i,l,lt.Default);try{d=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function El(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=s.type.prototype;if(l){const _=pa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&jn(b),ui(w),_.resolving=!1,Gc()}}return d}function ba(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function vr(i,s){return!(i&lt.Self||i&lt.Host&&s)}class Ci{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Hs(this._tNode,this._lView,s,l,a)}}function Jc(i){return hn(()=>{const s=i.prototype.constructor,a=s[Ke]||En(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[Ke]||En(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function En(i){return He(i)?()=>{const s=En(Z(i));return s&&s()}:Hr(i)}function cs(i){return function Ea(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(ur(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===s)return a[d+1];d+=2}}}return null}(fn(),i)}const Go="__parameters__";function gn(i,s,a){return hn(()=>{const l=function ji(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return w.annotation=_,w;function w(b,T,x){const P=b.hasOwnProperty(Go)?b[Go]:Object.defineProperty(b,Go,{value:[]})[Go];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class bn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Dp=new bn("AnalyzeForEntryComponents");function Er(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Er(l,s)):s!==i&&s.push(l)}return s}function ci(i,s){i.forEach(a=>Array.isArray(a)?ci(a,s):s(a))}function xl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function hs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Ti(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function Hn(i,s,a){let l=zs(i,s);return l>=0?i[1|l]=a:(l=~l,function Ml(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Nl(i,s){const a=zs(i,s);if(a>=0)return i[1|a]}function zs(i,s){return function mo(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?d=p:l=p+1}return~(d<<a)}(i,s,1)}const yo={},Zo="__NG_DI_FLAG__",mu="ngTempTokenPath",D=/\n/gm,F="__source",W=fe({provide:String,useValue:fe});let X;function Se(i){const s=X;return X=i,s}function xe(i,s=lt.Default){if(void 0===X)throw new Ae(203,"");return null===X?ri(i,void 0,s):X.get(i,s&lt.Optional?null:void 0,s)}function We(i,s=lt.Default){return(function Kn(){return jr}()||xe)(Z(i),s)}const St=We;function Ct(i){const s=[];for(let a=0;a<i.length;a++){const l=Z(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ae(900,"");let d,p=lt.Default;for(let _=0;_<l.length;_++){const w=l[_],b=In(w);"number"==typeof b?-1===b?d=w.token:p|=b:d=w}s.push(We(d,p))}else s.push(We(l))}return s}function Ln(i,s){return i[Zo]=s,i.prototype[Zo]=s,i}function In(i){return i[Zo]}const Mr=Ln(gn("Inject",i=>({token:i})),-1),hi=Ln(gn("Optional"),8),vo=Ln(gn("SkipSelf"),4);class ud{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ws(i){return i instanceof ud?i.changingThisBreaksApplicationSecurity:i}const Ks=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ih=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qt=(()=>((Qt=Qt||{})[Qt.NONE=0]="NONE",Qt[Qt.HTML=1]="HTML",Qt[Qt.STYLE=2]="STYLE",Qt[Qt.SCRIPT=3]="SCRIPT",Qt[Qt.URL=4]="URL",Qt[Qt.RESOURCE_URL=5]="RESOURCE_URL",Qt))();function Eu(i){const s=function Yo(){const i=be();return i&&i[12]}();return s?s.sanitize(Qt.URL,i)||"":function Wo(i,s){const a=function _u(i){return i instanceof ud&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ws(i):function vu(i){return(i=String(i)).match(Ks)||i.match(Ih)?i:"unsafe:"+i}(ye(i))}const Nh="__ngContext__";function kr(i,s){i[Nh]=s}function Oh(i){const s=function Sa(i){return i[Nh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function ka(i){return i.ngOriginalError}function jp(i,...s){i.error(...s)}class Ir{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Ey(i){return i&&i.ngErrorLogger||jp}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ka(s);for(;a&&ka(a);)a=ka(a);return a||null}}const Dy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function g(i){return i instanceof Function?i():i}var oe=(()=>((oe=oe||{})[oe.Important=1]="Important",oe[oe.DashCase=2]="DashCase",oe))();function Ye(i,s){return undefined(i,s)}function Cn(i){const s=i[3];return si(s)?s[3]:s}function bu(i){return $h(i[13])}function Iu(i){return $h(i[4])}function $h(i){for(;null!==i&&!si(i);)i=i[4];return i}function Qo(i,s,a,l,d){if(null!=l){let p,_=!1;si(l)?p=l:vi(l)&&(_=!0,l=l[0]);const w=nn(l);0===i&&null!==a?null==d?Ny(s,a,w):gs(s,a,w,d||null,!0):1===i&&null!==a?gs(s,a,w,d||null,!0):2===i?function Ly(i,s,a){const l=Kl(i,s);l&&function fI(i,s,a,l){dn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function oA(i,s,a,l,d){const p=a[7];p!==nn(a)&&Qo(s,i,l,p,d);for(let w=10;w<a.length;w++){const b=a[w];Zp(b[1],b,i,s,l,p)}}(s,i,p,a,d)}}function md(i,s,a){if(dn(i))return i.createElement(s,a);{const l=null!==a?function tu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function xy(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Ls(d,-1)),a.splice(l,1)}function My(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&xy(d,l),s>0&&(i[a-1][4]=l[4]);const p=hs(i,10+s);!function Rr(i,s){Zp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function ky(i,s){if(!(256&s[2])){const a=s[11];dn(a)&&a.destroyNode&&Zp(i,s,a,3,null,null),function Sy(i){let s=i[13];if(!s)return Ry(i[1],i);for(;s;){let a=null;if(vi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)vi(s)&&Ry(s[1],s),s=s[3];null===s&&(s=i),vi(s)&&Ry(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ry(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function y0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Uo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=d[p[_]],b=p[_+1];try{b.call(w)}finally{}}else try{p.call(d)}finally{}}}}(i,s),function m0(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):nn(s[_]),b=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?w.removeEventListener(a[p],b,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const _=l[d=a[p+1]];a[p].call(_)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&dn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&si(s[3])){a!==s[3]&&xy(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function Gp(i,s,a){return function hI(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Bt.None||d===Bt.Emulated)return null}return mr(l,a)}(i,s.parent,a)}function gs(i,s,a,l,d){dn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function Ny(i,s,a){dn(i)?i.appendChild(s,a):s.appendChild(a)}function _0(i,s,a,l,d){null!==l?gs(i,s,a,l,d):Ny(i,s,a)}function Kl(i,s){return dn(i)?i.parentNode(s):s.parentNode}function v0(i,s,a){return Oy(i,s,a)}let Oy=function w0(i,s,a){return 40&i.type?mr(i,a):null};function qp(i,s,a,l){const d=Gp(i,l,s),p=s[11],w=v0(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)_0(p,d,a[b],w,!1);else _0(p,d,a,w,!1)}function vd(i,s){if(null!==s){const a=s.type;if(3&a)return mr(s,i);if(4&a)return Fy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return vd(i,l);{const d=i[s.index];return si(d)?Fy(-1,d):nn(d)}}if(32&a)return Ye(s,i)()||nn(i[s.index]);{const l=b0(i,s);return null!==l?Array.isArray(l)?l[0]:vd(Cn(i[16]),l):vd(i,s.next)}}return null}function b0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Fy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return vd(l,d)}return s[7]}function Vy(i,s,a,l,d,p,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&kr(nn(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)Vy(i,s,a.child,l,d,p,!1),Qo(s,i,d,w,p);else if(32&b){const T=Ye(a,l);let x;for(;x=T();)Qo(s,i,d,x,p);Qo(s,i,d,w,p)}else 16&b?gI(i,s,l,a,d,p):Qo(s,i,d,w,p);a=_?a.projectionNext:a.next}}function Zp(i,s,a,l,d,p){Vy(a,l,i.firstChild,s,d,p,!1)}function gI(i,s,a,l,d,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)Qo(s,i,d,b[T],p);else Vy(i,s,b,_[3],d,p,!0)}function I0(i,s,a){dn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Uy(i,s,a){dn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function me(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=s.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const D0="ng-template";function mI(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==me(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function T0(i){return 4===i.type&&i.value!==D0}function A0(i,s,a){return s===(4!==i.type||a?i.value:D0)}function yI(i,s,a){let l=4;const d=i.attrs||[],p=function zp(i){for(let s=0;s<i.length;s++)if(ur(i[s]))return s;return i.length}(d);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!A0(i,b,a)||""===b&&1===s.length){if(Co(l))return!1;_=!0}}else{const T=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!mI(i.attrs,T,a)){if(Co(l))return!1;_=!0}continue}const P=_I(8&l?"class":b,d,T0(i),a);if(-1===P){if(Co(l))return!1;_=!0;continue}if(""!==T){let U;U=P>p?"":d[P+1].toLowerCase();const K=8&l?U:null;if(K&&-1!==me(K,T,0)||2&l&&T!==U){if(Co(l))return!1;_=!0}}}}else{if(!_&&!Co(l)&&!Co(b))return!1;if(_&&Co(b))continue;_=!1,l=b|1&l}}return Co(l)||_}function Co(i){return 0==(1&i)}function _I(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let p=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function wI(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function S0(i,s,a=!1){for(let l=0;l<s.length;l++)if(yI(i,s[l],a))return!0;return!1}function EI(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function x0(i,s){return i?":not("+s.trim()+")":s}function M0(i){let s=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Co(_)&&(s+=x0(p,d),d=""),l=_,p=p||!Co(l);a++}return""!==d&&(s+=x0(p,d)),s}const it={};function Ys(i){jy(Ot(),be(),_r()+i,uu())}function jy(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&wa(s,p,a)}else{const p=i.preOrderHooks;null!==p&&hu(s,p,0,a)}js(a)}function Wp(i,s){return i<<17|s<<2}function Jo(i){return i>>17&32767}function N0(i){return 2|i}function Cu(i){return(131068&i)>>2}function Hy(i,s){return-131069&i|s<<2}function P0(i){return 1|i}function G0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];yl(d),_.contentQueries(2,s[p],p)}}}function wd(i,s,a,l,d,p,_,w,b,T){const x=s.blueprint.slice();return x[0]=d,x[2]=140|l,Fs(x),x[3]=x[15]=i,x[8]=a,x[10]=_||i&&i[10],x[11]=w||i&&i[11],x[12]=b||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=p,x[16]=2==s.type?i[16]:x,x}function Tu(i,s,a,l,d){let p=i.data[s];if(null===p)p=function Jp(i,s,a,l,d){const p=Lo(),_=dl(),b=i.data[s]=function i_(i,s,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,d),function pl(){return ft.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function Vo(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Zr(p,!0),p}function Au(i,s,a,l){if(0===a)return-1;const d=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Ed(i,s,a){co(s);try{const l=i.viewQuery;null!==l&&aw(1,l,a);const d=i.template;null!==d&&Xp(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&G0(i,s),i.staticViewQueries&&aw(2,i.viewQuery,a);const p=i.components;null!==p&&function MI(i,s){for(let a=0;a<s.length;a++)LI(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,fo()}}function Xo(i,s,a,l){const d=s[2];if(256==(256&d))return;co(s);const p=uu();try{Fs(s),function lu(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Xp(i,s,a,2,l);const _=3==(3&d);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&wa(s,T,null)}else{const T=i.preOrderHooks;null!==T&&hu(s,T,0,null),Fn(s,0)}if(function _A(i){for(let s=bu(i);null!==s;s=Iu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Ls(p,1),d[2]|=1024}}}(s),function yA(i){for(let s=bu(i);null!==s;s=Iu(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];os(l)&&Xo(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&G0(i,s),!p)if(_){const T=i.contentCheckHooks;null!==T&&wa(s,T)}else{const T=i.contentHooks;null!==T&&hu(s,T,1),Fn(s,1)}!function SI(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)js(~d);else{const p=d,_=a[++l],w=a[++l];du(_,p),w(2,s[p])}}}finally{js(-1)}}(i,s);const w=i.components;null!==w&&function xI(i,s){for(let a=0;a<s.length;a++)l_(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&aw(2,b,l),!p)if(_){const T=i.viewCheckHooks;null!==T&&wa(s,T)}else{const T=i.viewHooks;null!==T&&hu(s,T,2),Fn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ls(s[3],-1))}finally{fo()}}function kI(i,s,a,l){const d=s[10],p=!uu(),_=Ps(s);try{p&&!_&&d.begin&&d.begin(),_&&Ed(i,s,l),Xo(i,s,a,l)}finally{p&&!_&&d.end&&d.end()}}function Xp(i,s,a,l,d){const p=_r(),_=2&l;try{js(-1),_&&s.length>20&&jy(i,s,20,uu()),a(l,d)}finally{js(p)}}function e_(i,s,a){if(Rc(s)){const d=s.directiveEnd;for(let p=s.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function t_(i,s,a){!au()||(function OI(i,s,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Nn(a,s),kr(l,s);const _=a.initialInputs;for(let w=d;w<p;w++){const b=i.data[w],T=$r(b);T&&ew(s,a,b);const x=Ii(s,i,w,a);kr(x,s),null!==_&&tw(0,w-d,x,b,0,_),T&&(yr(a.index,s)[8]=x)}}(i,s,a,mr(a,s)),128==(128&a.flags)&&function PI(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function gl(){return ft.lFrame.currentDirectiveIndex}();try{js(_);for(let b=l;b<d;b++){const T=i.data[b],x=s[b];_a(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Yh(T,x)}}finally{js(-1),_a(w)}}(i,s,a))}function zh(i,s,a=mr){const l=s.localNames;if(null!==l){let d=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[d++]=w}}}function n_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Wh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Wh(i,s,a,l,d,p,_,w,b,T){const x=20+l,P=x+d,U=function r_(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:it);return a}(x,P),K="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:K,incompleteFirstPass:!1}}function Kh(i,s,a,l){const d=BI(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&jI(i).push(l,d.length-1))}function eg(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function o_(i,s,a,l){let d=!1;if(au()){const p=function Q0(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];S0(a,_.selectors,!1)&&(d||(d=[]),$s(Nn(a,s),i,_.type),$r(_)?(a_(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==p){d=!0,J0(a,i.data.length,p.length);for(let x=0;x<p.length;x++){const P=p[x];P.providersResolver&&P.providersResolver(P)}let w=!1,b=!1,T=Au(i,s,p.length,null);for(let x=0;x<p.length;x++){const P=p[x];a.mergedAttrs=xr(a.mergedAttrs,P.hostAttrs),X0(i,a,s,T,P),FI(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}!function s_(i,s){const l=s.directiveEnd,d=i.data,p=s.attrs,_=[];let w=null,b=null;for(let T=s.directiveStart;T<l;T++){const x=d[T],P=x.inputs,U=null===p||T0(s)?null:nw(P,p);_.push(U),w=eg(P,T,w),b=eg(x.outputs,T,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function u_(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const p=a[s[d+1]];if(null==p)throw new Ae(-301,!1);l.push(s[d],p)}}}(a,l,_)}return a.mergedAttrs=xr(a.mergedAttrs,a.attrs),d}function Y0(i,s,a,l,d,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function NI(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function Yh(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function a_(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function FI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;$r(s)&&(a[""]=i)}}function J0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function X0(i,s,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=Hr(d.type)),_=new Uo(p,$r(d),null);i.blueprint[l]=_,a[l]=_,Y0(i,s,0,l,Au(i,a,d.hostVars,it),d)}function ew(i,s,a){const l=mr(s,i),d=n_(a),p=i[10],_=rg(i,wd(i,d,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function Ao(i,s,a,l,d,p){const _=mr(i,s);!function ng(i,s,a,l,d,p,_){if(null==p)dn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==_?ye(p):_(p,l||"",d);dn(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],_,p,i.value,a,l,d)}function tw(i,s,a,l,d,p){const _=p[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const T=_[b++],x=_[b++],P=_[b++];null!==w?l.setInput(a,P,T,x):a[x]=P}}}function nw(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function rw(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function l_(i,s){const a=yr(s,i);if(os(a)){const l=a[1];80&a[2]?Xo(l,a,l.template,a[8]):a[5]>0&&iw(a)}}function iw(i){for(let l=bu(i);null!==l;l=Iu(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const _=p[1];Xo(_,p,_.template,p[8])}else p[5]>0&&iw(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=yr(a[l],i);os(d)&&d[5]>0&&iw(d)}}function LI(i,s){const a=yr(s,i),l=a[1];(function sw(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Ed(l,a,a[8])}function rg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ig(i){for(;i;){i[2]|=64;const s=Cn(i);if(dh(i)&&!s)return i;i=s}return null}function ow(i,s,a){const l=s[10];l.begin&&l.begin();try{Xo(i,s,i.template,a)}catch(d){throw $I(s,d),d}finally{l.end&&l.end()}}function sg(i){!function Qh(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Oh(a),d=l[1];kI(d,l,d.template,a)}}(i[8])}function aw(i,s,a){yl(0),s(i,a)}const UI=(()=>Promise.resolve(null))();function BI(i){return i[7]||(i[7]=[])}function jI(i){return i.cleanup||(i.cleanup=[])}function $I(i,s){const a=i[9],l=a?a.get(Ir,null):null;l&&l.handleError(s)}function HI(i,s,a,l,d){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],b=s[_],T=i.data[_];null!==T.setInput?T.setInput(b,d,l,w):b[w]=d}}function Su(i,s,a){const l=lo(s,i);!function gd(i,s,a){dn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function d_(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?d=ue(d,w):2==p&&(l=ue(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const ag=new bn("INJECTOR",-1);class h_{get(s,a=yo){if(a===yo){const l=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw l.name="NullInjectorError",l}return a}}const ug=new bn("Set Injector scope."),bd={},lw={};let lg;function f_(){return void 0===lg&&(lg=new h_),lg}function xu(i,s=null,a=null,l){const d=cw(i,s,a,l);return d._resolveInjectorDefTypes(),d}function cw(i,s=null,a=null,l){return new p_(i,a,s||f_(),l)}class p_{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ci(a,w=>this.processProvider(w,s,a)),ci([s],w=>this.processInjectorType(w,[],p)),this.records.set(ag,Id(void 0,this));const _=this.records.get(ug);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=yo,l=lt.Default){this.assertNotDestroyed();const d=Se(this),p=jn(void 0);try{if(!(l&lt.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function qI(i){return"function"==typeof i||"object"==typeof i&&i instanceof bn}(s)&&Ut(s);w=b&&this.injectableDefInScope(b)?Id(g_(s),bd):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&lt.Self?f_():this.parent).get(s,a=l&lt.Optional&&a===yo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[mu]=_[mu]||[]).unshift(de(s)),d)throw _;return function zo(i,s,a,l){const d=i[mu];throw s[F]&&d.unshift(s[F]),i.message=function _o(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=de(s);if(Array.isArray(s))d=s.map(de).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):de(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[mu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{jn(p),Se(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(de(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processInjectorType(s,a,l){if(!(s=Z(s)))return!1;let d=Ar(s);const p=null==d&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(d=Ar(p)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(_);try{ci(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:U,providers:K}=x[P];ci(K,pe=>this.processProvider(pe,U,K||dt))}}this.injectorDefTypes.add(_);const b=Hr(_)||(()=>new _);this.records.set(_,Id(b,bd));const T=d.providers;if(null!=T&&!w){const x=s;ci(T,P=>this.processProvider(P,x,T))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let d=Et(s=Z(s))?s:Z(s&&s.provide);const p=function IA(i,s,a){return ea(i)?Id(void 0,i.useValue):Id(dw(i),bd)}(s);if(Et(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=Id(void 0,bd,!0),_.factory=()=>Ct(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,p)}hydrate(s,a){return a.value===bd&&(a.value=lw,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Jh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function g_(i){const s=Ut(i),a=null!==s?s.factory:Hr(i);if(null!==a)return a;if(i instanceof bn)throw new Ae(204,!1);if(i instanceof Function)return function GI(i){const s=i.length;if(s>0)throw Ti(s,"?"),new Ae(204,!1);const a=function ni(i){const s=i&&(i[Oi]||i[Ji]);if(s){const a=function Ds(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ae(204,!1)}function dw(i,s,a){let l;if(Et(i)){const d=Z(i);return Hr(d)||g_(d)}if(ea(i))l=()=>Z(i.useValue);else if(function m_(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ct(i.deps||[]));else if(function Xe(i){return!(!i||!i.useExisting)}(i))l=()=>We(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function y_(i){return!!i.deps}(i))return Hr(d)||g_(d);l=()=>new d(...Ct(i.deps))}return l}function Id(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ea(i){return null!==i&&"object"==typeof i&&W in i}function Et(i){return"function"==typeof i}let ys=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return xu({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return xu({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=yo,i.NULL=new h_,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>We(ag)}),i.__NG_ELEMENT_ID__=-1,i})();function XI(i,s){as(Oh(i)[1],fn())}function tf(i){let s=function D_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if($r(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ae(903,"");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=T_(i.inputs),_.declaredInputs=T_(i.declaredInputs),_.outputs=T_(i.outputs);const w=d.hostBindings;w&&A_(i,w);const b=d.viewQuery,T=d.contentQueries;if(b&&_w(i,b),T&&hg(i,T),se(i.inputs,d.inputs),se(i.declaredInputs,d.declaredInputs),se(i.outputs,d.outputs),$r(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===tf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function yw(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=xr(d.hostAttrs,a=xr(a,d.hostAttrs))}}(l)}function T_(i){return i===nr?{}:i===dt?[]:i}function _w(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function hg(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{s(l,d,p),a(l,d,p)}:s}function A_(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let fg=null;function ku(){if(!fg){const i=Vt.Symbol;if(i&&i.iterator)fg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(fg=l)}}}return fg}function nf(i){return!!Yl(i)&&(Array.isArray(i)||!(i instanceof Map)&&ku()in i)}function Yl(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ta(i,s,a){return i[s]=a}function mi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ql(i,s,a,l){const d=mi(i,s,a);return mi(i,s+1,l)||d}function rf(i,s,a,l){const d=be();return mi(d,Us(),s)&&(Ot(),Ao(wn(),d,i,s,a,l)),rf}function Ou(i,s,a,l,d,p){const w=Ql(i,function ai(){return ft.lFrame.bindingIndex}(),a,d);return Ei(2),w?s+ye(a)+l+ye(d)+p:it}function Ew(i,s,a,l,d,p,_,w){const b=be(),T=Ot(),x=i+20,P=T.firstCreatePass?function nC(i,s,a,l,d,p,_,w,b){const T=s.consts,x=Tu(s,i,4,_||null,qr(T,w));o_(s,a,x,qr(T,b)),as(s,x);const P=x.tViews=Wh(2,x,l,d,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),P.queries=s.queries.embeddedTView(x)),x}(x,T,b,s,a,l,d,p,_):T.data[x];Zr(P,!1);const U=b[11].createComment("");qp(T,b,U,P),kr(U,b),rg(b,b[x]=rw(U,b,U,P)),Wa(P)&&t_(T,b,P),null!=_&&zh(b,P,w)}function Iw(i){return wi(function fl(){return ft.lFrame.contextLView}(),20+i)}function Sd(i,s=lt.Default){const a=be();return null===a?We(i,s):Hs(fn(),a,Z(i),s)}function Nw(){throw new Error("invalid")}function pf(i,s,a){const l=be();return mi(l,Us(),s)&&function ms(i,s,a,l,d,p,_,w){const b=mr(s,a);let x,T=s.inputs;!w&&null!=T&&(x=T[l])?(HI(i,a,x,l,d),Ms(s)&&function W0(i,s){const a=yr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function z0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,dn(p)?p.setProperty(b,l,d):zr(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}(Ot(),wn(),l,i,s,l[11],a,!1),pf}function xd(i,s,a,l,d){const _=d?"class":"style";HI(i,a,s.inputs[_],_,l)}function gf(i,s,a,l){const d=be(),p=Ot(),_=20+i,w=d[11],b=d[_]=md(w,s,function Xm(){return ft.lFrame.currentNamespace}()),T=p.firstCreatePass?function U_(i,s,a,l,d,p,_){const w=s.consts,T=Tu(s,i,2,d,qr(w,p));return o_(s,a,T,qr(w,_)),null!==T.attrs&&d_(T,T.attrs,!1),null!==T.mergedAttrs&&d_(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,p,d,0,s,a,l):p.data[_];Zr(T,!0);const x=T.mergedAttrs;null!==x&&pt(w,b,x);const P=T.classes;null!==P&&Uy(w,b,P);const U=T.styles;return null!==U&&I0(w,b,U),64!=(64&T.flags)&&qp(p,d,b,T),0===function ya(){return ft.lFrame.elementDepthCount}()&&kr(b,d),function su(){ft.lFrame.elementDepthCount++}(),Wa(T)&&(t_(p,d,T),e_(p,T,d)),null!==l&&zh(d,T),gf}function mf(){let i=fn();dl()?hl():(i=i.parent,Zr(i,!1));const s=i;!function ou(){ft.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(as(a,i),Rc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ph(i){return 0!=(16&i.flags)}(s)&&xd(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Cp(i){return 0!=(32&i.flags)}(s)&&xd(a,s,be(),s.stylesWithoutHost,!1),mf}function Dg(i,s,a,l){return gf(i,s,a,l),mf(),Dg}function _f(i,s,a){const l=be(),d=Ot(),p=i+20,_=d.firstCreatePass?function yf(i,s,a,l,d){const p=s.consts,_=qr(p,l),w=Tu(s,i,8,"ng-container",_);return null!==_&&d_(w,_,!0),o_(s,a,w,qr(p,d)),null!==s.queries&&s.queries.elementStart(s,w),w}(p,d,l,s,a):d.data[p];Zr(_,!0);const w=l[p]=l[11].createComment("");return qp(d,l,w,_),kr(w,l),Wa(_)&&(t_(d,l,_),e_(d,_,l)),null!=a&&zh(l,_),_f}function rc(){let i=fn();const s=Ot();return dl()?hl():(i=i.parent,Zr(i,!1)),s.firstCreatePass&&(as(s,i),Rc(i)&&s.queries.elementEnd(i)),rc}function Lu(){return be()}function vf(i){return!!i&&"function"==typeof i.then}function Ow(i){return!!i&&"function"==typeof i.subscribe}const Tg=Ow;function Vu(i,s,a,l){const d=be(),p=Ot(),_=fn();return function B_(i,s,a,l,d,p,_,w){const b=Wa(l),x=i.firstCreatePass&&jI(i),P=s[8],U=BI(s);let K=!0;if(3&l.type||w){const $e=mr(l,s),Qe=w?w($e):$e,Ie=U.length,ct=w?Gt=>w(nn(Gt[l.index])):l.index;if(dn(a)){let Gt=null;if(!w&&b&&(Gt=function ic(i,s,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const w=s[7],b=d[p+2];return w.length>b?w[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,d,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=p,Gt.__ngLastListenerFn__=p,K=!1;else{p=Oa(l,s,P,p,!1);const rn=a.listen(Qe,d,p);U.push(p,rn),x&&x.push(d,ct,Ie,Ie+1)}}else p=Oa(l,s,P,p,!0),Qe.addEventListener(d,p,_),U.push(p),x&&x.push(d,ct,Ie,_)}else p=Oa(l,s,P,p,!1);const pe=l.outputs;let Fe;if(K&&null!==pe&&(Fe=pe[d])){const $e=Fe.length;if($e)for(let Qe=0;Qe<$e;Qe+=2){const yi=s[Fe[Qe]][Fe[Qe+1]].subscribe(p),$a=U.length;U.push(p,yi),x&&x.push(d,l.index,$a,-($a+1))}}}(p,d,d[11],_,i,s,!!a,l),Vu}function Pw(i,s,a,l){try{return!1!==a(l)}catch(d){return $I(i,d),!1}}function Oa(i,s,a,l,d){return function p(_){if(_===Function)return l;const w=2&i.flags?yr(i.index,s):s;0==(32&s[2])&&ig(w);let b=Pw(s,0,l,_),T=p.__ngNextListenerFn__;for(;T;)b=Pw(s,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function na(i=1){return function Bs(i){return(ft.lFrame.contextLView=function vl(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function Sg(i,s){let a=null;const l=function vI(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let d=0;d<s.length;d++){const p=s[d];if("*"!==p){if(null===l?S0(i,p,!0):EI(l,p))return d}else a=d}return a}function wf(i){const s=be()[16][6];if(!s.projection){const l=s.projection=Ti(i?i.length:1,null),d=l.slice();let p=s.child;for(;null!==p;){const _=i?Sg(p,i):0;null!==_&&(d[_]?d[_].projectionNext=p:l[_]=p,d[_]=p),p=p.next}}}function Ef(i,s=0,a){const l=be(),d=Ot(),p=Tu(d,20+i,16,null,a||null);null===p.projection&&(p.projection=s),hl(),64!=(64&p.flags)&&function sA(i,s,a){gI(s[11],0,s,a,Gp(i,a,s),v0(a.parent||s[6],a,s))}(d,l,p)}function Nd(i,s,a,l,d){const p=i[a+1],_=null===s;let w=l?Jo(p):Cu(p),b=!1;for(;0!==w&&(!1===b||_);){const x=i[w+1];Uu(i[w],s)&&(b=!0,i[w+1]=l?P0(x):N0(x)),w=l?Jo(x):Cu(x)}b&&(i[a+1]=l?N0(p):P0(p))}function Uu(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&zs(i,s)>=0}function z_(i,s){return function ws(i,s,a,l){const d=be(),p=Ot(),_=Ei(2);p.firstUpdatePass&&function Fd(i,s,a,l){const d=i.data;if(null===d[a+1]){const p=d[_r()],_=function Pd(i,s){return s>=i.expandoStartIndex}(i,a);(function Q_(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function dC(i,s,a,l){const d=function va(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Cf(a=W_(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=W_(d,i,s,a,l),null===p){let b=function cr(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Cu(l))return i[Jo(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=W_(null,i,s,b[1],l),b=Cf(b,s.attrs,l),function zw(i,s,a,l){i[Jo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function hC(i,s,a){let l;const d=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<d;p++)l=Cf(l,i[p].hostAttrs,a);return Cf(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(d,p,s,l),function uC(i,s,a,l,d,p){let _=p?s.classBindings:s.styleBindings,w=Jo(_),b=Cu(_);i[l]=a;let x,T=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||zs(P,x)>0)&&(T=!0)}else x=a;if(d)if(0!==b){const U=Jo(i[w+1]);i[l+1]=Wp(U,w),0!==U&&(i[U+1]=Hy(i[U+1],l)),i[w+1]=function $y(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Wp(w,0),0!==w&&(i[w+1]=Hy(i[w+1],l)),w=l;else i[l+1]=Wp(b,0),0===w?w=l:i[b+1]=Hy(i[b+1],l),b=l;T&&(i[l+1]=N0(i[l+1])),Nd(i,x,l,!0),Nd(i,x,l,!1),function lC(i,s,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&zs(p,s)>=0&&(a[l+1]=P0(a[l+1]))}(s,x,i,l,p),_=Wp(w,b),p?s.classBindings=_:s.styleBindings=_}(d,p,s,a,_,l)}}(p,i,_,l),s!==it&&mi(d,_,s)&&function Y_(i,s,a,l,d,p,_,w){if(!(3&s.type))return;const b=i.data,T=b[w+1];Tf(function O0(i){return 1==(1&i)}(T)?Df(b,s,a,d,Cu(T),_):void 0)||(Tf(p)||function R0(i){return 2==(2&i)}(T)&&(p=Df(b,null,a,d,w,_)),function aA(i,s,a,l,d){const p=dn(i);if(s)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:oe.DashCase;if(null==d)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=oe.Important),p?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,lo(_r(),a),d,p))}(p,p.data[_r()],d,d[11],i,d[_+1]=function Pa(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(Ws(i)))),i}(s,a),l,_)}(i,s,null,!0),z_}function W_(i,s,a,l,d){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=Cf(l,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Cf(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hn(i,_,!!a||s[++p]))}return void 0===i?null:i}function Df(i,s,a,l,d,p){const _=null===s;let w;for(;d>0;){const b=i[d],T=Array.isArray(b),x=T?b[1]:b,P=null===x;let U=a[d+1];U===it&&(U=P?dt:void 0);let K=P?Nl(U,l):x===l?U:void 0;if(T&&!Tf(K)&&(K=Nl(b,l)),Tf(K)&&(w=K,_))return w;const pe=i[d+1];d=_?Jo(pe):Cu(pe)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(w=Nl(b,l))}return w}function Tf(i){return void 0!==i}function Kw(i,s=""){const a=be(),l=Ot(),d=i+20,p=l.firstCreatePass?Tu(l,d,1,s,null):l.data[d],_=a[d]=function pd(i,s){return dn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);qp(l,a,_,p),Zr(p,!1)}function Af(i){return Bu("",i,""),Af}function Bu(i,s,a){const l=be(),d=function Nu(i,s,a,l){return mi(i,Us(),a)?s+ye(a)+l:it}(l,i,s,a);return d!==it&&Su(l,_r(),d),Bu}function kg(i,s,a,l,d){const p=be(),_=Ou(p,i,s,a,l,d);return _!==it&&Su(p,_r(),_),kg}const Vn=void 0;var ju=["en",[["a","p"],["AM","PM"],Vn],[["AM","PM"],Vn,Vn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vn,"{1} 'at' {0}",Vn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ld(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let $u={};function Oe(i){const s=function pC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Lg(s);if(a)return a;const l=s.split("-")[0];if(a=Lg(l),a)return a;if("en"===l)return ju;throw new Error(`Missing locale data for the locale "${i}".`)}function Vd(i){return Oe(i)[ke.PluralCase]}function Lg(i){return i in $u||($u[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),$u[i]}var ke=(()=>((ke=ke||{})[ke.LocaleId=0]="LocaleId",ke[ke.DayPeriodsFormat=1]="DayPeriodsFormat",ke[ke.DayPeriodsStandalone=2]="DayPeriodsStandalone",ke[ke.DaysFormat=3]="DaysFormat",ke[ke.DaysStandalone=4]="DaysStandalone",ke[ke.MonthsFormat=5]="MonthsFormat",ke[ke.MonthsStandalone=6]="MonthsStandalone",ke[ke.Eras=7]="Eras",ke[ke.FirstDayOfWeek=8]="FirstDayOfWeek",ke[ke.WeekendRange=9]="WeekendRange",ke[ke.DateFormat=10]="DateFormat",ke[ke.TimeFormat=11]="TimeFormat",ke[ke.DateTimeFormat=12]="DateTimeFormat",ke[ke.NumberSymbols=13]="NumberSymbols",ke[ke.NumberFormats=14]="NumberFormats",ke[ke.CurrencyCode=15]="CurrencyCode",ke[ke.CurrencySymbol=16]="CurrencySymbol",ke[ke.CurrencyName=17]="CurrencyName",ke[ke.Currencies=18]="Currencies",ke[ke.Directionality=19]="Directionality",ke[ke.PluralCase=20]="PluralCase",ke[ke.ExtraData=21]="ExtraData",ke))();const De="en-US";let pE=De;function oa(i,s,a,l,d){if(i=Z(i),Array.isArray(i))for(let p=0;p<i.length;p++)oa(i[p],s,a,l,d);else{const p=Ot(),_=be();let w=Et(i)?i:Z(i.provide),b=dw(i);const T=fn(),x=1048575&T.providerIndexes,P=T.directiveStart,U=T.providerIndexes>>20;if(Et(i)||!i.multi){const K=new Uo(b,d,Sd),pe=zg(w,s,d?x:x+U,P);-1===pe?($s(Nn(T,_),p,w),Zu(p,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(K),_.push(K)):(a[pe]=K,_[pe]=K)}else{const K=zg(w,s,x+U,P),pe=zg(w,s,x,x+U),Fe=K>=0&&a[K],$e=pe>=0&&a[pe];if(d&&!$e||!d&&!Fe){$s(Nn(T,_),p,w);const Qe=function Zd(i,s,a,l,d){const p=new Uo(i,a,Sd);return p.multi=[],p.index=s,p.componentProviders=0,NE(p,d,l&&!a),p}(d?Ua:OE,a.length,d,l,b);!d&&$e&&(a[pe].providerFactory=Qe),Zu(p,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else Zu(p,i,K>-1?K:pe,NE(a[d?pe:K],b,!d&&l));!d&&l&&$e&&a[pe].componentProviders++}}}function Zu(i,s,a,l){const d=Et(s),p=function cg(i){return!!i.useClass}(s);if(d||p){const b=(p?Z(s.useClass):s).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[l,b]):T[x+1].push(l,b)}else T.push(a,b)}}}function NE(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function zg(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function OE(i,s,a,l){return Wg(this.multi,[])}function Ua(i,s,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Ii(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),Wg(d,p);for(let b=_;b<w.length;b++)p.push(w[b])}else p=[],Wg(d,p);return p}function Wg(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Vf(i,s=[]){return a=>{a.providersResolver=(l,d)=>function AC(i,s,a){const l=Ot();if(l.firstCreatePass){const d=$r(i);oa(a,l.data,l.blueprint,d,!0),oa(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class Yg{}class Xs{resolveComponentFactory(s){throw function cv(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Bf=(()=>{class i{}return i.NULL=new Xs,i})();function jf(){return hc(fn(),be())}function hc(i,s){return new fc(mr(i,s))}let fc=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=jf,i})();function dv(i){return i instanceof fc?i.nativeElement:i}class hv{}let xC=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function FE(){const i=be(),a=yr(fn().index,i);return function PE(i){return i[11]}(vi(a)?a:i)}(),i})(),LE=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class $f{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const VE=new $f("13.3.1"),fv={};function Hf(i,s,a,l,d=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(nn(p)),si(p))for(let w=10;w<p.length;w++){const b=p[w],T=b[1].firstChild;null!==T&&Hf(b[1],b,T,l)}const _=a.type;if(8&_)Hf(i,s,a.child,l);else if(32&_){const w=Ye(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=b0(s,a);if(Array.isArray(w))l.push(...w);else{const b=Cn(s[16]);Hf(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class aa{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Hf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(si(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(My(s,l),hs(a,l))}this._attachedToViewContainer=!1}ky(this._lView[1],this._lView)}onDestroy(s){Kh(this._lView[1],this._lView,null,s)}markForCheck(){ig(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ow(this._lView[1],this._lView,this.context)}checkNoChanges(){!function vA(i,s,a){Vs(!0);try{ow(i,s,a)}finally{Vs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hp(i,s){Zp(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ae(902,"");this._appRef=s}}class pc extends aa{constructor(s){super(s),this._view=s}detectChanges(){sg(this._view)}checkNoChanges(){!function VI(i){Vs(!0);try{sg(i)}finally{Vs(!1)}}(this._view)}get context(){return null}}class pv extends Bf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=jt(s);return new Jg(a,this.ngModule)}}function zu(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Jg extends Yg{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function k0(i){return i.map(M0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return zu(this.componentDef.inputs)}get outputs(){return zu(this.componentDef.outputs)}create(s,a,l,d){const p=(d=d||this.ngModule)?function zd(i,s){return{get:(a,l,d)=>{const p=i.get(a,fv,d);return p!==fv||l===fv?p:s.get(a,l,d)}}}(s,d.injector):s,_=p.get(hv,Fo),w=p.get(LE,null),b=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function Z0(i,s,a){if(dn(i))return i.selectRootElement(s,a===Bt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):md(_.createRenderer(null,this.componentDef),T,function UE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),P=this.componentDef.onPush?576:528,U=function mw(i,s){return{components:[],scheduler:i||Dy,clean:UI,playerHandler:s||null,flags:0}}(),K=Wh(0,null,null,1,0,null,null,null,null,null),pe=wd(null,K,U,P,null,null,_,b,w,p);let Fe,$e;co(pe);try{const Qe=function C_(i,s,a,l,d,p){const _=a[1];a[20]=i;const b=Tu(_,20,2,"#host",null),T=b.mergedAttrs=s.hostAttrs;null!==T&&(d_(b,T,!0),null!==i&&(pt(d,i,T),null!==b.classes&&Uy(d,i,b.classes),null!==b.styles&&I0(d,i,b.styles)));const x=l.createRenderer(i,s),P=wd(a,n_(s),null,s.onPush?64:16,a[20],b,l,x,p||null,null);return _.firstCreatePass&&($s(Nn(b,a),_,s.type),a_(_,b),J0(b,a.length,1)),rg(a,P),a[20]=P}(x,this.componentDef,pe,_,b);if(x)if(l)pt(b,x,["ng-version",VE.full]);else{const{attrs:Ie,classes:ct}=function By(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&s.push(p,i[++l]):8===d&&a.push(p);else{if(!Co(d))break;d=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&pt(b,x,Ie),ct&&ct.length>0&&Uy(b,x,ct.join(" "))}if($e=ma(K,20),void 0!==a){const Ie=$e.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const Gt=a[ct];Ie.push(null!=Gt?Array.from(Gt):null)}}Fe=function dg(i,s,a,l,d){const p=a[1],_=function RI(i,s,a){const l=fn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),X0(i,l,s,Au(i,s,1,null),a));const d=Ii(s,i,l.directiveStart,l);kr(d,s);const p=mr(l,s);return p&&kr(p,s),d}(p,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,s)),s.contentQueries){const b=fn();s.contentQueries(1,_,b.directiveStart)}const w=fn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(js(w.index),Y0(a[1],w,0,w.directiveStart,w.directiveEnd,s),Yh(s,_)),_}(Qe,this.componentDef,pe,U,[XI]),Ed(K,pe,null)}finally{fo()}return new MC(this.componentType,Fe,hc($e,pe),pe,$e)}}class MC extends class Kg{}{constructor(s,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new pc(d),this.componentType=s}get injector(){return new Ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Dn{}class Gf{}const Ba=new Map;class Wu extends Dn{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pv(this);const l=un(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=cw(s,a,[{provide:Dn,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=ys.THROW_IF_NOT_FOUND,l=lt.Default){return s===ys||s===Dn||s===ag?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class nm extends Gf{constructor(s){super(),this.moduleType=s,null!==un(s)&&function RC(i){const s=new Set;!function a(l){const d=un(l,!0),p=d.id;null!==p&&(function em(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(p,Ba.get(p),l),Ba.set(p,l));const _=g(d.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new Wu(this.moduleType,s)}}function mv(i,s,a){const l=ar()+i,d=be();return d[l]===it?ta(d,l,a?s.call(a):s()):function Na(i,s){return i[s]}(d,l)}function yv(i,s,a,l){return qf(be(),ar(),i,s,a,l)}function Wd(i,s,a,l,d){return function Fr(i,s,a,l,d,p,_){const w=s+a;return Ql(i,w,d,p)?ta(i,w+2,_?l.call(_,d,p):l(d,p)):Tn(i,w+2)}(be(),ar(),i,s,a,l,d)}function Tn(i,s){const a=i[s];return a===it?void 0:a}function qf(i,s,a,l,d,p){const _=s+a;return mi(i,_,d)?ta(i,_+1,p?l.call(p,d):l(d)):Tn(i,_+1)}function HE(i,s){const a=Ot();let l;const d=i+20;a.firstCreatePass?(l=function eo(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=Hr(l.type)),_=jn(Sd);try{const w=ui(!1),b=p();return ui(w),function bw(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,be(),d,b),b}finally{jn(_)}}function GE(i,s,a){const l=i+20,d=be(),p=wi(d,l);return function Yt(i,s){return i[1].data[s].pure}(d,l)?qf(d,ar(),s,p.transform,a,p):p.transform(a)}function Kd(i){return s=>{setTimeout(i,void 0,s)}}const Ki=class LC extends c.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,p,_;let w=s,b=a||(()=>null),T=l;if(s&&"object"==typeof s){const P=s;w=null===(d=P.next)||void 0===d?void 0:d.bind(P),b=null===(p=P.error)||void 0===p?void 0:p.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=Kd(b),w&&(w=Kd(w)),T&&(T=Kd(T)));const x=super.subscribe({next:w,error:b,complete:T});return s instanceof Y.w0&&s.add(x),x}};function zf(){return this._results[ku()]()}class mc{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ku(),l=mc.prototype;l[a]||(l[a]=zf)}get changes(){return this._changes||(this._changes=new Ki)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Er(s);(this._changesDetected=!function Sl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=s[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Yd=(()=>{class i{}return i.__NG_ELEMENT_ID__=VC,i})();const qE=Yd,ZE=class extends qE{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=wd(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Ed(a,l,s),new aa(l)}};function VC(){return Wf(fn(),be())}function Wf(i,s){return 4&i.type?new ZE(s,i,hc(i,s)):null}let Kf=(()=>{class i{}return i.__NG_ELEMENT_ID__=UC,i})();function UC(){return WE(fn(),be())}const BC=Kf,zE=class extends BC{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return hc(this._hostTNode,this._hostLView)}get injector(){return new Ci(this._hostTNode,this._hostLView)}get parentInjector(){const s=li(this._hostTNode,this._hostLView);if(Kc(s)){const a=bi(s,this._hostLView),l=cn(s);return new Ci(a[1].data[l+8],a)}return new Ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Qd(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,p){const _=s&&!function qo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,d=P.projectableNodes,p=P.ngModuleRef}const b=_?s:new Jg(jt(s)),T=l||this.parentInjector;if(!p&&null==b.ngModule){const U=(_?T:this.parentInjector).get(Dn,null);U&&(p=U)}const x=b.create(T,d,void 0,p);return this.insert(x.hostView,w),x}insert(s,a){const l=s._lView,d=l[1];if(function ru(i){return si(i[3])}(l)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const P=l[3],U=new zE(P,P[6],P[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function yd(i,s,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=s),l<p-10?(s[4]=a[d],xl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function _d(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,_,p);const w=Fy(p,_),b=l[11],T=Kl(b,_[7]);return null!==T&&function Gh(i,s,a,l,d,p){l[0]=d,l[6]=s,Zp(i,l,a,1,d,p)}(d,_[6],b,l,T,w),s.attachToViewContainerRef(),xl(rm(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Qd(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=My(this._lContainer,a);l&&(hs(rm(this._lContainer),a),ky(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=My(this._lContainer,a);return l&&null!=hs(rm(this._lContainer),a)?new aa(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Qd(i){return i[8]}function rm(i){return i[8]||(i[8]=[])}function WE(i,s){let a;const l=s[i.index];if(si(l))a=l;else{let d;if(8&i.type)d=nn(l);else{const p=s[11];d=p.createComment("");const _=mr(i,s);gs(p,Kl(p,_),d,function pI(i,s){return dn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=rw(l,s,d,i),rg(s,a)}return new zE(a,i,s)}class yc{constructor(s){this.queryList=s,this.matches=null}clone(){return new yc(this.queryList)}setDirty(){this.queryList.setDirty()}}class to{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new to(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==tb(s,a).matches&&this.queries[a].setDirty()}}class im{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class sm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new sm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class _c{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new _c(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(s,a,KE(a,p)),this.matchTNodeWithReadOption(s,a,$o(a,s,p,!1,!1))}else l===Yd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,$o(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===fc||d===Kf||d===Yd&&4&a.type)this.addMatch(a.index,-2);else{const p=$o(a,s,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function KE(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function QE(i,s,a,l){return-1===a?function YE(i,s){return 11&i.type?hc(i,s):4&i.type?Wf(i,s):null}(s,i):-2===a?function $C(i,s,a){return a===fc?hc(s,i):a===Yd?Wf(s,i):a===Kf?WE(s,i):void 0}(i,s,l):Ii(i,i[1],a,s)}function JE(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const p=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const T=_[b];w.push(T<0?null:QE(s,p[T],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function vc(i,s,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=JE(i,s,d,a);for(let w=0;w<p.length;w+=2){const b=p[w];if(b>0)l.push(_[w/2]);else{const T=p[w+1],x=s[-b];for(let P=10;P<x.length;P++){const U=x[P];U[17]===U[3]&&vc(U[1],U,T,l)}if(null!==x[9]){const P=x[9];for(let U=0;U<P.length;U++){const K=P[U];vc(K[1],K,T,l)}}}}}return l}function om(i){const s=be(),a=Ot(),l=ml();yl(l+1);const d=tb(a,l);if(i.dirty&&Ps(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?vc(a,s,l,[]):JE(a,s,d,l);i.reset(p,dv),i.notifyOnChanges()}return!0}return!1}function bv(i,s,a,l){const d=Ot();if(d.firstCreatePass){const p=fn();(function Cv(i,s,a){null===i.queries&&(i.queries=new sm),i.queries.track(new _c(s,a))})(d,new im(s,a,l),p.index),function GC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function eb(i,s,a){const l=new mc(4==(4&a));Kh(i,s,l,l.destroy),null===s[19]&&(s[19]=new to),s[19].queries.push(new yc(l))}(d,be(),a)}function Iv(){return function XE(i,s){return i[19].queries[s].queryList}(be(),ml())}function tb(i,s){return i.queries.getByIndex(s)}function wc(i,s){return Wf(i,s)}function ua(...i){}const eh=new bn("Application Initializer");let fm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ua,this.reject=ua,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(vf(p))a.push(p);else if(Tg(p)){const _=new Promise((w,b)=>{p.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(We(eh,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const pm=new bn("AppId",{providedIn:"root",factory:function gm(){return`${Pv()}${Pv()}${Pv()}`}});function Pv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fv=new bn("Platform Initializer"),Lv=new bn("Platform ID"),mm=new bn("appBootstrapListener");let bc=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const _m=new bn("LocaleId",{providedIn:"root",factory:()=>St(_m,lt.Optional|lt.SkipSelf)||function tD(){return"undefined"!=typeof $localize&&$localize.locale||De}()}),nD=new bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ju{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Ic=(()=>{class i{compileModuleSync(a){return new nm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(un(a).declarations).reduce((_,w)=>{const b=jt(w);return b&&_.push(new Jg(b)),_},[]);return new Ju(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rD=(()=>Promise.resolve(0))();function Jf(i){"undefined"==typeof Zone?rD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ko{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ki(!1),this.onMicrotaskEmpty=new Ki(!1),this.onStable=new Ki(!1),this.onError=new Ki(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function vm(){let i=Vt.requestAnimationFrame,s=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Em(i){const s=()=>{!function wm(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,bm(i),i.isCheckStableRunning=!0,Cc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),bm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,w)=>{try{return Ri(i),a.invokeTask(d,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Uv(i)}},onInvoke:(a,l,d,p,_,w,b)=>{try{return Ri(i),a.invoke(d,p,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),Uv(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,bm(i),Cc(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ko.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ko.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,s,yb,ua,ua);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const yb={};function Cc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function bm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Ri(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Uv(i){i._nesting--,Cc(i)}class Im{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ki,this.onMicrotaskEmpty=new Ki,this.onStable=new Ki,this.onError=new Ki}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Cm=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ko.assertNotInAngularZone(),Jf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(We(ko))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),Bv=(()=>{class i{constructor(){this._applications=new Map,Dm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Dm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class Xu{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function th(i){Dm=i}let ti,Dm=new Xu;const ja=new bn("AllowMultipleToken");class Dc{constructor(s,a){this.name=s,this.token=a}}function $v(i,s,a=[]){const l=`Platform: ${s}`,d=new bn(l);return(p=[])=>{let _=vb();if(!_||_.injector.get(ja,!1))if(i)i(a.concat(p).concat({provide:d,useValue:!0}));else{const w=a.concat(p).concat({provide:d,useValue:!0},{provide:ug,useValue:"platform"});!function jv(i){if(ti&&!ti.destroyed&&!ti.injector.get(ja,!1))throw new Ae(400,"");ti=i.get(wb);const s=i.get(Fv,null);s&&s.forEach(a=>a())}(ys.create({providers:w,name:l}))}return function sD(i){const s=vb();if(!s)throw new Ae(401,"");return s}()}}function vb(){return ti&&!ti.destroyed?ti:null}let wb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function Tm(i,s){let a;return a="noop"===i?new Im:("zone.js"===i?void 0:i)||new ko({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:ko,useValue:w}];return w.run(()=>{const T=ys.create({providers:b,parent:this.injector,name:a.moduleType.name}),x=a.create(T),P=x.injector.get(Ir,null);if(!P)throw new Ae(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:K=>{P.handleError(K)}});x.onDestroy(()=>{Am(this._modules,x),U.unsubscribe()})}),function Eb(i,s,a){try{const l=a();return vf(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const U=x.injector.get(fm);return U.runInitializers(),U.donePromise.then(()=>(function gC(i){ut(i,"Expected localeId to be defined"),"string"==typeof i&&(pE=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(_m,De)||De),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=bb({},l);return function iD(i,s,a){const l=new nm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Hv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ae(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(We(ys))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function bb(i,s){return Array.isArray(s)?s.reduce(bb,i):Object.assign(Object.assign({},i),s)}let Hv=(()=>{class i{constructor(a,l,d,p,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new O.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ko.assertNotInAngularZone(),Jf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{ko.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,te.T)(w,b.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ae(405,"");let d;d=a instanceof Yg?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function _b(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Dn),w=d.create(ys.NULL,[],l||d.selector,p),b=w.location.nativeElement,T=w.injector.get(Cm,null),x=T&&w.injector.get(Bv);return T&&x&&x.registerApplication(b,T),w.onDestroy(()=>{this.detachView(w.hostView),Am(this.components,w),x&&x.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ae(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Am(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(mm,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(We(ko),We(ys),We(Ir),We(Bf),We(fm))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Am(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Gv=!0,qv=!1;function oD(){return qv=!0,Gv}function Ib(){if(qv)throw new Error("Cannot enable prod mode after platform setup.");Gv=!1}let Sm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Zv,i})();function Zv(i){return function aD(i,s,a){if(Ms(i)&&!a){const l=yr(i.index,s);return new aa(l,l)}return 47&i.type?new aa(s[16],s):null}(fn(),be(),16==(16&i))}class Mb{constructor(){}supports(s){return nf(s)}create(s){return new Kv(s)}}const hD=(i,s)=>s;class Kv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Rb(l,d,p)?a:l,w=Rb(_,d,p),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=w-d,x=b-d;if(T!=x){for(let U=0;U<T;U++){const K=U<p.length?p[U]:p[U]=0,pe=K+U;x<=pe&&pe<T&&(p[U]=K+1)}p[_.previousIndex]=x-T}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!nf(s))throw new Ae(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else d=0,function gi(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ku()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,d)):s=this._addAfter(new Vr(a,l),p,d),s}_verifyReinsertion(s,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,p=s._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new kb),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kb),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Vr{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class kb{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new fD,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rb(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class Nb{constructor(){}supports(s){return s instanceof Map||Yl(s)}create(){return new pD}}class pD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Yl(s)))throw new Ae(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new gD(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class gD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Nm(){return new Om([new Mb])}let Om=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Nm()),deps:[[i,new vo,new hi]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ae(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Nm}),i})();function Pm(){return new rh([new Nb])}let rh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Pm()),deps:[[i,new vo,new hi]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ae(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Pm}),i})();const Lb=$v(null,"core",[{provide:Lv,useValue:"unknown"},{provide:wb,deps:[ys]},{provide:Bv,deps:[]},{provide:bc,deps:[]}]);let yD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(We(Hv))},i.\u0275mod=Q({type:i}),i.\u0275inj=Wt({}),i})()},3942:(nt,Ee,N)=>{N.d(Ee,{Z:()=>Ae});var c=N(2090),Y=N(4859),O=N(9681),te=N(1877);class J{constructor(ye,we){this._delegate=ye,this.firebase=we,(0,O._addComponent)(ye,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ye,we=O._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(ye);return!et.isInitialized()&&"EXPLICIT"===(null===(st=et.getComponent())||void 0===st?void 0:st.instantiationMode)&&et.initialize(),et.getImmediate({identifier:we})}_removeServiceInstance(ye,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(we)}_addComponent(ye){(0,O._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,O._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const ze=function de(ze){const ye={},we={__esModule:!0,initializeApp:function Te(je,ee={}){const z=O.initializeApp(je,ee);if((0,c.r3)(ye,z.name))return ye[z.name];const ne=new ze(z,we);return ye[z.name]=ne,ne},app:et,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const ee=je.name,z=ee.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const ne=(ge=et())=>{if("function"!=typeof ge[z])throw se.create("invalid-app-argument",{appName:ee});return ge[z]()};void 0!==je.serviceProps&&(0,c.ZB)(ne,je.serviceProps),we[z]=ne,ze.prototype[z]=function(...ge){return this._getService.bind(this,ee).apply(this,je.multipleInstances?ge:[])}}return"PUBLIC"===je.type?we[z]:null},removeApp:function st(je){delete ye[je]},useAsService:function Ge(je,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function et(je){if(!(0,c.r3)(ye,je=je||O._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:je});return ye[je]}return we.default=we,Object.defineProperty(we,"apps",{get:function _e(){return Object.keys(ye).map(je=>ye[je])}}),et.App=ze,we}(J);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function ye(we){(0,c.ZB)(ze,we)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),ze}(),$=new te.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=j;!function Me(ze){(0,O.registerVersion)("@firebase/app-compat","0.1.21",ze)}()},9681:(nt,Ee,N)=>{N.r(Ee),N.d(Ee,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>Sn,_addComponent:()=>an,_addOrOverwriteComponent:()=>_i,_apps:()=>gt,_clearComponents:()=>Ut,_components:()=>on,_getProvider:()=>Qi,_registerComponent:()=>Xt,_removeServiceInstance:()=>Wt,deleteApp:()=>Xi,getApp:()=>Sr,getApps:()=>Ji,initializeApp:()=>Oi,onLog:()=>Kn,registerVersion:()=>jr,setLogLevel:()=>jn});var c=N(5861),Y=N(4859),O=N(1877),te=N(2090);class J{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function fe(Ze){const Ce=Ze.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(Ke)){const ht=Ke.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Ke=>Ke).join(" ")}}const se="@firebase/app",ue=new O.Yd("@firebase/app"),Sn="[DEFAULT]",ut={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},gt=new Map,on=new Map;function an(Ze,Ce){try{Ze.container.addComponent(Ce)}catch(Ke){ue.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ze.name}`,Ke)}}function _i(Ze,Ce){Ze.container.addOrOverwriteComponent(Ce)}function Xt(Ze){const Ce=Ze.name;if(on.has(Ce))return ue.debug(`There were multiple attempts to register component ${Ce}.`),!1;on.set(Ce,Ze);for(const Ke of gt.values())an(Ke,Ze);return!0}function Qi(Ze,Ce){const Ke=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),Ze.container.getProvider(Ce)}function Wt(Ze,Ce,Ke=Sn){Qi(Ze,Ce).clearInstance(Ke)}function Ut(){on.clear()}const ni=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ds{constructor(Ce,Ke,ht){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const Ar="9.6.10";function Oi(Ze,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const Ke=Object.assign({name:Sn,automaticDataCollectionEnabled:!1},Ce),ht=Ke.name;if("string"!=typeof ht||!ht)throw ni.create("bad-app-name",{appName:String(ht)});const Lt=gt.get(ht);if(Lt){if((0,te.vZ)(Ze,Lt.options)&&(0,te.vZ)(Ke,Lt.config))return Lt;throw ni.create("duplicate-app",{appName:ht})}const Nt=new Y.H0(ht);for(const L of on.values())Nt.addComponent(L);const B=new Ds(Ze,Ke,Nt);return gt.set(ht,B),B}function Sr(Ze=Sn){const Ce=gt.get(Ze);if(!Ce)throw ni.create("no-app",{appName:Ze});return Ce}function Ji(){return Array.from(gt.values())}function Xi(Ze){return lt.apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(Ze){const Ce=Ze.name;gt.has(Ce)&&(gt.delete(Ce),yield Promise.all(Ze.container.getProviders().map(Ke=>Ke.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function jr(Ze,Ce,Ke){var ht;let Lt=null!==(ht=ut[Ze])&&void 0!==ht?ht:Ze;Ke&&(Lt+=`-${Ke}`);const Nt=Lt.match(/\s|\//),B=Ce.match(/\s|\//);if(Nt||B){const L=[`Unable to register library "${Lt}" with version "${Ce}":`];return Nt&&L.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),Nt&&B&&L.push("and"),B&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Xt(new Y.wA(`${Lt}-version`,()=>({library:Lt,version:Ce}),"VERSION"))}function Kn(Ze,Ce){if(null!==Ze&&"function"!=typeof Ze)throw ni.create("invalid-log-argument");(0,O.Am)(Ze,Ce)}function jn(Ze){(0,O.Ub)(Ze)}const hn="firebase-heartbeat-store";let Yn=null;function Ts(){return Yn||(Yn=(0,te.X3)("firebase-heartbeat-database",1,(Ze,Ce)=>{0===Ce&&Ze.createObjectStore(hn)}).catch(Ze=>{throw ni.create("storage-open",{originalErrorMessage:Ze.message})})),Yn}function Bt(){return(Bt=(0,c.Z)(function*(Ze){try{return(yield Ts()).transaction(hn).objectStore(hn).get(tr(Ze))}catch(Ce){throw ni.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function rt(Ze,Ce){return vt.apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(Ze,Ce){try{const ht=(yield Ts()).transaction(hn,"readwrite");return yield ht.objectStore(hn).put(Ce,tr(Ze)),ht.complete}catch(Ke){throw ni.create("storage-set",{originalErrorMessage:Ke.message})}})).apply(this,arguments)}function tr(Ze){return`${Ze.name}!${Ze.options.appId}`}class io{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new dt(Ke),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Ce=this;return(0,c.Z)(function*(){const ht=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=fr();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!Ce._heartbeatsCache.heartbeats.some(Nt=>Nt.date===Lt))return Ce._heartbeatsCache.heartbeats.push({date:Lt,agent:ht}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Nt=>{const B=new Date(Nt.date).valueOf();return Date.now()-B<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,c.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Ke=fr(),{heartbeatsToSend:ht,unsentEntries:Lt}=function nr(Ze,Ce=1024){const Ke=[];let ht=Ze.slice();for(const Lt of Ze){const Nt=Ke.find(B=>B.agent===Lt.agent);if(Nt){if(Nt.dates.push(Lt.date),pr(Ke)>Ce){Nt.dates.pop();break}}else if(Ke.push({agent:Lt.agent,dates:[Lt.date]}),pr(Ke)>Ce){Ke.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:ht}}(Ce._heartbeatsCache.heartbeats),Nt=(0,te.L)(JSON.stringify({version:2,heartbeats:ht}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Ke,Lt.length>0?(Ce._heartbeatsCache.heartbeats=Lt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Nt})()}}function fr(){return(new Date).toISOString().substring(0,10)}class dt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,c.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function ca(Ze){return Bt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Ke=this;return(0,c.Z)(function*(){var ht;if(yield Ke._canUseIndexedDBPromise){const Nt=yield Ke.read();return rt(Ke.app,{lastSentHeartbeatDate:null!==(ht=Ce.lastSentHeartbeatDate)&&void 0!==ht?ht:Nt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Ke=this;return(0,c.Z)(function*(){var ht;if(yield Ke._canUseIndexedDBPromise){const Nt=yield Ke.read();return rt(Ke.app,{lastSentHeartbeatDate:null!==(ht=Ce.lastSentHeartbeatDate)&&void 0!==ht?ht:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...Ce.heartbeats]})}})()}}function pr(Ze){return(0,te.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Ft(Ze){Xt(new Y.wA("platform-logger",Ce=>new J(Ce),"PRIVATE")),Xt(new Y.wA("heartbeat",Ce=>new io(Ce),"PRIVATE")),jr(se,"0.7.20",Ze),jr(se,"0.7.20","esm2017"),jr("fire-js","")}("")},4859:(nt,Ee,N)=>{N.d(Ee,{H0:()=>de,wA:()=>O});var c=N(5861),Y=N(2090);class O{constructor(j,$,Z){this.name=j,this.instanceFactory=$,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const te="[DEFAULT]";class J{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const Z=new Y.BH;if(this.instancesDeferred.set($,Z),this.isInitialized($)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:$});He&&Z.resolve(He)}catch(He){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const Z=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),He=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Me){if(He)return null;throw Me}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function se(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:te})}catch($){}for(const[$,Z]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:He});Z.resolve(Me)}catch(Me){}}}}clearInstance(j=te){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,c.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...$.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=te){return this.instances.has(j)}getOptions(j=te){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,Z=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Z,options:$});for(const[Me,Ae]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Me)&&Ae.resolve(He);return He}onInit(j,$){var Z;const He=this.normalizeInstanceIdentifier($),Me=null!==(Z=this.onInitCallbacks.get(He))&&void 0!==Z?Z:new Set;Me.add(j),this.onInitCallbacks.set(He,Me);const Ae=this.instances.get(He);return Ae&&j(Ae,He),()=>{Me.delete(j)}}invokeOnInitCallbacks(j,$){const Z=this.onInitCallbacks.get($);if(Z)for(const He of Z)try{He(j,$)}catch(Me){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let Z=this.instances.get(j);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===te?void 0:ue),options:$}),this.instances.set(j,Z),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(Z,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Z)}catch(He){}var ue;return Z||null}normalizeInstanceIdentifier(j=te){return this.component?this.component.multipleInstances?j:te:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new J(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ee,N)=>{N.d(Ee,{Am:()=>ue,Ub:()=>de,Yd:()=>se,in:()=>Y});const c=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},te=Y.INFO,J={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fe=(j,$,...Z)=>{if($<j.logLevel)return;const He=(new Date).toISOString(),Me=J[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${He}]  ${j.name}:`,...Z)};class se{constructor($){this.name=$,this._logLevel=te,this._logHandler=fe,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Y))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...$),this._logHandler(this,Y.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...$),this._logHandler(this,Y.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...$),this._logHandler(this,Y.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...$),this._logHandler(this,Y.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...$),this._logHandler(this,Y.ERROR,...$)}}function de(j){c.forEach($=>{$.setLogLevel(j)})}function ue(j,$){for(const Z of c){let He=null;$&&$.level&&(He=O[$.level]),Z.userLogHandler=null===j?null:(Me,Ae,...ze)=>{const ye=ze.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(st){return null}}).filter(we=>we).join(" ");Ae>=(null!=He?He:Me.logLevel)&&j({level:Y[Ae].toLowerCase(),message:ye,args:ze,type:Me.name})}}}},5861:(nt,Ee,N)=>{function c(O,te,J,fe,se,de,ue){try{var j=O[de](ue),$=j.value}catch(Z){return void J(Z)}j.done?te($):Promise.resolve($).then(fe,se)}function Y(O){return function(){var te=this,J=arguments;return new Promise(function(fe,se){var de=O.apply(te,J);function ue($){c(de,fe,se,ue,j,"next",$)}function j($){c(de,fe,se,ue,j,"throw",$)}ue(void 0)})}}N.d(Ee,{Z:()=>Y})}},nt=>{nt(nt.s=5547)}]);