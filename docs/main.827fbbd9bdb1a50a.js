"use strict";(self.webpackChunkclips=self.webpackChunkclips||[]).push([[179],{2011:(rt,Ce,N)=>{N.d(Ce,{Dh:()=>he,GT:()=>ge,cc:()=>Ae,hO:()=>qe,on:()=>j,pX:()=>J,xv:()=>le});var d=N(5e3),K=N(127),O=N(5813);rt=N.hmd(rt);const oe=["ngOnDestroy"],J=(Ee,Xe,ze,De={})=>new Proxy(Ee,{get:(ve,we)=>ze.runOutsideAngular(()=>{var He;if(Ee[we])return(null===(He=null==De?void 0:De.spy)||void 0===He?void 0:He.get)&&De.spy.get(we,Ee[we]),Ee[we];if(oe.indexOf(we)>-1)return()=>{};const Be=Xe.toPromise().then(te=>{const z=te&&te[we];return"function"==typeof z?z.bind(te):z&&z.then?z.then(ne=>ze.run(()=>ne)):ze.run(()=>z)});return new Proxy(()=>{},{get:(te,z)=>Be[z],apply:(te,z,ne)=>Be.then(me=>{var re;const Me=me&&me(...ne);return(null===(re=null==De?void 0:De.spy)||void 0===re?void 0:re.apply)&&De.spy.apply(we,ne,Me),Me})})})}),ge=(Ee,Xe)=>{Xe.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(De=>{Object.defineProperty(Ee.prototype,De,Object.getOwnPropertyDescriptor(ze.prototype||ze,De))})})};class ae{constructor(Xe){return Xe}}const he=new d.OlP("angularfire2.app.options"),le=new d.OlP("angularfire2.app.name");function j(Ee,Xe,ze){const ve="object"==typeof ze&&ze||{};ve.name=ve.name||"string"==typeof ze&&ze||"[DEFAULT]";const He=K.Z.apps.filter(Be=>Be&&Be.name===ve.name)[0]||Xe.runOutsideAngular(()=>K.Z.initializeApp(Ee,ve));try{JSON.stringify(Ee)!==JSON.stringify(He.options)&&$("error",`${He.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ae(He)}const $=(Ee,...Xe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Xe)},Q={provide:ae,useFactory:j,deps:[he,d.R0b,[new d.FiY,le]]};let qe=(()=>{class Ee{constructor(ze){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",d.q4F.full,ze.toString())}static initializeApp(ze,De){return{ngModule:Ee,providers:[{provide:he,useValue:ze},{provide:le,useValue:De}]}}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(d.LFG(d.Lbi))},Ee.\u0275mod=d.oAB({type:Ee}),Ee.\u0275inj=d.cJS({providers:[Q]}),Ee})();function Ae(Ee,Xe,ze,De,ve){const[,we,He]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ee)||[];if(we)return function ke(Ee,Xe){try{return Ee.toString()===Xe.toString()}catch(ze){return Ee===Xe}}(ve,He)||(pe("error",`${Xe} was already initialized on the ${ze} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:ve,was:He})),we;{const Be=De();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Be,ve]),Be}}const Fe=!!rt.hot,pe=(Ee,...Xe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,Ce,N)=>{N.d(Ce,{q4:()=>vl,iC:()=>Cl,HU:()=>mu,vb:()=>Qc,JM:()=>Ks});var d=N(5e3),K=N(5867),O=N(5861),oe=N(9681),J=N(2090),ge=N(4859),ae=N(1877);const he="@firebase/installations",$="w:0.5.7",Q="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(b){return b instanceof J.ZR&&b.code.includes("request-failed")}function ze({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function De(b){return{token:b.token,requestStatus:2,expiresIn:ne(b.expiresIn),creationTime:Date.now()}}function ve(b,D){return we.apply(this,arguments)}function we(){return(we=(0,O.Z)(function*(b,D){const F=(yield D.json()).error;return Ee.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Be(b,{refreshToken:D}){const M=He(b);return M.append("Authorization",function me(b){return`${Q} ${b}`}(D)),M}function te(b){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function ne(b){return Number(b.replace("s","000"))}function re(b,D){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:M}){const F=ze(b),Z=He(b),X=D.getImmediate({optional:!0});if(X){const _t=yield X.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const xe={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:Q,appId:b.appId,sdkVersion:$})},We=yield te(()=>fetch(F,xe));if(We.ok){const _t=yield We.json();return{fid:_t.fid||M,registrationStatus:2,refreshToken:_t.refreshToken,authToken:De(_t.authToken)}}throw yield ve("Create Installation",We)})).apply(this,arguments)}function ue(b){return new Promise(D=>{setTimeout(D,b)})}const Wt=/^[cdef][\w-]{21}$/;function ot(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function ht(b){return function Et(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Wt.test(M)?M:""}catch(b){return""}}function sn(b){return`${b.appName}!${b.appId}`}const on=new Map;function yi(b,D){const M=sn(b);Kt(M,D),function jt(b,D){const M=function ni(){return!tr&&"BroadcastChannel"in self&&(tr=new BroadcastChannel("[Firebase] FID Change"),tr.onmessage=b=>{Kt(b.data.key,b.data.fid)}),tr}();M&&M.postMessage({key:b,fid:D}),function Ds(){0===on.size&&tr&&(tr.close(),tr=null)}()}(M,D)}function Kt(b,D){const M=on.get(b);if(M)for(const F of M)F(D)}let tr=null;const kr="firebase-installations-store";let Xi=null;function es(){return Xi||(Xi=(0,J.X3)("firebase-installations-database",1,(b,D)=>{0===D&&b.createObjectStore(kr)})),Xi}function at(b,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(b,D){const M=sn(b),Z=(yield es()).transaction(kr,"readwrite"),X=Z.objectStore(kr),Se=yield X.get(M);return yield X.put(D,M),yield Z.complete,(!Se||Se.fid!==D.fid)&&yi(b,D.fid),D})).apply(this,arguments)}function Zn(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(b){const D=sn(b),F=(yield es()).transaction(kr,"readwrite");yield F.objectStore(kr).delete(D),yield F.complete})).apply(this,arguments)}function ri(b,D){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(b,D){const M=sn(b),Z=(yield es()).transaction(kr,"readwrite"),X=Z.objectStore(kr),Se=yield X.get(M),xe=D(Se);return void 0===xe?yield X.delete(M):yield X.put(xe,M),yield Z.complete,xe&&(!Se||Se.fid!==xe.fid)&&yi(b,xe.fid),xe})).apply(this,arguments)}function fn(b){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(b){let D;const M=yield ri(b.appConfig,F=>{const Z=Ts(F),X=ua(b,Z);return D=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function Ts(b){return Ut(b||{fid:ot(),registrationStatus:0})}function ua(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ee.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function $t(b,D){return nt.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:yt(b)}:{installationEntry:D}}function nt(){return(nt=(0,O.Z)(function*(b,D){try{const M=yield re(b,D);return at(b.appConfig,M)}catch(M){throw Xe(M)&&409===M.customData.serverCode?yield Zn(b.appConfig):yield at(b.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function yt(b){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*(b){let D=yield Oi(b.appConfig);for(;1===D.registrationStatus;)yield ue(100),D=yield Oi(b.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield fn(b);return F||M}return D})).apply(this,arguments)}function Oi(b){return ri(b,D=>{if(!D)throw Ee.create("installation-not-found");return Ut(D)})}function Ut(b){return function no(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function hr(b,D){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:D},M){const F=lt(b,M),Z=Be(b,M),X=D.getImmediate({optional:!0});if(X){const _t=yield X.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const xe={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:$,appId:b.appId}})},We=yield te(()=>fetch(F,xe));if(We.ok)return De(yield We.json());throw yield ve("Generate Auth Token",We)})).apply(this,arguments)}function lt(b,{fid:D}){return`${ze(b)}/${D}/authTokens:generate`}function fr(b){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(b,D=!1){let M;const F=yield ri(b.appConfig,X=>{if(!Nt(X))throw Ee.create("not-registered");const Se=X.authToken;if(!D&&B(Se))return X;if(1===Se.requestStatus)return M=Ze(b,D),X;{if(!navigator.onLine)throw Ee.create("app-offline");const xe=H(X);return M=ct(b,xe),xe}});return M?yield M:F.authToken})).apply(this,arguments)}function Ze(b,D){return Te.apply(this,arguments)}function Te(){return(Te=(0,O.Z)(function*(b,D){let M=yield Ke(b.appConfig);for(;1===M.authToken.requestStatus;)yield ue(100),M=yield Ke(b.appConfig);const F=M.authToken;return 0===F.requestStatus?fr(b,D):F})).apply(this,arguments)}function Ke(b){return ri(b,D=>{if(!Nt(D))throw Ee.create("not-registered");return function de(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function ct(b,D){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,O.Z)(function*(b,D){try{const M=yield hr(b,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield at(b.appConfig,F),M}catch(M){if(!Xe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield at(b.appConfig,F)}else yield Zn(b.appConfig);throw M}})).apply(this,arguments)}function Nt(b){return void 0!==b&&2===b.registrationStatus}function B(b){return 2===b.requestStatus&&!function L(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function H(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function Ve(){return(Ve=(0,O.Z)(function*(b){const D=b,{installationEntry:M,registrationPromise:F}=yield fn(D);return F?F.catch(console.error):fr(D).catch(console.error),M.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(b,D=!1){const M=b;return yield pr(M),(yield fr(M,D)).token})).apply(this,arguments)}function pr(b){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,O.Z)(function*(b){const{registrationPromise:D}=yield fn(b);D&&(yield D)})).apply(this,arguments)}function $n(b){return Ee.create("missing-app-config-values",{valueName:b})}const ca="installations",Re=b=>{const D=b.getProvider("app").getImmediate(),M=function ts(b){if(!b||!b.options)throw $n("App Configuration");if(!b.name)throw $n("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!b.options[M])throw $n(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},St=b=>{const D=b.getProvider("app").getImmediate(),M=(0,oe._getProvider)(D,ca).getImmediate();return{getId:()=>function Y(b){return Ve.apply(this,arguments)}(M),getToken:Z=>function ft(b){return qt.apply(this,arguments)}(M,Z)}};(function un(){(0,oe._registerComponent)(new ge.wA(ca,Re,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("installations-internal",St,"PRIVATE"))})(),(0,oe.registerVersion)(he,"0.5.7"),(0,oe.registerVersion)(he,"0.5.7","esm2017");const ir="@firebase/remote-config",An=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dh{constructor(D,M,F,Z){this.client=D,this.storage=M,this.storageCache=F,this.logger=Z}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,Z=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Z;D.eTag=Z&&Z.eTag;const X=yield M.client.fetch(D),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Se),X})()}}function Mc(b=navigator){return b.languages&&b.languages[0]||b.language}class Ka{constructor(D,M,F,Z,X,Se){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=Z,this.apiKey=X,this.appId=Se}fetch(D){var M=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},We={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:M.appId,language_code:Mc()},_t={method:"POST",headers:xe,body:JSON.stringify(We)},Tt=fetch(Se,_t),It=new Promise((hi,Ti)=>{D.signal.addEventListener(()=>{const yo=new Error("The operation was aborted.");yo.name="AbortError",Ti(yo)})});let Ln;try{yield Promise.race([Tt,It]),Ln=yield Tt}catch(hi){let Ti="fetch-client-network";throw"AbortError"===hi.name&&(Ti="fetch-timeout"),An.create(Ti,{originalErrorMessage:hi.message})}let In=Ln.status;const zo=Ln.headers.get("ETag")||void 0;let mo,Nr;if(200===Ln.status){let hi;try{hi=yield Ln.json()}catch(Ti){throw An.create("fetch-client-parse",{originalErrorMessage:Ti.message})}mo=hi.entries,Nr=hi.state}if("INSTANCE_STATE_UNSPECIFIED"===Nr?In=500:"NO_CHANGE"===Nr?In=304:("NO_TEMPLATE"===Nr||"EMPTY_CONFIG"===Nr)&&(mo={}),304!==In&&200!==In)throw An.create("fetch-status",{httpStatus:In});return{status:In,eTag:zo,config:mo}})()}}class vp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function Pn(b,D){return new Promise((M,F)=>{const Z=Math.max(D-Date.now(),0),X=setTimeout(M,Z);b.addEventListener(()=>{clearTimeout(X),F(An.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const X=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),X}catch(X){if(!function kc(b){if(!(b instanceof J.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(X))throw X;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Se),Z.attemptFetch(D,Se)}})()}}class Ya{constructor(D,M,F,Z,X){this.app=D,this._client=M,this._storageCache=F,this._storage=Z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ku(b,D){const M=b.target.error||void 0;return An.create(D,{originalErrorMessage:M&&M.message})}const ks="app_namespace_store";class bp{constructor(D,M,F,Z=function Ip(){return new Promise((b,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(Ku(F,"storage-open"))},M.onsuccess=F=>{b(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ks,{keyPath:"compositeKey"})}}catch(M){D(An.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,X)=>{const xe=F.transaction([ks],"readonly").objectStore(ks),We=M.createCompositeKey(D);try{const _t=xe.get(We);_t.onerror=Tt=>{X(Ku(Tt,"storage-get"))},_t.onsuccess=Tt=>{const It=Tt.target.result;Z(It?It.value:void 0)}}catch(_t){X(An.create("storage-get",{originalErrorMessage:_t&&_t.message}))}})})()}set(D,M){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((X,Se)=>{const We=Z.transaction([ks],"readwrite").objectStore(ks),_t=F.createCompositeKey(D);try{const Tt=We.put({compositeKey:_t,value:M});Tt.onerror=It=>{Se(Ku(It,"storage-set"))},Tt.onsuccess=()=>{X()}}catch(Tt){Se(An.create("storage-set",{originalErrorMessage:Tt&&Tt.message}))}})})()}delete(D){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((Z,X)=>{const xe=F.transaction([ks],"readwrite").objectStore(ks),We=M.createCompositeKey(D);try{const _t=xe.delete(We);_t.onerror=Tt=>{X(Ku(Tt,"storage-delete"))},_t.onsuccess=()=>{Z()}}catch(_t){X(An.create("storage-delete",{originalErrorMessage:_t&&_t.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Nc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),X=yield M;X&&(D.lastFetchStatus=X);const Se=yield F;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const xe=yield Z;xe&&(D.activeConfig=xe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function io(){return Th.apply(this,arguments)}function Th(){return(Th=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}!function No(){(0,oe._registerComponent)(new ge.wA("remote-config",function b(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,J.hl)())throw An.create("indexed-db-unavailable");const{projectId:X,apiKey:Se,appId:xe}=F.options;if(!X)throw An.create("registration-project-id");if(!Se)throw An.create("registration-api-key");if(!xe)throw An.create("registration-app-id");const We=new bp(xe,F.name,M=M||"firebase"),_t=new Nc(We),Tt=new ae.Yd(ir);Tt.logLevel=ae.in.ERROR;const It=new Ka(Z,oe.SDK_VERSION,M,X,Se,xe),Ln=new vp(It,We),In=new Dh(Ln,We,_t,Tt),zo=new Ya(F,In,_t,We,Tt);return function or(b){const D=(0,J.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(zo),zo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ir,"0.3.6"),(0,oe.registerVersion)(ir,"0.3.6","esm2017")}();const Yu="/firebase-messaging-sw.js",Rs="/firebase-cloud-messaging-push-scope",zr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",so="google.c.a.c_id",ha="google.c.a.c_l",Oc="google.c.a.ts",Cp="google.c.a.e";var Os=(()=>{return(b=Os||(Os={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Os;var b})();function oi(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ja(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),Z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)Z[X]=F.charCodeAt(X);return Z}const Xa="fcm_token_details_db",ar="fcm_token_object_Store";function Ah(b){return eu.apply(this,arguments)}function eu(){return eu=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Xa))return null;let D=null;return(yield(0,J.X3)(Xa,5,function(){var F=(0,O.Z)(function*(Z,X,Se,xe){var We;if(X<2||!Z.objectStoreNames.contains(ar))return;const _t=xe.objectStore(ar),Tt=yield _t.index("fcmSenderId").get(b);if(yield _t.clear(),Tt)if(2===X){const It=Tt;if(!It.auth||!It.p256dh||!It.endpoint)return;D={token:It.fcmToken,createTime:null!==(We=It.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:oi(It.vapidKey)}}}else if(3===X){const It=Tt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:oi(It.auth),p256dh:oi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:oi(It.vapidKey)}}}else if(4===X){const It=Tt;D={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:oi(It.auth),p256dh:oi(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:oi(It.vapidKey)}}}});return function(Z,X,Se,xe){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Xa),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Pc(D)?D:null}),eu.apply(this,arguments)}function Pc(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ss="firebase-messaging-store";let fa=null;function Qu(){return fa||(fa=(0,J.X3)("firebase-messaging-database",1,(b,D)=>{0===D&&b.createObjectStore(ss)})),fa}function hn(b){return Po.apply(this,arguments)}function Po(){return(Po=(0,O.Z)(function*(b){const D=ao(b),F=yield(yield Qu()).transaction(ss).objectStore(ss).get(D);if(F)return F;{const Z=yield Ah(b.appConfig.senderId);if(Z)return yield Ps(b,Z),Z}})).apply(this,arguments)}function Ps(b,D){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(b,D){const M=ao(b),Z=(yield Qu()).transaction(ss,"readwrite");return yield Z.objectStore(ss).put(D,M),yield Z.complete,D})).apply(this,arguments)}function Fc(b){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(b){const D=ao(b),F=(yield Qu()).transaction(ss,"readwrite");yield F.objectStore(ss).delete(D),yield F.complete})).apply(this,arguments)}function ao({appConfig:b}){return b.appId}const Sn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function pa(b,D){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(b,D){const M=yield Ls(b),F=dt(D),Z={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Wr(b.appConfig),Z)).json()}catch(Se){throw Sn.create("token-subscribe-failed",{errorInfo:Se})}if(X.error)throw Sn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Sn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function mr(b,D){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(b,D){const M=yield Ls(b),F=dt(D.subscriptionOptions),Z={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Wr(b.appConfig)}/${D.token}`,Z)).json()}catch(Se){throw Sn.create("token-update-failed",{errorInfo:Se})}if(X.error)throw Sn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Sn.create("token-update-no-token");return X.token})).apply(this,arguments)}function os(b,D){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(b,D){const F={method:"DELETE",headers:yield Ls(b)};try{const X=yield(yield fetch(`${Wr(b.appConfig)}/${D}`,F)).json();if(X.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(Z){throw Sn.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function Wr({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ls(b){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,O.Z)(function*({appConfig:b,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function dt({p256dh:b,auth:D,endpoint:M,vapidKey:F}){const Z={web:{endpoint:M,auth:D,p256dh:b}};return F!==zr&&(Z.web.applicationPubKey=F),Z}const iu=6048e5;function ga(b){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(b){const D=yield el(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:oi(D.getKey("auth")),p256dh:oi(D.getKey("p256dh"))},F=yield hn(b.firebaseDependencies);if(F){if(Fo(F.subscriptionOptions,M))return Date.now()>=F.createTime+iu?Ju(b,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield os(b.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return be(b.firebaseDependencies,M)}return be(b.firebaseDependencies,M)})).apply(this,arguments)}function ou(b){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(b){const D=yield hn(b.firebaseDependencies);D&&(yield os(b.firebaseDependencies,D.token),yield Fc(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ju(b,D){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,O.Z)(function*(b,D){try{const M=yield mr(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Ps(b.firebaseDependencies,F),M}catch(M){throw yield ou(b),M}})).apply(this,arguments)}function be(b,D){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(b,D){const F={token:yield pa(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Ps(b,F),F.token})).apply(this,arguments)}function el(b,D){return pn.apply(this,arguments)}function pn(){return(pn=(0,O.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ja(D)})})).apply(this,arguments)}function Fo(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function Lo(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Kr(b,D){if(!D.notification)return;b.notification={};const M=D.notification.title;M&&(b.notification.title=M);const F=D.notification.body;F&&(b.notification.body=F);const Z=D.notification.image;Z&&(b.notification.image=Z)}(D,b),function tl(b,D){!D.data||(b.data=D.data)}(D,b),function nl(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const M=D.fcmOptions.link;M&&(b.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(D,b),D}function Lc(b){return"object"==typeof b&&!!b&&so in b}function rl(b,D){const M=[];for(let F=0;F<b.length;F++)M.push(b.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function Us(b){return Sn.create("missing-app-config-values",{valueName:b})}rl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ur{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function uu(b){if(!b||!b.options)throw Us("App Configuration Object");if(!b.name)throw Us("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const F of D)if(!M[F])throw Us(F);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ai(b){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Yu,{scope:Rs}),b.swRegistration.update().catch(()=>{})}catch(D){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Bs(b,D){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ai(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function il(b,D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=zr)})).apply(this,arguments)}function sl(){return(sl=(0,O.Z)(function*(b,D){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield il(b,null==D?void 0:D.vapidKey),yield Bs(b,null==D?void 0:D.serviceWorkerRegistration),ga(b)})).apply(this,arguments)}function ma(b,D,M){return ya.apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(b,D,M){const F=ol(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[so],message_name:M[ha],message_time:M[Oc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ol(b){switch(b){case Os.NOTIFICATION_CLICKED:return"notification_open";case Os.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vc(){return(Vc=(0,O.Z)(function*(b,D){const M=D.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===Os.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Lo(M)):b.onMessageHandler.next(Lo(M)));const F=M.data;Lc(F)&&"1"===F[Cp]&&(yield ma(b,M.messageType,F))})).apply(this,arguments)}const ul="@firebase/messaging",Uc=b=>{const D=new ur(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function al(b,D){return Vc.apply(this,arguments)}(D,M)),D},lo=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function du(b,D){return sl.apply(this,arguments)}(D,F)}};function jc(){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bc(){(0,oe._registerComponent)(new ge.wA("messaging",Uc,"PUBLIC")),(0,oe._registerComponent)(new ge.wA("messaging-internal",lo,"PRIVATE")),(0,oe.registerVersion)(ul,"0.9.11"),(0,oe.registerVersion)(ul,"0.9.11","esm2017")}();const cl="analytics",Xm="firebase_id",_a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js",Fn=new ae.Yd("@firebase/analytics");function Hc(b){return Promise.all(b.map(D=>D.catch(M=>M)))}function Dp(b,D){const M=document.createElement("script");M.src=`${hu}?l=${b}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Vo(b,D,M,F,Z,X){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,O.Z)(function*(b,D,M,F,Z,X){const Se=F[Z];try{if(Se)yield D[Se];else{const We=(yield Hc(M)).find(_t=>_t.measurementId===Z);We&&(yield D[We.appId])}}catch(xe){Fn.error(xe)}b("config",Z,X)})).apply(this,arguments)}function hl(b,D,M,F,Z){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(b,D,M,F,Z){try{let X=[];if(Z&&Z.send_to){let Se=Z.send_to;Array.isArray(Se)||(Se=[Se]);const xe=yield Hc(M);for(const We of Se){const _t=xe.find(It=>It.measurementId===We),Tt=_t&&D[_t.appId];if(!Tt){X=[];break}X.push(Tt)}}0===X.length&&(X=Object.values(D)),yield Promise.all(X),b("event",F,Z||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function Tp(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(hu))return D;return null}const Mn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Rr=new class Yr{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Uo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function zc(b){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(b){var D;const{appId:M,apiKey:F}=b,Z={method:"GET",headers:Uo(F)},X=_a.replace("{app-id}",M),Se=yield fetch(X,Z);if(200!==Se.status&&304!==Se.status){let xe="";try{const We=yield Se.json();(null===(D=We.error)||void 0===D?void 0:D.message)&&(xe=We.error.message)}catch(We){}throw Mn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:xe})}return Se.json()})).apply(this,arguments)}function xh(b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(b,D=Rr,M){const{appId:F,apiKey:Z,measurementId:X}=b.options;if(!F)throw Mn.create("no-app-id");if(!Z){if(X)return{measurementId:X,appId:F};throw Mn.create("no-api-key")}const Se=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new fl;return setTimeout((0,O.Z)(function*(){xe.abort()}),void 0!==M?M:6e4),fu({appId:F,apiKey:Z,measurementId:X},Se,xe,D)})).apply(this,arguments)}function fu(b,D,M){return ui.apply(this,arguments)}function ui(){return(ui=(0,O.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:M},F,Z=Rr){const{appId:X,measurementId:Se}=b;try{yield xt(F,D)}catch(xe){if(Se)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:X,measurementId:Se};throw xe}try{const xe=yield zc(b);return Z.deleteThrottleMetadata(X),xe}catch(xe){if(!Zc(xe)){if(Z.deleteThrottleMetadata(X),Se)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:X,measurementId:Se};throw xe}const We=503===Number(xe.customData.httpStatus)?(0,J.$s)(M,Z.intervalMillis,30):(0,J.$s)(M,Z.intervalMillis),_t={throttleEndTimeMillis:Date.now()+We,backoffCount:M+1};return Z.setThrottleMetadata(X,_t),Fn.debug(`Calling attemptFetch again in ${We} millis`),fu(b,_t,F,Z)}})).apply(this,arguments)}function xt(b,D){return new Promise((M,F)=>{const Z=Math.max(D-Date.now(),0),X=setTimeout(M,Z);b.addEventListener(()=>{clearTimeout(X),F(Mn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Zc(b){if(!(b instanceof J.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class fl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Wc(){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(){if(!(0,J.hl)())return Fn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(b){return Fn.warn(Mn.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function ls(){return(ls=(0,O.Z)(function*(b,D,M,F,Z,X,Se){var xe;const We=xh(b);We.then(In=>{M[In.measurementId]=In.appId,b.options.measurementId&&In.measurementId!==b.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${In.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(In=>Fn.error(In)),D.push(We);const _t=Wc().then(In=>{if(In)return F.getId()}),[Tt,It]=yield Promise.all([We,_t]);Tp()||Dp(X,Tt.measurementId),Z("js",new Date);const Ln=null!==(xe=null==Se?void 0:Se.config)&&void 0!==xe?xe:{};return Ln.origin="firebase",Ln.update=!0,null!=It&&(Ln[Xm]=It),Z("config",Tt.measurementId,Ln),Tt.measurementId})).apply(this,arguments)}class Bo{constructor(D){this.app=D}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},Hs=[];const va={};let Gs,Vi,Li="dataLayer",gl=!1;function Ii(b,D,M){!function jo(){const b=[];if((0,J.ru)()&&b.push("This is a browser extension environment."),(0,J.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),M=Mn.create("invalid-analytics-context",{errorInfo:D});Fn.warn(M.message)}}();const F=b.options.appId;if(!F)throw Mn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Mn.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[F])throw Mn.create("already-exists",{id:F});if(!gl){!function us(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Li);const{wrappedGtag:X,gtagCore:Se}=function Sh(b,D,M,F,Z){let X=function(...Se){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(X=window[Z]),window[Z]=function qc(b,D,M,F){function X(){return(X=(0,O.Z)(function*(Se,xe,We){try{"event"===Se?yield hl(b,D,M,xe,We):"config"===Se?yield Vo(b,D,M,F,xe,We):b("set",xe)}catch(_t){Fn.error(_t)}})).apply(this,arguments)}return function Z(Se,xe,We){return X.apply(this,arguments)}}(X,b,D,M),{gtagCore:X,wrappedGtag:window[Z]}}(li,Hs,va,Li,"gtag");Vi=X,Gs=Se,gl=!0}return li[F]=function kn(b,D,M,F,Z,X,Se){return ls.apply(this,arguments)}(b,Hs,va,D,Gs,Li,M),new Bo(b)}function wa(){return(wa=(0,O.Z)(function*(b,D,M,F,Z){if(Z&&Z.global)b("event",M,F);else{const X=yield D;b("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function mn(){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}const Zs="@firebase/analytics";!function Mp(){(0,oe._registerComponent)(new ge.wA(cl,(D,{options:M})=>Ii(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new ge.wA("analytics-internal",function b(D){try{const M=D.getProvider(cl).getImmediate();return{logEvent:(F,Z,X)=>function xp(b,D,M,F){b=(0,J.m9)(b),function $o(b,D,M,F,Z){return wa.apply(this,arguments)}(Vi,li[b.app.options.appId],D,M,F).catch(Z=>Fn.error(Z))}(M,F,Z,X)}}catch(M){throw Mn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(Zs,"0.7.7"),(0,oe.registerVersion)(Zs,"0.7.7","esm2017")}();var Ws=N(4408),pu=N(7565);const yl=new class yn extends pu.v{}(class ds extends Ws.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var kp=N(4986),_l=N(8505),wr=N(9468),ci=N(5363);const vl=new d.GfV("7.3.0"),hs="__angularfire_symbol__analyticsIsSupportedValue",Di="__angularfire_symbol__analyticsIsSupported",Bi="__angularfire_symbol__remoteConfigIsSupportedValue",Ea="__angularfire_symbol__remoteConfigIsSupported",wl="__angularfire_symbol__messagingIsSupportedValue",El="__angularfire_symbol__messagingIsSupported";function Ks(b,D,M){if(D){if(1===D.length)return D[0];const X=D.filter(Se=>Se.app===M);if(1===X.length)return X[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Di]||(globalThis[Di]=mn().then(b=>globalThis[hs]=b).catch(()=>globalThis[hs]=!1)),globalThis[El]||(globalThis[El]=jc().then(b=>globalThis[wl]=b).catch(()=>globalThis[wl]=!1)),globalThis[Ea]||(globalThis[Ea]=io().then(b=>globalThis[Bi]=b).catch(()=>globalThis[Bi]=!1));const Qc=(b,D)=>{const M=D?[D]:(0,K.C6)(),F=[];return M.forEach(Z=>{Z.container.getProvider(b).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function po(){}class gu{constructor(D,M=yl){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const Z=this.zone;return this.delegate.schedule(function(Se){Z.runGuarded(()=>{D.apply(this,[Se])})},M,F)}}class ji{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",po,{},po,po)),M.pipe((0,_l.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let mu=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new gu(Zone.current)),this.insideAngular=M.run(()=>new gu(Zone.current,kp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(d.LFG(d.R0b))},b.\u0275prov=d.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function $i(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Cl(b){return $i(),function go(b){return function(M){return(M=M.lift(new ji(b.ngZone))).pipe((0,wr.R)(b.outsideAngular),(0,ci.Q)(b.insideAngular))}}($i())(b)}},2090:(rt,Ce,N)=>{N.d(Ce,{$s:()=>no,BH:()=>Ae,G6:()=>te,L:()=>le,LL:()=>Et,Lj:()=>Lt,Mn:()=>He,Sg:()=>ke,UG:()=>Ee,US:()=>ae,X3:()=>ct,ZB:()=>Q,ZR:()=>ue,b$:()=>De,d:()=>ve,eu:()=>ne,hl:()=>z,jU:()=>Xe,m9:()=>lt,ne:()=>at,pd:()=>Xi,r3:()=>Kt,ru:()=>ze,tV:()=>j,uI:()=>pe,vZ:()=>Ds,w1:()=>we,xO:()=>Ni,xb:()=>tr,z$:()=>Fe,zI:()=>me,zd:()=>kr});var d=N(5861);const J=function(B){const L=[];let H=0;for(let de=0;de<B.length;de++){let Y=B.charCodeAt(de);Y<128?L[H++]=Y:Y<2048?(L[H++]=Y>>6|192,L[H++]=63&Y|128):55296==(64512&Y)&&de+1<B.length&&56320==(64512&B.charCodeAt(de+1))?(Y=65536+((1023&Y)<<10)+(1023&B.charCodeAt(++de)),L[H++]=Y>>18|240,L[H++]=Y>>12&63|128,L[H++]=Y>>6&63|128,L[H++]=63&Y|128):(L[H++]=Y>>12|224,L[H++]=Y>>6&63|128,L[H++]=63&Y|128)}return L},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,L){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let Y=0;Y<B.length;Y+=3){const Ve=B[Y],ft=Y+1<B.length,qt=ft?B[Y+1]:0,pr=Y+2<B.length,Ht=pr?B[Y+2]:0;let an=(15&qt)<<2|Ht>>6,Kn=63&Ht;pr||(Kn=64,ft||(an=64)),de.push(H[Ve>>2],H[(3&Ve)<<4|qt>>4],H[an],H[Kn])}return de.join("")},encodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(B):this.encodeByteArray(J(B),L)},decodeString(B,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(B):function(B){const L=[];let H=0,de=0;for(;H<B.length;){const Y=B[H++];if(Y<128)L[de++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Ve=B[H++];L[de++]=String.fromCharCode((31&Y)<<6|63&Ve)}else if(Y>239&&Y<365){const pr=((7&Y)<<18|(63&B[H++])<<12|(63&B[H++])<<6|63&B[H++])-65536;L[de++]=String.fromCharCode(55296+(pr>>10)),L[de++]=String.fromCharCode(56320+(1023&pr))}else{const Ve=B[H++],ft=B[H++];L[de++]=String.fromCharCode((15&Y)<<12|(63&Ve)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(B,L))},decodeStringToByteArray(B,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let Y=0;Y<B.length;){const Ve=H[B.charAt(Y++)],qt=Y<B.length?H[B.charAt(Y)]:0;++Y;const Ht=Y<B.length?H[B.charAt(Y)]:64;++Y;const Dt=Y<B.length?H[B.charAt(Y)]:64;if(++Y,null==Ve||null==qt||null==Ht||null==Dt)throw Error();de.push(Ve<<2|qt>>4),64!==Ht&&(de.push(qt<<4&240|Ht>>2),64!==Dt&&de.push(Ht<<6&192|Dt))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){return function(B){const L=J(B);return ae.encodeByteArray(L,!0)}(B).replace(/\./g,"")},j=function(B){try{return ae.decodeString(B,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(B,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!qe(H)||(B[H]=Q(B[H],L[H]));return B}function qe(B){return"__proto__"!==B}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,de)=>{H?this.reject(H):this.resolve(de),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,de))}}}function ke(B,L){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=L||"demo-project",Y=B.iat||0,Ve=B.sub||B.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:Y,exp:Y+3600,auth_time:Y,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},B);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ft)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ze(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return Fe().indexOf("Electron/")>=0}function we(){const B=Fe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function He(){return Fe().indexOf("MSAppHost/")>=0}function te(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function ne(){return new Promise((B,L)=>{try{let H=!0;const de="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(de);Y.onsuccess=()=>{Y.result.close(),H||self.indexedDB.deleteDatabase(de),B(!0)},Y.onupgradeneeded=()=>{H=!1},Y.onerror=()=>{var Ve;L((null===(Ve=Y.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(H){L(H)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ue extends Error{constructor(L,H,de){super(H),this.code=L,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Et.prototype.create)}}class Et{constructor(L,H,de){this.service=L,this.serviceName=H,this.errors=de}create(L,...H){const de=H[0]||{},Y=`${this.service}/${L}`,Ve=this.errors[L],ft=Ve?function Wt(B,L){return B.replace(Tn,(H,de)=>{const Y=L[de];return null!=Y?String(Y):`<${de}?>`})}(Ve,de):"Error";return new ue(Y,`${this.serviceName}: ${ft} (${Y}).`,de)}}const Tn=/\{\$([^}]+)}/g;function Kt(B,L){return Object.prototype.hasOwnProperty.call(B,L)}function tr(B){for(const L in B)if(Object.prototype.hasOwnProperty.call(B,L))return!1;return!0}function Ds(B,L){if(B===L)return!0;const H=Object.keys(B),de=Object.keys(L);for(const Y of H){if(!de.includes(Y))return!1;const Ve=B[Y],ft=L[Y];if(Mr(Ve)&&Mr(ft)){if(!Ds(Ve,ft))return!1}else if(Ve!==ft)return!1}for(const Y of de)if(!H.includes(Y))return!1;return!0}function Mr(B){return null!==B&&"object"==typeof B}function Ni(B){const L=[];for(const[H,de]of Object.entries(B))Array.isArray(de)?de.forEach(Y=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(de));return L.length?"&"+L.join("&"):""}function kr(B){const L={};return B.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[Y,Ve]=de.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Ve)}}),L}function Xi(B){const L=B.indexOf("?");if(!L)return"";const H=B.indexOf("#",L);return B.substring(L,H>0?H:void 0)}function at(B,L){const H=new Gr(B,L);return H.subscribe.bind(H)}class Gr{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(de=>{this.error(de)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,de){let Y;if(void 0===L&&void 0===H&&void 0===de)throw new Error("Missing Observer.");Y=function jn(B,L){if("object"!=typeof B||null===B)return!1;for(const H of L)if(H in B&&"function"==typeof B[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:de},void 0===Y.next&&(Y.next=ri),void 0===Y.error&&(Y.error=ri),void 0===Y.complete&&(Y.complete=ri);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(ft){}}),this.observers.push(Y),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ri(){}function no(B,L=1e3,H=2){const de=L*Math.pow(H,B),Y=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+Y)}function lt(B){return B&&B._delegate?B._delegate:B}function fr(B,L){return new Promise((H,de)=>{B.onsuccess=Y=>{H(Y.target.result)},B.onerror=Y=>{var Ve;de(`${L}: ${null===(Ve=Y.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Ft{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,H){return new Ze(this._db.transaction.call(this._db,L,H))}createObjectStore(L,H){return new Te(this._db.createObjectStore(L,H))}close(){this._db.close()}}class Ze{constructor(L){this._transaction=L,this.complete=new Promise((H,de)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(L){return new Te(this._transaction.objectStore(L))}}class Te{constructor(L){this._store=L}index(L){return new Ke(this._store.index(L))}createIndex(L,H,de){return new Ke(this._store.createIndex(L,H,de))}get(L){return fr(this._store.get(L),"Error reading from IndexedDB")}put(L,H){return fr(this._store.put(L,H),"Error writing to IndexedDB")}delete(L){return fr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return fr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ke{constructor(L){this._index=L}get(L){return fr(this._index.get(L),"Error reading from IndexedDB")}}function ct(B,L,H){return new Promise((de,Y)=>{try{const Ve=indexedDB.open(B,L);Ve.onsuccess=ft=>{de(new Ft(ft.target.result))},Ve.onerror=ft=>{var qt;Y(`Error opening indexedDB: ${null===(qt=ft.target.error)||void 0===qt?void 0:qt.message}`)},Ve.onupgradeneeded=ft=>{H(new Ft(Ve.result),ft.oldVersion,ft.newVersion,new Ze(Ve.transaction))}}catch(Ve){Y(`Error opening indexedDB: ${Ve.message}`)}})}function Lt(B){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(B){return new Promise((L,H)=>{try{const de=indexedDB.deleteDatabase(B);de.onsuccess=()=>{L()},de.onerror=Y=>{var Ve;H(`Error deleting indexedDB database "${B}": ${null===(Ve=Y.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(de){H(`Error deleting indexedDB database "${B}": ${de.message}`)}})})).apply(this,arguments)}},9559:(rt,Ce,N)=>{var d=N(5e3);let K=null;function O(){return K}const ae=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function le(){return(0,d.LFG)($)}()},providedIn:"platform"}),n})();const j=new d.OlP("Location Initialized");let $=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function qe(){return new $((0,d.LFG)(ae))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fe(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,d.LFG)(ae).location;return new ze((0,d.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const Xe=new d.OlP("appBaseHref");let ze=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+Fe(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+Fe(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(Xe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+Fe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+Fe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(Xe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fe(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Fe,n.joinWithSlash=Ae,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(he))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return new ve((0,d.LFG)(pe),(0,d.LFG)(he))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}let Fi=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class xs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new xs(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),ns(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ns(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ns(n,e){n.context.$implicit=e.item}let or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){za("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){za("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function za(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class kc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class vp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const is=new vp,wp=new kc;let Ya=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return is;if((0,d.F4k)(t))return wp;throw function Pn(n,e){return new d.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1}),n})(),Ns=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function ar(n){return"server"===n}let tu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new nu((0,d.LFG)(ae),window)}),n})();class nu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function fa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ss(this.window.history)||ss(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ss(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ps extends class Po extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){K||(K=n)}(new Ps)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function ao(n){oo=oo||document.createElement("a"),oo.setAttribute("href",n);const e=oo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ro(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let oo,nn=null;const gr=new d.OlP("TRANSITION_ID"),pa=[{provide:d.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[gr,ae,d.zs3],multi:!0}];class vi{static init(){(0,d.VLi)(new vi)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(E){h=h||E,u--,0==u&&r(h)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let mr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fs=new d.OlP("EventManagerPlugins");let os=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fs),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ru{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Wr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ls=(()=>{class n extends Wr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vs))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Vs(n){O().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},iu=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?be(n,o,t):(o=o.replace(iu,n),t.push(o))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let pn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Fo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new tl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new nl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(os),d.LFG(Ls),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Fo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=dt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=dt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class tl extends Fo{constructor(e,t,r,o){super(e),this.component=r;const u=be(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ju(n){return"_ngcontent-%COMP%".replace(iu,n)}(o+"-"+r.id),this.hostAttr=function Xu(n){return"_nghost-%COMP%".replace(iu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class nl extends Fo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=be(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Lc=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const rl=["alt","control","meta","shift"],Us={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let lu=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(rl.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),h+=E+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Bs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ur.hasOwnProperty(e)&&(e=ur[e]))}return Us[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),rl.forEach(u=>{u!=o&&ai[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sl=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function wi(){Ps.makeCurrent(),vi.init()},multi:!0},{provide:ae,useFactory:function cu(){return(0,d.RDi)(document),document},deps:[]}]),ma=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function il(){return new d.qLn},deps:[]},{provide:Fs,useClass:Lc,multi:!0,deps:[ae,d.R0b,d.Lbi]},{provide:Fs,useClass:lu,multi:!0,deps:[ae]},{provide:pn,useClass:pn,deps:[os,Ls,d.AFp]},{provide:d.FYo,useExisting:pn},{provide:Wr,useExisting:Ls},{provide:Ls,useClass:Ls,deps:[ae]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:os,useClass:os,deps:[Fs,d.R0b]},{provide:class hn{},useClass:mr,deps:[]}];let ya=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:gr,useExisting:d.AFp},pa]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:ma,imports:[Ns,d.hGG]}),n})();"undefined"!=typeof window&&window;var xn=N(8996),Mn=N(3269);function pt(...n){const e=(0,Mn.yG)(n);return(0,xn.D)(n,e)}var lr=N(7579);class Yr extends lr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Rr=N(8306);const{isArray:Uo}=Array,{getPrototypeOf:zc,prototype:ln,keys:xh}=Object;function Ei(n){if(1===n.length){const e=n[0];if(Uo(e))return{args:e,keys:null};if(function fu(n){return n&&"object"==typeof n&&zc(n)===ln}(e)){const t=xh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ui=N(4671),xt=N(4004);const{isArray:Zc}=Array;function Wc(n){return(0,xt.U)(e=>function fl(n,e){return Zc(e)?n(...e):n(e)}(n,e))}function fo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var kn=N(5403),ls=N(9672);function Hs(n,e,t){n?(0,ls.f)(t,n,e):e()}var va=N(576);function Li(n,e){const t=(0,va.m)(n)?n:()=>n,r=o=>o.error(t());return new Rr.y(e?o=>e.schedule(r,0,o):r)}const Gs=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vi=N(8189);function ml(...n){return function gl(){return(0,Vi.J)(1)}()((0,xn.D)(n,(0,Mn.yG)(n)))}var jo=N(8421);function Ii(n){return new Rr.y(e=>{(0,jo.Xf)(n()).subscribe(e)})}var $o=N(515),wa=N(727),_r=N(4482);function bi(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Kc extends Rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wa.w0;const t=this.getSubject();e.add(this.source.subscribe((0,kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wa.w0.EMPTY)}return e}refCount(){return bi()(this)}}function Rn(n,e){return(0,_r.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,kn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const S=u++;(0,jo.Xf)(n(E,S)).subscribe(o=(0,kn.x)(r,k=>r.next(e?e(E,k,S,C++):k),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var qs=N(5698);function Ci(...n){const e=(0,Mn.yG)(n);return(0,_r.e)((t,r)=>{(e?ml(n,t,e):ml(n,t)).subscribe(r)})}function Ho(n,e,t,r,o){return(u,h)=>{let m=t,E=e,C=0;u.subscribe((0,kn.x)(h,S=>{const k=C++;E=m?n(E,S,k):(m=!0,S),r&&h.next(E)},o&&(()=>{m&&h.next(E),h.complete()})))}}function vr(n,e){return(0,_r.e)(Ho(n,e,arguments.length>=2,!0))}function cs(n,e){return(0,_r.e)((t,r)=>{let o=0;t.subscribe((0,kn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Ui(n){return(0,_r.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,kn.x)(t,void 0,void 0,h=>{u=(0,jo.Xf)(n(h,Ui(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var mn=N(5577);function zs(n,e){return(0,va.m)(e)?(0,mn.z)(n,e,1):(0,mn.z)(n,1)}function Yc(n){return n<=0?()=>$o.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe((0,kn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function En(n=Ap){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Ap(){return new Gs}function Sp(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,kn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Zs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cs((o,u)=>n(o,u,r)):ui.y,(0,qs.q)(1),t?Sp(e):En(()=>new Gs))}var Qr=N(8505);class Ws{constructor(e,t){this.id=e,this.url=t}}class ds extends Ws{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pu extends Ws{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yn extends Ws{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yl extends Ws{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Go extends Ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kp extends Ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _l extends Ws{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wr extends Ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ci extends Ws{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vl{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hs{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Di{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class El{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Mt="primary";class Il{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hn(n){return new Il(n)}const bl="ngNavigationCancelingError";function Ks(n){const e=Error("NavigationCancelingError: "+n);return e[bl]=!0,e}function po(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ji(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!mu(n[o],e[o]))return!1;return!0}function mu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function $i(n){return Array.prototype.concat.apply([],n)}function Jc(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function di(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,xn.D)(Promise.resolve(n)):pt(n)}const go={exact:function D(n,e,t){if(!Tt(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:F},qo={exact:function b(n,e){return ji(n,e)},subset:function M(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mu(n[t],e[t]))},ignored:()=>!0};function yu(n,e,t){return go[t.paths](n.root,e.root,t.matrixParams)&&qo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return Z(n,e,e.segments,t)}function Z(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Tt(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!Tt(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Tt(n.segments,o)&&X(n.segments,o,r)&&n.children[Mt])&&Z(n.children[Mt],e,u,r)}}function X(n,e,t){return e.every((r,o)=>qo[t](n[o].parameters,r.parameters))}class Se{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return zo.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mo(this)}}class We{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Ia(this)}}function Tt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ln{}class In{parse(e){const t=new ed(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Nr(e.root,!0)}`,r=function ey(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ti(t)}=${Ti(o)}`).join("&"):`${Ti(t)}=${Ti(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function yo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zo=new In;function mo(n){return n.segments.map(e=>Ia(e)).join("/")}function Nr(n,e){if(!n.hasChildren())return mo(n);if(e){const t=n.children[Mt]?Nr(n.children[Mt],!1):"",r=[];return Gn(n.children,(o,u)=>{u!==Mt&&r.push(`${u}:${Nr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function It(n,e){let t=[];return Gn(n.children,(r,o)=>{o===Mt&&(t=t.concat(e(r,o)))}),Gn(n.children,(r,o)=>{o!==Mt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Mt?[Nr(n.children[Mt],!1)]:[`${o}:${Nr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${mo(n)}/${t[0]}`:`${mo(n)}/(${t.join("//")})`}}function hi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ti(n){return hi(n).replace(/%3B/gi,";")}function Xc(n){return hi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dl(n){return decodeURIComponent(n)}function Tl(n){return Dl(n.replace(/\+/g,"%20"))}function Ia(n){return`${Xc(n.path)}${function Rp(n){return Object.keys(n).map(e=>`;${Xc(e)}=${Xc(n[e])}`).join("")}(n.parameters)}`}const ty=/^[^\/()?;=#]+/;function fs(n){const e=n.match(ty);return e?e[0]:""}const Al=/^[^=?&#]+/,ry=/^[^&#]+/;class ed{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new xe(e,t)),r}parseSegment(){const e=fs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new We(Dl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fs(this.remaining);o&&(r=o,this.capture(r))}e[Dl(t)]=Dl(r)}parseQueryParam(e){const t=function ny(n){const e=n.match(Al);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function Np(n){const e=n.match(ry);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Tl(t),u=Tl(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fs(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Mt]:new xe([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class iy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Mh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Mh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return kh(e,this._root).map(t=>t.value)}}function Mh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Mh(n,t);if(r)return r}return null}function kh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=kh(n,t);if(r.length)return r.unshift(e),r}return[]}class _o{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class td extends iy{constructor(e,t){super(e),this.snapshot=t,rd(this,e)}toString(){return this.snapshot.toString()}}function ba(n,e){const t=function sy(n,e){const h=new _u([],{},{},"",{},Mt,e,null,n.root,-1,{});return new Rh("",new _o(h,[]))}(n,e),r=new Yr([new We("",{})]),o=new Yr({}),u=new Yr({}),h=new Yr({}),m=new Yr(""),E=new Zo(r,o,h,m,u,Mt,e,t.root);return E.snapshot=t.root,new td(new _o(E,[]),t)}class Zo{constructor(e,t,r,o,u,h,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(e=>Hn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(e=>Hn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function nd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class _u{constructor(e,t,r,o,u,h,m,E,C,S,k){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=S,this._resolve=k}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rh extends iy{constructor(e,t){super(t),this.url=e,rd(this,t)}toString(){return id(this._root)}}function rd(n,e){e.value._routerState=n,e.children.forEach(t=>rd(n,t))}function id(n){const e=n.children.length>0?` { ${n.children.map(id).join(", ")} } `:"";return`${n.value}${e}`}function sd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ji(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ji(e.params,t.params)||n.params.next(t.params),function gu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ji(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ji(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Nh(n,e){const t=ji(n.params,e.params)&&function _t(n,e){return Tt(n,e)&&n.every((t,r)=>ji(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Nh(n.parent,e.parent))}function Sl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Oh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Sl(n,r,o);return Sl(n,r)})}(n,e,t);return new _o(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Sl(n,m)),h}}const r=function uy(n){return new Zo(new Yr(n.url),new Yr(n.params),new Yr(n.queryParams),new Yr(n.fragment),new Yr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Sl(n,u));return new _o(r,o)}}function Wo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vu(n){return"object"==typeof n&&null!=n&&n.outlets}function Op(n,e,t,r,o){let u={};if(r&&Gn(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Se(t,u,o);const h=Ph(n,e,t);return new Se(h,u,o)}function Ph(n,e,t){const r={};return Gn(n.children,(o,u)=>{r[u]=o===e?t:Ph(o,e,t)}),new xe(n.segments,r)}class ly{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(vu);if(o&&o!==Jc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fy(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return Qs(n,e,t);const r=function f0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(vu(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!Ai(E,C,h))return u;r+=2}else{if(!Ai(E,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new xe(n.segments.slice(r.pathIndex),n.children),Qs(u,0,o)}return r.match&&0===o.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?Lh(n,e,t):r.match?Qs(n,0,o):Lh(n,e,t)}function Qs(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function hy(n){return vu(n[0])?n[0].outlets:{[Mt]:n}}(t),o={};return Gn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=fy(n.children[h],e,u))}),Gn(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new xe(n.segments,o)}}function Lh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(vu(u)){const E=wu(u.outlets);return new xe(r,E)}if(0===o&&Wo(t[0])){r.push(new We(n.segments[e].path,Vh(t[0]))),o++;continue}const h=vu(u)?u.outlets[Mt]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&Wo(m)?(r.push(new We(h,Vh(m))),o+=2):(r.push(new We(h,{})),o++)}return new xe(r,{})}function wu(n){const e={};return Gn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Lh(new xe([],{}),0,t))}),e}function Vh(n){const e={};return Gn(n,(t,r)=>e[r]=`${t}`),e}function Ai(n,e,t){return n==t.path&&ji(e,t.parameters)}class Fp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=vo(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Gn(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=vo(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=vo(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=vo(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new wl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Bi(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(sd(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),sd(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function od(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=E,h.outlet&&h.outlet.activateWith(o,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class ad{constructor(e,t){this.routes=e,this.module=t}}function Ca(n){return"function"==typeof n}function Eu(n){return n instanceof Se}const Ml=Symbol("INITIAL_VALUE");function Ko(){return Rn(n=>function Bo(...n){const e=(0,Mn.yG)(n),t=(0,Mn.jO)(n),{args:r,keys:o}=Ei(n);if(0===r.length)return(0,xn.D)([],e);const u=new Rr.y(function li(n,e,t=ui.y){return r=>{Hs(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let E=0;E<o;E++)Hs(e,()=>{const C=(0,xn.D)(n[E],e);let S=!1;C.subscribe((0,kn.x)(r,k=>{u[E]=k,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>fo(o,h):ui.y));return t?u.pipe(Wc(t)):u}(n.map(e=>e.pipe((0,qs.q)(1),Ci(Ml)))).pipe(vr((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==Ml?o:(u===Ml&&(r=!0),r||!1!==u&&h!==t.length-1&&!Eu(u)?o:u),e)},Ml),cs(e=>e!==Ml),(0,xt.U)(e=>Eu(e)?e:!0===e),(0,qs.q)(1)))}class py{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kl,this.attachRef=null}}class kl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new py,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ud=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||Mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new $h(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(kl),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $h{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zo?this.route:e===kl?this.childContexts:this.parent.get(e,t)}}let Hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[ud],encapsulation:2}),n})();function Rl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ld(r,Gh(e,r))}}function ld(n,e){n.children&&Rl(n.children,e)}function Gh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function qh(n){const e=n.children&&n.children.map(qh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=Hh),t}function Qt(n){return n.outlet||Mt}function zh(n,e){const t=n.filter(r=>Qt(r)===e);return t.push(...n.filter(r=>Qt(r)!==e)),t}const Vp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Iu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Vp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||po)(t,n,e);if(!u)return Object.assign({},Vp);const h={};Gn(u.posParams,(E,C)=>{h[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Nl(n,e,t,r,o="corrected"){if(t.length>0&&function my(n,e,t){return t.some(r=>dd(n,e,r)&&Qt(r)!==Mt)}(n,t,r)){const h=new xe(e,function cd(n,e,t,r){const o={};o[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Qt(u)!==Mt){const h=new xe([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Qt(u)]=h}return o}(n,e,r,new xe(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function Up(n,e,t){return t.some(r=>dd(n,e,r))}(n,t,r)){const h=new xe(n.segments,function gy(n,e,t,r,o,u){const h={};for(const m of r)if(dd(n,t,m)&&!o[Qt(m)]){const E=new xe([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[Qt(m)]=E}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function dd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yy(n,e,t,r){return!!(Qt(n)===r||r!==Mt&&dd(e,t,n))&&("**"===n.path||Iu(e,n,t).matched)}function _y(n,e,t){return 0===e.length&&!n.children[t]}class Yo{constructor(e){this.segmentGroup=e||null}}class Er{constructor(e){this.urlTree=e}}function wo(n){return Li(new Yo(n))}function Ol(n){return Li(new Er(n))}class Wh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Nl(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Mt).pipe((0,xt.U)(u=>this.createUrlTree(Ta(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ui(u=>{if(u instanceof Er)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Yo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Mt).pipe((0,xt.U)(o=>this.createUrlTree(Ta(o),e.queryParams,e.fragment))).pipe(Ui(o=>{throw o instanceof Yo?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new xe([],{[Mt]:e}):e;return new Se(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,xt.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,xn.D)(o).pipe(zs(u=>{const h=r.children[u],m=zh(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,xt.U)(E=>({segment:E,outlet:u})))}),vr((u,h)=>(u[h.outlet]=h.segment,u),{}),function xp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?cs((o,u)=>n(o,u,r)):ui.y,Yc(1),t?Sp(e):En(()=>new Gs))}())}expandSegment(e,t,r,o,u,h){return(0,xn.D)(r).pipe(zs(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(Ui(C=>{if(C instanceof Yo)return pt(null);throw C}))),Zs(m=>!!m),Ui((m,E)=>{if(m instanceof Gs||"EmptyError"===m.name)return _y(t,o,u)?pt(new xe([],{})):wo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return yy(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):wo(t):wo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ol(u):this.lineralizeSegments(r,u).pipe((0,mn.z)(h=>{const m=new xe(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:S}=Iu(t,o,u);if(!m)return wo(t);const k=this.applyRedirectCommands(E,o.redirectTo,S);return o.redirectTo.startsWith("/")?Ol(k):this.lineralizeSegments(o,k).pipe((0,mn.z)(V=>this.expandSegment(e,t,r,V.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,xt.U)(k=>(r._loadedConfig=k,new xe(o,{})))):pt(new xe(o,{}));const{matched:h,consumedSegments:m,remainingSegments:E}=Iu(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,mn.z)(S=>{const k=S.module,V=S.routes,{segmentGroup:G,slicedSegments:ie}=Nl(t,m,E,V),Oe=new xe(G.segments,G.children);if(0===ie.length&&Oe.hasChildren())return this.expandChildren(k,V,Oe).pipe((0,xt.U)(rn=>new xe(m,rn)));if(0===V.length&&0===ie.length)return pt(new xe(m,{}));const Le=Qt(r)===u;return this.expandSegment(k,Oe,V,ie,Le?Mt:u,!0).pipe((0,xt.U)(st=>new xe(m.concat(st.segments),st.children)))})):wo(t)}getChildConfig(e,t,r){return t.children?pt(new ad(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,mn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,xt.U)(u=>(t._loadedConfig=u,u))):function Or(n){return Li(Ks(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):pt(new ad([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?pt(o.map(h=>{const m=e.get(h);let E;if(function Uh(n){return n&&Ca(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!Ca(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return di(E)})).pipe(Ko(),(0,Qr.b)(h=>{if(!Eu(h))return;const m=Ks(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,xt.U)(h=>!0===h)):pt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return pt(r);if(o.numberOfChildren>1||!o.children[Mt])return Li(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Se(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Gn(t.children,(m,E)=>{h[E]=this.createSegmentGroup(e,m,r,o)}),new xe(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Ta(n){const e={};for(const r of Object.keys(n.children)){const u=Ta(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Si(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class Bp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Aa{constructor(e,t){this.component=e,this.route=t}}function Yh(n,e,t){const r=n._root;return fi(r,e?e._root:null,t,[r.value])}function Pl(n,e,t){const r=function vy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function fi(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=vo(e);return n.children.forEach(h=>{(function $p(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const E=function wy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Tt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Tt(n.url,e.url)||!ji(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nh(n,e)||!ji(n.queryParams,e.queryParams);default:return!Nh(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new Bp(r)):(u.data=h.data,u._resolvedData=h._resolvedData),fi(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Aa(m.outlet.component,h))}else h&&Sa(e,m,o),o.canActivateChecks.push(new Bp(r)),fi(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Gn(u,(h,m)=>Sa(h,t.getContext(m),o)),o}function Sa(n,e,t){const r=vo(n),o=n.value;Gn(r,(u,h)=>{Sa(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Aa(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Xh{}function ef(n){return new Rr.y(e=>e.error(n))}class tf{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Nl(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Mt);if(null===t)return null;const r=new _u([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new _o(r,t),u=new Rh(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=oy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=zh(e,u),E=this.processSegmentGroup(m,h,u);if(null===E)return null;r.push(...E)}const o=Gp(r);return function Cy(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return _y(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!yy(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const G=r.length>0?Jc(r).parameters:{};u=new _u(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,f(t),g(t)+r.length,A(e))}else{const G=Iu(t,e,r);if(!G.matched)return null;h=G.consumedSegments,m=G.remainingSegments,u=new _u(h,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,f(t),g(t)+h.length,A(e))}const E=function Dy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:S}=Nl(t,h,m,E.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===S.length&&C.hasChildren()){const G=this.processChildren(E,C);return null===G?null:[new _o(u,G)]}if(0===E.length&&0===S.length)return[new _o(u,[])];const k=Qt(e)===o,V=this.processSegment(E,C,S,k?Mt:o);return null===V?null:[new _o(u,V)]}}function Ty(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gp(n){const e=[],t=new Set;for(const r of n){if(!Ty(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Gp(r.children);e.push(new _o(r.value,o))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function A(n){return n.resolve||{}}function Ye(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function it(n){return Rn(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,xt.U)(()=>e)):pt(e)})}class Ll extends class Gi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bu=new d.OlP("ROUTES");class Cu{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,xt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new ad($i(h.injector.get(bu,void 0,d.XFs.Self|d.XFs.Optional)).map(qh),h)}),Ui(u=>{throw t._loader$=void 0,u}));return t._loader$=new Kc(o,()=>new lr.x).pipe(bi()),t._loader$}loadModuleFactory(e){return di(e()).pipe((0,mn.z)(t=>t instanceof d.YKP?pt(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class Ay{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Qo(n){throw n}function hd(n,e,t){return e.parse("/")}function fd(n,e){return pt(null)}const rf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xi=(()=>{class n{constructor(t,r,o,u,h,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lr.x,this.errorHandler=Qo,this.malformedUriErrorHandler=hd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fd,afterPreactivation:fd},this.urlHandlingStrategy=new Ay,this.routeReuseStrategy=new Ll,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const k=h.get(d.R0b);this.isNgZoneEnabled=k instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function Cl(){return new Se(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Cu(h,m,V=>this.triggerEvent(new vl(V)),V=>this.triggerEvent(new hs(V))),this.routerState=ba(this.currentUrlTree,this.rootComponentType),this.transitions=new Yr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(cs(o=>0!==o.id),(0,xt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Rn(o=>{let u=!1,h=!1;return pt(o).pipe((0,Qr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rn(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return qp(m.source)&&(this.browserUrlTree=m.extractedUrl),pt(m).pipe(Rn(k=>{const V=this.transitions.getValue();return r.next(new ds(k.id,this.serializeUrl(k.extractedUrl),k.source,k.restoredState)),V!==this.transitions.getValue()?$o.E:Promise.resolve(k)}),function Kh(n,e,t,r){return Rn(o=>function Da(n,e,t,r,o){return new Wh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,xt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Qr.b)(k=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:k.urlAfterRedirects})}),function R(n,e,t,r,o){return(0,mn.z)(u=>function by(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new tf(n,e,t,r,o,u).recognize();return null===h?ef(new Xh):pt(h)}catch(h){return ef(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,xt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,k=>this.serializeUrl(k),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Qr.b)(k=>{if("eager"===this.urlUpdateStrategy){if(!k.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(k.urlAfterRedirects,k.rawUrl);this.setBrowserUrl(G,k)}this.browserUrlTree=k.urlAfterRedirects}const V=new Go(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);r.next(V)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:G,source:ie,restoredState:Oe,extras:Le}=m,kt=new ds(V,this.serializeUrl(G),ie,Oe);r.next(kt);const st=ba(G,this.rootComponentType).snapshot;return pt(Object.assign(Object.assign({},m),{targetSnapshot:st,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),$o.E}),it(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:G}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!G})}),(0,Qr.b)(m=>{const E=new kp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,xt.U)(m=>Object.assign(Object.assign({},m),{guards:Yh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Ey(n,e){return(0,mn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?pt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Hp(n,e,t,r){return(0,xn.D)(n).pipe((0,mn.z)(o=>function Fl(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?pt(u.map(m=>{const E=Pl(m,e,o);let C;if(function p0(n){return n&&Ca(n.canDeactivate)}(E))C=di(E.canDeactivate(n,e,t,r));else{if(!Ca(E))throw new Error("Invalid CanDeactivate guard");C=di(E(n,e,t,r))}return C.pipe(Zs())})).pipe(Ko()):pt(!0)}(o.component,o.route,t,e,r)),Zs(o=>!0!==o,!0))}(h,r,o,n).pipe((0,mn.z)(m=>m&&function Lp(n){return"boolean"==typeof n}(m)?function Ir(n,e,t,r){return(0,xn.D)(e).pipe(zs(o=>ml(function Jh(n,e){return null!==n&&e&&e(new Di(n)),pt(!0)}(o.route.parent,r),function Qh(n,e){return null!==n&&e&&e(new Ea(n)),pt(!0)}(o.route,r),function Eo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function jp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Ii(()=>pt(h.guards.map(E=>{const C=Pl(E,h.node,t);let S;if(function jh(n){return n&&Ca(n.canActivateChild)}(C))S=di(C.canActivateChild(r,n));else{if(!Ca(C))throw new Error("Invalid CanActivateChild guard");S=di(C(r,n))}return S.pipe(Zs())})).pipe(Ko())));return pt(u).pipe(Ko())}(n,o.path,t),function Iy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const o=r.map(u=>Ii(()=>{const h=Pl(u,e,t);let m;if(function Bh(n){return n&&Ca(n.canActivate)}(h))m=di(h.canActivate(e,n));else{if(!Ca(h))throw new Error("Invalid CanActivate guard");m=di(h(e,n))}return m.pipe(Zs())}));return pt(o).pipe(Ko())}(n,o.route,t))),Zs(o=>!0!==o,!0))}(r,u,n,e):pt(m)),(0,xt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Qr.b)(m=>{if(Eu(m.guardsResult)){const C=Ks(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new _l(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),cs(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),it(m=>{if(m.guards.canActivateChecks.length)return pt(m).pipe((0,Qr.b)(E=>{const C=new wr(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),Rn(E=>{let C=!1;return pt(E).pipe(function q(n,e){return(0,mn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return pt(t);let u=0;return(0,xn.D)(o).pipe(zs(h=>function se(n,e,t,r){return function Ue(n,e,t,r){const o=Ye(n);if(0===o.length)return pt({});const u={};return(0,xn.D)(o).pipe((0,mn.z)(h=>function gt(n,e,t,r){const o=Pl(n,e,r);return di(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Qr.b)(m=>{u[h]=m}))),Yc(1),(0,mn.z)(()=>Ye(u).length===o.length?pt(u):$o.E))}(n._resolve,n,e,r).pipe((0,xt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),oy(n,t).resolve),null)))}(h.route,r,n,e)),(0,Qr.b)(()=>u++),Yc(1),(0,mn.z)(h=>u===o.length?pt(t):$o.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Qr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,Qr.b)(E=>{const C=new ci(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),it(m=>{const{targetSnapshot:E,id:C,extractedUrl:S,rawUrl:k,extras:{skipLocationChange:V,replaceUrl:G}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:S,rawUrlTree:k,skipLocationChange:!!V,replaceUrl:!!G})}),(0,xt.U)(m=>{const E=function ay(n,e,t){const r=Sl(n,e._root,t?t._root:void 0);return new td(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,Qr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,xt.U)(r=>(new Fp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Qr.b)({next(){u=!0},complete(){u=!0}}),function Mp(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Ui(m=>{if(h=!0,function Qc(n){return n&&n[bl]}(m)){const E=Eu(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new yn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),k={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qp(o.source)};this.scheduleNavigation(S,"imperative",null,k,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new yl(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return $o.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const E=Object.assign({},h);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Rl(t),this.config=t.map(qh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,S=E?this.currentUrlTree.fragment:h;let k=null;switch(m){case"merge":k=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":k=this.currentUrlTree.queryParams;break;default:k=u||null}return null!==k&&(k=this.removeEmptyProps(k)),function Ys(n,e,t,r,o){if(0===t.length)return Op(e.root,e.root,e.root,r,o);const u=function cy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ly(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Gn(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new ly(t,e,r)}(t);if(u.toRoot())return Op(e.root,e.root,new xe([],{}),r,o);const h=function Pp(n,e,t){if(n.isAbsolute)return new Fh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Fh(u,u===e.root,0)}const r=Wo(n.commands[0])?0:1;return function dy(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Fh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?Qs(h.segmentGroup,h.index,u.commands):fy(h.segmentGroup,h.index,u.commands);return Op(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,k,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Eu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},rf):!1===r?Object.assign({},pd):r,Eu(t))return yu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return yu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,E;if(this.disposed)return Promise.resolve(!1);let C,S,k;h?(C=h.resolve,S=h.reject,k=h.promise):k=new Promise((ie,Oe)=>{C=ie,S=Oe});const V=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):G=0,this.setTransition({id:V,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:S,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(ie=>Promise.reject(ie))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new yn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function qp(n){return"imperative"!==n}class ky{}class m0{preload(e,t){return pt(null)}}let y0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Cu(o,r,E=>t.triggerEvent(new vl(E)),E=>t.triggerEvent(new hs(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(cs(t=>t instanceof pu),zs(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,xn.D)(o).pipe((0,Vi.J)(),(0,xt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,mn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xi),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(ky))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),zp=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ds?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof El&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new El(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ps=new d.OlP("ROUTER_CONFIGURATION"),Ny=new d.OlP("ROUTER_FORROOT_GUARD"),_0=[ve,{provide:Ln,useClass:In},{provide:xi,useFactory:function Py(n,e,t,r,o,u,h={},m,E){const C=new xi(null,n,e,t,r,o,$i(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function E0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(S=>{var k,V;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),C},deps:[Ln,kl,ve,d.zs3,d.Sil,bu,ps,[class nf{},new d.FiY],[class bn{},new d.FiY]]},kl,{provide:Zo,useFactory:function Zp(n){return n.routerState.root},deps:[xi]},y0,m0,class Ry{preload(e,t){return t().pipe(Ui(()=>pt(null)))}},{provide:ps,useValue:{enableTracing:!1}}];function ob(){return new d.PXZ("Router",xi)}let of=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[_0,Oy(t),{provide:Ny,useFactory:w0,deps:[[xi,new d.FiY,new d.tp0]]},{provide:ps,useValue:r||{}},{provide:pe,useFactory:v0,deps:[he,[new d.tBr(Xe),new d.FiY],ps]},{provide:zp,useFactory:ab,deps:[xi,tu,ps]},{provide:ky,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:m0},{provide:d.PXZ,multi:!0,useFactory:ob},[md,{provide:d.ip1,multi:!0,useFactory:I0,deps:[md]},{provide:Ly,useFactory:Fy,deps:[md]},{provide:d.tb,multi:!0,useExisting:Ly}]]}}static forChild(t){return{ngModule:n,providers:[Oy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ny,8),d.LFG(xi,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function ab(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new zp(n,e,t)}function v0(n,e,t={}){return t.useHash?new De(n,e):new ze(n,e)}function w0(n){return"guarded"}function Oy(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:bu,multi:!0,useValue:n}]}let md=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(xi),h=this.injector.get(ps);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ps),o=this.injector.get(y0),u=this.injector.get(zp),h=this.injector.get(xi),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function I0(n){return n.appInitializer.bind(n)}function Fy(n){return n.bootstrapListener.bind(n)}const Ly=new d.OlP("Router Initializer"),ub=[];let b0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[of.forRoot(ub)],of]}),n})();var ye=N(5861),Uy=N(4986),C0=N(5032);function lb(n,e){return e?t=>ml(e.pipe((0,qs.q)(1),function By(){return(0,_r.e)((n,e)=>{n.subscribe((0,kn.x)(e,C0.Z))})}()),t.pipe(lb(n))):(0,mn.z)((t,r)=>n(t,r).pipe((0,qs.q)(1),function D0(n){return(0,xt.U)(()=>n)}(t)))}var T0=N(3532);var hb=N(6451),qi=N(5363),fb=N(6063);class S0 extends lr.x{constructor(e=1/0,t=1/0,r=fb.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)m=E;m&&r.splice(0,m+1)}}}var pb=N(3099);function x0(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pb.B)({connector:()=>new S0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function M0(n,e){return(0,va.m)(e)?Rn(()=>n,e):Rn(()=>n)}var jy=N(9468),br=N(5813),Io=N(2011);N(5867);var Xo=N(9681),Vl=N(4859),Vt=N(2090),ea=N(1877);const Qp=new Map,nA={activated:!1,tokenObservers:[]},vb={initialized:!1,enabled:!1};function Pr(n){return Qp.get(n)||nA}function bo(n,e){Qp.set(n,e)}function Jp(){return vb}class Eb{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Vt.BH,yield function Gy(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zi=new Vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ib(n){if(!Pr(n).activated)throw zi.create("use-before-activation",{appName:n.name})}function U0(n,e){return B0.apply(this,arguments)}function B0(){return(B0=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const k=yield o.getHeartbeatsHeader();k&&(r["X-Firebase-Client"]=k)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(k){throw zi.create("fetch-network-error",{originalErrorMessage:k.message})}if(200!==h.status)throw zi.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(k){throw zi.create("fetch-parse-error",{originalErrorMessage:k.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw zi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),S=Date.now();return{token:m.attestationToken,expireTimeMillis:S+C,issuedAtTimeMillis:S}})).apply(this,arguments)}function Zy(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ul="firebase-app-check-store";let yd=null;function $0(){return yd||(yd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(zi.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ul,{keyPath:"compositeKey"})}}catch(t){e(zi.create("storage-open",{originalErrorMessage:t.message}))}}),yd)}function eg(){return(eg=(0,ye.Z)(function*(n,e){const r=(yield $0()).transaction(Ul,"readwrite"),u=r.objectStore(Ul).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=E=>{h()},r.onerror=E=>{var C;m(zi.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const ta=new ea.Yd("@firebase/app-check");function vd(n,e){return(0,Vt.hl)()?function H0(n,e){return function G0(n,e){return eg.apply(this,arguments)}(function _d(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ta.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Xy(){return Jp().enabled}function e_(){return af.apply(this,arguments)}function af(){return(af=(0,ye.Z)(function*(){const n=Jp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const z0={error:"UNKNOWN_ERROR"};function tg(n){return Vt.US.encodeString(JSON.stringify(n),!1)}function ng(n){return rg.apply(this,arguments)}function rg(){return(rg=(0,ye.Z)(function*(n,e=!1){const t=n.app;Ib(t);const r=Pr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&sg(E)&&(o=E)}if(!e&&o&&sg(o))return{token:o.token};let m,h=!1;if(Xy()){r.exchangeTokenPromise||(r.exchangeTokenPromise=U0(Zy(t,yield e_()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const E=yield r.exchangeTokenPromise;return yield vd(t,E),bo(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?ta.warn(E.message):ta.error(E),u=E}return o?(m={token:o.token},bo(t,Object.assign(Object.assign({},r),{token:o})),yield vd(t,o)):m=Tb(u),h&&r_(t,m),m})).apply(this,arguments)}function ig(n,e){const t=Pr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),bo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function n_(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function Db(n){const{app:e}=n;return new Eb((0,ye.Z)(function*(){let r;if(r=Pr(e).token?yield ng(n,!0):yield ng(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),bo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function r_(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function sg(n){return n.expireTimeMillis-Date.now()>0}function Tb(n){return{token:tg(z0),error:n}}class gs{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)ig(this.app,t.next);return Promise.resolve()}}const rw="app-check-internal";!function Nb(){(0,Xo._registerComponent)(new Vl.wA("app-check",n=>function Ab(n,e){return new gs(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rw).initialize()})),(0,Xo._registerComponent)(new Vl.wA(rw,n=>function Sb(n){return{getToken:e=>ng(n,e),addTokenListener:e=>function Z0(n,e,t,r){const{app:o}=n,u=Pr(o),h={next:t,error:r,type:e};if(bo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&sg(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),n_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>n_(n))}(n,"INTERNAL",e),removeTokenListener:e=>ig(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xo.registerVersion)("@firebase/app-check","0.5.5")}();class c_{constructor(){return(0,br.vb)("app-check")}}"undefined"!=typeof window&&window;var cf=N(127);const df=new d.OlP("angularfire2.auth.use-emulator"),aw=new d.OlP("angularfire2.auth.settings"),uw=new d.OlP("angularfire2.auth.tenant-id"),Ub=new d.OlP("angularfire2.auth.langugage-code"),ag=new d.OlP("angularfire2.auth.use-device-language"),f_=new d.OlP("angularfire.auth.persistence"),ug=(n,e,t,r,o,u,h,m)=>(0,Io.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),h)for(const[C,S]of Object.entries(h))E.settings[C]=S;return m&&E.setPersistence(m),E},[t,r,o,u,h,m]);let Co=(()=>{class n{constructor(t,r,o,u,h,m,E,C,S,k,V,G){const ie=new lr.x,Oe=pt(void 0).pipe((0,qi.Q)(h.outsideAngular),Rn(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,4087)))),(0,xt.U)(()=>(0,Io.on)(t,u,r)),(0,xt.U)(Le=>ug(Le,u,m,C,S,k,E,V)),x0({bufferSize:1,refCount:!1}));if(ar(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{Oe.pipe(Zs()).subscribe();const kt=Oe.pipe(Rn(mt=>mt.getRedirectResult().then(Rt=>Rt,()=>null)),br.iC,x0({bufferSize:1,refCount:!1})),st=Oe.pipe(Rn(mt=>new Rr.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>mt.onAuthStateChanged(Je=>Rt.next(Je),Je=>Rt.error(Je),()=>Rt.complete()))})))),rn=Oe.pipe(Rn(mt=>new Rr.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>mt.onIdTokenChanged(Je=>Rt.next(Je),Je=>Rt.error(Je),()=>Rt.complete()))}))));this.authState=kt.pipe(M0(st),(0,jy.R)(h.outsideAngular),(0,qi.Q)(h.insideAngular)),this.user=kt.pipe(M0(rn),(0,jy.R)(h.outsideAngular),(0,qi.Q)(h.insideAngular)),this.idToken=this.user.pipe(Rn(mt=>mt?(0,xn.D)(mt.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Rn(mt=>mt?(0,xn.D)(mt.getIdTokenResult()):pt(null))),this.credential=(0,hb.T)(kt,ie,this.authState.pipe(cs(mt=>!mt))).pipe((0,xt.U)(mt=>(null==mt?void 0:mt.user)?mt:null),(0,jy.R)(h.outsideAngular),(0,qi.Q)(h.insideAngular))}return(0,Io.pX)(this,Oe,u,{spy:{apply:(Le,kt,st)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&st.then(rn=>ie.next(rn))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Io.Dh),d.LFG(Io.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(br.HU),d.LFG(df,8),d.LFG(aw,8),d.LFG(uw,8),d.LFG(Ub,8),d.LFG(ag,8),d.LFG(f_,8),d.LFG(c_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Bb=(()=>{class n{constructor(){cf.Z.registerVersion("angularfire",br.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Co]}),n})();function hf(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe((0,kn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function cw(n,e){return n===e}N(4087);var et,$b=N(3942),p_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ka={},lg=lg||{},vt=p_||self;function ff(){}function g_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function pf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var m_="closure_uid_"+(1e9*Math.random()>>>0),Hb=0;function Gb(n,e,t){return n.call.apply(n.bind,arguments)}function qb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function gn(n,e,t){return(gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gb:qb).apply(null,arguments)}function Id(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Ra(){this.s=this.s,this.o=this.o}var hw={};Ra.prototype.s=!1,Ra.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ed(n){return Object.prototype.hasOwnProperty.call(n,m_)&&n[m_]||(n[m_]=++Hb)}(this);delete hw[n]}},Ra.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},pw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function gw(n){return Array.prototype.concat.apply([],arguments)}function cg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function y_(n){return/^[\s\xa0]*$/.test(n)}var Zi,__=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Mi(n,e){return-1!=n.indexOf(e)}function v_(n,e){return n<e?-1:n>e?1:0}e:{var Zb=vt.navigator;if(Zb){var dg=Zb.userAgent;if(dg){Zi=dg;break e}}Zi=""}function w_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function E_(n){const e={};for(const t in n)e[t]=n[t];return e}var I_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wb(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<I_.length;u++)t=I_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ms(n){return ms[" "](n),n}ms[" "]=ff;var bd,n,_A=Mi(Zi,"Opera"),Bl=Mi(Zi,"Trident")||Mi(Zi,"MSIE"),b_=Mi(Zi,"Edge"),hg=b_||Bl,mw=Mi(Zi,"Gecko")&&!(Mi(Zi.toLowerCase(),"webkit")&&!Mi(Zi,"Edge"))&&!(Mi(Zi,"Trident")||Mi(Zi,"MSIE"))&&!Mi(Zi,"Edge"),vA=Mi(Zi.toLowerCase(),"webkit")&&!Mi(Zi,"Edge");function C_(){var n=vt.document;return n?n.documentMode:void 0}e:{var D_="",gf=(n=Zi,mw?/rv:([^\);]+)(\)|;)/.exec(n):b_?/Edge\/([\d\.]+)/.exec(n):Bl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vA?/WebKit\/(\S+)/.exec(n):_A?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gf&&(D_=gf?gf[1]:""),Bl){var T_=C_();if(null!=T_&&T_>parseFloat(D_)){bd=String(T_);break e}}bd=D_}var Kb={};var Qb=vt.document&&Bl&&(C_()||parseInt(bd,10))||void 0,fg=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",ff,e),vt.removeEventListener("test",ff,e)}catch(t){}return n}();function Yn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function mf(n,e){if(Yn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(mw){e:{try{ms(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yf[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&mf.Z.h.call(this)}}Yn.prototype.h=function(){this.defaultPrevented=!0},Fr(mf,Yn);var yf={2:"touch",3:"pen",4:"mouse"};mf.prototype.h=function(){mf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _f="closure_listenable_"+(1e6*Math.random()|0),Jb=0;function S_(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Jb,this.ca=this.fa=!1}function ys(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function xu(n){this.src=n,this.g={},this.h=0}function Lr(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=fw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(ys(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Na(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}xu.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=Na(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new S_(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Cd="closure_lm_"+(1e6*Math.random()|0),Wi={};function pg(n,e,t,r,o){if(r&&r.once)return $l(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)pg(n,e[u],t,r,o);return null}return t=gg(t),n&&n[_f]?n.N(e,t,pf(r)?!!r.capture:!!r,o):jl(n,e,t,!1,r,o)}function jl(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=pf(o)?!!o.capture:!!o,m=ku(n);if(m||(n[Cd]=m=new xu(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function Dd(){var e=Td;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fg||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Gl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $l(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)$l(n,e[u],t,r,o);return null}return t=gg(t),n&&n[_f]?n.O(e,t,pf(r)?!!r.capture:!!r,o):jl(n,e,t,!0,r,o)}function Hl(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Hl(n,e[u],t,r,o);else r=pf(r)?!!r.capture:!!r,t=gg(t),n&&n[_f]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Na(u=n.g[e],t,r,o))&&(ys(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=ku(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Na(e,t,r,o)),(t=-1<n?e[n]:null)&&Mu(t))}function Mu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[_f])Lr(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ku(e))?(Lr(t,n),0==t.h&&(t.src=null,e[Cd]=null)):ys(n)}}}function Gl(n){return n in Wi?Wi[n]:Wi[n]="on"+n}function Td(n,e){if(n.ca)n=!0;else{e=new mf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Mu(n),n=t.call(r,e)}return n}function ku(n){return(n=n[Cd])instanceof xu?n:null}var Ru="__closure_events_fn_"+(1e9*Math.random()>>>0);function gg(n){return"function"==typeof n?n:(n[Ru]||(n[Ru]=function(e){return n.handleEvent(e)}),n[Ru])}function Cr(){Ra.call(this),this.i=new xu(this),this.P=this,this.I=null}function Vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Yn(e,n);else if(e instanceof Yn)e.target=e.target||n;else{var o=e;Wb(e=new Yn(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=vf(h,r,!0,e)&&o}if(o=vf(h=e.g=n,r,!0,e)&&o,o=vf(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=vf(h=e.g=t[u],r,!1,e)&&o}function vf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,E=h.ia||h.src;h.fa&&Lr(n.i,h),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Fr(Cr,Ra),Cr.prototype[_f]=!0,Cr.prototype.removeEventListener=function(n,e,t,r){Hl(this,n,e,t,r)},Cr.prototype.M=function(){if(Cr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ys(t[r]);delete n.g[e],n.h--}}this.I=null},Cr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Cr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var mg=vt.JSON.stringify;function _w(){var n=Iw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var M_,x_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ww,n=>n.reset());class ww{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Xb(n){vt.setTimeout(()=>{throw n},0)}function yg(n,e){M_||function Ew(){var n=vt.Promise.resolve(void 0);M_=function(){n.then(eC)}}(),_g||(M_(),_g=!0),Iw.add(n,e)}var _g=!1,Iw=new class vw{constructor(){this.h=this.g=null}add(e,t){const r=x_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function eC(){for(var n;n=_w();){try{n.h.call(n.g)}catch(t){Xb(t)}var e=x_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}_g=!1}function wf(n,e){Cr.call(this),this.h=n||1,this.g=e||vt,this.j=gn(this.kb,this),this.l=Date.now()}function k_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function vg(n,e,t){if("function"==typeof n)t&&(n=gn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gn(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function bw(n){n.g=vg(()=>{n.g=null,n.i&&(n.i=!1,bw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(wf,Cr),(et=wf.prototype).da=!1,et.S=null,et.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vr(this,"tick"),this.da&&(k_(this),this.start()))}},et.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.M=function(){wf.Z.M.call(this),k_(this),delete this.g};class tC extends Ra{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bw(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wg(n){Ra.call(this),this.h=n,this.g={}}Fr(wg,Ra);var Cw=[];function Eg(n,e,t,r){Array.isArray(t)||(t&&(Cw[0]=t.toString()),t=Cw);for(var o=0;o<t.length;o++){var u=pg(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Ig(n){w_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Mu(e)},n),n.g={}}function bg(){this.g=!0}function Ef(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return mg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}wg.prototype.M=function(){wg.Z.M.call(this),Ig(this)},wg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bg.prototype.Aa=function(){this.g=!1},bg.prototype.info=function(){};var Ad={},Tw=null;function Oa(){return Tw=Tw||new Cr}function Aw(n){Yn.call(this,Ad.Ma,n)}function Sd(n){const e=Oa();Vr(e,new Aw(e,n))}function Sw(n,e){Yn.call(this,Ad.STAT_EVENT,n),this.stat=e}function pi(n){const e=Oa();Vr(e,new Sw(e,n))}function If(n,e){Yn.call(this,Ad.Na,n),this.size=e}function bf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}Ad.Ma="serverreachability",Fr(Aw,Yn),Ad.STAT_EVENT="statevent",Fr(Sw,Yn),Ad.Na="timingevent",Fr(If,Yn);var Cf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function R_(){}function kw(){}R_.prototype.h=null;var Dg,Df={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Cg(){Yn.call(this,"d")}function N_(){Yn.call(this,"c")}function Tf(){}function ql(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new wg(this),this.P=O_,this.W=new wf(n=hg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new rC}function rC(){this.i=null,this.g="",this.h=!1}Fr(Cg,Yn),Fr(N_,Yn),Fr(Tf,R_),Tf.prototype.g=function(){return new XMLHttpRequest},Tf.prototype.i=function(){return{}},Dg=new Tf;var O_=45e3,P_={},F_={};function zl(n,e,t){n.K=1,n.v=kf(Pa(e)),n.s=t,n.U=!0,L_(n,null)}function L_(n,e){n.F=Date.now(),Nu(n),n.A=Pa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),$_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new rC,n.g=rE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new tC(gn(n.Ia,n,n.g),n.O)),Eg(n.V,n.g,"readystatechange",n.gb),e=n.H?E_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Sd(1),function wA(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var S=C[0];C=C[1];var k=S.split("_");h=2<=k.length&&"type"==k[1]?h+(S+"=")+C+"&":h+(S+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Tg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ag(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=iC(n,t),o==F_){4==e&&(n.o=4,pi(14),r=!1),Ef(n.j,n.m,null,"[Incomplete Response]");break}if(o==P_){n.o=4,pi(15),Ef(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ef(n.j,n.m,o,null),Md(n,o)}Tg(n)&&o!=F_&&o!=P_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),X_(e),e.L=!0,pi(11))):(Ef(n.j,n.m,t,"[Invalid Chunked Response]"),Zl(n),Sg(n))}function iC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?F_:(t=Number(e.substring(t,r)),isNaN(t)?P_:(r+=1)+t>e.length?F_:(e=e.substr(r,t),n.C=r+t,e))}function Nu(n){n.Y=Date.now()+n.P,Af(n,n.P)}function Af(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bf(gn(n.eb,n),e)}function xd(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function Sg(n){0==n.l.G||n.I||Xw(n.l,n)}function Zl(n){xd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,k_(n.W),Ig(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Md(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||kg(t.i,n)))if(t.I=n.N,!n.J&&kg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=bf(gn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Lg(t),Ud(t)}Fg(t),pi(18)}if(1>=Hw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Jl(t,11)}else if((n.J||t.g==n)&&Lg(t),!y_(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const S=C[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const k=C[4];null!=k&&(t.za=k,t.h.info("SVER="+t.za));const V=C[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const ie=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;!u.g&&(Mi(ie,"spdy")||Mi(ie,"quic")||Mi(ie,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Rg(u,u.h),u.h=null))}if(r.D){const Oe=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.sa=Oe,Nn(r.F,r.D,Oe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=nE(r,r.H?r.la:null,r.W),h.J){Ql(r.i,h);var m=h,E=r.K;E&&m.setTimeout(E),m.B&&(xd(m),Nu(m)),r.g=h}else J_(r);0<t.l.length&&Ff(t)}else"stop"!=C[0]&&"close"!=C[0]||Jl(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Jl(t,7):Pg(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Sd(4)}catch(C){}}function Mg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(g_(n)||"string"==typeof n)pw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(g_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function xg(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(g_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Wl(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wl)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Sf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ou(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ou(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ou(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(et=ql.prototype).setTimeout=function(n){this.P=n},et.gb=function(n){n=n.target;const e=this.L;e&&3==Fa(n)?e.l():this.Ia(n)},et.Ia=function(n){try{if(n==this.g)e:{const S=Fa(this.g);var e=this.g.Da();const k=this.g.ba();if(!(3>S)&&(3!=S||hg||this.g&&(this.h.h||this.g.ga()||W_(this.g)))){this.I||4!=S||7==e||Sd(8==e||0>=k?3:2),xd(this);var t=this.g.ba();this.N=t;t:if(Tg(this)){var r=W_(this.g);n="";var o=r.length,u=4==Fa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zl(this),Sg(this);var h="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function EA(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y_(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,pi(12),Zl(this),Sg(this);break e}Ef(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Md(this,t)}this.U?(Ag(this,S,h),hg&&this.i&&3==S&&(Eg(this.V,this.W,"tick",this.fb),this.W.start())):(Ef(this.j,this.m,h,null),Md(this,h)),4==S&&Zl(this),this.i&&!this.I&&(4==S?Xw(this.l,this):(this.i=!1,Nu(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),Zl(this),Sg(this)}}}catch(S){}},et.fb=function(){if(this.g){var n=Fa(this.g),e=this.g.ga();this.C<e.length&&(xd(this),Ag(this,n,e),this.i&&4!=n&&Nu(this))}},et.cancel=function(){this.I=!0,Zl(this)},et.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function nC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Sd(3),pi(17)),Zl(this),this.o=2,Sg(this)):Af(this,this.Y-n)},(et=Wl.prototype).R=function(){Sf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},et.T=function(){return Sf(this),this.g.concat()},et.get=function(n,e){return Ou(this.h,n)?this.h[n]:e},et.set=function(n,e){Ou(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},et.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var V_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pu){this.g=void 0!==e?e:n.g,xf(this,n.j),this.s=n.s,Mf(this,n.i),kd(this,n.m),this.l=n.l,e=n.h;var t=new Nd;t.i=e.i,e.g&&(t.g=new Wl(e.g),t.h=e.h),B_(this,t),this.o=n.o}else n&&(t=String(n).match(V_))?(this.g=!!e,xf(this,t[1]||"",!0),this.s=Kl(t[2]||""),Mf(this,t[3]||"",!0),kd(this,t[4]),this.l=Kl(t[5]||"",!0),B_(this,t[6]||"",!0),this.o=Kl(t[7]||"")):(this.g=!!e,this.h=new Nd(null,this.g))}function Pa(n){return new Pu(n)}function xf(n,e,t){n.j=t?Kl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mf(n,e,t){n.i=t?Kl(e,!0):e}function kd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function B_(n,e,t){e instanceof Nd?(n.h=e,function Dr(n,e){e&&!n.j&&(Yl(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Uw(this,r),$_(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Rd(e,Lw)),n.h=new Nd(e,n.g))}function Nn(n,e,t){n.h.set(e,t)}function kf(n){return Nn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Kl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Ow),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ow(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rd(e,j_,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rd(e,j_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rd(t,"/"==t.charAt(0)?Fw:Pw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rd(t,Vw)),n.join("")};var j_=/[#\/\?@]/g,Pw=/[#\?:]/g,Fw=/[#\?]/g,Lw=/[#\?@]/g,Vw=/#/g;function Nd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yl(n){n.g||(n.g=new Wl,n.h=0,n.i&&function U_(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Uw(n,e){Yl(n),e=Od(n,e),Ou(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ou((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Sf(n)))}function Bw(n,e){return Yl(n),e=Od(n,e),Ou(n.g.h,e)}function $_(n,e,t){Uw(n,e),0<t.length&&(n.i=null,n.g.set(Od(n,e),cg(t)),n.h+=t.length)}function Od(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $w(n){this.l=n||sC,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=Nd.prototype).add=function(n,e){Yl(this),this.i=null,n=Od(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Yl(this),this.g.forEach(function(t,r){pw(t,function(o){n.call(e,o,r,this)},this)},this)},et.T=function(){Yl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},et.R=function(n){Yl(this);var e=[];if("string"==typeof n)Bw(this,n)&&(e=gw(e,this.g.get(Od(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=gw(e,n[t])}return e},et.set=function(n,e){return Yl(this),this.i=null,Bw(this,n=Od(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var sC=10;function H_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Hw(n){return n.h?1:n.g?n.g.size:0}function kg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rg(n,e){n.g?n.g.add(e):n.h=e}function Ql(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Gw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cg(n.i)}function G_(){}function qw(){this.g=new G_}function oC(n,e,t){const r=t||"";try{Mg(n,function(o,u){let h=o;pf(o)&&(h=mg(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function q_(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Pd(n){this.l=n.$b||null,this.j=n.ib||!1}function Fd(n,e){Cr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Js,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$w.prototype.cancel=function(){if(this.i=Gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},G_.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},G_.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},Fr(Pd,R_),Pd.prototype.g=function(){return new Fd(this.l,this.j)},Pd.prototype.i=function(n){return function(){return n}}({}),Fr(Fd,Cr);var Js=0;function Zw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Rf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ki(n)}function Ki(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Fd.prototype).open=function(n,e){if(this.readyState!=Js)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ki(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rf(this)),this.readyState=Js},et.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},et.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rf(this):Ki(this),3==this.readyState&&Zw(this)}},et.Ua=function(n){this.g&&(this.response=this.responseText=n,Rf(this))},et.Ta=function(n){this.g&&(this.response=n,Rf(this))},et.ha=function(){this.g&&Rf(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Do=vt.JSON.parse;function cn(n){Cr.call(this),this.headers=new Wl,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=z_,this.K=this.L=!1}Fr(cn,Cr);var z_="",Ww=/^https?$/i,aC=["POST","PUT"];function lC(n){return"content-type"==n.toLowerCase()}function Kw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ng(n),Og(n)}function Ng(n){n.D||(n.D=!0,Vr(n,"complete"),Vr(n,"error"))}function Ld(n){if(n.h&&void 0!==lg&&(!n.C[1]||4!=Fa(n)||2!=n.ba()))if(n.v&&4==Fa(n))vg(n.Fa,0,n);else if(Vr(n,"readystatechange"),4==Fa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(V_)[1]||null;if(!o&&vt.self&&vt.self.location){var u=vt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Ww.test(o?o.toLowerCase():"")}t=r}if(t)Vr(n,"complete"),Vr(n,"success");else{n.m=6;try{var h=2<Fa(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",Ng(n)}}finally{Og(n)}}}function Og(n,e){if(n.g){Z_(n);const t=n.g,r=n.C[0]?ff:null;n.g=null,n.C=null,e||Vr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Z_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function Fa(n){return n.g?n.g.readyState:0}function W_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case z_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vd(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Yw(n){let e="";return w_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Nn(n,e,t))}function Nf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function K_(n){this.za=0,this.l=[],this.h=new bg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Nf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Nf("baseRetryDelayMs",5e3,n),this.$a=Nf("retryDelaySeedMs",1e4,n),this.Ya=Nf("forwardChannelMaxRetries",2,n),this.ra=Nf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new $w(n&&n.concurrentRequestLimit),this.Ca=new qw,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Pg(n){if(Of(n),3==n.G){var e=n.V++,t=Pa(n.F);Nn(t,"SID",n.J),Nn(t,"RID",e),Nn(t,"TYPE","terminate"),Bd(n,t),(e=new ql(n,n.h,e,void 0)).K=2,e.v=kf(Pa(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=rE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Nu(e)}tE(n)}function Ud(n){n.g&&(X_(n),n.g.cancel(),n.g=null)}function Of(n){Ud(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Lg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function Pf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ff(n)}function Ff(n){H_(n.i)||n.m||(n.m=!0,yg(n.Ha,n),n.C=0)}function Y_(n,e){var t;t=e?e.m:n.V++;const r=Pa(n.F);Nn(r,"SID",n.J),Nn(r,"RID",t),Nn(r,"AID",n.U),Bd(n,r),n.o&&n.s&&Vd(r,n.o,n.s),t=new ql(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Q_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Rg(n.i,t),zl(t,r,e)}function Bd(n,e){n.j&&Mg({},function(t,r){Nn(e,r,t)})}function Q_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?gn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const S=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{oC(S,h,"req"+C+"_")}catch(k){r&&r(S)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function J_(n){n.g||n.u||(n.Y=1,yg(n.Ga,n),n.A=0)}function Fg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=bf(gn(n.Ga,n),eE(n,n.A)),n.A++,0))}function X_(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function Jw(n){n.g=new ql(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Pa(n.oa);Nn(e,"RID","rpc"),Nn(e,"SID",n.J),Nn(e,"CI",n.N?"0":"1"),Nn(e,"AID",n.U),Bd(n,e),Nn(e,"TYPE","xmlhttp"),n.o&&n.s&&Vd(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=kf(Pa(e)),t.s=null,t.U=!0,L_(t,n)}function Lg(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function Xw(n,e){var t=null;if(n.g==e){Lg(n),X_(n),n.g=null;var r=2}else{if(!kg(n.i,e))return;t=e.D,Ql(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Vr(r=Oa(),new If(r,t,e,o)),Ff(n)}else J_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Qw(n,e){return!(Hw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=bf(gn(n.Ha,n,e),eE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Fg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Jl(n,5);break;case 4:Jl(n,10);break;case 3:Jl(n,6);break;default:Jl(n,2)}}function eE(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Jl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=gn(n.jb,n);t||(t=new Pu("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||xf(t,"https"),kf(t)),function zw(n,e){const t=new bg;if(vt.Image){const r=new Image;r.onload=Id(q_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Id(q_,t,r,"TestLoadImage: error",!1,e),r.onabort=Id(q_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Id(q_,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.j&&n.j.va(e),tE(n),Of(n)}function tE(n){n.G=0,n.I=-1,n.j&&((0!=Gw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cg(n.l),n.l.length=0),n.j.ua())}function nE(n,e,t){let r=function Rw(n){return n instanceof Pu?Pa(n):new Pu(n,void 0)}(t);if(""!=r.i)e&&Mf(r,e+"."+r.i),kd(r,r.m);else{const o=vt.location;r=function Nw(n,e,t,r){var o=new Pu(null,void 0);return n&&xf(o,n),e&&Mf(o,e),t&&kd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&w_(n.aa,function(o,u){Nn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Nn(r,e,t),Nn(r,"VER",n.ma),Bd(n,r),r}function rE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cn(t&&n.Ba&&!n.qa?new Pd({ib:!0}):n.qa)).L=n.H,e}function iE(){}function Vg(){if(Bl&&!(10<=Number(Qb)))throw Error("Environmental error: no available transport.")}function _s(n,e){Cr.call(this),this.g=new K_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!y_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!y_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jd(this)}function sE(n){Cg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function oE(){N_.call(this),this.status=1}function jd(n){this.g=n}(et=cn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dg.g(),this.C=function Mw(n){return n.h||(n.h=n.i())}(this.u?this.u:Dg),this.g.onreadystatechange=gn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Kw(this,u)}n=t||"";const o=new Wl(this.headers);r&&Mg(r,function(u,h){o.set(h,u)}),r=function zb(n){e:{var e=lC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=vt.FormData&&n instanceof vt.FormData,!(0<=fw(aC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Z_(this),0<this.B&&((this.K=function uC(n){return Bl&&function Yb(){return function yA(n){var e=Kb;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=__(String(bd)).split("."),t=__("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=v_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||v_(0==o[2].length,0==u[2].length)||v_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gn(this.pa,this)):this.A=vg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Kw(this,u)}},et.pa=function(){void 0!==lg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vr(this,"complete"),Vr(this,"abort"),Og(this))},et.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Og(this,!0)),cn.Z.M.call(this)},et.Fa=function(){this.s||(this.F||this.v||this.l?Ld(this):this.cb())},et.cb=function(){Ld(this)},et.ba=function(){try{return 2<Fa(this)?this.g.status:-1}catch(n){return-1}},et.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},et.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Do(e)}},et.Da=function(){return this.m},et.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=K_.prototype).ma=8,et.G=1,et.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},et.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new ql(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=E_(u),Wb(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Q_(this,o,e),Nn(t=Pa(this.F),"RID",n),Nn(t,"CVER",22),this.D&&Nn(t,"X-HTTP-Session-Id",this.D),Bd(this,t),this.o&&u&&Vd(t,this.o,u),Rg(this.i,o),this.Ra&&Nn(t,"TYPE","init"),this.ja?(Nn(t,"$req",e),Nn(t,"SID","null"),o.$=!0,zl(o,t,null)):zl(o,t,e),this.G=2}}else 3==this.G&&(n?Y_(this,n):0==this.l.length||H_(this.i)||Y_(this))},et.Ga=function(){if(this.u=null,Jw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=bf(gn(this.bb,this),n)}},et.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pi(10),Ud(this),Jw(this))},et.ab=function(){null!=this.v&&(this.v=null,Ud(this),Fg(this),pi(19))},et.jb=function(n){n?(this.h.info("Successfully pinged google.com"),pi(2)):(this.h.info("Failed to ping google.com"),pi(1))},(et=iE.prototype).xa=function(){},et.wa=function(){},et.va=function(){},et.ua=function(){},et.Oa=function(){},Vg.prototype.g=function(n,e){return new _s(n,e)},Fr(_s,Cr),_s.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),yg(gn(n.hb,n,e))),pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=nE(n,null,n.W),Ff(n)},_s.prototype.close=function(){Pg(this.g)},_s.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Pf(this.g,e)}else this.v?((e={}).__data__=mg(n),Pf(this.g,e)):Pf(this.g,n)},_s.prototype.M=function(){this.g.j=null,delete this.j,Pg(this.g),delete this.g,_s.Z.M.call(this)},Fr(sE,Cg),Fr(oE,N_),Fr(jd,iE),jd.prototype.xa=function(){Vr(this.g,"a")},jd.prototype.wa=function(n){Vr(this.g,new sE(n))},jd.prototype.va=function(n){Vr(this.g,new oE(n))},jd.prototype.ua=function(){Vr(this.g,"b")},Vg.prototype.createWebChannel=Vg.prototype.g,_s.prototype.send=_s.prototype.u,_s.prototype.open=_s.prototype.m,_s.prototype.close=_s.prototype.close,Cf.NO_ERROR=0,Cf.TIMEOUT=8,Cf.HTTP_ERROR=6,xw.COMPLETE="complete",kw.EventType=Df,Df.OPEN="a",Df.CLOSE="b",Df.ERROR="c",Df.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,cn.prototype.listenOnce=cn.prototype.O,cn.prototype.getLastError=cn.prototype.La,cn.prototype.getLastErrorCode=cn.prototype.Da,cn.prototype.getStatus=cn.prototype.ba,cn.prototype.getResponseJson=cn.prototype.Qa,cn.prototype.getResponseText=cn.prototype.ga,cn.prototype.send=cn.prototype.ea;var cC=ka.createWebChannelTransport=function(){return new Vg},dC=ka.getStatEventTarget=function(){return Oa()},ev=ka.ErrorCode=Cf,aE=ka.EventType=xw,uE=ka.Event=Ad,tv=ka.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},lE=ka.FetchXmlHttpFactory=Pd,Lf=ka.WebChannel=kw,cE=ka.XhrIo=cn;const nv="@firebase/firestore";class Ur{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");let Xl="9.6.10";const La=new ea.Yd("@firebase/firestore");function Ug(){return La.logLevel}function Pe(n,...e){if(La.logLevel<=ea.in.DEBUG){const t=e.map(dE);La.debug(`Firestore (${Xl}): ${n}`,...t)}}function cr(n,...e){if(La.logLevel<=ea.in.ERROR){const t=e.map(dE);La.error(`Firestore (${Xl}): ${n}`,...t)}}function na(n,...e){if(La.logLevel<=ea.in.WARN){const t=e.map(dE);La.warn(`Firestore (${Xl}): ${n}`,...t)}}function dE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function bt(n,e){n||tt()}function Ge(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends Vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Br{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ur.UNAUTHENTICATED))}shutdown(){}}class Bg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fC{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Br,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Br)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt("string"==typeof r.accessToken),new fE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new Ur(e)}}class jg{constructor(e,t,r){this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class $g{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new jg(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt("string"==typeof t.token),this.p=t.token,new Vn(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function gC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}vs.A=-1;class rv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=gC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function tc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function iv(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Qn(0,0))}static max(){return new wt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function pE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function To(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vf{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends Vf{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const Hg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Vf{construct(e,t,r){return new Tr(e,t,r)}static isValidIdentifier(e){return Hg.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new ee(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new ee(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new ee(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new ee(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(t)}static emptyPath(){return new Tr([])}}class nc{constructor(e){this.fields=e,e.sort(Tr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ar(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const Uf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(n){if(bt(!!n),"string"==typeof n){let e=0;const t=Uf.exec(n);if(bt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rc(n){return"string"==typeof n?Ar.fromBase64String(n):Ar.fromUint8Array(n)}function sv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ov(n){const e=n.mapValue.fields.__previous_value__;return sv(e)?ov(e):e}function $d(n){const e=Xs(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class yE{constructor(e,t,r,o,u,h,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Va{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Va("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}function Fu(n){return null==n}function Bf(n){return 0===n&&1/n==-1/0}function _E(n){return"number"==typeof n&&Number.isInteger(n)&&!Bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je(Yt.fromString(e))}static fromName(e){return new je(Yt.fromString(e).popFirst(5))}static empty(){return new je(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Yt(e.slice()))}}const mC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yC={nullValue:"NULL_VALUE"};function Hd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sv(n)?4:IE(n)?9:10:tt()}function Ao(n,e){if(n===e)return!0;const t=Hd(n);if(t!==Hd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $d(n).isEqual($d(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Xs(r.timestampValue),h=Xs(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,rc(n.bytesValue).isEqual(rc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return qn(r.geoPointValue.latitude)===qn(o.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return qn(r.integerValue)===qn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=qn(r.doubleValue),h=qn(o.doubleValue);return u===h?Bf(u)===Bf(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return tc(n.arrayValue.values||[],e.arrayValue.values||[],Ao);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(pE(u)!==pE(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!Ao(u[m],h[m])))return!1;return!0}(n,e);default:return tt()}var o}function Lu(n,e){return void 0!==(n.values||[]).find(t=>Ao(t,e))}function Vu(n,e){if(n===e)return 0;const t=Hd(n),r=Hd(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=qn(o.integerValue||o.doubleValue),m=qn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return vE(n.timestampValue,e.timestampValue);case 4:return vE($d(n),$d(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=rc(o),m=rc(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let E=0;E<h.length&&E<m.length;E++){const C=Bt(h[E],m[E]);if(0!==C)return C}return Bt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Bt(qn(o.latitude),qn(u.latitude));return 0!==h?h:Bt(qn(o.longitude),qn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let E=0;E<h.length&&E<m.length;++E){const C=Vu(h[E],m[E]);if(C)return C}return Bt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const h=o.fields||{},m=Object.keys(h),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const k=Bt(m[S],C[S]);if(0!==k)return k;const V=Vu(h[m[S]],E[C[S]]);if(0!==V)return V}return Bt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function vE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=Xs(n),r=Xs(e),o=Bt(t.seconds,r.seconds);return 0!==o?o:Bt(t.nanos,r.nanos)}function ic(n){return sc(n)}function sc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Xs(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rc(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=sc(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${sc(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function Gd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function av(n){return!!n&&"integerValue"in n}function jf(n){return!!n&&"arrayValue"in n}function wE(n){return!!n&&"nullValue"in n}function EE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $f(n){return!!n&&"mapValue"in n}function Hf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return To(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function oc(n,e){return void 0===n?e:void 0===e||Vu(n,e)>0?n:e}function bE(n,e){return void 0===n?e:void 0===e||Vu(n,e)<0?n:e}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hf(t)}setAll(e){let t=Tr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Hf(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());$f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];$f(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){To(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Jr(Hf(this.value))}}function CE(n){const e=[];return To(n.fields,(t,r)=>{const o=new Tr([t]);if($f(r)){const u=CE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new nc(e)}class _n{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new _n(e,0,wt.min(),wt.min(),Jr.empty(),0)}static newFoundDocument(e,t,r){return new _n(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new _n(e,2,t,wt.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,wt.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function qg(n){return n.fields.find(e=>2===e.kind)}function qd(n){return n.fields.filter(e=>2!==e.kind)}Gg.UNKNOWN_ID=-1;class zd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gf(0,Ua.min())}}function uv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new Ua(o,je.empty(),e)}function DE(n){return new Ua(n.readTime,n.key,-1)}class Ua{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ua(wt.min(),je.empty(),-1)}static max(){return new Ua(wt.max(),je.empty(),-1)}}function _C(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}class vC{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function zg(n,e=null,t=[],r=[],o=null,u=null,h=null){return new vC(n,e,t,r,o,u,h)}function ac(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+ic(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Fu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ic(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ic(r)).join(",")),e.P=t}return e.P}function qf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!DC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ao(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kg(n.startAt,e.startAt)&&Kg(n.endAt,e.endAt)}function Zg(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Wg(n,e){return n.filters.filter(t=>t instanceof Xr&&t.field.isEqual(e))}class Xr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new wC(e,t,r):"array-contains"===t?new SE(e,r):"in"===t?new xE(e,r):"not-in"===t?new bC(e,r):"array-contains-any"===t?new CC(e,r):new Xr(e,t,r)}static V(e,t,r){return"in"===t?new EC(e,r):new IC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Vu(t,this.value)):null!==t&&Hd(this.value)===Hd(t)&&this.v(Vu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wC extends Xr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class EC extends Xr{constructor(e,t){super(e,"in",t),this.keys=AE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class IC extends Xr{constructor(e,t){super(e,"not-in",t),this.keys=AE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class SE extends Xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&Lu(t.arrayValue,this.value)}}class xE extends Xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lu(this.value.arrayValue,t)}}class bC extends Xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lu(this.value.arrayValue,t)}}class CC extends Xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Lu(this.value.arrayValue,r))}}class Ba{constructor(e,t){this.position=e,this.inclusive=t}}class Zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function DC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function ME(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(h.referenceValue),t.key):Vu(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Kg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ao(n.position[t],e.position[t]))return!1;return!0}class So{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function lv(n,e,t,r,o,u,h,m){return new So(n,e,t,r,o,u,h,m)}function Uu(n){return new So(n)}function Yg(n){return!Fu(n.limit)&&"F"===n.limitType}function Qg(n){return!Fu(n.limit)&&"L"===n.limitType}function zf(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function cv(n){for(const e of n.filters)if(e.S())return e.field;return null}function Jg(n){return null!==n.collectionGroup}function Wd(n){const e=Ge(n);if(null===e.D){e.D=[];const t=cv(e),r=zf(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Zd(t)),e.D.push(new Zd(Tr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Zd(Tr.keyField(),u))}}}return e.D}function ws(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=zg(e.path,e.collectionGroup,Wd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Wd(e))t.push(new Zd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ba(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Ba(e.startAt.position,!e.startAt.inclusive):null;e.C=zg(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function kE(n,e,t){return new So(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return qf(ws(n),ws(e))&&n.limitType===e.limitType}function TC(n){return`${ac(ws(n))}|lt:${n.limitType}`}function dv(n){return`Query(target=${function TE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ic(r.value)}`;var r}).join(", ")}]`),Fu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ic(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ic(t)).join(",")),`Target(${e})`}(ws(n))}; limitType=${n.limitType})`}function Yd(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=ME(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,Wd(t),r)||t.endAt&&!function(o,u,h){const m=ME(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,Wd(t),r)));var t,r}function RE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uc(n){return(e,t)=>{let r=!1;for(const o of Wd(n)){const u=Zf(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Zf(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),E=h.data.field(o);return null!==m&&null!==E?Vu(m,E):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function NE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bf(e)?"-0":e}}function AC(n){return{integerValue:""+n}}function hv(n,e){return _E(e)?AC(e):NE(n,e)}class Xg{constructor(){this._=void 0}}function SC(n,e,t){return n instanceof lc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Bu?em(n,e):n instanceof ra?Qd(n,e):function(r,o){const u=OE(r,o),h=fv(u)+fv(r.k);return av(u)&&av(r.k)?AC(h):NE(r.M,h)}(n,e)}function xC(n,e,t){return n instanceof Bu?em(n,e):n instanceof ra?Qd(n,e):t}function OE(n,e){return n instanceof Jd?av(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class lc extends Xg{}class Bu extends Xg{constructor(e){super(),this.elements=e}}function em(n,e){const t=pv(e);for(const r of n.elements)t.some(o=>Ao(o,r))||t.push(r);return{arrayValue:{values:t}}}class ra extends Xg{constructor(e){super(),this.elements=e}}function Qd(n,e){let t=pv(e);for(const r of n.elements)t=t.filter(o=>!Ao(o,r));return{arrayValue:{values:t}}}class Jd extends Xg{constructor(e,t){super(),this.M=e,this.k=t}}function fv(n){return qn(n.integerValue||n.doubleValue)}function pv(n){return jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wf{constructor(e,t){this.field=e,this.transform=t}}class gv{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class tm{}function kC(n,e,t){n instanceof Xd?function(r,o,u){const h=r.value.clone(),m=yv(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof dc?function(r,o,u){if(!mv(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=yv(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(NC(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ju(n,e,t){var o;n instanceof Xd?function(r,o,u){if(!mv(r.precondition,o))return;const h=r.value.clone(),m=OC(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(RC(o),h).setHasLocalMutations()}(n,e,t):n instanceof dc?function(r,o,u){if(!mv(r.precondition,o))return;const h=OC(r.fieldTransforms,u,o),m=o.data;m.setAll(NC(r)),m.setAll(h),o.convertToFoundDocument(RC(o),m).setHasLocalMutations()}(n,e,t):mv(n.precondition,o=e)&&o.convertToNoDocument(wt.min())}function PE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=OE(r.transform,o||null);null!=u&&(null==t&&(t=Jr.empty()),t.set(r.field,u))}return t||null}function cc(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&tc(t,r,(o,u)=>function MC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bu&&r instanceof Bu||t instanceof ra&&r instanceof ra?tc(t.elements,r.elements,Ao):t instanceof Jd&&r instanceof Jd?Ao(t.k,r.k):t instanceof lc&&r instanceof lc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function RC(n){return n.isFoundDocument()?n.version:wt.min()}class Xd extends tm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class dc extends tm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function NC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yv(n,e,t){const r=new Map;bt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,xC(h,m,t[o]))}return r}function OC(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,SC(u,h,e))}return r}class eh extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Kf extends tm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class PC{constructor(e){this.count=e}}var Jn,zt;function FE(n){switch(n){default:return tt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function LE(n){if(void 0===n)return cr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Jn.OK:return ce.OK;case Jn.CANCELLED:return ce.CANCELLED;case Jn.UNKNOWN:return ce.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return ce.INTERNAL;case Jn.UNAVAILABLE:return ce.UNAVAILABLE;case Jn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Jn.NOT_FOUND:return ce.NOT_FOUND;case Jn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Jn.ABORTED:return ce.ABORTED;case Jn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Jn.DATA_LOSS:return ce.DATA_LOSS;default:return tt()}}(zt=Jn||(Jn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";class $u{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return gE(this.inner)}size(){return this.innerSize}}class Xn{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ei{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ei.RED,this.left=null!=o?o:ei.EMPTY,this.right=null!=u?u:ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ei(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ei.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1,ei.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ei(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cn{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new th(this.data.getIterator())}getIteratorFrom(e){return new th(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class th{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hc(n){return n.hasNext()?n.getNext():void 0}const VE=new Xn(je.comparator);function Es(){return VE}const UE=new Xn(je.comparator);function rm(){return UE}function nh(){return new $u(n=>n.toString(),(n,e)=>n.isEqual(e))}const FC=new Xn(je.comparator),BE=new Cn(je.comparator);function dn(...n){let e=BE;for(const t of n)e=e.add(t);return e}const LC=new Cn(Bt);function im(){return LC}class Yf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,t)),new Yf(wt.min(),r,im(),Es(),dn())}}class ja{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ja(Ar.EMPTY_BYTE_STRING,t,dn(),dn(),dn())}}class sm{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class om{constructor(e,t){this.targetId=e,this.$=t}}class xo{constructor(e,t,r=Ar.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class jE{constructor(){this.B=0,this.L=$E(),this.U=Ar.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=dn(),t=dn(),r=dn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new ja(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=$E()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class am{constructor(e){this.nt=e,this.st=new Map,this.it=Es(),this.rt=rh(),this.ot=new Cn(Bt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Zg(u))if(0===r){const h=new je(u.path);this.ct(t,h,_n.newNoDocument(h,wt.min()))}else bt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&Zg(m.target)){const E=new je(m.target.path);null!==this.it.get(E)||this.It(h,E)||this.ct(h,E,_n.newNoDocument(E,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=dn();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new Yf(e,t,this.ot,this.it,r);return this.it=Es(),this.rt=rh(),this.ot=new Cn(Bt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new jE,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Cn(Bt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new jE),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function rh(){return new Xn(je.comparator)}function $E(){return new Xn(je.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},UC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class um{constructor(e,t){this.databaseId=e,this.N=t}}function Hu(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HE(n,e){return n.N?e.toBase64():e.toUint8Array()}function BC(n,e){return Hu(n,e.toTimestamp())}function Sr(n){return bt(!!n),wt.fromTimestamp(function(e){const t=Xs(e);return new Qn(t.seconds,t.nanos)}(n))}function lm(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function cm(n){const e=Yt.fromString(n);return bt(gi(e)),e}function ih(n,e){return lm(n.databaseId,e.path)}function ia(n,e){const t=cm(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(dm(t))}function _v(n,e){return lm(n.databaseId,e)}function jC(n){const e=cm(n);return 4===e.length?Yt.emptyPath():dm(e)}function fc(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dm(n){return bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vv(n,e,t){return{name:ih(n,e),fields:t.value.mapValue.fields}}function hm(n,e,t){const r=ia(n,e.name),o=Sr(e.updateTime),u=new Jr({mapValue:{fields:e.fields}}),h=_n.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Qf(n,e){let t;if(e instanceof Xd)t={update:vv(n,e.key,e.value)};else if(e instanceof eh)t={delete:ih(n,e.key)};else if(e instanceof dc)t={update:vv(n,e.key,e.data),updateMask:zE(e.fieldMask)};else{if(!(e instanceof Kf))return tt();t={verify:ih(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof lc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Bu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ra)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Jd)return{fieldPath:u.field.canonicalString(),increment:h.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:BC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Ev(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?dr.updateTime(Sr(o.updateTime)):void 0!==o.exists?dr.exists(o.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(bt("REQUEST_TIME"===h.setToServerValue),m=new lc):"appendMissingElements"in h?m=new Bu(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new ra(h.removeAllFromArray.values||[]):"increment"in h?m=new Jd(u,h.increment):tt();const E=Tr.fromServerFormat(h.fieldPath);return new Wf(E,m)}(n,o)):[];var o;if(e.update){const o=ia(n,e.update.name),u=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new nc((e.updateMask.fieldPaths||[]).map(C=>Tr.fromServerFormat(C)));return new dc(o,u,h,t,r)}return new Xd(o,u,t,r)}if(e.delete){const o=ia(n,e.delete);return new eh(o,t)}if(e.verify){const o=ia(n,e.verify);return new Kf(o,t)}return tt()}function Iv(n,e){return{documents:[_v(n,e.path)]}}function fm(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_v(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_v(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(S=>function(k){if("=="===k.op){if(EE(k.value))return{unaryFilter:{field:pc(k.field),op:"IS_NAN"}};if(wE(k.value))return{unaryFilter:{field:pc(k.field),op:"IS_NULL"}}}else if("!="===k.op){if(EE(k.value))return{unaryFilter:{field:pc(k.field),op:"IS_NOT_NAN"}};if(wE(k.value))return{unaryFilter:{field:pc(k.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(k.field),op:qC(k.op),value:k.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:pc((S=C).field),direction:GE(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(C=e.limit,n.N||Fu(C)?C:{value:C});var C,m,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function bv(n){let e=jC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){bt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=Cv(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(S=>{return new Zd(gc((k=S).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction));var k}));let m=null;t.limit&&(m=function(S){let k;return k="object"==typeof S?S.value:S,Fu(k)?null:k}(t.limit));let E=null;var S;t.startAt&&(E=new Ba((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new Ba(S.values||[],!S.before)}(t.endAt)),lv(e,o,h,u,m,"F",E,C)}function Cv(n){return n?void 0!==n.unaryFilter?[qE(n)]:void 0!==n.fieldFilter?[zC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Cv(e)).reduce((e,t)=>e.concat(t)):tt():[]}function GE(n){return VC[n]}function qC(n){return UC[n]}function pc(n){return{fieldPath:n.canonicalString()}}function gc(n){return Tr.fromServerFormat(n.fieldPath)}function zC(n){return Xr.create(gc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function qE(n){switch(n.unaryFilter.op){case"IS_NAN":const e=gc(n.unaryFilter.field);return Xr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=gc(n.unaryFilter.field);return Xr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gc(n.unaryFilter.field);return Xr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gc(n.unaryFilter.field);return Xr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function zE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gi(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZE(e)),e=ZC(n.get(t),e);return ZE(e)}function ZC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ZE(n){return n+"\x01\x01"}function sa(n){const e=n.length;if(bt(e>=2),2===e)return bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&tt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:tt()}u=h+2}return new Yt(r)}const sh=["userId","batchId"];function pm(n,e){return[n,Un(e)]}function gm(n,e,t){return[n,Un(e),t]}const WC={},WE=["prefixPath","collectionGroup","readTime","documentId"],KC=["prefixPath","collectionGroup","documentId"],YC=["collectionGroup","readTime","prefixPath","documentId"],Dv=["canonicalId","targetId"],KE=["targetId","path"],YE=["path","targetId"],mm=["collectionId","parent"],Tv=["indexId","uid"],bA=["uid","sequenceNumber"],QE=["indexId","uid","arrayValue","directionalValue","documentKey"],QC=["indexId","uid","documentKey"],JE=["userId","collectionPath","documentId"],ym=["userId","collectionPath","largestBatchId"],XE=["userId","collectionGroup","largestBatchId"],eI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Av=[...eI,"documentOverlays"],_m=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CA=[..._m,"indexConfiguration","indexState","indexEntries"],tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},E=>r(E))}),h=!0,u===o&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(o=>o?fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Jf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Br,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new oh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=vm(r.target.error);this.At.reject(new oh(e,o))}}static open(e,t,r,o){try{return new Jf(t,e.transaction(o,r))}catch(u){throw new oh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new JC(t)}}class Mo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Mo.Vt((0,Vt.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Gu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Vt.hl)())return!1;if(Mo.St())return!0;const e=(0,Vt.z$)(),t=Mo.Vt(e),r=0<t&&t<10,o=Mo.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new oh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new ee(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new ee(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new oh(e,m))},u.onupgradeneeded=h=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=Jf.open(u.db,e,h?"readonly":"readwrite",r),C=o(E).next(S=>(E.bt(),S)).catch(S=>(E.abort(S),fe.reject(S))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Gu(this.Ft.delete())}}class oh extends ee{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mc(n){return"IndexedDbTransactionError"===n.name}class JC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gu(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Gu(this.store.add(e))}get(e){return Gu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Gu(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Gu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Gt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new fe((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new fe((r,o)=>{t.onerror=u=>{const h=vm(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Gt(e,t){const r=[];return new fe((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const E=new rI(m),C=t(m.primaryKey,m.value,E);if(C instanceof fe){const S=C.catch(k=>(E.done(),fe.reject(k)));r.push(S)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gu(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=vm(r.target.error);t(o)}})}let iI=!1;function vm(n){const e=Mo.Vt((0,Vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iI||(iI=!0,setTimeout(()=>{throw r},0)),r}}return n}class Sv extends nI{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function xr(n,e){const t=Ge(n);return Mo.xt(t.Ht,e)}class wm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&kC(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ju(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ju(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(wt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(t,r)=>cc(t,r))&&tc(this.baseMutations,e.baseMutations,(t,r)=>cc(t,r))}}class xv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){bt(e.mutations.length===r.length);let o=FC;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new xv(e,t,r,o)}}class Mv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yc{constructor(e,t,r,o,u=wt.min(),h=wt.min(),m=Ar.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class kv{constructor(e){this.Jt=e}}function XC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ih(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Hu(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ah(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:ah(e.version)}}var o,u;return r}function Rv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ah(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uh(n){const e=new Qn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function Xf(n,e){const t=(e.baseMutations||[]).map(u=>Ev(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Ev(n.Jt,u)),o=Qn.fromMillis(e.localWriteTimeMs);return new wm(e.batchId,o,t,r)}function Em(n){const e=uh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uh(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(bt(1===(o=n.query).documents.length),r=ws(Uu(jC(o.documents[0])))):r=ws(bv(n.query)),new yc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ar.fromBase64String(n.resumeToken))}function eD(n,e){const t=ah(e.snapshotVersion),r=ah(e.lastLimboFreeSnapshotVersion);let o;o=Zg(e.target)?Iv(n.Jt,e.target):fm(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ac(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function lh(n){const e=bv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kE(e,e.limit,"L"):e}function sI(n,e){return new Mv(e.largestBatchId,Ev(n.Jt,e.overlayMutation))}function Nv(n,e){const t=e.path.lastSegment();return[n,Un(e.path.popLast()),t]}class Ov{getBundleMetadata(e,t){return Pv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:uh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Pv(e).put({bundleId:(r=t).id,createTime:ah(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Fv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:lh(o.bundledQuery),readTime:uh(o.readTime)};var o})}saveNamedQuery(e,t){return Fv(e).put({name:(r=t).name,readTime:ah(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Pv(n){return xr(n,"bundles")}function Fv(n){return xr(n,"namedQueries")}class oI{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new oI(e,t.uid||"")}getOverlay(e,t){return _c(e).get(Nv(this.userId,t)).next(r=>r?sI(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new Mv(t,h);o.push(this.Xt(e,m))}),fe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Un(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(_c(e).Qt("collectionPathOverlayIndex",m))}),fe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=nh(),u=Un(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return _c(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const E of m){const C=sI(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=nh();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _c(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,S)=>{const k=sI(this.M,C);u.size()<o||k.largestBatchId===h?(u.set(k.getKey(),k),h=k.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return _c(e).put(function(r,o,u){const[h,m,E]=Nv(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Qf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function _c(n){return xr(n,"documentOverlays")}class vc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Bf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(rc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?IE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function aI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Lv(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=aI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}vc.fe=new vc;class TA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Lv(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Lv(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class uI{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class tD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class ch{constructor(){this.De=new TA,this.Ce=new uI(this.De),this.xe=new tD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class qu{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qu(this.indexId,this.documentKey,this.arrayValue,r)}}function dh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nD(n.arrayValue,e.arrayValue),0!==t?t:(t=nD(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function nD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class AA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=qg(e);if(void 0!==t&&!this.Be(t))return!1;const r=qd(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rD{constructor(){this.qe=new Vv}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class Vv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Cn(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Cn(Yt.comparator)).toArray()}}const Im=new Uint8Array(0);class SA{constructor(e){this.user=e,this.Ge=new Vv,this.Ke=new $u(t=>ac(t),(t,r)=>qf(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Un(o)};return lI(e).put(u)}return fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[iv(t),""],!1,!0);return lI(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(sa(h.parent))}return r})}addFieldIndex(e,t){const r=bm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=bm(e),o=Yi(e),u=wc(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wc(e);let o=!0;const u=new Map;return fe.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=dn();return fe.forEach(u,(m,E)=>{var C;Pe("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${ac(t)}`);const S=function(st,rn){const mt=qg(rn);if(void 0===mt)return null;for(const Rt of Wg(st,mt.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(E,m),k=function(st,rn){const mt=new Map;for(const Rt of qd(rn))for(const Je of Wg(st,Rt.fieldPath))switch(Je.op){case"==":case"in":mt.set(Rt.fieldPath.canonicalString(),Je.value);break;case"not-in":case"!=":return mt.set(Rt.fieldPath.canonicalString(),Je.value),Array.from(mt.values())}return null}(E,m),V=function(st,rn){const mt=[];let Rt=!0;for(const Pt of qd(rn)){let Hr,Ga=!0;for(const er of Wg(st,Pt.fieldPath)){let Dn,eo=!0;switch(er.op){case"<":case"<=":Dn="nullValue"in(Je=er.value)?yC:"booleanValue"in Je?{booleanValue:!1}:"integerValue"in Je||"doubleValue"in Je?{doubleValue:NaN}:"timestampValue"in Je?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Je?{stringValue:""}:"bytesValue"in Je?{bytesValue:""}:"referenceValue"in Je?Gd(Va.empty(),je.empty()):"geoPointValue"in Je?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Je?{arrayValue:{}}:"mapValue"in Je?{mapValue:{}}:tt();break;case"==":case"in":case">=":Dn=er.value;break;case">":Dn=er.value,eo=!1;break;case"!=":case"not-in":Dn=yC}oc(Hr,Dn)===Dn&&(Hr=Dn,Ga=eo)}if(null!==st.startAt)for(let er=0;er<st.orderBy.length;++er)if(st.orderBy[er].field.isEqual(Pt.fieldPath)){const Dn=st.startAt.position[er];oc(Hr,Dn)===Dn&&(Hr=Dn,Ga=st.startAt.inclusive);break}if(void 0===Hr)return null;mt.push(Hr),Rt&&(Rt=Ga)}var Je;return new Ba(mt,Rt)}(E,m),G=function(st,rn){const mt=[];let Rt=!0;for(const Pt of qd(rn)){let Hr,Ga=!0;for(const er of Wg(st,Pt.fieldPath)){let Dn,eo=!0;switch(er.op){case">=":case">":Dn="nullValue"in(Je=er.value)?{booleanValue:!1}:"booleanValue"in Je?{doubleValue:NaN}:"integerValue"in Je||"doubleValue"in Je?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Je?{stringValue:""}:"stringValue"in Je?{bytesValue:""}:"bytesValue"in Je?Gd(Va.empty(),je.empty()):"referenceValue"in Je?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Je?{arrayValue:{}}:"arrayValue"in Je?{mapValue:{}}:"mapValue"in Je?mC:tt(),eo=!1;break;case"==":case"in":case"<=":Dn=er.value;break;case"<":Dn=er.value,eo=!1;break;case"!=":case"not-in":Dn=mC}bE(Hr,Dn)===Dn&&(Hr=Dn,Ga=eo)}if(null!==st.endAt)for(let er=0;er<st.orderBy.length;++er)if(st.orderBy[er].field.isEqual(Pt.fieldPath)){const Dn=st.endAt.position[er];bE(Hr,Dn)===Dn&&(Hr=Dn,Ga=st.endAt.inclusive);break}if(void 0===Hr)return null;mt.push(Hr),Rt&&(Rt=Ga)}var Je;return new Ba(mt,Rt)}(E,m),ie=this.je(m,E,V),Oe=this.je(m,E,G),Le=this.We(m,E,k),kt=this.ze(m.indexId,S,ie,!!V&&V.inclusive,Oe,!!G&&G.inclusive,Le);return fe.forEach(kt,st=>r.Kt(st,t.limit).next(rn=>{rn.forEach(mt=>{h=h.add(new je(sa(mt.documentKey)))})}))}).next(()=>h)}return fe.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,u,h,m){const E=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=E/(null!=t?t.length:1),S=[];for(let k=0;k<E;++k){const V=t?this.He(t[k/C]):Im,G=r?this.Je(e,V,r[k%C],o):this.Ye(e),ie=u?this.Xe(e,V,u[k%C],h):this.Ye(e+1);S.push(...this.createRange(G,ie,m.map(Oe=>this.Je(e,V,Oe,!0))))}return S}Je(e,t,r,o){const u=new qu(e,je.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new qu(e,je.empty(),t,r);return o?u.ke():u}Ye(e){return new qu(e,je.empty(),Im,Im)}getFieldIndex(e,t){const r=new AA(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const h=u.filter(m=>r.$e(m));return h.sort((m,E)=>E.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new ch;for(const o of qd(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);vc.fe.Zt(u,h)}return r.Se()}He(e){const t=new ch;return vc.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new ch);let u=0;for(const h of qd(e)){const m=r[u++];for(const E of o)if(this.tn(t,h.fieldPath)&&jf(m))o=this.en(o,h,m);else{const C=E.Ne(h.kind);vc.fe.Zt(m,C)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const E=new ch;E.seed(m.Se()),vc.fe.Zt(h,E.Ne(t.kind)),u.push(E)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof Xr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bm(e),o=Yi(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return fe.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{h.push(function(C,S){const k=S?new Gf(S.sequenceNumber,new Ua(uh(S.readTime),new je(sa(S.documentKey)),S.largestBatchId)):Gf.empty(),V=C.fields.map(([G,ie])=>new zd(Tr.fromServerFormat(G),ie));return new Gg(C.indexId,C.collectionGroup,V,k)}(m,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=bm(e),u=Yi(e);return this.sn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>fe.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:ah((V=r).readTime),documentKey:Un(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?fe.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),fe.forEach(m,E=>this.rn(e,o,E).next(C=>{const S=this.on(u,E);return C.isEqual(S)?fe.resolve():this.un(e,u,C,S)}))))})}an(e,t,r){return wc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Un(t.key.path)})}cn(e,t,r){return wc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Un(t.key.path)])}rn(e,t,r){const o=wc(e);let u=new Cn(dh);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Un(t.path)])},(h,m)=>{u=u.add(new qu(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}on(e,t){let r=new Cn(dh);const o=this.Ze(t,e);if(null==o)return r;const u=qg(t);if(null!=u){const h=e.data.field(u.fieldPath);if(jf(h))for(const m of h.arrayValue.values||[])r=r.add(new qu(t.indexId,e.key,this.He(m),o))}else r=r.add(new qu(t.indexId,e.key,Im,o));return r}un(e,t,r,o){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,E,C,S){const k=h.getIterator(),V=m.getIterator();let G=hc(k),ie=hc(V);for(;G||ie;){let Oe=!1,Le=!1;if(G&&ie){const kt=E(G,ie);kt<0?Le=!0:kt>0&&(Oe=!0)}else null!=G?Le=!0:Oe=!0;Oe?(C(ie),ie=hc(V)):Le?(S(G),G=hc(k)):(G=hc(k),ie=hc(V))}}(r,o,dh,h=>{u.push(this.an(e,t,h))},h=>{u.push(this.cn(e,t,h))}),fe.waitFor(u)}sn(e){let t=1;return Yi(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>dh(h,m)).filter((h,m,E)=>!m||0!==dh(h,E[m-1]));const o=[];o.push(e);for(const h of r){const m=dh(h,e),E=dh(h,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(h),o.push(h.ke());else if(E>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,""],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,""]));return u}}function lI(n){return xr(n,"collectionParents")}function wc(n){return xr(n,"indexEntries")}function bm(n){return xr(n,"indexConfiguration")}function Yi(n){return xr(n,"indexState")}const cI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:h},(S,k,V)=>(m++,V.delete()));u.push(E.next(()=>{bt(1===m)}));const C=[];for(const S of t.mutations){const k=gm(e,S.key.path,t.batchId);u.push(o.delete(k)),C.push(S.key)}return fe.waitFor(u).next(()=>C)}function Cm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class ep{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){bt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ep(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=hh(e),h=$a(e);return h.add({}).next(m=>{bt("number"==typeof m);const E=new wm(m,t,r,o),C=function(V,G,ie){const Oe=ie.baseMutations.map(kt=>Qf(V.Jt,kt)),Le=ie.mutations.map(kt=>Qf(V.Jt,kt));return{userId:G,batchId:ie.batchId,localWriteTimeMs:ie.localWriteTime.toMillis(),baseMutations:Oe,mutations:Le}}(this.M,this.userId,E),S=[];let k=new Cn((V,G)=>Bt(V.canonicalString(),G.canonicalString()));for(const V of o){const G=gm(this.userId,V.key.path,m);k=k.add(V.key.path.popLast()),S.push(h.put(C)),S.push(u.put(G,WC))}return k.forEach(V=>{S.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.hn[m]=E.keys()}),fe.waitFor(S).next(()=>E)})}lookupMutationBatch(e,t){return $a(e).get(t).next(r=>r?(bt(r.userId===this.userId),Xf(this.M,r)):null)}ln(e,t){return this.hn[t]?fe.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $a(e).Wt({index:"userMutationsIndex",range:o},(h,m,E)=>{m.userId===this.userId&&(bt(m.batchId>=r),u=Xf(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $a(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Xf(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return hh(e).Wt({range:o},(h,m,E)=>{const[C,S,k]=h,V=sa(S);if(C===this.userId&&t.path.isEqual(V))return $a(e).get(k).next(G=>{if(!G)throw tt();bt(G.userId===this.userId),u.push(Xf(this.M,G))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(Bt);const o=[];return t.forEach(u=>{const h=pm(this.userId,u.path),m=IDBKeyRange.lowerBound(h),E=hh(e).Wt({range:m},(C,S,k)=>{const[V,G,ie]=C,Oe=sa(G);V===this.userId&&u.path.isEqual(Oe)?r=r.add(ie):k.done()});o.push(E)}),fe.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=pm(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Cn(Bt);return hh(e).Wt({range:h},(E,C,S)=>{const[k,V,G]=E,ie=sa(V);k===this.userId&&r.isPrefixOf(ie)?ie.length===o&&(m=m.add(G)):S.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(u=>{o.push($a(e).get(u).next(h=>{if(null===h)throw tt();bt(h.userId===this.userId),r.push(Xf(this.M,h))}))}),fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return dI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return hh(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const E=sa(u[1]);o.push(E)}else m.done()}).next(()=>{bt(0===o.length)})})}containsKey(e,t){return Uv(e,this.userId,t)}_n(e){return Bv(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Uv(n,e,t){const r=pm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return hh(n).Wt({range:u,jt:!0},(m,E,C)=>{const[S,k,V]=m;S===e&&k===o&&(h=!0),C.done()}).next(()=>h)}function $a(n){return xr(n,"mutations")}function hh(n){return xr(n,"documentMutations")}function Bv(n){return xr(n,"mutationQueues")}class zu{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new zu(0)}static gn(){return new zu(-1)}}class iD{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new zu(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>wt.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fh(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return fh(e).Wt((h,m)=>{const E=Em(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>fe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return fh(e).Wt((r,o)=>{const u=Em(o);t(u)})}yn(e){return Dm(e).get("targetGlobalKey").next(t=>(bt(null!==t),t))}pn(e,t){return Dm(e).put("targetGlobalKey",t)}In(e,t){return fh(e).put(eD(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ac(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return fh(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,E)=>{const C=Em(m);qf(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=jr(e);return t.forEach(h=>{const m=Un(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=jr(e);return fe.forEach(t,u=>{const h=Un(u.path);return fe.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=jr(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=jr(e);let u=dn();return o.Wt({range:r,jt:!0},(h,m,E)=>{const C=sa(h[1]),S=new je(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Un(t.path),o=IDBKeyRange.bound([r],[iv(r)],!1,!0);let u=0;return jr(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],E,C)=>{0!==h&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return fh(e).get(t).next(r=>r?Em(r):null)}}function fh(n){return xr(n,"targets")}function Dm(n){return xr(n,"targetGlobal")}function jr(n){return xr(n,"targetDocuments")}function Ec(n){return hI.apply(this,arguments)}function hI(){return hI=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==tI)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),hI.apply(this,arguments)}function fI([n,e],[t,r]){const o=Bt(n,t);return 0===o?Bt(e,r):o}class pI{constructor(e){this.En=e,this.buffer=new Cn(fI),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sD{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Pe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){mc(o)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ec(o)}yield t.vn(e)}))}}class oD{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(vs.A);const r=new pI(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(cI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cI):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,u,h,m,E,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),o=this.params.maximumSequenceNumbersToCollect):o=k,h=Date.now(),this.nthSequenceNumber(e,o))).next(k=>(r=k,m=Date.now(),this.removeTargets(e,r,t))).next(k=>(u=k,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(k=>(C=Date.now(),Ug()<=ea.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-S}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${k} documents in `+(C-E)+`ms\nTotal Duration: ${C-S}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:k})))}}class gI{constructor(e,t){this.db=e,this.garbageCollector=new oD(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return Tm(e,r)}removeReference(e,t,r){return Tm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Tm(e,t)}Mn(e,t){return function(r,o){let u=!1;return Bv(r).zt(h=>Uv(r,h,o).next(m=>(m&&(u=!0),fe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.kn(e,(h,m)=>{if(m<=t){const E=this.Mn(e,h).next(C=>{if(!C)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,wt.min()),jr(e).delete([0,Un(h.path)])))});o.push(E)}}).next(()=>fe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Tm(e,t)}kn(e,t){const r=jr(e);let o,u=vs.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:E,sequenceNumber:C})=>{0===h?(u!==vs.A&&t(new je(sa(o)),u),u=C,o=E):u=vs.A}).next(()=>{u!==vs.A&&t(new je(sa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tm(n,e){return jr(n).put((r=n.currentSequenceNumber,{targetId:0,path:Un(e.path),sequenceNumber:r}));var r}class aD{constructor(){this.changes=new $u(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mI{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ic(e).put(r)}removeEntry(e,t,r){return Ic(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Rv(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=_n.newInvalidDocument(t);return Ic(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ph(t))},(o,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:_n.newInvalidDocument(t)};return Ic(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ph(t))},(o,u)=>{r={document:this.Fn(t,u),size:Cm(u)}}).next(()=>r)}getEntries(e,t){let r=Es();return this.Bn(e,t,(o,u)=>{const h=this.Fn(o,u);r=r.insert(o,h)}).next(()=>r)}Ln(e,t){let r=Es(),o=new Xn(je.comparator);return this.Bn(e,t,(u,h)=>{const m=this.Fn(u,h);r=r.insert(u,m),o=o.insert(u,Cm(h))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return fe.resolve();let o=new Cn(Sm);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(ph(o.first()),ph(o.last())),h=o.getIterator();let m=h.getNext();return Ic(e).Wt({index:"documentKeyIndex",range:u},(E,C,S)=>{const k=je.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Sm(m,k)<0;)r(m,null),m=h.getNext();m&&m.isEqual(k)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?S.Ut(ph(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Rv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ic(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=Es();for(const E of h){const C=this.Fn(je.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Es();const h=Am(t,r),m=Am(t,Ua.max());return Ic(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(E,C,S)=>{const k=this.Fn(je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(k.key,k),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new yI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _I(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}On(e,t){return _I(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function DA(n,e){let t;if(e.document)t=hm(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=uh(e.noDocument.readTime);t=_n.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=je.fromSegments(e.unknownDocument.path),o=uh(e.unknownDocument.version);t=_n.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Qn(r[0],r[1]);return wt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return _n.newInvalidDocument(e)}}class yI extends aD{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new $u(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Cn((u,h)=>Bt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const E=XC(this.qn.M,h);o=o.add(u.path.popLast()),r+=Cm(E)-m.size,t.push(this.qn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=XC(this.qn.M,h.convertToNoDocument(wt.min()));t.push(this.qn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function _I(n){return xr(n,"remoteDocumentGlobal")}function Ic(n){return xr(n,"remoteDocumentsV14")}function ph(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Am(n,e){const t=e.documentKey.path.toArray();return[n,Rv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sm(n,e){const t=n.path.length-e.path.length;return 0!==t?t:je.comparator(n,e)}class vI{constructor(e){this.M=e}kt(e,t,r,o){const u=new Jf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sh,{unique:!0}),m.createObjectStore("documentMutations"),wI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=fe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),wI(e)),h=h.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sh,{unique:!0});const S=E.store("mutations"),k=C.map(V=>S.put(V));return fe.waitFor(k)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Kn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&o>=7&&(h=h.next(()=>this.jn(u))),r<8&&o>=8&&(h=h.next(()=>this.Wn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.zn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:JE});E.createIndex("collectionPathOverlayIndex",ym,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",XE,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:WE});E.createIndex("documentKeyIndex",KC),E.createIndex("collectionGroupIndex",YC)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Tv}).createIndex("sequenceNumberIndex",bA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:QE}).createIndex("documentKeyIndex",QC,{unique:!1})}(e)})),h}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Cm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>fe.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>fe.forEach(m,E=>{bt(E.userId===u.userId);const C=Xf(this.M,E);return dI(e,u.userId,C).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const E=new Yt(h),C=[0,Un(E)];u.push(t.get(C).next(S=>S?fe.resolve():t.put({targetId:0,path:Un(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>fe.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:mm});const r=t.store("collectionParents"),o=new Vv,u=h=>{if(o.add(h)){const m=h.lastSegment(),E=h.popLast();return r.put({collectionId:m,parent:Un(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const E=new Yt(h);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,E],C)=>{const S=sa(m);return u(S.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Em(o),h=eD(this.M,u);return t.put(h)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),E=(C=h,C.document?new je(Yt.fromString(C.document.name).popFirst(5)):C.noDocument?je.fromSegments(C.noDocument.path):C.unknownDocument?je.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(S))}).next(()=>fe.waitFor(o))}}function wI(n){n.createObjectStore("targetDocuments",{keyPath:KE}).createIndex("documentTargetsIndex",YE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Dv,{unique:!0}),n.createObjectStore("targetGlobal")}const xm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Mm{constructor(e,t,r,o,u,h,m,E,C,S,k=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=h,this.document=m,this.Yn=C,this.Xn=S,this.Zn=k,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=V=>Promise.resolve(),!Mm.vt())throw new ee(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gI(this,o),this.cs=t+"main",this.M=new kv(E),this.hs=new Mo(this.cs,this.Zn,new vI(this.M)),this.ls=new iD(this.referenceDelegate,this.M),this.fs=new mI(this.M),this.ds=new Ov,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===S&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(ce.FAILED_PRECONDITION,xm);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new vs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(mc(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return tp(e).get("owner").next(t=>fe.resolve(this.bs(t)))}Ps(e){return km(e).delete(this.clientId)}Vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=xr(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ss(u,18e5),m=u.filter(E=>-1===h.indexOf(E));return fe.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?fe.resolve(!0):tp(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new ee(ce.FAILED_PRECONDITION,xm);return!1}}return!(!this.networkEnabled||!this.inForeground)||km(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Sv(t,vs.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>km(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return ep.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new SA(e)}getDocumentOverlayCache(e){return oI.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.Zn)?CA:13===h?_m:12===h?Av:11===h?eI:void tt();var h;let m;return this.hs.runTransaction(e,o,u,E=>(m=new Sv(E,this.ts?this.ts.next():vs.A),"readwrite-primary"===t?this.Ts(m).next(C=>!!C||this.Es(m)).next(C=>{if(!C)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new ee(ce.FAILED_PRECONDITION,tI);return r(m)}).next(C=>this.Rs(m).next(()=>C)):this.Fs(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}Fs(e){return tp(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ee(ce.FAILED_PRECONDITION,xm)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tp(e).put("owner",t)}static vt(){return Mo.vt()}As(e){const t=tp(e);return t.get("owner").next(r=>this.bs(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tp(n){return xr(n,"owner")}function km(n){return xr(n,"clientMetadata")}function EI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class xA{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):Jg(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new je(t)).next(r=>{let o=rm();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let u=rm();return this.indexManager.getCollectionParents(e,o).next(h=>fe.forEach(h,m=>{const E=(C=t,S=m.child(o),new So(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.Ws(e,E,r).next(C=>{C.forEach((S,k)=>{u=u.insert(S,k)})})}).next(()=>u))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const E=m.key;let C=o.get(E);null==C&&(C=_n.newInvalidDocument(E),o=o.insert(E,C)),ju(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,h)=>{Yd(t,h)||(o=o.remove(u))}),o))}}class Rm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=dn(),o=dn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Rm(e,t.fromCache,r,o)}}class II{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(wt.min())?this.Zs(e,t):this.Xs.qs(e,o).next(u=>{const h=this.ti(t,u);return(Yg(t)||Qg(t))&&this.ei(t.limitType,h,o,r)?this.Zs(e,t):(Ug()<=ea.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dv(t)),this.Xs.Ks(e,t,uv(r,-1)).next(m=>(h.forEach(E=>{m=m.insert(E.key,E)}),m)))});var u}ti(e,t){let r=new Cn(uc(e));return t.forEach((o,u)=>{Yd(e,u)&&(r=r.add(u))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Zs(e,t){return Ug()<=ea.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",dv(t)),this.Xs.Ks(e,t,Ua.min())}}class uD{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new Xn(Bt),this.ii=new $u(u=>ac(u),qf),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new xA(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function bI(n,e,t,r){return new uD(n,e,t,r)}function lD(n,e){return CI.apply(this,arguments)}function CI(){return CI=(0,ye.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(u=>(o=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let E=dn();for(const C of o){h.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}for(const C of u){m.push(C.batchId);for(const S of C.mutations)E=E.add(S.key)}return t.ai.qs(r,E).next(C=>({ci:C,removedBatchIds:h,addedBatchIds:m}))})})}),CI.apply(this,arguments)}function MA(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(h,m,E,C){const S=E.batch,k=S.keys();let V=fe.resolve();return k.forEach(G=>{V=V.next(()=>C.getEntry(m,G)).next(ie=>{const Oe=E.docVersions.get(G);bt(null!==Oe),ie.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(ie,E),ie.isValidDocument()&&(ie.setReadTime(E.commitVersion),C.addEntry(ie)))})}),V.next(()=>h.$s.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function cD(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function kA(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((C,S)=>{const k=o.get(S);if(!k)return;m.push(t.ls.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.ls.addMatchingKeys(u,C.addedDocuments,S)));let V=k.withSequenceNumber(u.currentSequenceNumber);var G,ie,Oe;e.targetMismatches.has(S)?V=V.withResumeToken(Ar.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),o=o.insert(S,V),ie=V,Oe=C,(0===(G=k).resumeToken.approximateByteSize()||ie.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(u,V))});let E=Es();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(DI(u,h,e.documentUpdates).next(C=>{E=C})),!r.isEqual(wt.min())){const C=t.ls.getLastRemoteSnapshotVersion(u).next(S=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return fe.waitFor(m).next(()=>h.apply(u)).next(()=>t.ai.Gs(u,E)).next(()=>E)}).then(u=>(t.si=o,u))}function DI(n,e,t){let r=dn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Es();return t.forEach((h,m)=>{const E=o.get(h);m.isNoDocument()&&m.version.isEqual(wt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",m.version)}),u})}function Nm(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function gh(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(u=>u?(o=u,fe.resolve(o)):t.ls.allocateTargetId(r).next(h=>(o=new yc(e,h,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function mh(n,e,t){return Om.apply(this,arguments)}function Om(){return Om=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!mc(h))throw h;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),Om.apply(this,arguments)}function oa(n,e,t){const r=Ge(n);let o=wt.min(),u=dn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,E,C){const S=Ge(m),k=S.ii.get(C);return void 0!==k?fe.resolve(S.si.get(k)):S.ls.getTargetData(E,C)}(r,h,ws(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(h,m.targetId).next(E=>{u=E})}).next(()=>r.ni.Ks(h,e,t?o:wt.min(),t?u:dn())).next(m=>(Fm(r,RE(e),m),{documents:m,hi:u})))}function jv(n,e){const t=Ge(n),r=Ge(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function Pm(n,e){const t=Ge(n),r=t.ri.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,uv(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(Fm(t,e,o),o))}function Fm(n,e,t){let r=wt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function np(){return np=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n);let u=dn(),h=Es();for(const C of t){const S=e.li(C.metadata.name);C.document&&(u=u.add(S));const k=e.fi(C);k.setReadTime(e.di(C.metadata.readTime)),h=h.insert(S,k)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),E=yield gh(o,(C=r,ws(Uu(Yt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>DI(C,m,h).next(S=>(m.apply(C),S)).next(S=>o.ls.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.ls.addMatchingKeys(C,u,E.targetId)).next(()=>o.ai.Gs(C,S)).next(()=>S)))}),np.apply(this,arguments)}function $v(n,e){return yh.apply(this,arguments)}function yh(){return yh=(0,ye.Z)(function*(n,e,t=dn()){const r=yield gh(n,ws(lh(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Sr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.ds.saveNamedQuery(u,e);const m=r.withResumeToken(Ar.EMPTY_BYTE_STRING,h);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(u,m).next(()=>o.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.ls.addMatchingKeys(u,t,r.targetId)).next(()=>o.ds.saveNamedQuery(u,e))})}),yh.apply(this,arguments)}class RA{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return fe.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:lh(r.bundledQuery),readTime:Sr(r.readTime)}),fe.resolve();var r}}class NA{constructor(){this.overlays=new Xn(je.comparator),this.mi=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const o=nh(),u=t.length+1,h=new je(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Xn((C,S)=>C-S);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=nh(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const m=nh(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,S)=>m.set(C,S)),!(m.size()>=o)););return fe.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Mv(t,r));let u=this.mi.get(t);void 0===u&&(u=dn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class TI{constructor(){this.gi=new Cn(ti.yi),this.pi=new Cn(ti.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new ti(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new ti(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new je(new Yt([])),r=new ti(t,e),o=new ti(t,e+1),u=[];return this.pi.forEachInRange([r,o],h=>{this.Ei(h),u.push(h.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new je(new Yt([])),r=new ti(t,e),o=new ti(t,e+1);let u=dn();return this.pi.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new ti(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return je.comparator(e.key,t.key)||Bt(e.Vi,t.Vi)}static Ii(e,t){return Bt(e.Vi,t.Vi)||je.comparator(e.key,t.key)}}class AI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Cn(ti.yi)}checkEmpty(e){return fe.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const u=this.vi;this.vi++;const h=new wm(u,t,r,o);this.$s.push(h);for(const m of o)this.Si=this.Si.add(new ti(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return fe.resolve(h)}lookupMutationBatch(e,t){return fe.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),u=o<0?0:o;return fe.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return fe.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),o=new ti(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,o],h=>{const m=this.Di(h.Vi);u.push(m)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cn(Bt);return t.forEach(o=>{const u=new ti(o,0),h=new ti(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,h],m=>{r=r.add(m.Vi)})}),fe.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const h=new ti(new je(u),0);let m=new Cn(Bt);return this.Si.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Vi)),!0)},h),fe.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){bt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return fe.forEach(t.mutations,o=>{const u=new ti(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new ti(t,0),o=this.Si.firstAfterOrEqual(r);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return fe.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class hD{constructor(e){this.ki=e,this.docs=new Xn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=Es();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():_n.newInvalidDocument(o))}),fe.resolve(r)}getAllFromCollection(e,t,r){let o=Es();const u=new je(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:E}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||_C(DE(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return fe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Mi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fD(this)}getSize(e){return fe.resolve(this.size)}}class fD extends aD{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class pD{constructor(e){this.persistence=e,this.Oi=new $u(t=>ac(t),qf),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new TI,this.targetCount=0,this.Bi=zu.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),fe.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new zu(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.In(t),fe.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Oi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),fe.waitFor(u).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.$i.containsKey(t))}}class gD{constructor(e,t){this.Li={},this.overlays={},this.ts=new vs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new pD(this),this.indexManager=new rD,this.fs=new hD(r=>this.referenceDelegate.Ui(r)),this.M=new kv(t),this.ds=new RA(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new AI(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new SI(this.ts.next());return this.referenceDelegate.qi(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e,t){return fe.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class SI extends nI{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Qi=new TI,this.ji=null}static Wi(e){return new Lm(e)}get zi(){if(this.ji)return this.ji;throw tt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.zi,r=>{const o=je.fromPath(r);return this.Hi(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return fe.or([()=>fe.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function Hv(n,e){return`firestore_clients_${n}_${e}`}function xI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gv(n,e){return`firestore_targets_${n}_${e}`}class rp{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new ee(o.error.code,o.error.message))),h?new rp(e,t,o.state,u):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new ee(r.error.code,r.error.message))),u?new bc(e,r.state,o):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=im();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=_E(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new qv(e,u):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vm(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ip{constructor(){this.activeTargetIds=im()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zv{constructor(e,t,r,o,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Xn(Bt),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Hv(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new ip),this.ar=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const u=e.getItem(Hv(e.persistenceKey,o));if(u){const h=qv.Ji(o,u);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Gv(this.persistenceKey,e));if(r){const o=bc.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let h=vs.A;if(null!=u)try{const m=JSON.parse(u);bt("number"==typeof m),h=m}catch(m){cr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==vs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new rp(this.currentUser,e,t,r),u=xI(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=xI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=Gv(this.persistenceKey,e),u=new bc(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return qv.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return rp.Ji(new Ur(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return bc.Ji(o,t)}wr(e){return Vm.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),h=[],m=[];return u.forEach(E=>{o.has(E)||h.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=im();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class MI{constructor(){this.Fr=new ip,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new ip,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class OA{Br(e){}shutdown(){}}class mD{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const PA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class yD{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class _D extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const h=this.oo(e,t);Pe("RestConnection","Sending: ",h,r);const m={};return this.uo(m,o,u),this.ao(e,h,m,r).then(E=>(Pe("RestConnection","Received: ",E),E),E=>{throw na("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}co(e,t,r,o,u){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${PA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((u,h)=>{const m=new cE;m.listenOnce(aE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case ev.NO_ERROR:const C=m.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case ev.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),h(new ee(ce.DEADLINE_EXCEEDED,"Request time out"));break;case ev.HTTP_ERROR:const S=m.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",m.getResponseText()),S>0){const k=m.getResponseJson().error;if(k&&k.status&&k.message){const V=function(G){const ie=G.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ie)>=0?ie:ce.UNKNOWN}(k.status);h(new ee(V,k.message))}else h(new ee(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ee(ce.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=cC(),h=dC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new lE({})),this.uo(m.initMessageHeaders,t,r),(0,Vt.uI)()||(0,Vt.b$)()||(0,Vt.d)()||(0,Vt.w1)()||(0,Vt.Mn)()||(0,Vt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Pe("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let S=!1,k=!1;const V=new yD({jr:ie=>{k?Pe("Connection","Not sending because WebChannel is closed:",ie):(S||(Pe("Connection","Opening WebChannel transport."),C.open(),S=!0),Pe("Connection","WebChannel sending:",ie),C.send(ie))},Wr:()=>C.close()}),G=(ie,Oe,Le)=>{ie.listen(Oe,kt=>{try{Le(kt)}catch(st){setTimeout(()=>{throw st},0)}})};return G(C,Lf.EventType.OPEN,()=>{k||Pe("Connection","WebChannel transport opened.")}),G(C,Lf.EventType.CLOSE,()=>{k||(k=!0,Pe("Connection","WebChannel transport closed"),V.eo())}),G(C,Lf.EventType.ERROR,ie=>{k||(k=!0,na("Connection","WebChannel transport errored:",ie),V.eo(new ee(ce.UNAVAILABLE,"The operation could not be completed")))}),G(C,Lf.EventType.MESSAGE,ie=>{var Oe;if(!k){const Le=ie.data[0];bt(!!Le);const kt=Le,st=kt.error||(null===(Oe=kt[0])||void 0===Oe?void 0:Oe.error);if(st){Pe("Connection","WebChannel received error:",st);const rn=st.status;let mt=function(Je){const Pt=Jn[Je];if(void 0!==Pt)return LE(Pt)}(rn),Rt=st.message;void 0===mt&&(mt=ce.INTERNAL,Rt="Unknown error status: "+rn+" with message "+st.message),k=!0,V.eo(new ee(mt,Rt)),C.close()}else Pe("Connection","WebChannel received:",Le),V.no(Le)}}),G(h,uE.STAT_EVENT,ie=>{ie.stat===tv.PROXY?Pe("Connection","Detected buffering proxy"):ie.stat===tv.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.Zr()},0),V}}function vD(){return"undefined"!=typeof window?window:null}function Zv(){return"undefined"!=typeof document?document:null}function Um(n){return new um(n,!0)}class kI{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class wD{constructor(e,t,r,o,u,h,m,E){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new kI(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new ee(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ED extends wD{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function $C(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:tt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(bt(void 0===C||"string"==typeof C),Ar.fromBase64String(C||"")):(bt(void 0===C||C instanceof Uint8Array),Ar.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(E){const C=void 0===E.code?ce.UNKNOWN:LE(E.code);return new ee(C,E.message||"")}(h);t=new xo(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ia(n,r.document.name),u=Sr(r.document.updateTime),h=new Jr({mapValue:{fields:r.document.fields}}),m=_n.newFoundDocument(o,u,h);t=new sm(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ia(n,r.document),u=r.readTime?Sr(r.readTime):wt.min(),h=_n.newNoDocument(o,u);t=new sm([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=ia(n,r.document);t=new sm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new PC(r.count||0);t=new om(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?Sr(u.readTime):wt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=fc(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=Zg(m)?{documents:Iv(o,m)}:{query:fm(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=HE(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(h.readTime=Hu(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function GC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=fc(this.M),t.removeTarget=e,this.Oo(t)}}class FA extends wD{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function HC(n,e){return n&&n.length>0?(bt(void 0!==e),n.map(t=>function(r,o){let u=Sr(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=Sr(o)),new gv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.Jo(r,t)}return bt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=fc(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qf(this.M,r))};this.Oo(t)}}class LA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new ee(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(ce.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(ce.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class VA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(cr(t),this.su=!1):Pe("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class UA{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var E;x(h)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,ye.Z)(function*(C){const S=Ge(C);S.lu.add(4),yield a(S),S._u.set("Unknown"),S.lu.delete(4),yield i(S)}),function(C){return E.apply(this,arguments)})(h))}))}),this._u=new VA(r,o)}}function i(n){return s.apply(this,arguments)}function s(){return s=(0,ye.Z)(function*(n){if(x(n))for(const e of n.fu)yield e(!0)}),s.apply(this,arguments)}function a(n){return l.apply(this,arguments)}function l(){return l=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),l.apply(this,arguments)}function c(n,e){const t=Ge(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),T(t)?I(t):$m(t).Co()&&_(t,e))}function p(n,e){const t=Ge(n),r=$m(t);t.hu.delete(e),r.Co()&&w(t,e),0===t.hu.size&&(r.Co()?r.ko():x(t)&&t._u.set("Unknown"))}function _(n,e){n.wu.Z(e.targetId),$m(n).Qo(e)}function w(n,e){n.wu.Z(e),$m(n).jo(e)}function I(n){n.wu=new am({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),$m(n).start(),n._u.iu()}function T(n){return x(n)&&!$m(n).Do()&&n.hu.size>0}function x(n){return 0===Ge(n).lu.size}function P(n){n.wu=void 0}function U(n){return W.apply(this,arguments)}function W(){return W=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{_(n,e)})}),W.apply(this,arguments)}function _e(n,e){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,ye.Z)(function*(n,e){P(n),T(n)?(n._u.uu(e),I(n)):n._u.set("Unknown")}),Ne.apply(this,arguments)}function $e(n,e,t){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof xo&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ie(n,r)}else if(e instanceof sm?n.wu.ut(e):e instanceof om?n.wu._t(e):n.wu.ht(e),!t.isEqual(wt.min()))try{const r=yield cD(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.wu.yt(u);return h.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.hu.get(E);C&&o.hu.set(E,C.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const E=o.hu.get(m);if(!E)return;o.hu.set(m,E.withResumeToken(Ar.EMPTY_BYTE_STRING,E.snapshotVersion)),w(o,m);const C=new yc(E.target,m,1,E.sequenceNumber);_(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield Ie(n,r)}var r}),Qe.apply(this,arguments)}function Ie(n,e,t){return ut.apply(this,arguments)}function ut(){return ut=(0,ye.Z)(function*(n,e,t){if(!mc(e))throw e;n.lu.add(1),yield a(n),n._u.set("Offline"),t||(t=()=>cD(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield i(n)}))}),ut.apply(this,arguments)}function Gt(n,e){return e().catch(t=>Ie(n,t,e))}function Zt(n){return ki.apply(this,arguments)}function ki(){return ki=(0,ye.Z)(function*(n){const e=Ge(n),t=_h(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;Cc(e);)try{const o=yield Nm(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,Wv(e,o)}catch(o){yield Ie(e,o)}Bm(e)&&jm(e)}),ki.apply(this,arguments)}function Cc(n){return x(n)&&n.cu.length<10}function Wv(n,e){n.cu.push(e);const t=_h(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Bm(n){return x(n)&&!_h(n).Do()&&n.cu.length>0}function jm(n){_h(n).start()}function Kv(n){return sp.apply(this,arguments)}function sp(){return sp=(0,ye.Z)(function*(n){_h(n).Xo()}),sp.apply(this,arguments)}function Yv(n){return op.apply(this,arguments)}function op(){return op=(0,ye.Z)(function*(n){const e=_h(n);for(const t of n.cu)e.Ho(t.mutations)}),op.apply(this,arguments)}function Qv(n,e,t){return ap.apply(this,arguments)}function ap(){return ap=(0,ye.Z)(function*(n,e,t){const r=n.cu.shift(),o=xv.from(r,e,t);yield Gt(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Zt(n)}),ap.apply(this,arguments)}function gM(n,e){return ID.apply(this,arguments)}function ID(){return ID=(0,ye.Z)(function*(n,e){var t;e&&_h(n).zo&&(yield(t=(0,ye.Z)(function*(r,o){if(FE(u=o.code)&&u!==ce.ABORTED){const h=r.cu.shift();_h(r).No(),yield Gt(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Zt(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Bm(n)&&jm(n)}),ID.apply(this,arguments)}function BA(n,e){return bD.apply(this,arguments)}function bD(){return bD=(0,ye.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=x(t);t.lu.add(3),yield a(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield i(t)}),bD.apply(this,arguments)}function CD(n,e){return DD.apply(this,arguments)}function DD(){return DD=(0,ye.Z)(function*(n,e){const t=Ge(n);e?(t.lu.delete(2),yield i(t)):e||(t.lu.add(2),yield a(t),t._u.set("Unknown"))}),DD.apply(this,arguments)}function $m(n){return n.mu||(n.mu=function(e,t,r){const o=Ge(e);return o.tu(),new ED(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:U.bind(null,n),Jr:_e.bind(null,n),Ko:$e.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),T(n)?I(n):n._u.set("Unknown")):(yield n.mu.stop(),P(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function _h(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.tu(),new FA(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:Kv.bind(null,n),Jr:gM.bind(null,n),Yo:Yv.bind(null,n),Jo:Qv.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield Zt(n)):(yield n.gu.stop(),n.cu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class TD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new TD(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ee(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(cr("AsyncQueue",`${e}: ${n}`),mc(n))return new ee(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Gm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=rm(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new Gm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Gm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jA{constructor(){this.yu=new Xn(je.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):tt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class qm{constructor(e,t,r,o,u,h,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new qm(e,t,Gm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class mM{constructor(){this.Iu=void 0,this.listeners=[]}}class yM{constructor(){this.queries=new $u(e=>TC(e),Kd),this.onlineState="Unknown",this.Tu=new Set}}function AD(n,e){return SD.apply(this,arguments)}function SD(){return SD=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new mM),o)try{u.Iu=yield t.onListen(r)}catch(h){const m=Hm(h,`Initialization of query '${dv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&kD(t)}),SD.apply(this,arguments)}function xD(n,e){return MD.apply(this,arguments)}function MD(){return MD=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),MD.apply(this,arguments)}function _M(n,e){const t=Ge(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Au(o)&&(r=!0);h.Iu=o}}r&&kD(t)}function vM(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function kD(n){n.Tu.forEach(e=>{e.next()})}class RD{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class wM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class $A{constructor(e){this.M=e}li(e){return ia(this.M,e)}fi(e){return e.metadata.exists?hm(this.M,e.document,!1):_n.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Sr(e)}}class EM{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new $A(this.M);for(const o of e)if(o.metadata.queries){const u=r.li(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||dn()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function dD(n,e,t,r){return np.apply(this,arguments)}(e.localStore,new $A(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield $v(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function HA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GA{constructor(e){this.key=e}}class qA{constructor(e){this.key=e}}class zA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=dn(),this.mutatedKeys=dn(),this.Lu=uc(e),this.Uu=new Gm(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new jA,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const E=Yg(this.query)&&o.size===this.query.limit?o.last():null,C=Qg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,k)=>{const V=o.get(S),G=Yd(this.query,k)?k:null,ie=!!V&&this.mutatedKeys.has(V.key),Oe=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Le=!1;V&&G?V.data.isEqual(G.data)?ie!==Oe&&(r.track({type:3,doc:G}),Le=!0):this.Qu(V,G)||(r.track({type:2,doc:G}),Le=!0,(E&&this.Lu(G,E)>0||C&&this.Lu(G,C)<0)&&(m=!0)):!V&&G?(r.track({type:0,doc:G}),Le=!0):V&&!G&&(r.track({type:1,doc:V}),Le=!0,(E||C)&&(m=!0)),Le&&(G?(h=h.add(G),u=Oe?u.add(S):u.delete(S)):(h=h.delete(S),u=u.delete(S)))}),Yg(this.query)||Qg(this.query))for(;h.size>this.query.limit;){const S=Yg(this.query)?h.last():h.first();h=h.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Uu:h,Ku:r,ei:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((C,S)=>function(k,V){const G=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return G(k)-G(V)}(C.type,S.type)||this.Lu(C.doc,S.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,E=m!==this.$u;return this.$u=m,0!==u.length||E?{snapshot:new qm(this.query,e.Uu,o,u,e.mutatedKeys,0===m,E,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new jA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=dn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new qA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new GA(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=dn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return qm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class IM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bM{constructor(e){this.key=e,this.Xu=!1}}class CM{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Zu={},this.ta=new $u(m=>TC(m),Kd),this.ea=new Map,this.na=new Set,this.sa=new Xn(je.comparator),this.ia=new Map,this.ra=new TI,this.oa={},this.ua=new Map,this.aa=zu.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function DM(n,e){return ND.apply(this,arguments)}function ND(){return ND=(0,ye.Z)(function*(n,e){const t=nT(n);let r,o;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const h=yield gh(t.localStore,ws(e));t.isPrimaryClient&&c(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield OD(t,e,r,"current"===m)}return o}),ND.apply(this,arguments)}function OD(n,e,t,r){return PD.apply(this,arguments)}function PD(){return PD=(0,ye.Z)(function*(n,e,t,r){n.ha=(S,k,V)=>{return(G=(0,ye.Z)(function*(ie,Oe,Le,kt){let st=Oe.view.Gu(Le);st.ei&&(st=yield oa(ie.localStore,Oe.query,!1).then(({documents:Rt})=>Oe.view.Gu(Rt,st)));const rn=kt&&kt.targetChanges.get(Oe.targetId),mt=Oe.view.applyChanges(st,ie.isPrimaryClient,rn);return qD(ie,Oe.targetId,mt.zu),mt.snapshot}),function(ie,Oe,Le,kt){return G.apply(this,arguments)})(n,S,k,V);var G};const o=yield oa(n.localStore,e,!0),u=new zA(e,o.hi),h=u.Gu(o.documents),m=ja.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(h,n.isPrimaryClient,m);qD(n,t,E.zu);const C=new IM(e,t,u);return n.ta.set(e,C),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),E.snapshot}),PD.apply(this,arguments)}function TM(n,e){return FD.apply(this,arguments)}function FD(){return FD=(0,ye.Z)(function*(n,e){const t=Ge(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(u=>!Kd(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield mh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),p(t.remoteStore,r.targetId),zm(t,r.targetId)}).catch(Ec))):(zm(t,r.targetId),yield mh(t.localStore,r.targetId,!0))}),FD.apply(this,arguments)}function LD(){return LD=(0,ye.Z)(function*(n,e,t){const r=rT(n);try{const o=yield function(u,h){const m=Ge(u),E=Qn.now(),C=h.reduce((k,V)=>k.add(V.key),dn());let S;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>m.ai.qs(k,C).next(V=>{S=V;const G=[];for(const ie of h){const Oe=PE(ie,S.get(ie.key));null!=Oe&&G.push(new dc(ie.key,Oe,CE(Oe.value.mapValue),dr.exists(!0)))}return m.$s.addMutationBatch(k,E,G,h)})).then(k=>(k.applyToLocalDocumentSet(S),{batchId:k.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let E=u.oa[u.currentUser.toKey()];E||(E=new Xn(Bt)),E=E.insert(h,m),u.oa[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Dc(r,o.changes),yield Zt(r.remoteStore)}catch(o){const u=Hm(o,"Failed to persist write");t.reject(u)}}),LD.apply(this,arguments)}function ZA(n,e){return VD.apply(this,arguments)}function VD(){return VD=(0,ye.Z)(function*(n,e){const t=Ge(n);try{const r=yield kA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.ia.get(u);h&&(bt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Xu=!0:o.modifiedDocuments.size>0?bt(h.Xu):o.removedDocuments.size>0&&(bt(h.Xu),h.Xu=!1))}),yield Dc(t,r,e)}catch(r){yield Ec(r)}}),VD.apply(this,arguments)}function WA(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((u,h)=>{const m=h.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=Ge(u);m.onlineState=h;let E=!1;m.queries.forEach((C,S)=>{for(const k of S.listeners)k.Eu(h)&&(E=!0)}),E&&kD(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SM(n,e,t){return UD.apply(this,arguments)}function UD(){return UD=(0,ye.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),u=o&&o.key;if(u){let h=new Xn(je.comparator);h=h.insert(u,_n.newNoDocument(u,wt.min()));const m=dn().add(u),E=new Yf(wt.min(),new Map,new Cn(Bt),h,m);yield ZA(r,E),r.sa=r.sa.remove(u),r.ia.delete(e),zD(r)}else yield mh(r.localStore,e,!1).then(()=>zm(r,e,t)).catch(Ec)}),UD.apply(this,arguments)}function xM(n,e){return BD.apply(this,arguments)}function BD(){return BD=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield MA(t.localStore,e);GD(t,r,null),HD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(t,o)}catch(o){yield Ec(o)}}),BD.apply(this,arguments)}function MM(n,e,t){return jD.apply(this,arguments)}function jD(){return jD=(0,ye.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,h){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.$s.lookupMutationBatch(E,h).next(S=>(bt(null!==S),C=S.keys(),m.$s.removeMutationBatch(E,S))).next(()=>m.$s.performConsistencyCheck(E)).next(()=>m.ai.qs(E,C))})}(r.localStore,e);GD(r,e,t),HD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dc(r,o)}catch(o){yield Ec(o)}}),jD.apply(this,arguments)}function $D(){return $D=(0,ye.Z)(function*(n,e){const t=Ge(n);x(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=Ge(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=Hm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),$D.apply(this,arguments)}function HD(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function GD(n,e,t){const r=Ge(n);let o=r.oa[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function zm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||KA(n,r)})}function KA(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(p(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),zD(n))}function qD(n,e,t){for(const r of t)r instanceof GA?(n.ra.addReference(r.key,e),RM(n,r)):r instanceof qA?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||KA(n,r.key)):tt()}function RM(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.na.add(r),zD(n))}function zD(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new je(Yt.fromString(e)),r=n.aa.next();n.ia.set(r,new bM(t)),n.sa=n.sa.insert(t,r),c(n.remoteStore,new yc(ws(Uu(t.path)),r,2,vs.A))}}function Dc(n,e,t){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],h=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,E)=>{h.push(r.ha(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=Rm.Js(E.targetId,C);u.push(S)}}))}),yield Promise.all(h),r.Zu.Ko(o),yield(m=(0,ye.Z)(function*(E,C){const S=Ge(E);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>fe.forEach(C,V=>fe.forEach(V.zs,G=>S.persistence.referenceDelegate.addReference(k,V.targetId,G)).next(()=>fe.forEach(V.Hs,G=>S.persistence.referenceDelegate.removeReference(k,V.targetId,G)))))}catch(k){if(!mc(k))throw k;Pe("LocalStore","Failed to update sequence numbers: "+k)}for(const k of C){const V=k.targetId;if(!k.fromCache){const G=S.si.get(V),Oe=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);S.si=S.si.insert(V,Oe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),ZD.apply(this,arguments)}function NM(n,e){return WD.apply(this,arguments)}function WD(){return WD=(0,ye.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield lD(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(h=>{h.forEach(m=>{m.reject(new ee(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(t,r.ci)}var o}),WD.apply(this,arguments)}function OM(n,e){const t=Ge(n),r=t.ia.get(e);if(r&&r.Xu)return dn().add(r.key);{let o=dn();const u=t.ea.get(e);if(!u)return o;for(const h of u){const m=t.ta.get(h);o=o.unionWith(m.view.qu)}return o}}function PM(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,ye.Z)(function*(n,e){const t=Ge(n),r=yield oa(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&qD(t,e.targetId,o.zu),o}),KD.apply(this,arguments)}function FM(n,e){return YD.apply(this,arguments)}function YD(){return YD=(0,ye.Z)(function*(n,e){const t=Ge(n);return Pm(t.localStore,e).then(r=>Dc(t,r))}),YD.apply(this,arguments)}function LM(n,e,t,r){return QD.apply(this,arguments)}function QD(){return QD=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(h,m){const E=Ge(h),C=Ge(E.$s);return E.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.ln(S,m).next(k=>k?E.ai.qs(S,k):fe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Zt(o.remoteStore):"acknowledged"===t||"rejected"===t?(GD(o,e,r||null),HD(o,e),m=e,Ge(Ge(o.localStore).$s).dn(m)):tt(),yield Dc(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),QD.apply(this,arguments)}function JD(){return JD=(0,ye.Z)(function*(n,e){const t=Ge(n);if(nT(t),rT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield YA(t,r.toArray());t.ca=!0,yield CD(t.remoteStore,!0);for(const u of o)c(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(zm(t,h),mh(t.localStore,h,!0))),p(t.remoteStore,h)}),yield o,yield YA(t,r),function(u){const h=Ge(u);h.ia.forEach((m,E)=>{p(h.remoteStore,E)}),h.ra.bi(),h.ia=new Map,h.sa=new Xn(je.comparator)}(t),t.ca=!1,yield CD(t.remoteStore,!1)}}),JD.apply(this,arguments)}function YA(n,e,t){return XD.apply(this,arguments)}function XD(){return XD=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const h of e){let m;const E=r.ea.get(h);if(E&&0!==E.length){m=yield gh(r.localStore,ws(E[0]));for(const C of E){const S=r.ta.get(C),k=yield PM(r,S);k.snapshot&&u.push(k.snapshot)}}else{const C=yield jv(r.localStore,h);m=yield gh(r.localStore,C),yield OD(r,QA(C),h,!1)}o.push(m)}return r.Zu.Ko(u),o}),XD.apply(this,arguments)}function QA(n){return lv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UM(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Os()}function BM(n,e,t,r){return eT.apply(this,arguments)}function eT(){return eT=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ca)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield Pm(o.localStore,RE(u[0])),m=Yf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Dc(o,h,m);break}case"rejected":yield mh(o.localStore,e,!0),zm(o,e,r);break;default:tt()}}),eT.apply(this,arguments)}function jM(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,ye.Z)(function*(n,e,t){const r=nT(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield jv(r.localStore,o),h=yield gh(r.localStore,u);yield OD(r,QA(u),h.targetId,!1),c(r.remoteStore,h)}for(const o of t)r.ea.has(o)&&(yield mh(r.localStore,o,!1).then(()=>{p(r.remoteStore,o),zm(r,o)}).catch(Ec))}}),tT.apply(this,arguments)}function nT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SM.bind(null,e),e.Zu.Ko=_M.bind(null,e.eventManager),e.Zu.la=vM.bind(null,e.eventManager),e}function rT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MM.bind(null,e),e}class JA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=Um(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return bI(this.persistence,new II,e.initialUser,this.M)}_a(e){return new gD(Lm.Wi,this.M)}da(e){return new MI}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class XA extends JA{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield rT(r.ga.syncEngine),yield Zt(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return bI(this.persistence,new II,e.initialUser,this.M)}wa(e){return new sD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new Mm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vD(),Zv(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new MI}}class HM extends XA{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof zv&&(r.sharedClientState.syncEngine={kr:LM.bind(null,o),Mr:BM.bind(null,o),Or:jM.bind(null,o),Os:UM.bind(null,o),Nr:FM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,ye.Z)(function*(h){yield function VM(n,e){return JD.apply(this,arguments)}(r.ga.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}da(e){const t=vD();if(!zv.vt(t))throw new ee(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=EI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class iT{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>WA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=NM.bind(null,r.syncEngine),yield CD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yM}createDatastore(e){const t=Um(e.databaseInfo.databaseId),r=new _D(e.databaseInfo);return new LA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>WA(this.syncEngine,m,0),h=mD.vt()?new mD:new OA,new UA(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,E,C){const S=new CM(r,o,u,h,m,E);return C&&(S.ca=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ge(t);Pe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield a(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eS(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class RI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class GM{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Br,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new wM(JSON.parse(u),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ye.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ee(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,h){const m=Ge(u),E=fc(m.M)+"/documents",C={documents:h.map(G=>ih(m.M,G))},S=yield m.co("BatchGetDocuments",E,C),k=new Map;S.forEach(G=>{const ie=function wv(n,e){return"found"in e?function(t,r){bt(!!r.found);const o=ia(t,r.found.name),u=Sr(r.found.updateTime),h=new Jr({mapValue:{fields:r.found.fields}});return _n.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){bt(!!r.missing),bt(!!r.readTime);const o=ia(t,r.missing),u=Sr(r.readTime);return _n.newNoDocument(o,u)}(n,e):tt()}(m.M,G);k.set(ie.key.toString(),ie)});const V=[];return h.forEach(G=>{const ie=k.get(G.toString());bt(!!ie),V.push(ie)}),V}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new eh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new Kf(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const h=Ge(o),m=fc(h.M)+"/documents",E={writes:u.map(C=>Qf(h.M,C))};yield h.ro("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ee(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new ee(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new kI(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new qM(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ca(u)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Fu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!FE(t)}return!1}}class ZM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ur.UNAUTHENTICATED,this.clientId=rv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ye.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Pe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ee(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Hm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function tS(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield lD(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),sT.apply(this,arguments)}function nS(n,e){return oT.apply(this,arguments)}function oT(){return oT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield aT(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>BA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>BA(e.remoteStore,u)),n.onlineComponents=e}),oT.apply(this,arguments)}function aT(n){return uT.apply(this,arguments)}function uT(){return uT=(0,ye.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield tS(n,new JA)),n.offlineComponents}),uT.apply(this,arguments)}function NI(n){return lT.apply(this,arguments)}function lT(){return lT=(0,ye.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield nS(n,new iT)),n.onlineComponents}),lT.apply(this,arguments)}function rS(n){return aT(n).then(e=>e.persistence)}function cT(n){return aT(n).then(e=>e.localStore)}function iS(n){return NI(n).then(e=>e.remoteStore)}function dT(n){return NI(n).then(e=>e.syncEngine)}function Zm(n){return hT.apply(this,arguments)}function hT(){return hT=(0,ye.Z)(function*(n){const e=yield NI(n),t=e.eventManager;return t.onListen=DM.bind(null,e.syncEngine),t.onUnlisten=TM.bind(null,e.syncEngine),t}),hT.apply(this,arguments)}function sS(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,h,m,E){const C=new RI({next:k=>{u.enqueueAndForget(()=>xD(o,S));const V=k.docs.has(h);!V&&k.fromCache?E.reject(new ee(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&k.fromCache&&m&&"server"===m.source?E.reject(new ee(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new RD(Uu(h.path),C,{includeMetadataChanges:!0,Du:!0});return AD(o,S)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}function oS(n,e,t={}){const r=new Br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,h,m,E){const C=new RI({next:k=>{u.enqueueAndForget(()=>xD(o,S)),k.fromCache&&"server"===m.source?E.reject(new ee(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(k)},error:k=>E.reject(k)}),S=new RD(h,C,{includeMetadataChanges:!0,Du:!0});return AD(o,S)}(yield Zm(n),n.asyncQueue,e,t,r)})),r.promise}const aS=new Map;function fT(n,e,t){if(!t)throw new ee(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uS(n,e,t,r){if(!0===e&&!0===r)throw new ee(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lS(n){if(!je.isDocumentKey(n))throw new ee(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cS(n){if(je.isDocumentKey(n))throw new ee(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OI(n);throw new ee(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dS(n,e){if(e<=0)throw new ee(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ee(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ee(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hS({}),this._settingsFrozen=!1,e instanceof Va?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new ee(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(o.options.projectId)}(e))}get app(){if(!this._app)throw new ee(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ee(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hC;switch(t.type){case"gapi":const r=t.client;return bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new $g(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ee(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aS.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),aS.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class Zu extends Qi{constructor(e,t,r){super(e,t,Uu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new je(e))}withConverter(e){return new Zu(this.firestore,e,this._path)}}function fS(n,e,...t){if(n=(0,Vt.m9)(n),fT("collection","path",e),n instanceof Jv){const r=Yt.fromString(e,...t);return cS(r),new Zu(n,null,r)}{if(!(n instanceof Bn||n instanceof Zu))throw new ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return cS(r),new Zu(n.firestore,null,r)}}function PI(n,e,...t){if(n=(0,Vt.m9)(n),1===arguments.length&&(e=rv.R()),fT("doc","path",e),n instanceof Jv){const r=Yt.fromString(e,...t);return lS(r),new Bn(n,null,new je(r))}{if(!(n instanceof Bn||n instanceof Zu))throw new ee(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return lS(r),new Bn(n.firestore,n instanceof Zu?n.converter:null,new je(r))}}function pS(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),(n instanceof Bn||n instanceof Zu)&&(e instanceof Bn||e instanceof Zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gS(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&Kd(n._query,e._query)&&n.converter===e.converter}class i1{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new kI(this,"async_queue_retry"),this.Ua=()=>{const t=Zv();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Zv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Zv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Br;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ye.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!mc(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,cr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=TD.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(o),o}qa(){this.Fa&&tt()}verifyOperationInProgress(){}ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function pT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class s1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Br,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zn extends Jv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new i1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||mS(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||mS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new ZM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function yS(n,e,t){const r=new Br;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield tS(n,t),yield nS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function _S(n){if(n._initialized||n._terminated)throw new ee(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ee(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wu(Ar.fromBase64String(e))}catch(t){throw new ee(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wu(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class up{constructor(e){this._methodName=e}}class FI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const g1=/^__.*__$/;class m1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xd(e,this.data,t,this.fieldTransforms)}}class vS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class LI{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new LI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return BI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(wS(this.Ya)&&g1.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class y1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Um(e)}uc(e,t,r,o=!1){return new LI({Ya:e,methodName:t,oc:r,path:Tr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=Um(n._databaseId);return new y1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VI(n,e,t,r,o,u={}){const h=n.uc(u.merge||u.mergeFields?2:0,e,t,o);_T("Data must be an object, but it was:",h,r);const m=bS(r,h);let E,C;if(u.merge)E=new nc(h.fieldMask),C=h.fieldTransforms;else if(u.mergeFields){const S=[];for(const k of u.mergeFields){const V=vT(e,k,t);if(!h.contains(V))throw new ee(ce.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);DS(S,V)||S.push(V)}E=new nc(S),C=h.fieldTransforms.filter(k=>E.covers(k.field))}else E=null,C=h.fieldTransforms;return new m1(new Jr(m),E,C)}class Xv extends up{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xv}}function ES(n,e,t){return new LI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class gT extends up{_toFieldTransform(e){return new Wf(e.path,new lc)}isEqual(e){return e instanceof gT}}class _1 extends up{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=ES(this,e,!0),r=this.ac.map(u=>cp(u,t)),o=new Bu(r);return new Wf(e.path,o)}isEqual(e){return this===e}}class v1 extends up{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=ES(this,e,!0),r=this.ac.map(u=>cp(u,t)),o=new ra(r);return new Wf(e.path,o)}isEqual(e){return this===e}}class w1 extends up{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Jd(e.M,hv(e.M,this.cc));return new Wf(e.path,t)}isEqual(e){return this===e}}function mT(n,e,t,r){const o=n.uc(1,e,t);_T("Data must be an object, but it was:",o,r);const u=[],h=Jr.empty();To(r,(E,C)=>{const S=UI(e,E,t);C=(0,Vt.m9)(C);const k=o.nc(S);if(C instanceof Xv)u.push(S);else{const V=cp(C,k);null!=V&&(u.push(S),h.set(S,V))}});const m=new nc(u);return new vS(h,m,o.fieldTransforms)}function yT(n,e,t,r,o,u){const h=n.uc(1,e,t),m=[vT(e,r,t)],E=[o];if(u.length%2!=0)throw new ee(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)m.push(vT(e,u[V])),E.push(u[V+1]);const C=[],S=Jr.empty();for(let V=m.length-1;V>=0;--V)if(!DS(C,m[V])){const G=m[V];let ie=E[V];ie=(0,Vt.m9)(ie);const Oe=h.nc(G);if(ie instanceof Xv)C.push(G);else{const Le=cp(ie,Oe);null!=Le&&(C.push(G),S.set(G,Le))}}const k=new nc(C);return new vS(S,k,h.fieldTransforms)}function IS(n,e,t,r=!1){return cp(t,n.uc(r?4:3,e))}function cp(n,e){if(CS(n=(0,Vt.m9)(n)))return _T("Unsupported field value:",e,n),bS(n,e);if(n instanceof up)return function(t,r){if(!wS(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=cp(h,r.sc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Qn.fromDate(t);return{timestampValue:Hu(r.M,o)}}if(t instanceof Qn){const o=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Hu(r.M,o)}}if(t instanceof FI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wu)return{bytesValue:HE(r.M,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${OI(t)}`)}(n,e)}function bS(n,e){const t={};return gE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(n,(r,o)=>{const u=cp(o,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function CS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof FI||n instanceof Wu||n instanceof Bn||n instanceof up)}function _T(n,e,t){if(!CS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function vT(n,e,t){if((e=(0,Vt.m9)(e))instanceof Tc)return e._internalPath;if("string"==typeof e)return UI(n,e);throw BI("Field path arguments must be of type string or ",n,!1,void 0,t)}const E1=new RegExp("[~\\*/\\[\\]]");function UI(n,e,t){if(e.search(E1)>=0)throw BI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tc(...e.split("."))._internalPath}catch(r){throw BI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BI(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${r}`),h&&(E+=` in document ${o}`),E+=")"),new ee(ce.INVALID_ARGUMENT,m+n+E)}function DS(n,e){return n.some(t=>t.isEqual(e))}class e0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new I1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class I1 extends e0{data(){return super.data()}}function jI(n,e){return"string"==typeof e?UI(n,e):e instanceof Tc?e._internalPath:e._delegate._internalPath}class dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ac extends e0{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new t0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class t0 extends Ac{data(e={}){return super.data(e)}}class vh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new t0(this._firestore,this._userDataWriter,r.key,r,new dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new t0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new dp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new t0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new dp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),C=u.indexOf(h.doc.key)),{type:b1(h.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function b1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function TS(n,e){return n instanceof Ac&&e instanceof Ac?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof vh&&e instanceof vh&&n._firestore===e._firestore&&gS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function AS(n){if(Qg(n)&&0===n.explicitOrderBy.length)throw new ee(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{}function wh(n,...e){for(const t of e)n=t._apply(n);return n}class C1 extends n0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=lp(e.firestore),r=function(o,u,h,m,E,C,S){let k;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new ee(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){NS(S,C);const G=[];for(const ie of S)G.push(RS(m,o,ie));k={arrayValue:{values:G}}}else k=RS(m,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||NS(S,C),k=IS(h,"where",S,"in"===C||"not-in"===C);const V=Xr.create(E,C,k);return function(G,ie){if(ie.S()){const Le=cv(G);if(null!==Le&&!Le.isEqual(ie.field))throw new ee(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ie.field.toString()}'`);const kt=zf(G);null!==kt&&OS(0,ie.field,kt)}const Oe=function(Le,kt){for(const st of Le.filters)if(kt.indexOf(st.op)>=0)return st.op;return null}(G,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==Oe)throw new ee(ce.INVALID_ARGUMENT,Oe===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${Oe.toString()}' filters.`)}(o,V),V}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Qi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new So(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class T1 extends n0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ee(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Zd(o,u);return function(m,E){if(null===zf(m)){const C=cv(m);null!==C&&OS(0,C,E.field)}}(r,h),h}(e._query,this.hc,this.dc);return new Qi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new So(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class SS extends n0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Qi(e.firestore,e.converter,kE(e._query,this._c,this.wc))}}class xS extends n0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=kS(e,this.type,this.mc,this.gc);return new Qi(e.firestore,e.converter,(o=t,new So((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class MS extends n0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=kS(e,this.type,this.mc,this.gc);return new Qi(e.firestore,e.converter,(o=t,new So((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function kS(n,e,t,r){if(t[0]=(0,Vt.m9)(t[0]),t[0]instanceof e0)return function(o,u,h,m,E){if(!m)throw new ee(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const S of Wd(o))if(S.field.isKeyField())C.push(Gd(u,m.key));else{const k=m.data.field(S.field);if(sv(k))throw new ee(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===k){const V=S.field.canonicalString();throw new ee(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}C.push(k)}return new Ba(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=lp(n.firestore);return function(u,h,m,E,C,S){const k=u.explicitOrderBy;if(C.length>k.length)throw new ee(ce.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let G=0;G<C.length;G++){const ie=C[G];if(k[G].field.isKeyField()){if("string"!=typeof ie)throw new ee(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ie}`);if(!Jg(u)&&-1!==ie.indexOf("/"))throw new ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ie}' contains a slash.`);const Oe=u.path.child(Yt.fromString(ie));if(!je.isDocumentKey(Oe))throw new ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const Le=new je(Oe);V.push(Gd(h,Le))}else{const Oe=IS(m,E,ie);V.push(Oe)}}return new Ba(V,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function RS(n,e,t){if("string"==typeof(t=(0,Vt.m9)(t))){if(""===t)throw new ee(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jg(e)&&-1!==t.indexOf("/"))throw new ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!je.isDocumentKey(r))throw new ee(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gd(n,new je(r))}if(t instanceof Bn)return Gd(n,t._key);throw new ee(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OI(t)}.`)}function NS(n,e){if(!Array.isArray(n)||0===n.length)throw new ee(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ee(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function OS(n,e,t){if(!t.isEqual(e))throw new ee(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wT{convertValue(e,t="none"){switch(Hd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return To(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new FI(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ov(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){const t=Xs(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);bt(gi(r));const o=new Va(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||cr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $I(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class O1 extends wT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class PS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,r){this._verifyNotCommitted();const o=Eh(e,this._firestore),u=$I(o.converter,t,r),h=VI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,dr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Eh(e,this._firestore);let h;return h="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Tc?yT(this._dataReader,"WriteBatch.update",u._key,t,r,o):mT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Eh(e,this._firestore);return this._mutations=this._mutations.concat(new eh(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eh(n,e){if((n=(0,Vt.m9)(n)).firestore!==e)throw new ee(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hp extends wT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function FS(n,e,t){n=Jt(n,Bn);const r=Jt(n.firestore,zn),o=$I(n.converter,e,t);return Wm(r,[VI(lp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,dr.none())])}function LS(n,e,t,...r){n=Jt(n,Bn);const o=Jt(n.firestore,zn),u=lp(o);let h;return h="string"==typeof(e=(0,Vt.m9)(e))||e instanceof Tc?yT(u,"updateDoc",n._key,e,t,r):mT(u,"updateDoc",n._key,e),Wm(o,[h.toMutation(n._key,dr.exists(!0))])}function VS(n,...e){var t,r,o;n=(0,Vt.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||pT(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(pT(e[h])){const k=e[h];e[h]=null===(t=k.next)||void 0===t?void 0:t.bind(k),e[h+1]=null===(r=k.error)||void 0===r?void 0:r.bind(k),e[h+2]=null===(o=k.complete)||void 0===o?void 0:o.bind(k)}let E,C,S;if(n instanceof Bn)C=Jt(n.firestore,zn),S=Uu(n._key.path),E={next:k=>{e[h]&&e[h](ET(C,n,k))},error:e[h+1],complete:e[h+2]};else{const k=Jt(n,Qi);C=Jt(k.firestore,zn),S=k._query;const V=new hp(C);E={next:G=>{e[h]&&e[h](new vh(C,V,k,G))},error:e[h+1],complete:e[h+2]},AS(n._query)}return function(k,V,G,ie){const Oe=new RI(ie),Le=new RD(V,Oe,G);return k.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return AD(yield Zm(k),Le)})),()=>{Oe.pa(),k.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return xD(yield Zm(k),Le)}))}}($r(C),S,m,E)}function Wm(n,e){return function(t,r){const o=new Br;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function AM(n,e,t){return LD.apply(this,arguments)}(yield dT(t),r,o)})),o.promise}($r(n),e)}function ET(n,e,t){const r=t.docs.get(e._key),o=new hp(n);return new Ac(n,o,e._key,r,new dp(t.hasPendingWrites,t.fromCache),e.converter)}class G1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lp(e)}get(e){const t=Eh(e,this._firestore),r=new O1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new e0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new e0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=Eh(e,this._firestore),u=$I(o.converter,t,r),h=VI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=Eh(e,this._firestore);let h;return h="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Tc?yT(this._dataReader,"Transaction.update",u._key,t,r,o):mT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=Eh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Eh(e,this._firestore),r=new hp(this._firestore);return super.get(e).then(o=>new Ac(this._firestore,r,t._key,o._document,new dp(!1,!1),t.converter))}}function IT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ee("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BS(){if("undefined"==typeof Uint8Array)throw new ee("unimplemented","Uint8Arrays are not available in this environment.")}function jS(){if(!function mE(){return"undefined"!=typeof atob}())throw new ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Xl=Xo.SDK_VERSION,(0,Xo._registerComponent)(new Vl.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new zn(o,new fC(t.getProvider("auth-internal")),new IA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Xo.registerVersion)(nv,"3.4.7",n),(0,Xo.registerVersion)(nv,"3.4.7","esm2017")}();class r0{constructor(e){this._delegate=e}static fromBase64String(e){return jS(),new r0(Wu.fromBase64String(e))}static fromUint8Array(e){return BS(),new r0(Wu.fromUint8Array(e))}toBase64(){return jS(),this._delegate.toBase64()}toUint8Array(){return BS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bT(n){return function X1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ek{enableIndexedDbPersistence(e,t){return function a1(n,e){_S(n=Jt(n,zn));const t=$r(n),r=n._freezeSettings(),o=new iT;return yS(t,o,new XA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function u1(n){_S(n=Jt(n,zn));const e=$r(n),t=n._freezeSettings(),r=new iT;return yS(e,r,new HM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function l1(n){if(n._initialized&&!n._terminated)throw new ee(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Br;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Mo.vt())return Promise.resolve();const o=r+"main";yield Mo.delete(o)}),function(r){return t.apply(this,arguments)})(EI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $S{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Va||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&na("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function n1(n,e,t,r={}){var o;const u=(n=Jt(n,Jv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&na("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Ur.MOCK_USER;else{h=(0,Vt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ee(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ur(E)}n._authCredentials=new Bg(new fE(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function d1(n){return function WM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.lu.delete(0),i(o)}(t)}))}($r(n=Jt(n,zn)))}(this._delegate)}disableNetwork(){return function h1(n){return function KM(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=Ge(o);u.lu.add(0),yield a(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}($r(n=Jt(n,zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function c1(n){return function(e){const t=new Br;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function kM(n,e){return $D.apply(this,arguments)}(yield dT(e),t)})),t.promise}($r(n=Jt(n,zn)))}(this._delegate)}onSnapshotsInSync(e){return function H1(n,e){return function JM(n,e){const t=new RI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Zm(n),o=t,Ge(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Zm(n),o=t,void Ge(r).Tu.delete(o);var r,o}))}}($r(n=Jt(n,zn)),pT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,fS(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new aa(this,PI(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bs(this,function r1(n,e){if(n=Jt(n,Jv),fT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new So(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function q1(n,e){return function XM(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,NI(o).then(u=>u.datastore));var o;new zM(n.asyncQueue,r,e,t).run()})),t.promise}($r(n=Jt(n,zn)),t=>e(new G1(n,t)))}(this._delegate,t=>e(new HS(this,t)))}batch(){return $r(this._delegate),new GS(new PS(this._delegate,e=>Wm(this._delegate,e)))}loadBundle(e){return function f1(n,e){const t=$r(n=Jt(n,zn)),r=new s1;return function e1(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return eS(E,C);if(E instanceof ArrayBuffer)return eS(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new GM(E,h);var E}(t,Um(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function $M(n,e,t){const r=Ge(n);var o;(o=(0,ye.Z)(function*(u,h,m){try{const E=yield h.getMetadata();if(yield function(V,G){const ie=Ge(V),Oe=Sr(G.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Le=>ie.ds.getBundleMetadata(Le,G.id)).then(Le=>!!Le&&Le.createTime.compareTo(Oe)>=0)}(u.localStore,E))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(V=E).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);m._updateProgress(HA(E));const C=new EM(E,u.localStore,h.M);let S=yield h.fa();for(;S;){const V=yield C.Nu(S);V&&m._updateProgress(V),S=yield h.fa()}const k=yield C.complete();return yield Dc(u,k.Ou,void 0),yield function(V,G){const ie=Ge(V);return ie.persistence.runTransaction("Save bundle","readwrite",Oe=>ie.ds.saveBundleMetadata(Oe,G))}(u.localStore,E),m._completeWith(k.progress),Promise.resolve(k.Mu)}catch(E){return na("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var V}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield dT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function p1(n,e){return function t1(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.ds.getNamedQuery(u,r))}(yield cT(n),e)}))}($r(n=Jt(n,zn)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new bs(this,t):null)}}class HI extends wT{constructor(e){super(),this.firestore=e}convertBytes(e){return new r0(new Wu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return aa.forKey(t,this.firestore,null)}}class HS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}get(e){const t=pp(e);return this._delegate.get(t).then(r=>new s0(this._firestore,new Ac(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=pp(e);return r?(IT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=pp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}}class GS{constructor(e){this._delegate=e}set(e,t,r){const o=pp(e);return r?(IT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=pp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new t0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new o0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new fp(e,new HI(e),t),o.set(t,u)),u}}fp.INSTANCES=new WeakMap;class aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new aa(t,new Bn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new aa(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,fS(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Bn&&pS(this._delegate,e)}set(e,t){t=IT("DocumentReference.set",t);try{return t?FS(this._delegate,e,t):FS(this._delegate,e)}catch(r){throw Is(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?LS(this._delegate,e):LS(this._delegate,e,t,...r)}catch(o){throw Is(o,"updateDoc()","DocumentReference.update()")}}delete(){return function j1(n){return Wm(Jt(n.firestore,zn),[new eh(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=qS(e),r=zS(e,o=>new s0(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return VS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function F1(n){n=Jt(n,Bn);const e=Jt(n.firestore,zn),t=$r(e),r=new hp(e);return function YM(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,h){try{const m=yield function(E,C){const S=Ge(E);return S.persistence.runTransaction("read document","readonly",k=>S.ai.Bs(k,C))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new ee(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Hm(m,`Failed to get document '${u} from cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield cT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ac(e,r,n._key,o,new dp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function L1(n){n=Jt(n,Bn);const e=Jt(n.firestore,zn);return sS($r(e),n._key,{source:"server"}).then(t=>ET(e,n,t))}(this._delegate):function P1(n){n=Jt(n,Bn);const e=Jt(n.firestore,zn);return sS($r(e),n._key).then(t=>ET(e,n,t))}(this._delegate),t.then(r=>new s0(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new aa(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function qS(n){for(const e of n)if("object"==typeof e&&!bT(e))return e;return{}}function zS(n,e){var t,r;let o;return o=bT(n[0])?n[0]:bT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class s0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return TS(this._delegate,e._delegate)}}class o0 extends s0{data(e){const t=this._delegate.data(e);return function hE(n,e){n||tt()}(void 0!==t),t}}class bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new HI(e)}where(e,t,r){try{return new bs(this.firestore,wh(this._delegate,function D1(n,e,t){const r=e,o=jI("where",n);return new C1(o,r,t)}(e,t,r)))}catch(o){throw Is(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new bs(this.firestore,wh(this._delegate,function A1(n,e="asc"){const t=e,r=jI("orderBy",n);return new T1(r,t)}(e,t)))}catch(r){throw Is(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bs(this.firestore,wh(this._delegate,function S1(n){return dS("limit",n),new SS("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new bs(this.firestore,wh(this._delegate,function x1(n){return dS("limitToLast",n),new SS("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bs(this.firestore,wh(this._delegate,function M1(...n){return new xS("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bs(this.firestore,wh(this._delegate,function k1(...n){return new xS("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bs(this.firestore,wh(this._delegate,function R1(...n){return new MS("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bs(this.firestore,wh(this._delegate,function N1(...n){return new MS("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return gS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function U1(n){n=Jt(n,Qi);const e=Jt(n.firestore,zn),t=$r(e),r=new hp(e);return function QM(n,e){const t=new Br;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,h){try{const m=yield oa(o,u,!0),E=new zA(u,m.hi),C=E.Gu(m.documents),S=E.applyChanges(C,!1);h.resolve(S.snapshot)}catch(m){const E=Hm(m,`Failed to execute query '${u} against cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield cT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new vh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function B1(n){n=Jt(n,Qi);const e=Jt(n.firestore,zn),t=$r(e),r=new hp(e);return oS(t,n._query,{source:"server"}).then(o=>new vh(e,r,n,o))}(this._delegate):function V1(n){n=Jt(n,Qi);const e=Jt(n.firestore,zn),t=$r(e),r=new hp(e);return AS(n._query),oS(t,n._query).then(o=>new vh(e,r,n,o))}(this._delegate),t.then(r=>new CT(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qS(e),r=zS(e,o=>new CT(this.firestore,new vh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return VS(this._delegate,t,r)}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new o0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new o0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new o0(this._firestore,r))})}isEqual(e){return TS(this._delegate,e._delegate)}}class Km extends bs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new aa(this.firestore,e):null}doc(e){try{return new aa(this.firestore,void 0===e?PI(this._delegate):PI(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function $1(n,e){const t=Jt(n.firestore,zn),r=PI(n),o=$I(n.converter,e);return Wm(t,[VI(lp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new aa(this.firestore,t))}isEqual(e){return pS(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function pp(n){return Jt(n,Bn)}class DT{constructor(...e){this._delegate=new Tc(...e)}static documentId(){return new DT(Tr.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Tc&&this._delegate._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Z1(){return new gT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gp(e)}static delete(){const e=function z1(){return new Xv("deleteField")}();return e._methodName="FieldValue.delete",new gp(e)}static arrayUnion(...e){const t=function W1(...n){return new _1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gp(t)}static arrayRemove(...e){const t=function K1(...n){return new v1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gp(t)}static increment(e){const t=function Y1(n){return new w1("increment",n)}(e);return t._methodName="FieldValue.increment",new gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rk={Firestore:$S,GeoPoint:FI,Timestamp:Qn,Blob:r0,Transaction:HS,WriteBatch:GS,DocumentReference:aa,DocumentSnapshot:s0,Query:bs,QueryDocumentSnapshot:o0,QuerySnapshot:CT,CollectionReference:Km,FieldPath:DT,FieldValue:gp,setLogLevel:function tk(n){!function ec(n){La.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ZS(n,e){return function ok(n,e=Uy.z){return new Rr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function TT(n,e){return ZS(n,e).pipe((0,xt.U)(t=>({payload:t,type:"query"})))}function GI(n,e){return TT(n,e).pipe(Ci(void 0),hf(),(0,xt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const E=o.find(S=>S.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function WS(n,e,t){return GI(n,t).pipe(vr((r,o)=>function uk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return AT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return AT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return AT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function lw(n,e=ui.y){return n=null!=n?n:cw,(0,_r.e)((t,r)=>{let o,u=!0;t.subscribe((0,kn.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,xt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function AT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function KS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function sk(n){(function ik(n,e){n.INTERNAL.registerComponent(new Vl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},rk)))})(n,(e,t)=>new $S(e,t,new ek)),n.registerVersion("@firebase/firestore-compat","0.1.16")}($b.Z);class YS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=GI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ci(void 0),hf(),cs(([r,o])=>o.length>0||!r),(0,xt.U)(([r,o])=>o),br.iC)}auditTrail(e){return this.stateChanges(e).pipe(vr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KS(e);return WS(this.query,t,this.afs.schedulers.outsideAngular).pipe(br.iC)}valueChanges(e={}){return TT(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),br.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(br.iC)}add(e){return this.ref.add(e)}doc(e){return new QS(this.ref.doc(e),this.afs)}}class QS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=ex(r,t);return new YS(o,u,this.afs)}snapshotChanges(){return function ak(n,e){return ZS(n,e).pipe(Ci(void 0),hf(),(0,xt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(br.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(br.iC)}}class ck{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?GI(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),cs(t=>t.length>0),br.iC):GI(this.query,this.afs.schedulers.outsideAngular).pipe(br.iC)}auditTrail(e){return this.stateChanges(e).pipe(vr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=KS(e);return WS(this.query,t,this.afs.schedulers.outsideAngular).pipe(br.iC)}valueChanges(e={}){return TT(this.query,this.afs.schedulers.outsideAngular).pipe((0,xt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),br.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(br.iC)}}const JS=new d.OlP("angularfire2.enableFirestorePersistence"),XS=new d.OlP("angularfire2.firestore.persistenceSettings"),dk=new d.OlP("angularfire2.firestore.settings"),hk=new d.OlP("angularfire2.firestore.use-emulator");function ex(n,e=(t=>t)){return{query:e(n),ref:n}}let tx=(()=>{class n{constructor(t,r,o,u,h,m,E,C,S,k,V,G,ie,Oe,Le,kt,st){this.schedulers=E;const rn=(0,Io.on)(t,m,r),mt=S;k&&ug(rn,m,V,ie,Oe,Le,G,kt),[this.firestore,this.persistenceEnabled$]=(0,Io.cc)(`${rn.name}.firestore`,"AngularFirestore",rn.name,()=>{const Rt=m.runOutsideAngular(()=>rn.firestore());if(u&&Rt.settings(u),mt&&Rt.useEmulator(...mt),o&&!ar(h)){const Je=()=>{try{return(0,xn.D)(Rt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Pt){return"undefined"!=typeof console&&console.warn(Pt),pt(!1)}};return[Rt,m.runOutsideAngular(Je)]}return[Rt,pt(!1)]},[u,mt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=ex(o,r),m=this.schedulers.ngZone.run(()=>u);return new YS(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new ck(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new QS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Io.Dh),d.LFG(Io.xv,8),d.LFG(JS,8),d.LFG(dk,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(br.HU),d.LFG(XS,8),d.LFG(hk,8),d.LFG(Co,8),d.LFG(df,8),d.LFG(aw,8),d.LFG(uw,8),d.LFG(Ub,8),d.LFG(ag,8),d.LFG(f_,8),d.LFG(c_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fk=(()=>{class n{constructor(){cf.Z.registerVersion("angularfire",br.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:JS,useValue:!0},{provide:XS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[tx]}),n})(),ST=(()=>{class n{constructor(t,r){this.auth=t,this.db=r,this.usersColleciton=r.collection("users"),this.isAuthenticated$=t.user.pipe((0,xt.U)(o=>!!o)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function db(n,e=Uy.z){const t=function A0(n=0,e,t=Uy.P){let r=-1;return null!=e&&((0,T0.K)(e)?t=e:r=e),new Rr.y(o=>{let u=function cb(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let h=0;return t.schedule(function(){o.closed||(o.next(h++),0<=r?this.schedule(void 0,r):o.complete())},u)})}(n,e);return lb(()=>t)}(1e3))}createUser(t){var r=this;return(0,ye.Z)(function*(){if(!t.password)throw new Error("Password not provided!");const o=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);if(!o.user)throw new Error("User can't be found");yield r.usersColleciton.doc(o.user.uid).set({name:t.name,email:t.email,age:t.age,phoneNumber:t.phoneNumber}),yield o.user.updateProfile({displayName:t.name})})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Co),d.LFG(tx))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xT=(()=>{class n{constructor(){this.modals=[]}register(t){this.modals.push({id:t,visible:!1})}unregister(t){this.modals=this.modals.filter(r=>r.id!==t)}isModalOpen(t){var r;return Boolean(null===(r=this.modals.find(o=>o.id===t))||void 0===r?void 0:r.visible)}toggleModal(t){const r=this.modals.find(o=>o.id===t);r&&(r.visible=!r.visible)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"a",14),d.NdJ("click",function(o){return d.CHM(t),d.oxw().openModal(o)}),d._uU(2,"Login / Register"),d.qZA()()}}function gk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"a",15),d._uU(2,"Manage"),d.qZA()(),d.TgZ(3,"li")(4,"a",15),d._uU(5,"Upload"),d.qZA()(),d.TgZ(6,"li")(7,"a",16),d.NdJ("click",function(o){return d.CHM(t),d.oxw().logout(o)}),d._uU(8,"Logout"),d.qZA()()}}let mk=(()=>{class n{constructor(t,r,o){this.modal=t,this.auth=r,this.afAuth=o,this.isAuthenticated=!1}ngOnInit(){}openModal(t){t.preventDefault(),this.modal.toggleModal("auth")}logout(t){var r=this;return(0,ye.Z)(function*(){t.preventDefault(),yield r.afAuth.signOut()})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xT),d.Y36(ST),d.Y36(Co))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary","px-8"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["href","index.html",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["href","about.html",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["href","#",1,"px-2"],[1,"px-2",3,"click"]],template:function(t,r){if(1&t&&(d.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),d._uU(3,"Clipz"),d.qZA(),d.TgZ(4,"div",3)(5,"ul",4),d.YNc(6,pk,3,0,"li",5),d.ALo(7,"async"),d.YNc(8,gk,9,0,"ng-template",null,6,d.W1O),d.TgZ(10,"li")(11,"a",7),d._uU(12,"About"),d.qZA()()(),d.TgZ(13,"ul",8)(14,"li")(15,"a",9),d._UZ(16,"img",10),d.TgZ(17,"span",11),d._uU(18,"English"),d.qZA()()(),d.TgZ(19,"li",12)(20,"a",9),d._UZ(21,"img",13),d.TgZ(22,"span",11),d._uU(23,"French"),d.qZA()()()()()()()),2&t){const o=d.MAs(9);d.xp6(6),d.Q6J("ngIf",!d.lcZ(7,2,r.auth.isAuthenticated$))("ngIfElse",o)}},directives:[or],pipes:[Ya],styles:[""]}),n})();const yk=[[["","heading",""]],"*"],_k=function(n){return{hidden:n}},vk=["[heading]","*"];let wk=(()=>{class n{constructor(t,r){this.modal=t,this.el=r,this.modalID="",console.log(r)}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(t){t.preventDefault(),this.modal.toggleModal(this.modalID)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xT),d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:vk,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(d.F$t(yk),d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d.NdJ("click",function(u){return r.closeModal(u)}),d._UZ(3,"div",3),d.qZA(),d.TgZ(4,"span",4),d._uU(5,"\u200b"),d.qZA(),d.TgZ(6,"div",5)(7,"div",6)(8,"div",7),d.Hsn(9),d.TgZ(10,"div",8),d.NdJ("click",function(u){return r.closeModal(u)}),d._uU(11," \u2715 "),d.qZA()(),d.Hsn(12,1),d.qZA()()()()),2&t&&d.Q6J("ngClass",d.VKq(1,_k,!r.modal.isModalOpen(r.modalID)))},directives:[Fi],styles:[""]}),n})();const Ek=["*"];let nx=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:Ek,decls:2,vars:2,template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div"),d.Hsn(1),d.qZA()),2&t&&d.ekj("hidden",!r.active)},styles:[""]}),n})();const Ik=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white text-white bg-indigo-400":e}};function bk(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",2)(1,"a",3),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().selectTab(u)}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("ngClass",d.WLB(2,Ik,!t.active,t.active)),d.xp6(1),d.Oqu(t.tabTitle)}}const Ck=["*"];let Dk=(()=>{class n{constructor(){this.tabs=new d.n_E}ngAfterContentInit(){var t;const r=null===(t=this.tabs)||void 0===t?void 0:t.filter(o=>o.active);(!r||0===r.length)&&this.selectTab(this.tabs.first)}selectTab(t){var r;return null===(r=this.tabs)||void 0===r||r.forEach(o=>o.active=!1),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,o){if(1&t&&d.Suo(o,nx,4),2&t){let u;d.iGM(u=d.CRH())&&(r.tabs=u)}},ngContentSelectors:Ck,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"ul",0),d.YNc(1,bk,3,5,"li",1),d.qZA(),d.Hsn(2)),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.tabs))},directives:[sr,Fi],styles:[""]}),n})();const Tk=["*"];let rx=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:Tk,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.Hsn(1),d.qZA()),2&t&&d.Q6J("ngClass",r.bgColor)},directives:[Fi],styles:[""]}),n})(),ix=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),mp=(()=>{class n extends ix{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Ha=new d.OlP("NgValueAccessor"),xk={provide:Ha,useExisting:(0,d.Gpc)(()=>a0),multi:!0},kk=new d.OlP("CompositionEventMode");let a0=(()=>{class n extends ix{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Mk(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(kk,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([xk]),d.qOj]}),n})();function Ih(n){return null==n||0===n.length}function ox(n){return null!=n&&"number"==typeof n.length}const Ri=new d.OlP("NgValidators"),bh=new d.OlP("NgAsyncValidators"),Rk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ko{static min(e){return function ax(n){return e=>{if(Ih(e.value)||Ih(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ux(n){return e=>{if(Ih(e.value)||Ih(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return lx(e)}static requiredTrue(e){return function cx(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function dx(n){return Ih(n.value)||Rk.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function hx(n){return e=>Ih(e.value)||!ox(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function fx(n){return e=>ox(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return px(e)}static nullValidator(e){return null}static compose(e){return wx(e)}static composeAsync(e){return Ex(e)}}function lx(n){return Ih(n.value)?{required:!0}:null}function px(n){if(!n)return qI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ih(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function qI(n){return null}function gx(n){return null!=n}function mx(n){const e=(0,d.QGY)(n)?(0,xn.D)(n):n;return(0,d.CqO)(e),e}function yx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _x(n,e){return e.map(t=>t(n))}function vx(n){return n.map(e=>function Nk(n){return!n.validate}(e)?e:t=>e.validate(t))}function wx(n){if(!n)return null;const e=n.filter(gx);return 0==e.length?null:function(t){return yx(_x(t,e))}}function MT(n){return null!=n?wx(vx(n)):null}function Ex(n){if(!n)return null;const e=n.filter(gx);return 0==e.length?null:function(t){return function Ak(...n){const e=(0,Mn.jO)(n),{args:t,keys:r}=Ei(n),o=new Rr.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let E=h,C=h;for(let S=0;S<h;S++){let k=!1;(0,jo.Xf)(t[S]).subscribe((0,kn.x)(u,V=>{k||(k=!0,C--),m[S]=V},()=>E--,void 0,()=>{(!E||!k)&&(C||u.next(r?fo(r,m):m),u.complete())}))}});return e?o.pipe(Wc(e)):o}(_x(t,e).map(mx)).pipe((0,xt.U)(yx))}}function kT(n){return null!=n?Ex(vx(n)):null}function Ix(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bx(n){return n._rawValidators}function Cx(n){return n._rawAsyncValidators}function RT(n){return n?Array.isArray(n)?n:[n]:[]}function zI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dx(n,e){const t=RT(e);return RT(n).forEach(o=>{zI(t,o)||t.push(o)}),t}function Tx(n,e){return RT(e).filter(t=>!zI(n,t))}class Ax{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=MT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ch extends Ax{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cs extends Ax{get formDirective(){return null}get path(){return null}}class Sx{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let NT=(()=>{class n extends Sx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ch,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),OT=(()=>{class n extends Sx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function u0(n,e){LT(n,e),e.valueAccessor.writeValue(n.value),function jk(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Mx(n,e)})}(n,e),function Hk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $k(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Mx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Bk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function KI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),QI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function YI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function LT(n,e){const t=bx(n);null!==e.validator?n.setValidators(Ix(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Cx(n);null!==e.asyncValidator?n.setAsyncValidators(Ix(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();YI(e._rawValidators,o),YI(e._rawAsyncValidators,o)}function QI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=bx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Cx(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return YI(e._rawValidators,r),YI(e._rawAsyncValidators,r),t}function Mx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kx(n,e){LT(n,e)}function VT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Nx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function UT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===a0?t=u:function zk(n){return Object.getPrototypeOf(n.constructor)===mp}(u)?r=u:o=u}),o||r||t||null}function BT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const l0="VALID",JI="INVALID",Ym="PENDING",c0="DISABLED";function $T(n){return(XI(n)?n.validators:n)||null}function Ox(n){return Array.isArray(n)?MT(n):n||null}function HT(n,e){return(XI(e)?e.asyncValidators:n)||null}function Px(n){return Array.isArray(n)?kT(n):n||null}function XI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Fx=n=>n instanceof Sc,GT=n=>n instanceof eb;function Lx(n){return Fx(n)?n.value:n.getRawValue()}function Vx(n,e){const t=GT(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function Ux(n,e){GT(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class qT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Ox(this._rawValidators),this._composedAsyncValidatorFn=Px(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===l0}get invalid(){return this.status===JI}get pending(){return this.status==Ym}get disabled(){return this.status===c0}get enabled(){return this.status!==c0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Ox(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Px(e)}addValidators(e){this.setValidators(Dx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tx(e,this._rawAsyncValidators))}hasValidator(e){return zI(this._rawValidators,e)}hasAsyncValidator(e){return zI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ym,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=c0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=l0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===l0||this.status===Ym)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?c0:l0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ym,this._hasOwnPendingAsyncValidator=!0;const t=mx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Zk(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=GT(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof Kk)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?c0:this.errors?JI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ym)?Ym:this._anyControlsHaveStatus(JI)?JI:l0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){XI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Sc extends qT{constructor(e=null,t,r){super($T(t),HT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),XI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class eb extends qT{constructor(e,t,r){super($T(t),HT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ux(this,e),Object.keys(e).forEach(r=>{Vx(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Lx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Kk extends qT{constructor(e,t,r){super($T(t),HT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ux(this,e),e.forEach((r,o)=>{Vx(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Lx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Yk={provide:Cs,useExisting:(0,d.Gpc)(()=>tb)},d0=(()=>Promise.resolve(null))();let tb=(()=>{class n extends Cs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new eb({},MT(t),kT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){d0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),u0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){d0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){d0.then(()=>{const r=this._findContainer(t.path),o=new eb({});kx(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){d0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){d0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Nx(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ri,10),d.Y36(bh,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Yk]),d.qOj]}),n})();const Jk={provide:Ch,useExisting:(0,d.Gpc)(()=>zT)},$x=(()=>Promise.resolve(null))();let zT=(()=>{class n extends Ch{constructor(t,r,o,u,h){super(),this._changeDetectorRef=h,this.control=new Sc,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=UT(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),VT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){u0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){$x.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;$x.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function WI(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cs,9),d.Y36(Ri,10),d.Y36(bh,10),d.Y36(Ha,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Jk]),d.qOj,d.TTD]}),n})(),ZT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const WT=new d.OlP("NgModelWithFormControlWarning"),rR={provide:Ch,useExisting:(0,d.Gpc)(()=>KT)};let KT=(()=>{class n extends Ch{constructor(t,r,o,u){super(),this._ngModelWarningConfig=u,this.update=new d.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=UT(0,o)}set isDisabled(t){}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&KI(r,this,!1),u0(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}VT(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&KI(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Ri,10),d.Y36(bh,10),d.Y36(Ha,10),d.Y36(WT,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[d._Bn([rR]),d.qOj,d.TTD]}),n})();const iR={provide:Cs,useExisting:(0,d.Gpc)(()=>nb)};let nb=(()=>{class n extends Cs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(QI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return u0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){KI(t.control||null,t,!1),BT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Nx(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(KI(r||null,t),Fx(o)&&(u0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);kx(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Gk(n,e){return QI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LT(this.form,this),this._oldForm&&QI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ri,10),d.Y36(bh,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([iR]),d.qOj,d.TTD]}),n})(),yp=(()=>{class n{constructor(){this._validator=qI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const yR={provide:Ri,useExisting:(0,d.Gpc)(()=>rb),multi:!0};let rb=(()=>{class n extends yp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function pR(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>lx}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([yR]),d.qOj]}),n})();const IR={provide:Ri,useExisting:(0,d.Gpc)(()=>eA),multi:!0};let eA=(()=>{class n extends yp{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>px(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[d._Bn([IR]),d.qOj]}),n})(),sM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Gx]]}),n})(),bR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sM]}),n})(),oM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:WT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sM]}),n})();function CR(n,e){if(1&n&&(d.TgZ(0,"app-alert",11),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(1),d.Oqu(t.alertMsg)}}function DR(n,e){1&n&&(d.TgZ(0,"p",12),d._uU(1," Email is invalid "),d.qZA())}function TR(n,e){1&n&&(d.TgZ(0,"p",12),d._uU(1," Password is invalid "),d.qZA())}let AR=(()=>{class n{constructor(t){this.auth=t,this.credentials={email:"",password:""},this.showAlert=!1,this.alertMsg="Please wait till we log you in...",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){}login(){var t=this;return(0,ye.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait till we log you in...",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch(r){return t.inSubmission=!1,t.alertMsg="An unexpected error has occured. Plz try again later",t.alertColor="red",void console.error(r)}t.alertMsg="You're now successfully logged in.",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Co))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["name","password","type","password","placeholder","Password","required","","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(d.YNc(0,CR,2,2,"app-alert",0),d.TgZ(1,"form",1,2),d.NdJ("ngSubmit",function(){return r.login()}),d.TgZ(3,"div",3)(4,"label",4),d._uU(5,"Email"),d.qZA(),d.TgZ(6,"input",5,6),d.NdJ("ngModelChange",function(u){return r.credentials.email=u}),d.qZA(),d.YNc(8,DR,2,0,"p",7),d.qZA(),d.TgZ(9,"div",3)(10,"label",4),d._uU(11,"Password"),d.qZA(),d.TgZ(12,"input",8,9),d.NdJ("ngModelChange",function(u){return r.credentials.password=u}),d.qZA(),d.YNc(14,TR,2,0,"p",7),d.qZA(),d.TgZ(15,"button",10),d._uU(16," Submit "),d.qZA()()),2&t){const o=d.MAs(2),u=d.MAs(7),h=d.MAs(13);d.Q6J("ngIf",r.showAlert),d.xp6(6),d.Q6J("ngModel",r.credentials.email),d.xp6(2),d.Q6J("ngIf",u.errors&&u.touched&&u.dirty),d.xp6(4),d.Q6J("ngModel",r.credentials.password),d.xp6(2),d.Q6J("ngIf",h.errors&&h.touched&&h.dirty),d.xp6(1),d.Q6J("disabled",o.invalid||r.inSubmission)}},directives:[or,rx,ZT,OT,tb,a0,rb,eA,NT,zT],styles:[""]}),n})();class SR{static match(e,t){return r=>{const o=r.get(e),u=r.get(t);if(!o||!u)return console.error("Form controls can't be found in the form group"),{controlNotFound:!1};const h=o.value===u.value?null:{noMatch:!0};return u.setErrors(h),h}}}let xR=(()=>{class n{constructor(t){this.auth=t,this.validate=r=>this.auth.fetchSignInMethodsForEmail(r.value).then(o=>o.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Co))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var MR=N(655);const ib=new d.OlP("ngx-mask config"),aM=new d.OlP("new ngx-mask config"),uM=new d.OlP("initial ngx-mask config"),kR={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new d.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},RR=["Hh:m0:s0","Hh:m0","m0:s0"],NR=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let lM=(()=>{class n{constructor(t){this._config=t,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(r,o,u,h)=>{var m,E;let C=[],S="";if(Array.isArray(u)){const Oe=new RegExp(u.map(Le=>"[\\^$.|?*+()".indexOf(Le)>=0?`\\${Le}`:Le).join("|"));C=r.split(Oe),S=null!==(E=null===(m=r.match(Oe))||void 0===m?void 0:m[0])&&void 0!==E?E:""}else C=r.split(u),S=u;const k=C.length>1?`${S}${C[1]}`:"";let V=C[0];const G=this.separatorLimit.replace(/\s/g,"");G&&+G&&(V="-"===V[0]?`-${V.slice(1,V.length).slice(0,G.length)}`:V.slice(0,G.length));const ie=/(\d+)(\d{3})/;for(;o&&ie.test(V);)V=V.replace(ie,"$1"+o+"$2");return void 0===h?V+k:0===h?V:V+k.substr(0,h+1)},this.percentage=r=>Number(r)>=0&&Number(r)<=100,this.getPrecision=r=>{const o=r.split(".");return o.length>1?Number(o[o.length-1]):1/0},this.checkAndRemoveSuffix=r=>{var o,u,h;for(let m=(null===(o=this.suffix)||void 0===o?void 0:o.length)-1;m>=0;m--){const E=this.suffix.substr(m,null===(u=this.suffix)||void 0===u?void 0:u.length);if(r.includes(E)&&(m-1<0||!r.includes(this.suffix.substr(m-1,null===(h=this.suffix)||void 0===h?void 0:h.length))))return r.replace(E,"")}return r},this.checkInputPrecision=(r,o,u)=>{if(o<1/0){if(Array.isArray(u)){const E=u.find(C=>C!==this.thousandSeparator);u=E||u[0]}const h=new RegExp(this._charToRegExpExpression(u)+`\\d{${o}}.*$`),m=r.match(h);m&&m[0].length-1>o&&(r=r.substring(0,r.length-(m[0].length-1-o))),0===o&&this._compareOrIncludes(r[r.length-1],u,this.thousandSeparator)&&(r=r.substring(0,r.length-1))}return r},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(t,r){const[o,u]=r;return this.customPattern=u,this.applyMask(t,o)}applyMask(t,r,o=0,u=!1,h=!1,m=(()=>{})){var E,C;if(!r||"string"!=typeof t)return"";let S=0,k="",V=!1,G=!1,ie=1,Oe=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&(null==t?void 0:t.length)>0&&(t=this.checkAndRemoveSuffix(t));const Le=t.toString().split("");"IP"===r&&(this.ipError=Le.filter(Je=>"."===Je).length<3&&Le.length<7,r="099.099.099.099");const kt=[];for(let Je=0;Je<t.length;Je++)(null===(E=t[Je])||void 0===E?void 0:E.match("\\d"))&&kt.push(t[Je]);if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==kt.length&&14!==kt.length,r=kt.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const Je=this.getPrecision(r);t=this.checkInputPrecision(t,Je,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),k=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\[\]:";<>.?\/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!h?t.slice(1,t.length):t,h&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const Je=this._charToRegExpExpression(this.thousandSeparator);let Pt='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Je,"");if(Array.isArray(this.decimalMarker))for(const _p of this.decimalMarker)Pt=Pt.replace(this._charToRegExpExpression(_p),"");else Pt=Pt.replace(this._charToRegExpExpression(this.decimalMarker),"");const Hr=new RegExp("["+Pt+"]");(t.match(Hr)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const Ga=this.getPrecision(r),er=(t=this.checkInputPrecision(t,Ga,this.decimalMarker)).replace(new RegExp(Je,"g"),"");k=this._formatWithSeparators(er,this.thousandSeparator,this.decimalMarker,Ga);const Dn=k.indexOf(",")-t.indexOf(","),eo=k.length-t.length;if(eo>0&&","!==k[o]){G=!0;let _p=0;do{this._shift.add(o+_p),_p++}while(_p<eo)}else 0!==Dn&&o>0&&!(k.indexOf(",")>=o&&o>3)||!(k.indexOf(".")>=o&&o>3)&&eo<=0?(this._shift.clear(),G=!0,ie=eo,this._shift.add(o+=eo)):this._shift.clear()}else for(let Je=0,Pt=Le[0];Je<Le.length&&S!==r.length;Je++,Pt=Le[Je])if(this._checkSymbolMask(Pt,r[S])&&"?"===r[S+1])k+=Pt,S+=2;else if("*"===r[S+1]&&V&&this._checkSymbolMask(Pt,r[S+2]))k+=Pt,S+=3,V=!1;else if(this._checkSymbolMask(Pt,r[S])&&"*"===r[S+1])k+=Pt,V=!0;else if("?"===r[S+1]&&this._checkSymbolMask(Pt,r[S+2]))k+=Pt,S+=3;else if(this._checkSymbolMask(Pt,r[S])){if("H"===r[S]&&Number(Pt)>2){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}if("h"===r[S]&&"2"===k&&Number(Pt)>3){S+=1,Je--;continue}if("m"===r[S]&&Number(Pt)>5){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}if("s"===r[S]&&Number(Pt)>5){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}const Hr=31;if("d"===r[S]&&(Number(Pt)>3&&this.leadZeroDateTime||Number(t.slice(S,S+2))>Hr||"/"===t[S+1])){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}if("M"===r[S]){const er=0===S&&(Number(Pt)>2||Number(t.slice(S,S+2))>12||"/"===t[S+1]),Dn=t.slice(S-3,S-1).includes("/")&&("/"===t[S-2]&&Number(t.slice(S-1,S+1))>12&&"/"!==t[S]||"/"===t[S]||"/"===t[S-3]&&Number(t.slice(S-2,S))>12&&"/"!==t[S-1]||"/"===t[S-1]),eo=Number(t.slice(S-3,S-1))<=Hr&&!t.slice(S-3,S-1).includes("/")&&"/"===t[S-1]&&(Number(t.slice(S,S+2))>12||"/"===t[S+1]),_p=Number(t.slice(S-3,S-1))>Hr&&!t.slice(S-3,S-1).includes("/")&&!t.slice(S-2,S).includes("/")&&Number(t.slice(S-2,S))>12,tN=Number(t.slice(S-3,S-1))<=Hr&&!t.slice(S-3,S-1).includes("/")&&"/"!==t[S-1]&&Number(t.slice(S-1,S+1))>12;if(Number(Pt)>1&&this.leadZeroDateTime||er||Dn||eo||_p||tN){S+=1,this._shiftStep(r,S,Le.length),Je--,this.leadZeroDateTime&&(k+="0");continue}}k+=Pt,S++}else-1!==this.maskSpecialCharacters.indexOf(r[S])?(k+=r[S],S++,this._shiftStep(r,S,Le.length),Je--):this.maskSpecialCharacters.indexOf(Pt)>-1&&this.maskAvailablePatterns[r[S]]&&(null===(C=this.maskAvailablePatterns[r[S]])||void 0===C?void 0:C.optional)?(!!Le[S]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(k+=Le[S]),S++,Je--):"*"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(Pt)===this.maskExpression[S+2]&&V||"?"===this.maskExpression[S+1]&&this._findSpecialChar(this.maskExpression[S+2])&&this._findSpecialChar(Pt)===this.maskExpression[S+2]&&V?(S+=3,k+=Pt):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Pt)<0&&Pt!==this.placeHolderCharacter&&(Oe=!0);k.length+1===r.length&&-1!==this.maskSpecialCharacters.indexOf(r[r.length-1])&&(k+=r[r.length-1]);let st=o+1;for(;this._shift.has(st);)ie++,st++;let rn=u?S:this._shift.has(o)?ie:0;Oe&&rn--,m(rn,G),ie<0&&this._shift.clear();let mt=!1;h&&(mt=Le.every(Je=>this.maskSpecialCharacters.includes(Je)));let Rt=`${this.prefix}${mt?"":k}${this.suffix}`;return 0===k.length&&(Rt=`${this.prefix}${k}`),Rt}_findSpecialChar(t){return this.maskSpecialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,this.maskAvailablePatterns[r]&&this.maskAvailablePatterns[r].pattern&&this.maskAvailablePatterns[r].pattern.test(t)}_stripToDecimal(t){return t.split("").filter((r,o)=>r.match("^-?\\d")||r.match("\\s")||"."===r||","===r||"-"===r&&0===o&&this.allowNegativeNumbers).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,o){const u=/[*?]/g.test(t.slice(0,r))?o:r;this._shift.add(u+this.prefix.length||0)}_compareOrIncludes(t,r,o){return Array.isArray(r)?r.filter(u=>u!==o).includes(t):t===r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ib))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),cM=(()=>{class n extends lM{constructor(t,r,o,u){super(r),this.document=t,this._config=r,this._elementRef=o,this._renderer=u,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=h=>{}}applyMask(t,r,o=0,u=!1,h=!1,m=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const E=t&&"number"==typeof this.selStart?t[this.selStart]:"";let C="";if(this.hiddenInput&&!this.writingValue){let G=this.actualValue.split("");""!==t&&G.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>G.length?G.splice(this.selStart,0,E):t.length<G.length&&(G.length-t.length==1?G.splice(this.selStart-1,1):G.splice(this.selStart,this.selEnd-this.selStart))):G=[],this.showMaskTyped&&(t=this.removeMask(t)),C=this.actualValue.length&&G.length<=t.length?this.shiftTypedSymbols(G.join("")):t}C=Boolean(C)&&C.length?C:t;const S=super.applyMask(C,r,o,u,h,m);if(this.actualValue=this.getActualValue(S),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(G=>!this._compareOrIncludes(G,this.decimalMarker,this.thousandSeparator))),this.formControlResult(S),!this.showMaskTyped)return this.hiddenInput&&S&&S.length?this.hideInput(S,this.maskExpression):S;const k=S.length,V=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const G=this._numberSkipedSymbols(S);return S+V.slice(k+G)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?S+V:S+V.slice(k)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let o=r.exec(t),u=0;for(;null!=o;)u+=1,o=r.exec(t);return u}applyValueChanges(t,r,o,u=(()=>{})){const h=this._elementRef.nativeElement;h.value=this.applyMask(h.value,this.maskExpression,t,r,o,u),h!==this.document.activeElement&&this.clearIfNotMatchFn()}hideInput(t,r){return t.split("").map((o,u)=>{var h,m;return this.maskAvailablePatterns&&this.maskAvailablePatterns[r[u]]&&(null===(h=this.maskAvailablePatterns[r[u]])||void 0===h?void 0:h.symbol)?null===(m=this.maskAvailablePatterns[r[u]])||void 0===m?void 0:m.symbol:o}).join("")}getActualValue(t){const r=t.split("").filter((o,u)=>this._checkSymbolMask(o,this.maskExpression[u])||this.maskSpecialCharacters.includes(this.maskExpression[u])&&o===this.maskExpression[u]);return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((u,h)=>{if(this.maskSpecialCharacters.includes(t[h+1])&&t[h+1]!==this.maskExpression[h+1])return r=u,t[h+1];if(r.length){const m=r;return r="",m}return u})||[]).join("")}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(o=>this._findSpecialChar(o)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){var r;if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const o=[];for(let u=0;u<t.length;u++)(null===(r=t[u])||void 0===r?void 0:r.match("\\d"))&&o.push(t[u]);return o.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>3&&o.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:o.length>6&&o.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){var r;const o=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,u=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return o;const h=[];for(let m=0;m<t.length;m++)(null===(r=t[m])||void 0===r?void 0:r.match("\\d"))&&h.push(t[m]);return h.length<=3?o.slice(h.length,o.length):h.length>3&&h.length<=6?o.slice(h.length+1,o.length):h.length>6&&h.length<=9?o.slice(h.length+2,o.length):h.length>9&&h.length<11?o.slice(h.length+3,o.length):11===h.length?"":12===h.length?u.slice(17===t.length?16:15,u.length):h.length>12&&h.length<=14?u.slice(h.length+4,u.length):""}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.maskSpecialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression);let o=this._retrieveSeparatorValue(t);return"."!==this.decimalMarker&&!Array.isArray(this.decimalMarker)&&(o=o.replace(this.decimalMarker,".")),this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,o):Number(o):o}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae),d.LFG(ib),d.LFG(d.SBq),d.LFG(d.Qsj))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),OR=(()=>{class n{constructor(t,r,o){this.document=t,this._maskService=r,this._config=o,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new d.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=u=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:o,patterns:u,prefix:h,suffix:m,thousandSeparator:E,decimalMarker:C,dropSpecialCharacters:S,hiddenInput:k,showMaskTyped:V,placeHolderCharacter:G,shownMaskExpression:ie,showTemplate:Oe,clearIfNotMatch:Le,validation:kt,separatorLimit:st,allowNegativeNumbers:rn,leadZeroDateTime:mt,triggerOnMaskChange:Rt}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((Je,Pt)=>Je.length-Pt.length),this._maskValue=this._maskExpressionArray[0],this.maskExpression=this._maskExpressionArray[0],this._maskService.maskExpression=this._maskExpressionArray[0]):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),o){if(!o.currentValue||!Array.isArray(o.currentValue))return;this._maskService.maskSpecialCharacters=o.currentValue||[]}u&&u.currentValue&&(this._maskService.maskAvailablePatterns=u.currentValue),h&&(this._maskService.prefix=h.currentValue),m&&(this._maskService.suffix=m.currentValue),E&&(this._maskService.thousandSeparator=E.currentValue),C&&(this._maskService.decimalMarker=C.currentValue),S&&(this._maskService.dropSpecialCharacters=S.currentValue),k&&(this._maskService.hiddenInput=k.currentValue),V&&(this._maskService.showMaskTyped=V.currentValue),G&&(this._maskService.placeHolderCharacter=G.currentValue),ie&&(this._maskService.shownMaskExpression=ie.currentValue),Oe&&(this._maskService.showTemplate=Oe.currentValue),Le&&(this._maskService.clearIfNotMatch=Le.currentValue),kt&&(this._maskService.validation=kt.currentValue),st&&(this._maskService.separatorLimit=st.currentValue),rn&&(this._maskService.allowNegativeNumbers=rn.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(Je=>"-"!==Je))),mt&&(this._maskService.leadZeroDateTime=mt.currentValue),Rt&&(this._maskService.triggerOnMaskChange=Rt.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||NR.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(RR.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const o in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[o].optional&&(this._maskValue.indexOf(o)!==this._maskValue.lastIndexOf(o)?r+=this._maskValue.split("").filter(h=>h===o).join("").length:-1!==this._maskValue.indexOf(o)&&r++,-1!==this._maskValue.indexOf(o)&&t.toString().length>=this._maskValue.indexOf(o)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number(this._maskValue.split("{")[1].split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const o=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<o)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){!t&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);const o=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart;let u=0,h=!1;if(this._maskService.applyValueChanges(o,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(E,C)=>{this._justPasted=!1,u=E,h=C}),this.document.activeElement!==r)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let m=this._position?this._inputValue.length+o+u:o+("Backspace"!==this._code||h?u:0);m>this._getActualInputLength()&&(m=this._getActualInputLength()),m<0&&(m=0),r.setSelectionRange(m,m),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const h=r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown;r.value!==h&&(r.value=h),(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){var r;if(!this._maskValue)return;this._code=t.code?t.code:t.key;const o=t.target;if(this._inputValue=o.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===o.value.length&&(o.selectionStart=o.selectionEnd),8===t.keyCode&&0!==o.selectionStart)if(this.specialCharacters=(null===(r=this.specialCharacters)||void 0===r?void 0:r.length)?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&o.selectionStart<=this.prefix.length)o.setSelectionRange(this.prefix.length,o.selectionEnd);else if(this._inputValue.length!==o.selectionStart&&1!==o.selectionStart)for(;this.specialCharacters.includes(this._inputValue[o.selectionStart-1].toString())&&(this.prefix.length>=1&&o.selectionStart>this.prefix.length||0===this.prefix.length);)o.setSelectionRange(o.selectionStart-1,o.selectionEnd);this.checkSelectionOnDeletion(o),this._maskService.prefix.length&&o.selectionStart<=this._maskService.prefix.length&&o.selectionEnd<=this._maskService.prefix.length&&t.preventDefault();const u=o.selectionStart;8===t.keyCode&&!o.readOnly&&0===u&&o.selectionEnd===o.value.length&&0!==o.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<o.selectionStart?o.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(o.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=o.selectionStart,this._maskService.selEnd=o.selectionEnd}writeValue(t){return(0,MR.mG)(this,void 0,void 0,function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&this.setDisabledState(Boolean(t.disable)),t=t.value),"number"==typeof t&&(t=String(t),Array.isArray(this.decimalMarker)||(t="."!==this.decimalMarker?t.replace(".",this.decimalMarker):t),this._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(this._maskService.writingValue=!0,this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],this._maskService.writingValue=!1):this._maskService.formElementProperty=["value",t],this._inputValue=t})}registerOnChange(t){this.onChange=t,this._maskService.onChange=this.onChange}registerOnTouched(t){this.onTouch=t}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,o,u)=>{if(this._start="{"===o?u:this._start,"}"!==o)return this._maskService._findSpecialChar(o)?r+o:r;this._end=u;const h=Number(t.slice(this._start+1,this._end));return r+new Array(h+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(o=>":"!==o).length;return t&&(0==+t[t.length-1]&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{var r,o;const u=(null===(r=this._maskService.removeMask(this._inputValue))||void 0===r?void 0:r.length)<=(null===(o=this._maskService.removeMask(t))||void 0===o?void 0:o.length);if(this._inputValue&&u)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,u;this._maskValue=this._maskExpressionArray[this._maskExpressionArray.length-1],this.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1],this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ae),d.Y36(cM),d.Y36(ib))},n.\u0275dir=d.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&d.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(u){return r.onModelChange(u)})("input",function(u){return r.onInput(u)})("blur",function(){return r.onBlur()})("click",function(u){return r.onClick(u)})("keydown",function(u){return r.onKeyDown(u)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[d._Bn([{provide:Ha,useExisting:(0,d.Gpc)(()=>n),multi:!0},{provide:Ri,useExisting:(0,d.Gpc)(()=>n),multi:!0},cM]),d.TTD]}),n})();function PR(n,e){return Object.assign(Object.assign({},n),e instanceof Function?e():e)}let FR=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:aM,useValue:t},{provide:uM,useValue:kR},{provide:ib,useFactory:PR,deps:[uM,aM]},lM]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const dM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function LR(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Password must be at least 8 characters, must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number "),d.qZA())}function VR(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Please fill the field "),d.qZA())}function UR(n,e){if(1&n&&(d.TgZ(0,"p",3),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.AsE(" The input that you've passed in is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," chars long. Plz type at least ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," chars. ")}}function BR(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," You shall enter a valid email. "),d.qZA())}function jR(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1,"Value too low."),d.qZA())}function $R(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1,"Value too high."),d.qZA())}function HR(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Passwords don't match. "),d.qZA())}function GR(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Email was taken. Please try to register with another email. "),d.qZA())}function qR(n,e){if(1&n&&(d.ynx(0),d.YNc(1,LR,2,0,"p",2),d.YNc(2,VR,2,0,"p",2),d.YNc(3,UR,2,2,"p",2),d.YNc(4,BR,2,0,"p",2),d.YNc(5,jR,2,0,"p",2),d.YNc(6,$R,2,0,"p",2),d.YNc(7,HR,2,0,"p",2),d.YNc(8,GR,2,0,"p",2),d.BQk()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.minlength),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken)}}dM.KeyboardEvent||(dM.KeyboardEvent=function(n,e){});let zR=(()=>{class n{constructor(){this.control=new Sc,this.type="text",this.placeholder="",this.format=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(d._UZ(0,"input",0),d.YNc(1,qR,9,8,"ng-container",1)),2&t&&(d.Q6J("formControl",r.control)("type",r.type)("placeholder",r.placeholder)("mask",r.format)("dropSpecialCharacters",!1),d.xp6(1),d.Q6J("ngIf",r.control.touched&&r.control.dirty))},directives:[a0,OR,NT,KT,or],styles:[""]}),n})();function ZR(n,e){if(1&n&&(d.TgZ(0,"app-alert",11),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(1),d.hij(" ",t.alertMsg,"\n")}}let WR=(()=>{class n{constructor(t,r){this.auth=t,this.emailTaken=r,this.inSubmittion=!1,this.name=new Sc("",[ko.required,ko.minLength(3)]),this.email=new Sc("",[ko.required,ko.email],[this.emailTaken.validate]),this.age=new Sc("",[ko.required,ko.min(18),ko.max(128)]),this.password=new Sc("",[ko.required,ko.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/)]),this.confirm_password=new Sc("",[ko.required]),this.phoneNumber=new Sc("",[ko.required,ko.minLength(13),ko.maxLength(13)]),this.showAlert=!1,this.alertMsg="Creating your account...",this.alertColor="blue",this.registerForm=new eb({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[SR.match("password","confirm_password")])}register(){var t=this;return(0,ye.Z)(function*(){t.inSubmittion=!0,t.showAlert=!0,t.alertMsg="Creating your account...",t.alertColor="blue";try{yield t.auth.createUser(t.registerForm.value)}catch(r){return console.error(r),t.alertMsg="An unexpected error occured. Plz try again later",t.alertColor="red",void(t.inSubmittion=!1)}t.alertMsg="Success! Your account has been created",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ST),d.Y36(xR))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Type Password",3,"control"],["type","password","placeholder","Retype password",3,"control"],["placeholder","Enter Phone Number","format","(000)00-00-00",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50","disabled:bg-indigo-400",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(d.YNc(0,ZR,2,2,"app-alert",0),d.TgZ(1,"form",1),d.NdJ("ngSubmit",function(){return r.register()}),d.TgZ(2,"div",2)(3,"label",3),d._uU(4,"Name"),d.qZA(),d._UZ(5,"app-input",4),d.qZA(),d.TgZ(6,"div",2)(7,"label",3),d._uU(8,"Email"),d.qZA(),d._UZ(9,"app-input",5),d.qZA(),d.TgZ(10,"div",2)(11,"label",3),d._uU(12,"Age"),d.qZA(),d._UZ(13,"app-input",6),d.qZA(),d.TgZ(14,"div",2)(15,"label",3),d._uU(16,"Password"),d.qZA(),d._UZ(17,"app-input",7),d.qZA(),d.TgZ(18,"div",2)(19,"label",3),d._uU(20,"Confirm Password"),d.qZA(),d._UZ(21,"app-input",8),d.qZA(),d.TgZ(22,"div",2)(23,"label",3),d._uU(24,"Phone Number"),d.qZA(),d._UZ(25,"app-input",9),d.qZA(),d.TgZ(26,"button",10),d._uU(27," Submit "),d.qZA()()),2&t&&(d.Q6J("ngIf",r.showAlert),d.xp6(1),d.Q6J("formGroup",r.registerForm),d.xp6(4),d.Q6J("control",r.name),d.xp6(4),d.Q6J("control",r.email),d.xp6(4),d.Q6J("control",r.age),d.xp6(4),d.Q6J("control",r.password),d.xp6(4),d.Q6J("control",r.confirm_password),d.xp6(4),d.Q6J("control",r.phoneNumber),d.xp6(1),d.Q6J("disabled",r.registerForm.invalid||r.inSubmittion))},directives:[or,rx,ZT,OT,nb,zR],styles:[""]}),n})(),KR=(()=>{class n{constructor(t){this.modal=t}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(xT))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(t,r){1&t&&(d.TgZ(0,"app-modal",0)(1,"p",1),d._uU(2,"Your Account"),d.qZA(),d.TgZ(3,"app-tabs-container")(4,"app-tab",2),d._UZ(5,"app-login"),d.qZA(),d.TgZ(6,"app-tab",3),d._UZ(7,"app-register"),d.qZA()()())},directives:[wk,Dk,nx,AR,WR],styles:[""]}),n})();function YR(n,e){1&n&&d._UZ(0,"app-auth-modal")}let QR=(()=>{class n{constructor(t){this.auth=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ST))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:107,vars:3,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto","p-8"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["href","#",1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"],["src","assets/img/2.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],["src","assets/img/3.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[4,"ngIf"]],template:function(t,r){1&t&&(d._UZ(0,"app-nav"),d.TgZ(1,"section",0)(2,"video",1),d._UZ(3,"source",2),d.qZA(),d._UZ(4,"div",3),d.TgZ(5,"div",4),d._UZ(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5)(10,"div",5),d.qZA(),d.TgZ(11,"div",6)(12,"div",7)(13,"h1",8),d._uU(14,"Clip it and ship it!"),d.qZA(),d.TgZ(15,"p"),d._uU(16," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),d.qZA()()()(),d.TgZ(17,"section",9)(18,"h1",10),d._uU(19," Latest "),d.qZA(),d.TgZ(20,"div",11)(21,"a",12),d._UZ(22,"img",13),d.TgZ(23,"div",14)(24,"div",15)(25,"div",16),d.O4$(),d.TgZ(26,"svg",17),d._UZ(27,"path",18),d.qZA()()()(),d.kcU(),d.TgZ(28,"div",19)(29,"h2",20),d._uU(30,"Game Highlighting Clip"),d.qZA(),d.TgZ(31,"p",21),d._uU(32," Luis Ramirez \xb7 "),d.TgZ(33,"span",22),d._uU(34,"March 31, 2020"),d.qZA()()()(),d.TgZ(35,"a",12),d._UZ(36,"img",23),d.TgZ(37,"div",14)(38,"div",15)(39,"div",16),d.O4$(),d.TgZ(40,"svg",17),d._UZ(41,"path",18),d.qZA()()()(),d.kcU(),d.TgZ(42,"div",19)(43,"h2",20),d._uU(44,"Game Highlighting Clip"),d.qZA(),d.TgZ(45,"p",21),d._uU(46," Luis Ramirez \xb7 "),d.TgZ(47,"span",22),d._uU(48,"March 31, 2020"),d.qZA()()()(),d.TgZ(49,"a",12),d._UZ(50,"img",24),d.TgZ(51,"div",14)(52,"div",15)(53,"div",16),d.O4$(),d.TgZ(54,"svg",17),d._UZ(55,"path",18),d.qZA()()()(),d.kcU(),d.TgZ(56,"div",19)(57,"h2",20),d._uU(58,"Game Highlighting Clip"),d.qZA(),d.TgZ(59,"p",21),d._uU(60," Luis Ramirez \xb7 "),d.TgZ(61,"span",22),d._uU(62,"March 31, 2020"),d.qZA()()()(),d.TgZ(63,"a",12),d._UZ(64,"img",23),d.TgZ(65,"div",14)(66,"div",15)(67,"div",16),d.O4$(),d.TgZ(68,"svg",17),d._UZ(69,"path",18),d.qZA()()()(),d.kcU(),d.TgZ(70,"div",19)(71,"h2",20),d._uU(72,"Game Highlighting Clip"),d.qZA(),d.TgZ(73,"p",21),d._uU(74," Luis Ramirez \xb7 "),d.TgZ(75,"span",22),d._uU(76,"March 31, 2020"),d.qZA()()()(),d.TgZ(77,"a",12),d._UZ(78,"img",24),d.TgZ(79,"div",14)(80,"div",15)(81,"div",16),d.O4$(),d.TgZ(82,"svg",17),d._UZ(83,"path",18),d.qZA()()()(),d.kcU(),d.TgZ(84,"div",19)(85,"h2",20),d._uU(86,"Game Highlighting Clip"),d.qZA(),d.TgZ(87,"p",21),d._uU(88," Luis Ramirez \xb7 "),d.TgZ(89,"span",22),d._uU(90,"March 31, 2020"),d.qZA()()()(),d.TgZ(91,"a",12),d._UZ(92,"img",13),d.TgZ(93,"div",14)(94,"div",15)(95,"div",16),d.O4$(),d.TgZ(96,"svg",17),d._UZ(97,"path",18),d.qZA()()()(),d.kcU(),d.TgZ(98,"div",19)(99,"h2",20),d._uU(100,"Game Highlighting Clip"),d.qZA(),d.TgZ(101,"p",21),d._uU(102," Luis Ramirez \xb7 "),d.TgZ(103,"span",22),d._uU(104,"March 31, 2020"),d.qZA()()()()()(),d.YNc(105,YR,1,0,"app-auth-modal",25),d.ALo(106,"async")),2&t&&(d.xp6(105),d.Q6J("ngIf",!d.lcZ(106,1,r.auth.isAuthenticatedWithDelay$)))},directives:[mk,or,KR],pipes:[Ya],styles:[""]}),n})(),JR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Ns,oM,FR.forRoot()]]}),n})(),XR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Ns,JR,oM,bR]]}),n})();const tA_firebase={apiKey:"AIzaSyAaapwLuJHwgfSTd69HCvVOEw0qXewodlk",authDomain:"clips-42.firebaseapp.com",projectId:"clips-42",storageBucket:"clips-42.appspot.com",messagingSenderId:"107676987763",appId:"1:107676987763:web:425ddf7115e5e99a495506",measurementId:"G-2LK24R1FYZ"};let eN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[QR]}),n.\u0275inj=d.cJS({providers:[],imports:[[ya,b0,XR,Io.hO.initializeApp(tA_firebase),Bb,fk]]}),n})();(0,d.G48)(),cf.Z.initializeApp(tA_firebase);let hM=!1;cf.Z.auth().onAuthStateChanged(()=>{hM||sl().bootstrapModule(eN).catch(n=>console.error(n)),hM=!0})},5867:(rt,Ce,N)=>{N.d(Ce,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=N(9681);(0,d.registerVersion)("firebase","9.6.10","app")},127:(rt,Ce,N)=>{N.d(Ce,{Z:()=>d.Z});var d=N(3942);d.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(rt,Ce,N)=>{N.r(Ce);var d=N(5861),K=N(3942),O=N(2090),oe=N(9681),J=N(655),ge=N(1877),ae=N(4859);const ke=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new ge.Yd("@firebase/auth");function ze(y,...f){Xe.logLevel<=ge.in.ERROR&&Xe.error(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}function De(y,...f){throw Be(y,...f)}function ve(y,...f){return Be(y,...f)}function we(y,f,g){const v=Object.assign(Object.assign({},Fe()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function He(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&De(y,"argument-error"),we(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return pe.create(y,...f)}function te(y,f,...g){if(!y)throw Be(f,...g)}function z(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ze(f),new Error(f)}function ne(y,f){y||z(f)}const me=new Map;function re(y){ne(y instanceof Function,"Expected a class definition");let f=me.get(y);return f?(ne(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,me.set(y,f),f)}function Et(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Wt(){return"http:"===Tn()||"https:"===Tn()}function Tn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(f,g){this.shortDelay=f,this.longDelay=g,ne(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Wt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(y,f){ne(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class yi{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ji=new sn(3e4,6e4);function Kt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function jt(y,f,g,v){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(y,f,g,v,A={}){return ni(y,A,(0,d.Z)(function*(){let R={},q={};v&&("GET"===f?q=v:R={body:JSON.stringify(v)});const se=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),yi.fetch()(kr(y,y.config.apiHost,g,se),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ni(y,f,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Xt),f);try{const A=new Xi(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw es(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const se=R.ok?q.errorMessage:q.error.message,[Ue,Ye]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw es(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ue)throw es(y,"email-already-in-use",q);const gt=v[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw we(y,gt,Ye);De(y,gt)}}catch(A){if(A instanceof O.ZR)throw A;De(y,"network-request-failed")}})).apply(this,arguments)}function Mr(y,f,g,v){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(y,f,g,v,A={}){const R=yield jt(y,f,g,v,A);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function kr(y,f,g,v){const A=`${f}${g}?${v}`;return y.config.emulator?on(y.config,A):`${y.config.apiScheme}://${A}`}class Xi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ve(this.auth,"network-request-failed")),Ji.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function es(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=ve(y,f,v);return A.customData._tokenResponse=g,A}function Gr(){return(Gr=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Zn(y,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ri(y,f){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function fn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ua(){return(ua=(0,d.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),A=nt(v);te(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:A,token:v,authTime:fn($t(A.auth_time)),issuedAtTime:fn($t(A.iat)),expirationTime:fn($t(A.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function nt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(ze("Failed to decode base64 JWT payload"),null)}catch(A){return ze("Caught error parsing JWT payload as JSON",A),null}}function nr(y,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Ut(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ut({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class no{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class hr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=fn(this.lastLoginAt),this.creationTime=fn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rr(y){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),A=yield nr(y,ri(g,{idToken:v}));te(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const q=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?Te(R.providerUserInfo):[],se=Ze(y.providerData,q),gt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==se?void 0:se.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:se,metadata:new hr(R.createdAt,R.lastLoginAt),isAnonymous:gt};Object.assign(y,it)})).apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield rr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ze(y,f){return[...y.filter(v=>!f.some(A=>A.providerId===v.providerId)),...f]}function Te(y){return y.map(f=>{var{providerId:g}=f,v=(0,J._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ct(){return(ct=(0,d.Z)(function*(y,f){const g=yield ni(y,{},(0,d.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,q=kr(y,A,"/v1/token",`key=${R}`),se=yield y._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",yi.fetch()(q,{method:"POST",headers:se,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){te(f.idToken,"internal-error"),te(void 0!==f.idToken,"internal-error"),te(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function yt(y){const f=nt(y);return te(f,"internal-error"),te(void 0!==f.exp,"internal-error"),te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,d.Z)(function*(){return te(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:q}=yield function Ke(y,f){return ct.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(A,R,Number(q))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:A,expirationTime:R}=g,q=new Lt;return v&&(te("string"==typeof v,"internal-error",{appName:f}),q.refreshToken=v),A&&(te("string"==typeof A,"internal-error",{appName:f}),q.accessToken=A),R&&(te("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Lt,this.toJSON())}_performRefresh(){return z("not implemented")}}function Nt(y,f){te("string"==typeof y||void 0===y,"internal-error",{appName:f})}class B{constructor(f){var{uid:g,auth:v,stsTokenManager:A}=f,R=(0,J._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new no(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new hr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const v=yield nr(g,g.stsTokenManager.getToken(g.auth,f));return te(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function Ts(y){return ua.apply(this,arguments)}(this,f)}reload(){return function fr(y){return Ft.apply(this,arguments)}(this)}_assign(f){this!==f&&(te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new B(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,d.Z)(function*(){let A=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield rr(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield nr(f,function at(y,f){return Gr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,A,R,q,se,Ue,Ye,gt;const it=null!==(v=g.displayName)&&void 0!==v?v:void 0,bn=null!==(A=g.email)&&void 0!==A?A:void 0,Gi=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Ll=null!==(q=g.photoURL)&&void 0!==q?q:void 0,bu=null!==(se=g.tenantId)&&void 0!==se?se:void 0,Cu=null!==(Ue=g._redirectEventId)&&void 0!==Ue?Ue:void 0,nf=null!==(Ye=g.createdAt)&&void 0!==Ye?Ye:void 0,Ay=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:Qo,emailVerified:hd,isAnonymous:fd,providerData:rf,stsTokenManager:pd}=g;te(Qo&&pd,f,"internal-error");const xi=Lt.fromJSON(this.name,pd);te("string"==typeof Qo,f,"internal-error"),Nt(it,f.name),Nt(bn,f.name),te("boolean"==typeof hd,f,"internal-error"),te("boolean"==typeof fd,f,"internal-error"),Nt(Gi,f.name),Nt(Ll,f.name),Nt(bu,f.name),Nt(Cu,f.name),Nt(nf,f.name),Nt(Ay,f.name);const sf=new B({uid:Qo,auth:f,email:bn,emailVerified:hd,displayName:it,isAnonymous:fd,photoURL:Ll,phoneNumber:Gi,tenantId:bu,stsTokenManager:xi,createdAt:nf,lastLoginAt:Ay});return rf&&Array.isArray(rf)&&(sf.providerData=rf.map(qp=>Object.assign({},qp))),Cu&&(sf._redirectEventId=Cu),sf}static _fromIdTokenResponse(f,g,v=!1){return(0,d.Z)(function*(){const A=new Lt;A.updateFromServerResponse(g);const R=new B({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:v});return yield rr(R),R})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,d.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,d.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,d.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function de(y,f,g){return`firebase:${y}:${f}:${g}`}class Y{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:A,name:R}=this.auth;this.fullUserKey=de(this.userKey,A.apiKey,R),this.fullPersistenceKey=de("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?B._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,d.Z)(function*(){if(!g.length)return new Y(re(H),f,v);const A=(yield Promise.all(g.map(function(){var Ye=(0,d.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=A[0]||re(H);const q=de(v,f.config.apiKey,f.name);let se=null;for(const Ye of g)try{const gt=yield Ye._get(q);if(gt){const it=B._fromJSON(f,gt);Ye!==R&&(se=it),R=Ye;break}}catch(gt){}const Ue=A.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],se&&(yield R._set(q,se.toJSON())),yield Promise.all(g.map(function(){var Ye=(0,d.Z)(function*(gt){if(gt!==R)try{yield gt._remove(q)}catch(it){}});return function(gt){return Ye.apply(this,arguments)}}())),new Y(R,f,v)):new Y(R,f,v)})()}}function Ve(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ht(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ft(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Dt(f))return"Blackberry";if(an(f))return"Webos";if(qt(f))return"Safari";if((f.includes("chrome/")||pr(f))&&!f.includes("edge/"))return"Chrome";if(vn(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ft(y=(0,O.z$)()){return/firefox\//i.test(y)}function qt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function pr(y=(0,O.z$)()){return/crios\//i.test(y)}function Ht(y=(0,O.z$)()){return/iemobile/i.test(y)}function vn(y=(0,O.z$)()){return/android/i.test(y)}function Dt(y=(0,O.z$)()){return/blackberry/i.test(y)}function an(y=(0,O.z$)()){return/webos/i.test(y)}function Kn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ts(y=(0,O.z$)()){return Kn(y)||vn(y)||an(y)||Dt(y)||/windows phone/i.test(y)||Ht(y)}function ca(y,f=[]){let g;switch(y){case"Browser":g=Ve((0,O.z$)());break;case"Worker":g=`${Ve((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class ii{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=re(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,R;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,f),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var v;let A=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,q=null==A?void 0:A._redirectEventId,se=yield g.tryRedirectSignIn(f);(!R||R===q)&&(null==se?void 0:se.user)&&(A=se.user)}return A?A._redirectEventId?(te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield rr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ht(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&te(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return f&&te(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(re(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,d.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&re(f)||g._popupRedirectResolver;te(v,g,"argument-error"),g.redirectPersistenceManager=yield Y.create(g,[re(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return te(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ca(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function Re(y){return(0,O.m9)(y)}class St{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ir(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function On(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class en{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return z("not implemented")}_getIdTokenResponse(f){return z("not implemented")}_linkToIdToken(f,g){return z("not implemented")}_getReauthenticationResolver(f){return z("not implemented")}}function An(y,f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:resetPassword",Kt(y,f))})).apply(this,arguments)}function Ct(y,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Fi(y,f){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:update",Kt(y,f))})).apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithPassword",Kt(y,f))})).apply(this,arguments)}function ns(y,f){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:sendOobCode",Kt(y,f))})).apply(this,arguments)}function or(y,f){return tn.apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(y,f){return ns(y,f)})).apply(this,arguments)}function za(y,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(y,f){return ns(y,f)})).apply(this,arguments)}function _i(y,f){return si.apply(this,arguments)}function si(){return(si=(0,d.Z)(function*(y,f){return ns(y,f)})).apply(this,arguments)}function xc(y,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(y,f){return ns(y,f)})).apply(this,arguments)}function qr(){return(qr=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,f))})).apply(this,arguments)}function Mc(){return(Mc=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,f))})).apply(this,arguments)}class Ka extends en{constructor(f,g,v,A=null){super("password",v),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new Ka(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new Ka(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function xs(y,f){return sr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Wa(y,f){return qr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return Ct(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Dh(y,f){return Mc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Pn(y,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithIdp",Kt(y,f))})).apply(this,arguments)}class is extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new is(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):De("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A}=g,R=(0,J._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const q=new is(v,A);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return Pn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Pn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Pn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function wp(y,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:sendVerificationCode",Kt(y,f))})).apply(this,arguments)}function ks(){return(ks=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,f))})).apply(this,arguments)}function Rc(){return(Rc=(0,d.Z)(function*(y,f){const g=yield Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,f));if(g.temporaryProof)throw es(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ip={USER_NOT_FOUND:"user-not-found"};function Nc(){return(Nc=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ip)})).apply(this,arguments)}class No extends en{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new No({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new No({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ku(y,f){return ks.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Ep(y,f){return Rc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function bp(y,f){return Nc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}=f;return v||g||A||R?new No({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:R}):null}}class io{constructor(f){var g,v,A,R,q,se;const Ue=(0,O.zd)((0,O.pd)(f)),Ye=null!==(g=Ue.apiKey)&&void 0!==g?g:null,gt=null!==(v=Ue.oobCode)&&void 0!==v?v:null,it=function Qm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);te(Ye&&gt&&it,"argument-error"),this.apiKey=Ye,this.operation=it,this.code=gt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Ue.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(se=Ue.tenantId)&&void 0!==se?se:null}static parseLink(f){const g=function Qa(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new io(g)}catch(v){return null}}}let Yu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return Ka._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=io.parseLink(v);return te(A,"argument-error"),Ka._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Rs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class zr extends Rs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Oo extends zr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return te("providerId"in g&&"signInMethod"in g,"argument-error"),is._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return te(f.idToken||f.accessToken,"argument-error"),is._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Oo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Oo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:R,nonce:q,providerId:se}=f;if(!v&&!A&&!g&&!R||!se)return null;try{return new Oo(se)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:R})}catch(Ue){return null}}}let so=(()=>{class y extends zr{constructor(){super("facebook.com")}static credential(g){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ha=(()=>{class y extends zr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Oc=(()=>{class y extends zr{constructor(){super("github.com")}static credential(g){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ns extends en{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Pn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Pn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Pn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A,pendingToken:R}=g;return v&&A&&R&&v===A?new Ns(v,R):null}static _create(f,g){return new Ns(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oi extends Rs{constructor(f){te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return oi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return oi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ns.fromJSON(f);return te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Ns._create(v,g)}catch(A){return null}}}let Ja=(()=>{class y extends zr{constructor(){super("twitter.com")}static credential(g,v){return is._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Xa(y,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signUp",Kt(y,f))})).apply(this,arguments)}class ar{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,A=!1){return(0,d.Z)(function*(){const R=yield B._fromIdTokenResponse(f,v,A),q=Ah(v);return new ar({user:R,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const A=Ah(v);return new ar({user:f,providerId:A,_tokenResponse:v,operationType:g})})()}}function Ah(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Pc(){return(Pc=(0,d.Z)(function*(y){var f;const g=Re(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ar({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Xa(g,{returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class tu extends O.ZR{constructor(f,g,v,A){var R;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,tu.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,A){return new tu(f,g,v,A)}}function nu(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?tu._fromErrorAndOperation(y,R,f,v):R})}function ss(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Qu(){return(Qu=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);yield Ps(!0,g,f);const{providerUserInfo:v}=yield Zn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=ss(v||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function hn(y,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(y,f,g=!1){const v=yield nr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ar._forOperation(y,"link",v)})).apply(this,arguments)}function Ps(y,f,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(y,f,g){yield rr(f);const A=!1===y?"provider-already-linked":"no-such-provider";te(ss(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function Fc(y,f){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(y,f,g=!1){const{auth:v}=y,A="reauthenticate";try{const R=yield nr(y,nu(v,A,f,y),g);te(R.idToken,v,"internal-error");const q=nt(R.idToken);te(q,v,"internal-error");const{sub:se}=q;return te(y.uid===se,v,"user-mismatch"),ar._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function ao(y,f){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(y,f,g=!1){const v="signIn",A=yield nu(y,v,f),R=yield ar._fromIdTokenResponse(y,v,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(y,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(y,f){return ao(Re(y),f)})).apply(this,arguments)}function vi(y,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Ps(!1,g,f.providerId),hn(g,f)})).apply(this,arguments)}function Fs(y,f){return os.apply(this,arguments)}function os(){return(os=(0,d.Z)(function*(y,f){return Fc((0,O.m9)(y),f)})).apply(this,arguments)}function ru(y,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(y,f){return Mr(y,"POST","/v1/accounts:signInWithCustomToken",Kt(y,f))})).apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(y,f){const g=Re(y),v=yield ru(g,{token:f,returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class dt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?iu._fromServerResponse(f,g):De(f,"internal-error")}}class iu extends dt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new iu(g)}}function ga(y,f,g){var v;te((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),te(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(te(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(te(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function ou(){return(ou=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&ga(v,A,g),yield za(v,A)})).apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(y,f,g){yield An((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(y,f){yield Fi((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ot(y,f){return el.apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield An(g,{oobCode:f}),A=v.requestType;switch(te(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(v.mfaInfo,g,"internal-error");default:te(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=dt._fromServerResponse(Re(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(y,f){const{data:g}=yield Ot((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(y,f,g){const v=Re(y),A=yield Xa(v,{returnSecureToken:!0,email:f,password:g}),R=yield ar._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};te(g.handleCodeInApp,v,"argument-error"),g&&ga(v,A,g),yield _i(v,A)})).apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=Yu.credentialWithLink(f,g||Et());return te(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,A)})).apply(this,arguments)}function ur(y,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:createAuthUri",Kt(y,f))})).apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(y,f){const v={identifier:f,continueUri:Wt()?Et():"http://localhost"},{signinMethods:A}=yield ur((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ga(g.auth,A,f);const{email:R}=yield or(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function du(){return(du=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ga(v.auth,R,g);const{email:q}=yield xc(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function sl(y,f){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(y,f){return jt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield nr(v,sl(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const se=v.providerData.find(({providerId:Ue})=>"password"===Ue);se&&(se.displayName=v.displayName,se.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function ul(y,f,g){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield nr(y,Ct(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class lo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Bc extends lo{constructor(f,g,v,A){super(f,g,v),this.username=A}}class jc extends lo{constructor(f,g){super(f,"facebook.com",g)}}class co extends Bc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class js extends lo{constructor(f,g){super(f,"google.com",g)}}class ll extends Bc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function yr(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Uc(y){var f,g;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(f=nt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new lo(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new jc(R,A);case"github.com":return new co(R,A);case"google.com":return new js(R,A);case"twitter.com":return new ll(R,A,y.screenName||null);case"custom":case"anonymous":return new lo(R,null);default:return new lo(R,v,A)}}(g)}class as{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new as("enroll",f)}static _fromMfaPendingCredential(f){return new as("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return as._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return as._fromIdtoken(f.multiFactorSession.idToken)}return null}}class _a{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=Re(f),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(se=>dt._fromServerResponse(v,se));te(A.mfaPendingCredential,v,"internal-error");const q=as._fromMfaPendingCredential(A.mfaPendingCredential);return new _a(q,R,function(){var se=(0,d.Z)(function*(Ue){const Ye=yield Ue._process(v,q);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(g.operationType){case"signIn":const it=yield ar._fromIdTokenResponse(v,g.operationType,gt);return yield v._updateCurrentUser(it.user),it;case"reauthenticate":return te(g.user,v,"internal-error"),ar._forOperation(g.user,g.operationType,gt);default:De(v,"internal-error")}});return function(Ue){return se.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function Fn(y,f){return jt(y,"POST","/v2/accounts/mfaEnrollment:start",Kt(y,f))}class us{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>dt._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new us(f)}getSession(){var f=this;return(0,d.Z)(function*(){return as._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,d.Z)(function*(){const A=f,R=yield v.getSession(),q=yield nr(v.user,A._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const v="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),R=yield nr(g.user,function Dp(y,f){return jt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Vo=new WeakMap,hl="__sak";class ho{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(hl,"1"),this.storage.removeItem(hl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mn=(()=>{class y extends ho{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function qc(){const y=(0,O.z$)();return qt(y)||Kn(y)}()&&function $n(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ts(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),R=this.localCache[v];A!==R&&g(v,R,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((se,Ue,Ye)=>{this.notifyListeners(se,Ye)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(A);if(g.newValue!==se)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const R=()=>{const se=this.storage.getItem(A);!v&&this.localCache[A]===se||this.notifyListeners(A,se)},q=this.storage.getItem(A);!function la(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,R=this;return(0,d.Z)(function*(){yield A().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,d.Z)(function*(){const R=yield v().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,A=this;return(0,d.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),lr=(()=>{class y extends ho{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Rr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,d.Z)(function*(){const A=g,{eventId:R,eventType:q,data:se}=A.data,Ue=v.handlersMap[q];if(!(null==Ue?void 0:Ue.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Ye=Array.from(Ue).map(function(){var it=(0,d.Z)(function*(bn){return bn(A.origin,se)});return function(bn){return it.apply(this,arguments)}}()),gt=yield function Yr(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ye);A.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:gt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Uo(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class zc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var A=this;return(0,d.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,se;return new Promise((Ue,Ye)=>{const gt=Uo("",20);R.port1.start();const it=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);se={messageChannel:R,onMessage(bn){const Gi=bn;if(Gi.data.eventId===gt)switch(Gi.data.status){case"ack":clearTimeout(it),q=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ue(Gi.data.response);break;default:clearTimeout(it),clearTimeout(q),Ye(new Error("invalid_response"))}}},A.handlers.add(se),R.port1.addEventListener("message",se.onMessage),A.target.postMessage({eventType:f,eventId:gt,data:g},[R.port2])}).finally(()=>{se&&A.removeMessageHandler(se)})})()}}function ln(){return window}function Ei(){return void 0!==ln().WorkerGlobalScope&&"function"==typeof ln().importScripts}function ui(){return(ui=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const fl="firebaseLocalStorageDb",fo="firebaseLocalStorage",kn="fbase_key";class ls{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Bo(y,f){return y.transaction([fo],f?"readwrite":"readonly").objectStore(fo)}function Hs(){const y=indexedDB.open(fl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(fo,{keyPath:kn})}catch(A){g(A)}}),y.addEventListener("success",(0,d.Z)(function*(){const v=y.result;v.objectStoreNames.contains(fo)?f(v):(v.close(),yield function li(){const y=indexedDB.deleteDatabase(fl);return new ls(y).toPromise()}(),f(yield Hs()))}))})}function va(y,f,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(y,f,g){const v=Bo(y,!0).put({[kn]:f,value:g});return new ls(v).toPromise()})).apply(this,arguments)}function Gs(){return(Gs=(0,d.Z)(function*(y,f){const g=Bo(y,!1).get(f),v=yield new ls(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Vi(y,f){const g=Bo(y,!0).delete(f);return new ls(g).toPromise()}const Ii=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield Hs()),g.db})()}_withRetries(g){var v=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(A++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Ei()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Rr._getInstance(function Zc(){return Ei()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,d.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,d.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function fu(){return ui.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new zc(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,d.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function xt(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Hs();return yield va(g,hl,"1"),yield Vi(g,hl),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,d.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(R=>va(R,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,d.Z)(function*(){const A=yield v._withRetries(R=>function pl(y,f){return Gs.apply(this,arguments)}(R,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,d.Z)(function*(){return v._withPendingWrite((0,d.Z)(function*(){return yield v._withRetries(A=>Vi(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const v=yield g._withRetries(q=>{const se=Bo(q,!1).getAll();return new ls(se).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:q,value:se}of v)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(se)&&(g.notifyListeners(q,se),A.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function $o(y,f){return jt(y,"POST","/v2/accounts/mfaSignIn:start",Kt(y,f))}function bi(){return(bi=(0,d.Z)(function*(y){return(yield jt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rn(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=A=>{const R=ve("internal-error");R.customData=A,g(R)},v.type="text/javascript",v.charset="UTF-8",function Kc(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function qs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const vr=1e12;class cs{constructor(f){this.auth=f,this.counter=vr,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Ui(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||vr;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||vr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var v;return null===(v=g._widgets.get(f||vr))||void 0===v||v.execute(),""})()}}class Ui{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;te(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mn(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zs=qs("rcb"),Yc=new sn(3e4,6e4);class Ap{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha}load(f,g=""){return te(function Sp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(ln().grecaptcha):new Promise((v,A)=>{const R=ln().setTimeout(()=>{A(ve(f,"network-request-failed"))},Yc.get());ln()[zs]=()=>{ln().clearTimeout(R),delete ln()[zs];const se=ln().grecaptcha;if(!se)return void A(ve(f,"internal-error"));const Ue=se.render;se.render=(Ye,gt)=>{const it=Ue(Ye,gt);return this.counter++,it},this.hostLanguage=g,v(se)},Rn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:zs,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!ln().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xp{load(f){return(0,d.Z)(function*(){return new cs(f)})()}clearedOneInstance(){}}const Zs="recaptcha",Qr={theme:"light",type:"image"};class Mp{constructor(f,g=Object.assign({},Qr),v){this.parameters=g,this.type=Zs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;te(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xp:new Ap,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const q=se=>{!se||(f.tokenChangeListeners.delete(q),R(se))};f.tokenChangeListeners.add(q),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=ln()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){te(Wt()&&!Ei(),f.auth,"internal-error"),yield function Ws(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function _r(y){return bi.apply(this,arguments)}(f.auth);te(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ds{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=No._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function yn(){return(yn=(0,d.Z)(function*(y,f,g){const v=Re(y),A=yield wr(v,f,(0,O.m9)(g));return new ds(A,R=>Sn(v,R))})).apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Ps(!1,v,"phone");const A=yield wr(v.auth,f,(0,O.m9)(g));return new ds(A,R=>vi(v,R))})).apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=yield wr(v.auth,f,(0,O.m9)(g));return new ds(A,R=>Fs(v,R))})).apply(this,arguments)}function wr(y,f,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(y,f,g){var v;const A=yield g.verify();try{let R;if(te("string"==typeof A,y,"argument-error"),te(g.type===Zs,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return te("enroll"===q.type,y,"internal-error"),(yield Fn(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{te("signin"===q.type,y,"internal-error");const se=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return te(se,y,"missing-multi-factor-info"),(yield $o(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield wp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return q}}finally{g._reset()}})).apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(y,f){yield hn((0,O.m9)(y),f)})).apply(this,arguments)}let Di=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Re(g)}verifyPhoneNumber(g,v){return wr(this.auth,g,(0,O.m9)(v))}static credential(g,v){return No._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?No._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Bi(y,f){return f?re(f):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ea extends en{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Pn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Pn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Pn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function wl(y){return ao(y.auth,new Ea(y),y.bypassAuthState)}function El(y){const{auth:f,user:g}=y;return te(g,f,"internal-error"),Fc(g,new Ea(y),y.bypassAuthState)}function Mt(y){return Il.apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return te(g,f,"internal-error"),hn(g,new Ea(y),y.bypassAuthState)})).apply(this,arguments)}class Hn{constructor(f,g,v,A,R=!1){this.auth=f,this.resolver=v,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(v,A){f.pendingPromise={resolve:v,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:R,tenantId:q,error:se,type:Ue}=f;if(se)return void g.reject(se);const Ye={auth:g.auth,requestUri:v,sessionId:A,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ue)(Ye))}catch(gt){g.reject(gt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return wl;case"linkViaPopup":case"linkViaRedirect":return Mt;case"reauthViaPopup":case"reauthViaRedirect":return El;default:De(this.auth,"internal-error")}}resolve(f){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bl=new sn(2e3,1e4);function Qc(){return(Qc=(0,d.Z)(function*(y,f,g){const v=Re(y);He(y,f,Rs);const A=Bi(v,g);return new $i(v,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);He(v.auth,f,Rs);const A=Bi(v.auth,g);return new $i(v.auth,"reauthViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}function mu(){return(mu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);He(v.auth,f,Rs);const A=Bi(v.auth,g);return new $i(v.auth,"linkViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}let $i=(()=>{class y extends Hn{constructor(g,v,A,R,q){super(g,v,R,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const v=yield g.execute();return te(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,d.Z)(function*(){ne(1===g.filter.length,"Popup operations only handle one event");const v=Uo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,bl.get())};g()}}return y.currentPopupAction=null,y})();const Hi=new Map;class Gn extends Hn{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let v=Hi.get(g.auth._key());if(!v){try{const R=(yield function di(y,f){return Cl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(A){v=()=>Promise.reject(A)}Hi.set(g.auth._key(),v)}return g.bypassAuthState||Hi.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const A=yield v.auth._redirectUserForId(f.eventId);if(A)return v.user=A,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Cl(){return(Cl=(0,d.Z)(function*(y,f){const g=D(f),v=b(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function go(y,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,d.Z)(function*(y,f){return b(y)._set(D(f),"true")})).apply(this,arguments)}function b(y){return re(y._redirectPersistence)}function D(y){return de("pendingRedirect",y.config.apiKey,y.name)}function Z(){return(Z=(0,d.Z)(function*(y,f,g){const v=Re(y);He(y,f,Rs);const A=Bi(v,g);return yield go(A,v),A._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);He(v.auth,f,Rs);const A=Bi(v.auth,g);yield go(A,v.auth);const R=yield mo(v);return A._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Tt(){return(Tt=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);He(v.auth,f,Rs);const A=Bi(v.auth,g);yield Ps(!1,v,f.providerId),yield go(A,v.auth);const R=yield mo(v);return A._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function Ln(){return(Ln=(0,d.Z)(function*(y,f){return yield Re(y)._initializationPromise,In(y,f,!1)})).apply(this,arguments)}function In(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(y,f,g=!1){const v=Re(y),A=Bi(v,f),q=yield new Gn(v,A,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,f)),q})).apply(this,arguments)}function mo(y){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,d.Z)(function*(y){const f=Uo(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ti{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Dl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xc(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Xc(f)){const A=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yo(f))}saveEventToCache(f){this.cachedEventUids.add(yo(f)),this.lastProcessedEventTime=Date.now()}}function yo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Xc({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Tl(y){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(y,f={}){return jt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Rp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ey=/^https?/;function fs(){return(fs=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Tl(y);for(const g of f)try{if(Al(g))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Al(y){const f=Et(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!ey.test(g))return!1;if(Rp.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const ny=new sn(3e4,6e4);function ry(){const y=ln().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ed=null;function iy(y){return ed=ed||function Np(y){return new Promise((f,g)=>{var v,A,R;function q(){ry(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ry(),g(ve(y,"network-request-failed"))},timeout:ny.get()})}if(null===(A=null===(v=ln().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=ln().gapi)||void 0===R?void 0:R.load)){const se=qs("iframefcb");return ln()[se]=()=>{gapi.load?q():g(ve(y,"network-request-failed"))},Rn(`https://apis.google.com/js/api.js?onload=${se}`).catch(Ue=>g(Ue))}q()}}).catch(f=>{throw ed=null,f})}(y),ed}const Mh=new sn(5e3,15e3),vo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},td=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ba(y){const f=y.config;te(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?on(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:oe.SDK_VERSION},A=td.get(y.config.apiHost);A&&(v.eid=A);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function Zo(){return Zo=(0,d.Z)(function*(y){const f=yield iy(y),g=ln().gapi;return te(g,y,"internal-error"),f.open({where:document.body,url:ba(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vo,dontclear:!0},v=>new Promise(function(){var A=(0,d.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const se=ve(y,"network-request-failed"),Ue=ln().setTimeout(()=>{q(se)},Mh.get());function Ye(){ln().clearTimeout(Ue),R(v)}v.ping(Ye).then(Ye,()=>{q(se)})});return function(R,q){return A.apply(this,arguments)}}()))}),Zo.apply(this,arguments)}const oy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class id{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Oh(y,f,g,v,A,R){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:A};if(f instanceof Rs){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,Ye]of Object.entries(R||{}))q[Ue]=Ye}if(f instanceof zr){const Ue=f.getScopes().filter(Ye=>""!==Ye);Ue.length>0&&(q.scopes=Ue.join(","))}y.tenantId&&(q.tid=y.tenantId);const se=q;for(const Ue of Object.keys(se))void 0===se[Ue]&&delete se[Ue];return`${function uy({config:y}){return y.emulator?on(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(se).slice(1)}`}const Ys="webStorageSupport";class Ph extends class Op{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return z("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Ph(f)}_finalizeEnroll(f,g,v){return function Hc(y,f){return jt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function wa(y,f){return jt(y,"POST","/v2/accounts/mfaSignIn:finalize",Kt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ly=(()=>{class y{constructor(){}static assertion(g){return Ph._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var cy="@firebase/auth",Fh="0.19.11";class Pp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var A;f((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qs(){return window}function wu(){return(wu=(0,d.Z)(function*(y,f,g){var v;const{BuildInfo:A}=Qs();ne(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Ca(f.sessionId),q={};return Kn()?q.ibi=A.packageName:vn()?q.apn=A.packageName:De(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=R,Oh(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(y){const{BuildInfo:f}=Qs(),g={};Kn()?g.iosBundleId=f.packageName:vn()?g.androidPackageName=f.packageName:De(y,"operation-not-supported-in-this-environment"),yield Tl(y,g)})).apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(y,f,g){const{cordova:v}=Qs();let A=()=>{};try{yield new Promise((R,q)=>{let se=null;function Ue(){var it;R();const bn=null===(it=v.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof bn&&bn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ye(){se||(se=window.setTimeout(()=>{q(ve(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}f.addPassiveListener(Ue),document.addEventListener("resume",Ye,!1),vn()&&document.addEventListener("visibilitychange",gt,!1),A=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",gt,!1),se&&window.clearTimeout(se)}})}finally{A()}})).apply(this,arguments)}function Ca(y){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,d.Z)(function*(y){const f=Eu(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Eu(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function hy(y){(0,oe._registerComponent)(new ae.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=v.options;return((se,Ue)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:se.name}),te(!(null==q?void 0:q.includes(":")),"argument-error",{appName:se.name});const Ye={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ca(y)},gt=new ii(se,Ue,Ye);return function ue(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(re);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(gt,g),gt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ae.wA("auth-internal",f=>{const g=Re(f.getProvider("auth").getImmediate());return new Pp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(cy,Fh,function dy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(cy,Fh,"esm2017")}("Browser");class Bh extends Ti{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Ml(y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(y){const f=yield ud()._get($h(y));return f&&(yield ud()._remove($h(y))),f})).apply(this,arguments)}function kl(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function ud(){return re(Mn)}function $h(y){return de("authEvent",y.config.apiKey,y.name)}function ld(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function zh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function cd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Up(y=(0,O.z$)()){return!("file:"!==cd()&&"ionic:"!==cd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){try{const y=self.localStorage,f=Uo();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Yo(y=(0,O.z$)()){return function yy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function _y(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return wo()&&(0,O.hl)()}return!1}function wo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ol(){return(function my(){return"http:"===cd()||"https:"===cd()}()||(0,O.ru)()||Up())&&!function dd(){return(0,O.b$)()||(0,O.UG)()}()&&Er()&&!wo()}function Zh(){return Up()&&"undefined"!=typeof document}function Da(){return(Da=(0,d.Z)(function*(){return!!Zh()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Si={LOCAL:"local",NONE:"none",SESSION:"session"},Ta=te,Kh="persistence";function Aa(y){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,d.Z)(function*(y){yield y._initializationPromise;const f=Pl(),g=de(Kh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Pl(){var y;try{return(null===(y=function Wh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const vy=te;class fi{constructor(){this.browserResolver=re(class Wo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=In}_openPopup(f,g,v,A){var R=this;return(0,d.Z)(function*(){var q;ne(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const se=Oh(f,g,v,Et(),A);return function sd(y,f,g,v=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let se="";const Ue=Object.assign(Object.assign({},oy),{width:v.toString(),height:A.toString(),top:R,left:q}),Ye=(0,O.z$)().toLowerCase();g&&(se=pr(Ye)?"_blank":g),ft(Ye)&&(f=f||"http://localhost",Ue.scrollbars="yes");const gt=Object.entries(Ue).reduce((bn,[Gi,Ll])=>`${bn}${Gi}=${Ll},`,"");if(function qa(y=(0,O.z$)()){var f;return Kn(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ye)&&"_self"!==se)return function Nh(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",se),new id(null);const it=window.open(f||"",se,gt);te(it,y,"popup-blocked");try{it.focus()}catch(bn){}return new id(it)}(f,se,Uo())})()}_openRedirect(f,g,v,A){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(f),function xh(y){ln().location.href=y}(Oh(f,g,v,Et(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(ne(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const v=yield function sy(y){return Zo.apply(this,arguments)}(f),A=new Ti(f);return v.register("authEvent",R=>(te(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=v,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ys,{type:Ys},A=>{var R;const q=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Ys];void 0!==q&&g(!!q),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ty(y){return fs.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ts()||qt()||Kn()}}),this.cordovaResolver=re(class qh{constructor(){this._redirectPersistence=lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=In}_initialize(f){var g=this;return(0,d.Z)(function*(){const v=f._key();let A=g.eventManagers.get(v);return A||(A=new Bh(f),g.eventManagers.set(v,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){De(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,A){var R=this;return(0,d.Z)(function*(){!function ad(y){var f,g,v,A,R,q,se,Ue,Ye,gt;const it=Qs();te("function"==typeof(null===(f=null==it?void 0:it.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(g=null==it?void 0:it.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(A=null===(v=null==it?void 0:it.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(Ue=null===(se=null===(q=null==it?void 0:it.cordova)||void 0===q?void 0:q.plugins)||void 0===se?void 0:se.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(gt=null===(Ye=null==it?void 0:it.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function yu(){Hi.clear()}(),yield R._originValidation(f);const se=function jh(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:kl(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(f,v,A);yield function p0(y,f){return ud()._set($h(y),f)}(f,se);const Ue=yield function Lh(y,f,g){return wu.apply(this,arguments)}(f,se,g),Ye=yield function xl(y){const{cordova:f}=Qs();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let A=null;v?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function ro(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Ue);return function Fp(y,f,g){return od.apply(this,arguments)}(f,q,Ye)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Vh(y){return Ai.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:R}=Qs(),q=setTimeout((0,d.Z)(function*(){yield Ml(f),g.onEvent(zh())}),500),se=function(){var gt=(0,d.Z)(function*(it){clearTimeout(q);const bn=yield Ml(f);let Gi=null;bn&&(null==it?void 0:it.url)&&(Gi=function py(y,f){var g,v;const A=function Rl(y){const f=ld(y),g=f.link?decodeURIComponent(f.link):void 0,v=ld(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ld(A).link||A||v||g||y}(f);if(A.includes("/__/auth/callback")){const R=ld(A),q=R.firebaseError?function Hh(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,se=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ue=se?ve(se):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(bn,it.url)),g.onEvent(Gi||zh())});return function(bn){return gt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,se);const Ue=A,Ye=`${R.packageName.toLowerCase()}://`;Qs().handleOpenURL=function(){var gt=(0,d.Z)(function*(it){if(it.toLowerCase().startsWith(Ye)&&se({url:it}),"function"==typeof Ue)try{Ue(it)}catch(bn){console.error(bn)}});return function(it){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=lr,this._completeRedirectFn=In}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,A){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,A)})()}_openRedirect(f,g,v,A){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Zh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Or(){return Da.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function $p(y){return y.unwrap()}function Sa(y){return Hp(y)}function Hp(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Di.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=ha;break;case"facebook.com":v=so;break;case"github.com":v=Oc;break;case"twitter.com":v=Ja;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:se,nonce:Ue}=f;return R||q||A||se?se?g.startsWith("saml.")?Ns._create(g,se):is._fromParams({providerId:g,signInMethod:g,pendingToken:se,idToken:A,accessToken:R}):new Oo(g).credential({idToken:A,accessToken:R,rawNonce:Ue}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Ir(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Ey(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Iy(y,function hu(y,f){var g;const v=(0,O.m9)(y),A=f;return te(f.customData.operationType,v,"argument-error"),te(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),_a._fromError(v,A)}(y,f));else if(v){const A=Hp(f),R=f;A&&(R.credential=A,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Sa(g),additionalUserInfo:yr(g),user:Eo.getOrCreate(A)}})}function Qh(y,f){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>Ir(y,g.confirm(v))}})).apply(this,arguments)}class Iy{constructor(f,g){this.resolver=g,this.auth=function wy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ir($p(this.auth),this.resolver.resolveSignIn(f))}}class Eo{constructor(f){this._delegate=f,this.multiFactor=function Gc(y){const f=(0,O.m9)(y);return Vo.has(f)||Vo.set(f,us._fromUser(f)),Vo.get(f)}(f)}static getOrCreate(f){return Eo.USER_MAP.has(f)||Eo.USER_MAP.set(f,new Eo(f)),Eo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return Ir(g.auth,vi(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,d.Z)(function*(){return Qh(v.auth,function yl(y,f,g){return Go.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return Ir(g.auth,function ji(y,f,g){return mu.apply(this,arguments)}(g._delegate,f,fi))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield Aa(Re(g.auth)),function We(y,f,g){return function _t(y,f,g){return Tt.apply(this,arguments)}(y,f,g)}(g._delegate,f,fi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return Ir(g.auth,Fs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Qh(this.auth,function kp(y,f,g){return _l.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ir(this.auth,function po(y,f,g){return gu.apply(this,arguments)}(this._delegate,f,fi))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield Aa(Re(g.auth)),function X(y,f,g){return function Se(y,f,g){return xe.apply(this,arguments)}(y,f,g)}(g._delegate,f,fi)})()}sendEmailVerification(f){return function wi(y,f){return il.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function fa(y,f){return Qu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function al(y,f){return ul((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Vc(y,f){return ul((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function vl(y,f){return hs.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ya(y,f){return ol.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function cu(y,f,g){return du.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Eo.USER_MAP=new WeakMap;const Fl=te;let Xh=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Fl(A,"invalid-api-key",{appName:g.name}),Fl(A,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?fi:void 0;this._delegate=v.initialize({options:{persistence:by(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function un(y,f,g){const v=Re(y);te(v._canInitEmulator,v,"emulator-config-failed"),te(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=ir(f),{host:q,port:se}=function As(y){const f=ir(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const R=A[1];return{host:R,port:On(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:On(q)}}}(f);v.config.emulator={url:`${R}//${q}${null===se?"":`:${se}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:se,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Pi(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function Xu(y,f){return be.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ot(this._delegate,g)}confirmPasswordReset(g,v){return function au(y,f,g){return Ju.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,d.Z)(function*(){return Ir(A._delegate,function Lo(y,f,g){return Kr.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function lu(y,f){return Bs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function rl(y,f){const g=io.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){Fl(Ol(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function It(y,f){return Ln.apply(this,arguments)}(g._delegate,fi);return v?Ir(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Vp(y,f){Re(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:R,error:q,complete:se}=ef(g,v,A);return this._delegate.onAuthStateChanged(R,q,se)}onIdTokenChanged(g,v,A){const{next:R,error:q,complete:se}=ef(g,v,A);return this._delegate.onIdTokenChanged(R,q,se)}sendSignInLinkToEmail(g,v){return function nl(y,f,g){return Lc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function su(y,f,g){return ou.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,d.Z)(function*(){let A;switch(function Bp(y,f){Ta(Object.values(Si).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Ta(f!==Si.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ta(f===Si.NONE,y,"unsupported-persistence-type"):wo()?Ta(f===Si.NONE||f===Si.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ta(f===Si.NONE||Er(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Si.SESSION:A=lr;break;case Si.LOCAL:A=(yield re(Ii)._isAvailable())?Ii:Mn;break;case Si.NONE:A=H;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ir(this._delegate,function eu(y){return Pc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ir(this._delegate,Sn(this._delegate,g))}signInWithCustomToken(g){return Ir(this._delegate,function Ls(y,f){return Vs.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Ir(this._delegate,function tl(y,f,g){return Sn((0,O.m9)(y),Yu.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Ir(this._delegate,function uu(y,f,g){return Us.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Qh(this._delegate,function pu(y,f,g){return yn.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,d.Z)(function*(){return Fl(Ol(),v._delegate,"operation-not-supported-in-this-environment"),Ir(v._delegate,function Ks(y,f,g){return Qc.apply(this,arguments)}(v._delegate,g,fi))})()}signInWithRedirect(g){var v=this;return(0,d.Z)(function*(){return Fl(Ol(),v._delegate,"operation-not-supported-in-this-environment"),yield Aa(v._delegate),function M(y,f,g){return function F(y,f,g){return Z.apply(this,arguments)}(y,f,g)}(v._delegate,g,fi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function pn(y,f){return Fo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Si,y})();function ef(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const A=v;return{next:q=>A(q&&Eo.getOrCreate(q)),error:f,complete:g}}function by(y,f){const g=function jp(y,f){const g=Pl();if(!g)return[];const v=de(Kh,y,f);switch(g.getItem(v)){case Si.NONE:return[H];case Si.LOCAL:return[Ii,lr];case Si.SESSION:return[lr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Ii)&&g.push(Ii),"undefined"!=typeof window)for(const v of[Mn,lr])g.includes(v)||g.push(v);return g.includes(H)||g.push(H),g}class tf{constructor(){this.providerId="phone",this._delegate=new Di($p(K.Z.auth()))}static credential(f,g){return Di.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}tf.PHONE_SIGN_IN_METHOD=Di.PHONE_SIGN_IN_METHOD,tf.PROVIDER_ID=Di.PROVIDER_ID;const Cy=te;class Dy{constructor(f,g,v=K.Z.app()){var A;Cy(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Mp(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Gp(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Xh(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Yu,FacebookAuthProvider:so,GithubAuthProvider:Oc,GoogleAuthProvider:ha,OAuthProvider:Oo,SAMLAuthProvider:oi,PhoneAuthProvider:tf,PhoneMultiFactorGenerator:ly,RecaptchaVerifier:Dy,TwitterAuthProvider:Ja,Auth:Xh,AuthCredential:en,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(K.Z)},8306:(rt,Ce,N)=>{N.d(Ce,{y:()=>j});var d=N(930),K=N(727),O=N(8822),oe=N(4671);var ae=N(2416),he=N(576),le=N(2806);let j=(()=>{class Ae{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const pe=new Ae;return pe.source=this,pe.operator=Fe,pe}subscribe(Fe,pe,Ee){const Xe=function qe(Ae){return Ae&&Ae instanceof d.Lv||function Q(Ae){return Ae&&(0,he.m)(Ae.next)&&(0,he.m)(Ae.error)&&(0,he.m)(Ae.complete)}(Ae)&&(0,K.Nn)(Ae)}(Fe)?Fe:new d.Hp(Fe,pe,Ee);return(0,le.x)(()=>{const{operator:ze,source:De}=this;Xe.add(ze?ze.call(Xe,De):De?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(pe){Fe.error(pe)}}forEach(Fe,pe){return new(pe=$(pe))((Ee,Xe)=>{const ze=new d.Hp({next:De=>{try{Fe(De)}catch(ve){Xe(ve),ze.unsubscribe()}},error:Xe,complete:Ee});this.subscribe(ze)})}_subscribe(Fe){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Fe)}[O.L](){return this}pipe(...Fe){return function ge(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function(Fe){return Ae.reduce((pe,Ee)=>Ee(pe),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=$(Fe))((pe,Ee)=>{let Xe;this.subscribe(ze=>Xe=ze,ze=>Ee(ze),()=>pe(Xe))})}}return Ae.create=ke=>new Ae(ke),Ae})();function $(Ae){var ke;return null!==(ke=null!=Ae?Ae:ae.v.Promise)&&void 0!==ke?ke:Promise}},7579:(rt,Ce,N)=>{N.d(Ce,{x:()=>ae});var d=N(8306),K=N(727);const oe=(0,N(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=N(8737),ge=N(2806);let ae=(()=>{class le extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Q=new he(this,this);return Q.operator=$,Q}_throwIfClosed(){if(this.closed)throw new oe}next($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next($)}})}error($){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Q}=this;for(;Q.length;)Q.shift().error($)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Q,isStopped:qe,observers:Ae}=this;return Q||qe?K.Lc:(this.currentObservers=null,Ae.push($),new K.w0(()=>{this.currentObservers=null,(0,J.P)(Ae,$)}))}_checkFinalizedStatuses($){const{hasError:Q,thrownError:qe,isStopped:Ae}=this;Q?$.error(qe):Ae&&$.complete()}asObservable(){const $=new d.y;return $.source=this,$}}return le.create=(j,$)=>new he(j,$),le})();class he extends ae{constructor(j,$){super(),this.destination=j,this.source=$}next(j){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Q||Q.call($,j)}error(j){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Q||Q.call($,j)}complete(){var j,$;null===($=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===$||$.call(j)}_subscribe(j){var $,Q;return null!==(Q=null===($=this.source)||void 0===$?void 0:$.subscribe(j))&&void 0!==Q?Q:K.Lc}}},930:(rt,Ce,N)=>{N.d(Ce,{Hp:()=>Fe,Lv:()=>Q});var d=N(576),K=N(727),O=N(2416),oe=N(7849),J=N(5032);const ge=le("C",void 0,void 0);function le(De,ve,we){return{kind:De,value:ve,error:we}}var j=N(3410),$=N(2806);class Q extends K.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,K.Nn)(ve)&&ve.add(this)):this.destination=ze}static create(ve,we,He){return new Fe(ve,we,He)}next(ve){this.isStopped?Xe(function he(De){return le("N",De,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Xe(function ae(De){return le("E",void 0,De)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Xe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Ae(De,ve){return qe.call(De,ve)}class ke{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:we}=this;if(we.next)try{we.next(ve)}catch(He){pe(He)}}error(ve){const{partialObserver:we}=this;if(we.error)try{we.error(ve)}catch(He){pe(He)}else pe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(we){pe(we)}}}class Fe extends Q{constructor(ve,we,He){let Be;if(super(),(0,d.m)(ve)||!ve)Be={next:null!=ve?ve:void 0,error:null!=we?we:void 0,complete:null!=He?He:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(ve),te.unsubscribe=()=>this.unsubscribe(),Be={next:ve.next&&Ae(ve.next,te),error:ve.error&&Ae(ve.error,te),complete:ve.complete&&Ae(ve.complete,te)}):Be=ve}this.destination=new ke(Be)}}function pe(De){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(De):(0,oe.h)(De)}function Xe(De,ve){const{onStoppedNotification:we}=O.v;we&&j.z.setTimeout(()=>we(De,ve))}const ze={closed:!0,next:J.Z,error:function Ee(De){throw De},complete:J.Z}},727:(rt,Ce,N)=>{N.d(Ce,{Lc:()=>ge,w0:()=>J,Nn:()=>ae});var d=N(576);const O=(0,N(3888).d)(le=>function($){le(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Q,qe)=>`${qe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var oe=N(8737);class J{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ae of $)Ae.remove(this);else $.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(Ae){j=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Ae of qe)try{he(Ae)}catch(ke){j=null!=j?j:[],ke instanceof O?j=[...j,...ke.errors]:j.push(ke)}}if(j)throw new O(j)}}add(j){var $;if(j&&j!==this)if(this.closed)he(j);else{if(j instanceof J){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(j)}}_hasParent(j){const{_parentage:$}=this;return $===j||Array.isArray($)&&$.includes(j)}_addParent(j){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(j),$):$?[$,j]:j}_removeParent(j){const{_parentage:$}=this;$===j?this._parentage=null:Array.isArray($)&&(0,oe.P)($,j)}remove(j){const{_finalizers:$}=this;$&&(0,oe.P)($,j),j instanceof J&&j._removeParent(this)}}J.EMPTY=(()=>{const le=new J;return le.closed=!0,le})();const ge=J.EMPTY;function ae(le){return le instanceof J||le&&"closed"in le&&(0,d.m)(le.remove)&&(0,d.m)(le.add)&&(0,d.m)(le.unsubscribe)}function he(le){(0,d.m)(le)?le():le.unsubscribe()}},2416:(rt,Ce,N)=>{N.d(Ce,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,Ce,N)=>{N.d(Ce,{E:()=>K});const K=new(N(8306).y)(J=>J.complete())},8996:(rt,Ce,N)=>{N.d(Ce,{D:()=>ve});var d=N(8421),K=N(5363),O=N(9468),ge=N(8306),he=N(2202),le=N(576),j=N(9672);function Q(we,He){if(!we)throw new Error("Iterable cannot be null");return new ge.y(Be=>{(0,j.f)(Be,He,()=>{const te=we[Symbol.asyncIterator]();(0,j.f)(Be,He,()=>{te.next().then(z=>{z.done?Be.complete():Be.next(z.value)})},0,!0)})})}var qe=N(3670),Ae=N(8239),ke=N(1144),Fe=N(6495),pe=N(2206),Ee=N(4532),Xe=N(3260);function ve(we,He){return He?function De(we,He){if(null!=we){if((0,qe.c)(we))return function oe(we,He){return(0,d.Xf)(we).pipe((0,O.R)(He),(0,K.Q)(He))}(we,He);if((0,ke.z)(we))return function ae(we,He){return new ge.y(Be=>{let te=0;return He.schedule(function(){te===we.length?Be.complete():(Be.next(we[te++]),Be.closed||this.schedule())})})}(we,He);if((0,Ae.t)(we))return function J(we,He){return(0,d.Xf)(we).pipe((0,O.R)(He),(0,K.Q)(He))}(we,He);if((0,pe.D)(we))return Q(we,He);if((0,Fe.T)(we))return function $(we,He){return new ge.y(Be=>{let te;return(0,j.f)(Be,He,()=>{te=we[he.h](),(0,j.f)(Be,He,()=>{let z,ne;try{({value:z,done:ne}=te.next())}catch(me){return void Be.error(me)}ne?Be.complete():Be.next(z)},0,!0)}),()=>(0,le.m)(null==te?void 0:te.return)&&te.return()})}(we,He);if((0,Xe.L)(we))return function ze(we,He){return Q((0,Xe.Q)(we),He)}(we,He)}throw(0,Ee.z)(we)}(we,He):(0,d.Xf)(we)}},8421:(rt,Ce,N)=>{N.d(Ce,{Xf:()=>qe});var d=N(655),K=N(1144),O=N(8239),oe=N(8306),J=N(3670),ge=N(2206),ae=N(4532),he=N(6495),le=N(3260),j=N(576),$=N(7849),Q=N(8822);function qe(De){if(De instanceof oe.y)return De;if(null!=De){if((0,J.c)(De))return function Ae(De){return new oe.y(ve=>{const we=De[Q.L]();if((0,j.m)(we.subscribe))return we.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,K.z)(De))return function ke(De){return new oe.y(ve=>{for(let we=0;we<De.length&&!ve.closed;we++)ve.next(De[we]);ve.complete()})}(De);if((0,O.t)(De))return function Fe(De){return new oe.y(ve=>{De.then(we=>{ve.closed||(ve.next(we),ve.complete())},we=>ve.error(we)).then(null,$.h)})}(De);if((0,ge.D)(De))return Ee(De);if((0,he.T)(De))return function pe(De){return new oe.y(ve=>{for(const we of De)if(ve.next(we),ve.closed)return;ve.complete()})}(De);if((0,le.L)(De))return function Xe(De){return Ee((0,le.Q)(De))}(De)}throw(0,ae.z)(De)}function Ee(De){return new oe.y(ve=>{(function ze(De,ve){var we,He,Be,te;return(0,d.mG)(this,void 0,void 0,function*(){try{for(we=(0,d.KL)(De);!(He=yield we.next()).done;)if(ve.next(He.value),ve.closed)return}catch(z){Be={error:z}}finally{try{He&&!He.done&&(te=we.return)&&(yield te.call(we))}finally{if(Be)throw Be.error}}ve.complete()})})(De,ve).catch(we=>ve.error(we))})}},6451:(rt,Ce,N)=>{N.d(Ce,{T:()=>ge});var d=N(8189),K=N(8421),O=N(515),oe=N(3269),J=N(8996);function ge(...ae){const he=(0,oe.yG)(ae),le=(0,oe._6)(ae,1/0),j=ae;return j.length?1===j.length?(0,K.Xf)(j[0]):(0,d.J)(le)((0,J.D)(j,he)):O.E}},5403:(rt,Ce,N)=>{N.d(Ce,{x:()=>K});var d=N(930);function K(oe,J,ge,ae,he){return new O(oe,J,ge,ae,he)}class O extends d.Lv{constructor(J,ge,ae,he,le,j){super(J),this.onFinalize=le,this.shouldUnsubscribe=j,this._next=ge?function($){try{ge($)}catch(Q){J.error(Q)}}:super._next,this._error=he?function($){try{he($)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch($){J.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(rt,Ce,N)=>{N.d(Ce,{U:()=>O});var d=N(4482),K=N(5403);function O(oe,J){return(0,d.e)((ge,ae)=>{let he=0;ge.subscribe((0,K.x)(ae,le=>{ae.next(oe.call(J,le,he++))}))})}},8189:(rt,Ce,N)=>{N.d(Ce,{J:()=>O});var d=N(5577),K=N(4671);function O(oe=1/0){return(0,d.z)(K.y,oe)}},5577:(rt,Ce,N)=>{N.d(Ce,{z:()=>he});var d=N(4004),K=N(8421),O=N(4482),oe=N(9672),J=N(5403),ae=N(576);function he(le,j,$=1/0){return(0,ae.m)(j)?he((Q,qe)=>(0,d.U)((Ae,ke)=>j(Q,Ae,qe,ke))((0,K.Xf)(le(Q,qe))),$):("number"==typeof j&&($=j),(0,O.e)((Q,qe)=>function ge(le,j,$,Q,qe,Ae,ke,Fe){const pe=[];let Ee=0,Xe=0,ze=!1;const De=()=>{ze&&!pe.length&&!Ee&&j.complete()},ve=He=>Ee<Q?we(He):pe.push(He),we=He=>{Ae&&j.next(He),Ee++;let Be=!1;(0,K.Xf)($(He,Xe++)).subscribe((0,J.x)(j,te=>{null==qe||qe(te),Ae?ve(te):j.next(te)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ee--;pe.length&&Ee<Q;){const te=pe.shift();ke?(0,oe.f)(j,ke,()=>we(te)):we(te)}De()}catch(te){j.error(te)}}))};return le.subscribe((0,J.x)(j,ve,()=>{ze=!0,De()})),()=>{null==Fe||Fe()}}(Q,qe,le,$)))}},5363:(rt,Ce,N)=>{N.d(Ce,{Q:()=>oe});var d=N(9672),K=N(4482),O=N(5403);function oe(J,ge=0){return(0,K.e)((ae,he)=>{ae.subscribe((0,O.x)(he,le=>(0,d.f)(he,J,()=>he.next(le),ge),()=>(0,d.f)(he,J,()=>he.complete(),ge),le=>(0,d.f)(he,J,()=>he.error(le),ge)))})}},3099:(rt,Ce,N)=>{N.d(Ce,{B:()=>ge});var d=N(8996),K=N(5698),O=N(7579),oe=N(930),J=N(4482);function ge(he={}){const{connector:le=(()=>new O.x),resetOnError:j=!0,resetOnComplete:$=!0,resetOnRefCountZero:Q=!0}=he;return qe=>{let Ae=null,ke=null,Fe=null,pe=0,Ee=!1,Xe=!1;const ze=()=>{null==ke||ke.unsubscribe(),ke=null},De=()=>{ze(),Ae=Fe=null,Ee=Xe=!1},ve=()=>{const we=Ae;De(),null==we||we.unsubscribe()};return(0,J.e)((we,He)=>{pe++,!Xe&&!Ee&&ze();const Be=Fe=null!=Fe?Fe:le();He.add(()=>{pe--,0===pe&&!Xe&&!Ee&&(ke=ae(ve,Q))}),Be.subscribe(He),Ae||(Ae=new oe.Hp({next:te=>Be.next(te),error:te=>{Xe=!0,ze(),ke=ae(De,j,te),Be.error(te)},complete:()=>{Ee=!0,ze(),ke=ae(De,$),Be.complete()}}),(0,d.D)(we).subscribe(Ae))})(qe)}}function ae(he,le,...j){return!0===le?(he(),null):!1===le?null:le(...j).pipe((0,K.q)(1)).subscribe(()=>he())}},9468:(rt,Ce,N)=>{N.d(Ce,{R:()=>K});var d=N(4482);function K(O,oe=0){return(0,d.e)((J,ge)=>{ge.add(O.schedule(()=>J.subscribe(ge),oe))})}},5698:(rt,Ce,N)=>{N.d(Ce,{q:()=>oe});var d=N(515),K=N(4482),O=N(5403);function oe(J){return J<=0?()=>d.E:(0,K.e)((ge,ae)=>{let he=0;ge.subscribe((0,O.x)(ae,le=>{++he<=J&&(ae.next(le),J<=he&&ae.complete())}))})}},8505:(rt,Ce,N)=>{N.d(Ce,{b:()=>J});var d=N(576),K=N(4482),O=N(5403),oe=N(4671);function J(ge,ae,he){const le=(0,d.m)(ge)||ae||he?{next:ge,error:ae,complete:he}:ge;return le?(0,K.e)((j,$)=>{var Q;null===(Q=le.subscribe)||void 0===Q||Q.call(le);let qe=!0;j.subscribe((0,O.x)($,Ae=>{var ke;null===(ke=le.next)||void 0===ke||ke.call(le,Ae),$.next(Ae)},()=>{var Ae;qe=!1,null===(Ae=le.complete)||void 0===Ae||Ae.call(le),$.complete()},Ae=>{var ke;qe=!1,null===(ke=le.error)||void 0===ke||ke.call(le,Ae),$.error(Ae)},()=>{var Ae,ke;qe&&(null===(Ae=le.unsubscribe)||void 0===Ae||Ae.call(le)),null===(ke=le.finalize)||void 0===ke||ke.call(le)}))}):oe.y}},4408:(rt,Ce,N)=>{N.d(Ce,{o:()=>J});var d=N(727);class K extends d.w0{constructor(ae,he){super()}schedule(ae,he=0){return this}}const O={setInterval(ge,ae,...he){const{delegate:le}=O;return(null==le?void 0:le.setInterval)?le.setInterval(ge,ae,...he):setInterval(ge,ae,...he)},clearInterval(ge){const{delegate:ae}=O;return((null==ae?void 0:ae.clearInterval)||clearInterval)(ge)},delegate:void 0};var oe=N(8737);class J extends K{constructor(ae,he){super(ae,he),this.scheduler=ae,this.work=he,this.pending=!1}schedule(ae,he=0){if(this.closed)return this;this.state=ae;const le=this.id,j=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(j,le,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(j,this.id,he),this}requestAsyncId(ae,he,le=0){return O.setInterval(ae.flush.bind(ae,this),le)}recycleAsyncId(ae,he,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return he;O.clearInterval(he)}execute(ae,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(ae,he);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,he){let j,le=!1;try{this.work(ae)}catch($){le=!0,j=$||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ae,scheduler:he}=this,{actions:le}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(le,this),null!=ae&&(this.id=this.recycleAsyncId(he,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,Ce,N)=>{N.d(Ce,{v:()=>O});var d=N(6063);class K{constructor(J,ge=K.now){this.schedulerActionCtor=J,this.now=ge}schedule(J,ge=0,ae){return new this.schedulerActionCtor(this,J).schedule(ae,ge)}}K.now=d.l.now;class O extends K{constructor(J,ge=K.now){super(J,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:ge}=this;if(this._active)return void ge.push(J);let ae;this._active=!0;do{if(ae=J.execute(J.state,J.delay))break}while(J=ge.shift());if(this._active=!1,ae){for(;J=ge.shift();)J.unsubscribe();throw ae}}}},4986:(rt,Ce,N)=>{N.d(Ce,{P:()=>oe,z:()=>O});var d=N(4408);const O=new(N(7565).v)(d.o),oe=O},6063:(rt,Ce,N)=>{N.d(Ce,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(rt,Ce,N)=>{N.d(Ce,{z:()=>d});const d={setTimeout(K,O,...oe){const{delegate:J}=d;return(null==J?void 0:J.setTimeout)?J.setTimeout(K,O,...oe):setTimeout(K,O,...oe)},clearTimeout(K){const{delegate:O}=d;return((null==O?void 0:O.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(rt,Ce,N)=>{N.d(Ce,{h:()=>K});const K=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,Ce,N)=>{N.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(rt,Ce,N)=>{N.d(Ce,{_6:()=>ge,jO:()=>oe,yG:()=>J});var d=N(576),K=N(3532);function O(ae){return ae[ae.length-1]}function oe(ae){return(0,d.m)(O(ae))?ae.pop():void 0}function J(ae){return(0,K.K)(O(ae))?ae.pop():void 0}function ge(ae,he){return"number"==typeof O(ae)?ae.pop():he}},8737:(rt,Ce,N)=>{function d(K,O){if(K){const oe=K.indexOf(O);0<=oe&&K.splice(oe,1)}}N.d(Ce,{P:()=>d})},3888:(rt,Ce,N)=>{function d(K){const oe=K(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}N.d(Ce,{d:()=>d})},2806:(rt,Ce,N)=>{N.d(Ce,{O:()=>oe,x:()=>O});var d=N(2416);let K=null;function O(J){if(d.v.useDeprecatedSynchronousErrorHandling){const ge=!K;if(ge&&(K={errorThrown:!1,error:null}),J(),ge){const{errorThrown:ae,error:he}=K;if(K=null,ae)throw he}}else J()}function oe(J){d.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=J)}},9672:(rt,Ce,N)=>{function d(K,O,oe,J=0,ge=!1){const ae=O.schedule(function(){oe(),ge?K.add(this.schedule(null,J)):this.unsubscribe()},J);if(K.add(ae),!ge)return ae}N.d(Ce,{f:()=>d})},4671:(rt,Ce,N)=>{function d(K){return K}N.d(Ce,{y:()=>d})},1144:(rt,Ce,N)=>{N.d(Ce,{z:()=>d});const d=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(rt,Ce,N)=>{N.d(Ce,{D:()=>K});var d=N(576);function K(O){return Symbol.asyncIterator&&(0,d.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(rt,Ce,N)=>{function d(K){return"function"==typeof K}N.d(Ce,{m:()=>d})},3670:(rt,Ce,N)=>{N.d(Ce,{c:()=>O});var d=N(8822),K=N(576);function O(oe){return(0,K.m)(oe[d.L])}},6495:(rt,Ce,N)=>{N.d(Ce,{T:()=>O});var d=N(2202),K=N(576);function O(oe){return(0,K.m)(null==oe?void 0:oe[d.h])}},8239:(rt,Ce,N)=>{N.d(Ce,{t:()=>K});var d=N(576);function K(O){return(0,d.m)(null==O?void 0:O.then)}},3260:(rt,Ce,N)=>{N.d(Ce,{L:()=>oe,Q:()=>O});var d=N(655),K=N(576);function O(J){return(0,d.FC)(this,arguments,function*(){const ae=J.getReader();try{for(;;){const{value:he,done:le}=yield(0,d.qq)(ae.read());if(le)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{ae.releaseLock()}})}function oe(J){return(0,K.m)(null==J?void 0:J.getReader)}},3532:(rt,Ce,N)=>{N.d(Ce,{K:()=>K});var d=N(576);function K(O){return O&&(0,d.m)(O.schedule)}},4482:(rt,Ce,N)=>{N.d(Ce,{A:()=>K,e:()=>O});var d=N(576);function K(oe){return(0,d.m)(null==oe?void 0:oe.lift)}function O(oe){return J=>{if(K(J))return J.lift(function(ge){try{return oe(ge,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(rt,Ce,N)=>{function d(){}N.d(Ce,{Z:()=>d})},7849:(rt,Ce,N)=>{N.d(Ce,{h:()=>O});var d=N(2416),K=N(3410);function O(oe){K.z.setTimeout(()=>{const{onUnhandledError:J}=d.v;if(!J)throw oe;J(oe)})}},4532:(rt,Ce,N)=>{function d(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Ce,{z:()=>d})},655:(rt,Ce,N)=>{function oe(z,ne){var me={};for(var re in z)Object.prototype.hasOwnProperty.call(z,re)&&ne.indexOf(re)<0&&(me[re]=z[re]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(re=Object.getOwnPropertySymbols(z);Me<re.length;Me++)ne.indexOf(re[Me])<0&&Object.prototype.propertyIsEnumerable.call(z,re[Me])&&(me[re[Me]]=z[re[Me]])}return me}function he(z,ne,me,re){return new(me||(me=Promise))(function(ue,Et){function Wt(ht){try{ot(re.next(ht))}catch(sn){Et(sn)}}function Tn(ht){try{ot(re.throw(ht))}catch(sn){Et(sn)}}function ot(ht){ht.done?ue(ht.value):function Me(ue){return ue instanceof me?ue:new me(function(Et){Et(ue)})}(ht.value).then(Wt,Tn)}ot((re=re.apply(z,ne||[])).next())})}function pe(z){return this instanceof pe?(this.v=z,this):new pe(z)}function Ee(z,ne,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,re=me.apply(z,ne||[]),ue=[];return Me={},Et("next"),Et("throw"),Et("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function Et(on){re[on]&&(Me[on]=function(yi){return new Promise(function(Xt,Ji){ue.push([on,yi,Xt,Ji])>1||Wt(on,yi)})})}function Wt(on,yi){try{!function Tn(on){on.value instanceof pe?Promise.resolve(on.value.v).then(ot,ht):sn(ue[0][2],on)}(re[on](yi))}catch(Xt){sn(ue[0][3],Xt)}}function ot(on){Wt("next",on)}function ht(on){Wt("throw",on)}function sn(on,yi){on(yi),ue.shift(),ue.length&&Wt(ue[0][0],ue[0][1])}}function ze(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ne=z[Symbol.asyncIterator];return ne?ne.call(z):(z=function Q(z){var ne="function"==typeof Symbol&&Symbol.iterator,me=ne&&z[ne],re=0;if(me)return me.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&re>=z.length&&(z=void 0),{value:z&&z[re++],done:!z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),me={},re("next"),re("throw"),re("return"),me[Symbol.asyncIterator]=function(){return this},me);function re(ue){me[ue]=z[ue]&&function(Et){return new Promise(function(Wt,Tn){!function Me(ue,Et,Wt,Tn){Promise.resolve(Tn).then(function(ot){ue({value:ot,done:Wt})},Et)}(Wt,Tn,(Et=z[ue](Et)).done,Et.value)})}}}N.d(Ce,{FC:()=>Ee,KL:()=>ze,_T:()=>oe,mG:()=>he,qq:()=>pe})},5e3:(rt,Ce,N)=>{N.d(Ce,{$8M:()=>qs,$Z:()=>L_,AFp:()=>Pv,ALo:()=>nh,AaK:()=>he,AsE:()=>Pf,BQk:()=>xg,CHM:()=>el,CRH:()=>GE,CZH:()=>Ov,CqO:()=>V_,EJc:()=>qu,EpF:()=>Wl,F$t:()=>kf,F4k:()=>Ou,FYo:()=>hv,FiY:()=>hi,G48:()=>km,GfV:()=>lc,Gpc:()=>$,Hsn:()=>Rw,JOm:()=>se,LFG:()=>We,LSH:()=>Iu,Lbi:()=>aI,MAs:()=>Ew,NdJ:()=>U_,O4$:()=>$c,OlP:()=>En,Oqu:()=>Ud,PXZ:()=>sD,Q6J:()=>Tg,QGY:()=>Sf,Qsj:()=>Xg,R0b:()=>Yi,RDi:()=>ss,Rgc:()=>rh,SBq:()=>Zf,Sil:()=>Vv,Suo:()=>Cv,TTD:()=>so,TgZ:()=>Nu,VKq:()=>Jn,VLi:()=>fh,W1O:()=>zE,WLB:()=>zt,X6Q:()=>tp,XFs:()=>at,Xpm:()=>Nt,Y36:()=>zl,YKP:()=>PE,YNc:()=>yg,Yjl:()=>pr,Yz7:()=>Xt,ZZ4:()=>bc,_Bn:()=>Jg,_UZ:()=>xd,_Vd:()=>Yd,_c5:()=>yD,_uU:()=>Pg,aQg:()=>ip,c2e:()=>uI,cJS:()=>Kt,cg1:()=>tt,dDg:()=>Bv,deG:()=>Ap,dqk:()=>Ut,eFA:()=>gI,ekj:()=>Fd,g9A:()=>vc,h0i:()=>ju,hGG:()=>_D,hij:()=>Of,iGM:()=>bv,ifc:()=>$t,ip1:()=>Nv,kL8:()=>hE,kcU:()=>Jm,lG2:()=>qt,lcZ:()=>BE,n5z:()=>Kc,n_E:()=>am,oAB:()=>Y,oxw:()=>B_,q4F:()=>Bu,qLn:()=>Ir,qOj:()=>bd,qZA:()=>Af,sBO:()=>II,sIi:()=>yf,s_b:()=>Hu,soG:()=>ch,tBr:()=>Nr,tb:()=>Lv,tp0:()=>yo,uIk:()=>pg,vHH:()=>ke,vpe:()=>xo,wAp:()=>ee,xp6:()=>gb,ynx:()=>Md,z2F:()=>Am,zSh:()=>ug,zs3:()=>gn});var d=N(7579),K=N(727),O=N(8306),oe=N(6451),J=N(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function ae(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=ge({__forward_ref__:ge});function $(i){return i.__forward_ref__=$,i.toString=function(){return he(this())},i}function Q(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===$}class ke extends Error{constructor(s,a){super(function Fe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function pe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():pe(i)}function ve(i,s){const a=s?` in ${s}`:"";throw new ke(-201,`No provider for ${Ee(i)} found${a}`)}function ot(i,s){null==i&&function ht(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Kt(i){return{providers:i.providers||[],imports:i.imports||[]}}function jt(i){return tr(i,Ni)||tr(i,Xi)}function tr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Mr(i){return i&&(i.hasOwnProperty(kr)||i.hasOwnProperty(es))?i[kr]:null}const Ni=ge({\u0275prov:ge}),kr=ge({\u0275inj:ge}),Xi=ge({ngInjectableDef:ge}),es=ge({ngInjectorDef:ge});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Gr;function jn(i){const s=Gr;return Gr=i,s}function ri(i,s,a){const l=jt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&at.Optional?null:void 0!==s?s:void ve(he(i),"Injector")}function fn(i){return{toString:i}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),$t=(()=>{return(i=$t||($t={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",$t;var i})();const nt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,nr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ut=nt||"undefined"!=typeof global&&global||yt||nr,rr={},lt=[],fr=ge({\u0275cmp:ge}),Ft=ge({\u0275dir:ge}),Ze=ge({\u0275pipe:ge}),Te=ge({\u0275mod:ge}),Ke=ge({\u0275fac:ge}),ct=ge({__NG_ELEMENT_ID__:ge});let Lt=0;function Nt(i){return fn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||lt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||$t.Emulated,id:"c",styles:i.styles||lt,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Lt++,l.inputs=ft(i.inputs,a),l.outputs=ft(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,l})}function L(i){return Ht(i)||function vn(i){return i[Ft]||null}(i)}function H(i){return function Dt(i){return i[Ze]||null}(i)}const de={};function Y(i){return fn(()=>{const s={type:i.type,bootstrap:i.bootstrap||lt,declarations:i.declarations||lt,imports:i.imports||lt,exports:i.exports||lt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(de[i.id]=i.type),s})}function ft(i,s){if(null==i)return rr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const qt=Nt;function pr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ht(i){return i[fr]||null}function an(i,s){const a=i[Te]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function _i(i){return Array.isArray(i)&&"object"==typeof i[1]}function si(i){return Array.isArray(i)&&!0===i[1]}function xc(i){return 0!=(8&i.flags)}function Ms(i){return 2==(2&i.flags)}function Wa(i){return 1==(1&i.flags)}function qr(i){return null!==i.template}function Dh(i){return 0!=(512&i[2])}function zr(i,s){return i.hasOwnProperty(Ke)?i[Ke]:null}class Oo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function so(){return ha}function ha(i){return i.type.prototype.ngOnChanges&&(i.setInput=Cp),Oc}function Oc(){const i=Os(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===rr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Cp(i,s,a,l){const c=Os(i)||function oi(i,s){return i[Ns]=s}(i,{previous:rr,current:null}),p=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],I=_[w];p[w]=new Oo(I&&I.currentValue,s,_===rr),i[l]=s}so.ngInherit=!0;const Ns="__ngSimpleChanges__";function Os(i){return i[Ns]||null}let nu;function ss(i){nu=i}function hn(i){return!!i.listen}const Po={createRenderer:(i,s)=>function fa(){return void 0!==nu?nu:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function ao(i,s){return nn(s[i])}function gr(i,s){return nn(s[i.index])}function pa(i,s){return i.data[s]}function vi(i,s){return i[s]}function mr(i,s){const a=s[i];return _i(a)?a:a[0]}function Fs(i){return 4==(4&i[2])}function os(i){return 128==(128&i[2])}function Wr(i,s){return null==s?null:i[s]}function Ls(i){i[18]=0}function Vs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const dt={lFrame:lo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function au(){return dt.bindingsEnabled}function be(){return dt.lFrame.lView}function Ot(){return dt.lFrame.tView}function el(i){return dt.lFrame.contextLView=i,i[8]}function pn(){let i=Fo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Fo(){return dt.lFrame.currentTNode}function Kr(i,s){const a=dt.lFrame;a.currentTNode=i,a.isParent=s}function tl(){return dt.lFrame.isParent}function nl(){dt.lFrame.isParent=!1}function uu(){return dt.isInCheckNoChangesMode}function Us(i){dt.isInCheckNoChangesMode=i}function ur(){const i=dt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Bs(){return dt.lFrame.bindingIndex++}function wi(i){const s=dt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function du(i,s){const a=dt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ma(s)}function ma(i){dt.lFrame.currentDirectiveIndex=i}function ol(){return dt.lFrame.currentQueryIndex}function al(i){dt.lFrame.currentQueryIndex=i}function Vc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ul(i,s,a){if(a&at.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&at.Host||(c=Vc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=dt.lFrame=Uc();return l.currentTNode=s,l.lView=i,!0}function uo(i){const s=Uc(),a=i[1];dt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Uc(){const i=dt.lFrame,s=null===i?null:i.child;return null===s?lo(i):s}function lo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Bc(){const i=dt.lFrame;return dt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const jc=Bc;function co(){const i=Bc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yr(){return dt.lFrame.selectedIndex}function $s(i){dt.lFrame.selectedIndex=i}function wn(){const i=dt.lFrame;return pa(i.tView,i.selectedIndex)}function $c(){dt.lFrame.currentNamespace="svg"}function Jm(){!function cl(){dt.lFrame.currentNamespace=null}()}function as(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:x}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function _a(i,s,a){Hc(i,s,3,a)}function hu(i,s,a,l){(3&i[2])===a&&Hc(i,s,a,l)}function Fn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Hc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<p||-1==p)&&(Dp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Dp(i,s,a,l){const c=a[l]<0,p=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Vo{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function pt(i,s,a){const l=hn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],w=a[c++],I=a[c++];l?i.setAttribute(s,w,I,_):s.setAttributeNS(_,w,I)}else{const _=p,w=a[++c];Yr(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function lr(i){return 3===i||4===i||6===i}function Yr(i){return 64===i.charCodeAt(0)}function Rr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Uo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Uo(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function zc(i){return-1!==i}function ln(i){return 32767&i}function Ei(i,s){let a=function xh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let fu=!0;function ui(i){const s=fu;return fu=i,s}let Wc=0;function kn(i,s){const a=Bo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ls(l.data,i),ls(s,null),ls(l.blueprint,null));const c=li(i,s),p=i.injectorIndex;if(zc(c)){const _=ln(c),w=Ei(c,s),I=w[1].data;for(let T=0;T<8;T++)s[p+T]=w[_+T]|I[_+T]}return s[p+8]=c,p}function ls(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Bo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function li(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Hs(i,s,a){!function fo(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ct)&&(l=a[ct]),null==l&&(l=a[ct]=Wc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Li(i,s,a){if(a&at.Optional)return i;ve(s,"NodeInjector")}function pl(i,s,a,l){if(a&at.Optional&&void 0===l&&(l=null),0==(a&(at.Self|at.Host))){const c=i[9],p=jn(void 0);try{return c?c.get(s,l,a&at.Optional):ri(s,l,a&at.Optional)}finally{jn(p)}}return Li(l,s,a)}function Gs(i,s,a,l=at.Default,c){if(null!==i){const p=function $o(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ct)?i[ct]:void 0;return"number"==typeof s?s>=0?255&s:gl:s}(a);if("function"==typeof p){if(!ul(s,i,l))return l&at.Host?Li(c,a,l):pl(s,a,l,c);try{const _=p(l);if(null!=_||l&at.Optional)return _;ve(a)}finally{jc()}}else if("number"==typeof p){let _=null,w=Bo(i,s),I=-1,T=l&at.Host?s[16][6]:null;for((-1===w||l&at.SkipSelf)&&(I=-1===w?li(i,s):s[w+8],-1!==I&&_r(l,!1)?(_=s[1],w=ln(I),s=Ei(I,s)):w=-1);-1!==w;){const x=s[1];if(wa(p,w,x.data)){const P=ml(w,s,a,_,l,T);if(P!==Vi)return P}I=s[w+8],-1!==I&&_r(l,s[1].data[w+8]===T)&&wa(p,w,s)?(_=x,w=ln(I),s=Ei(I,s)):w=-1}}}return pl(s,a,l,c)}const Vi={};function gl(){return new bi(pn(),be())}function ml(i,s,a,l,c,p){const _=s[1],w=_.data[i+8],x=jo(w,_,a,null==l?Ms(w)&&fu:l!=_&&0!=(3&w.type),c&at.Host&&p===w);return null!==x?Ii(s,_,x,w):Vi}function jo(i,s,a,l,c){const p=i.providerIndexes,_=s.data,w=1048575&p,I=i.directiveStart,x=p>>20,U=c?w+x:i.directiveEnd;for(let W=l?w:w+x;W<U;W++){const _e=_[W];if(W<I&&a===_e||W>=I&&_e.type===a)return W}if(c){const W=_[I];if(W&&qr(W)&&W.type===a)return I}return null}function Ii(i,s,a,l){let c=i[a];const p=s.data;if(function Gc(i){return i instanceof Vo}(c)){const _=c;_.resolving&&function Xe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(p[a]));const w=ui(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?jn(_.injectImpl):null;ul(i,l,at.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function dl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=ha(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&jn(I),ui(w),_.resolving=!1,jc()}}return c}function wa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function _r(i,s){return!(i&at.Self||i&at.Host&&s)}class bi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Gs(this._tNode,this._lView,s,l,a)}}function Kc(i){return fn(()=>{const s=i.prototype.constructor,a=s[Ke]||Rn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Ke]||Rn(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Rn(i){return qe(i)?()=>{const s=Rn(Q(i));return s&&s()}:zr(i)}function qs(i){return function va(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(lr(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(pn(),i)}const Ho="__parameters__";function mn(i,s,a){return fn(()=>{const l=function Ui(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return w.annotation=_,w;function w(I,T,x){const P=I.hasOwnProperty(Ho)?I[Ho]:Object.defineProperty(I,Ho,{value:[]})[Ho];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class En{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ap=new En("AnalyzeForEntryComponents");function wr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),wr(l,s)):s!==i&&s.push(l)}return s}function ci(i,s){i.forEach(a=>Array.isArray(a)?ci(a,s):s(a))}function vl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function hs(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Di(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function Hn(i,s,a){let l=Ks(i,s);return l>=0?i[1|l]=a:(l=~l,function wl(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function bl(i,s){const a=Ks(i,s);if(a>=0)return i[1|a]}function Ks(i,s){return function po(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const go={},qo="__NG_DI_FLAG__",yu="ngTempTokenPath",D=/\n/gm,F="__source",Z=ge({provide:String,useValue:ge});let X;function Se(i){const s=X;return X=i,s}function xe(i,s=at.Default){if(void 0===X)throw new ke(203,"");return null===X?ri(i,void 0,s):X.get(i,s&at.Optional?null:void 0,s)}function We(i,s=at.Default){return(function Zn(){return Gr}()||xe)(Q(i),s)}const Tt=We;function It(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let c,p=at.Default;for(let _=0;_<l.length;_++){const w=l[_],I=In(w);"number"==typeof I?-1===I?c=w.token:p|=I:c=w}s.push(We(c,p))}else s.push(We(l))}return s}function Ln(i,s){return i[qo]=s,i.prototype[qo]=s,i}function In(i){return i[qo]}const Nr=Ln(mn("Inject",i=>({token:i})),-1),hi=Ln(mn("Optional"),8),yo=Ln(mn("SkipSelf"),4);class sd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ys(i){return i instanceof sd?i.changingThisBreaksApplicationSecurity:i}const Qs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Lh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qt=(()=>((Qt=Qt||{})[Qt.NONE=0]="NONE",Qt[Qt.HTML=1]="HTML",Qt[Qt.STYLE=2]="STYLE",Qt[Qt.SCRIPT=3]="SCRIPT",Qt[Qt.URL=4]="URL",Qt[Qt.RESOURCE_URL=5]="RESOURCE_URL",Qt))();function Iu(i){const s=function Yo(){const i=be();return i&&i[12]}();return s?s.sanitize(Qt.URL,i)||"":function Wo(i,s){const a=function vu(i){return i instanceof sd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ys(i):function wu(i){return(i=String(i)).match(Qs)||i.match(Lh)?i:"unsafe:"+i}(pe(i))}const Zh="__ngContext__";function Or(i,s){i[Zh]=s}function Wh(i){const s=function Da(i){return i[Zh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Sa(i){return i.ngOriginalError}function Hp(i,...s){i.error(...s)}class Ir{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Ey(i){return i&&i.ngErrorLogger||Hp}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Sa(s);for(;a&&Sa(a);)a=Sa(a);return a||null}}const Dy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ut))();function g(i){return i instanceof Function?i():i}var se=(()=>((se=se||{})[se.Important=1]="Important",se[se.DashCase=2]="DashCase",se))();function Ye(i,s){return undefined(i,s)}function bn(i){const s=i[3];return si(s)?s[3]:s}function bu(i){return nf(i[13])}function Cu(i){return nf(i[4])}function nf(i){for(;null!==i&&!si(i);)i=i[4];return i}function Qo(i,s,a,l,c){if(null!=l){let p,_=!1;si(l)?p=l:_i(l)&&(_=!0,l=l[0]);const w=nn(l);0===i&&null!==a?null==c?Ny(s,a,w):ps(s,a,w,c||null,!0):1===i&&null!==a?ps(s,a,w,c||null,!0):2===i?function Ly(i,s,a){const l=of(i,s);l&&function ob(i,s,a,l){hn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function ye(i,s,a,l,c){const p=a[7];p!==nn(a)&&Qo(s,i,l,p,c);for(let w=10;w<a.length;w++){const I=a[w];Wp(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function pd(i,s,a){if(hn(i))return i.createElement(s,a);{const l=null!==a?function tu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function g0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Vs(c,-1)),a.splice(l,1)}function My(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&g0(c,l),s>0&&(i[a-1][4]=l[4]);const p=hs(i,10+s);!function xi(i,s){Wp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function ky(i,s){if(!(256&s[2])){const a=s[11];hn(a)&&a.destroyNode&&Wp(i,s,a,3,null,null),function Sy(i){let s=i[13];if(!s)return Ry(i[1],i);for(;s;){let a=null;if(_i(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)_i(s)&&Ry(s[1],s),s=s[3];null===s&&(s=i),_i(s)&&Ry(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ry(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function y0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Vo)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=c[p[_]],I=p[_+1];try{I.call(w)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function m0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):nn(s[_]),I=l[c=a[p+2]],T=a[p+3];"boolean"==typeof T?w.removeEventListener(a[p],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&hn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&si(s[3])){a!==s[3]&&g0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function zp(i,s,a){return function sb(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===$t.None||c===$t.Emulated)return null}return gr(l,a)}(i,s.parent,a)}function ps(i,s,a,l,c){hn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function Ny(i,s,a){hn(i)?i.appendChild(s,a):s.appendChild(a)}function _0(i,s,a,l,c){null!==l?ps(i,s,a,l,c):Ny(i,s,a)}function of(i,s){return hn(i)?i.parentNode(s):s.parentNode}function v0(i,s,a){return Oy(i,s,a)}let Oy=function w0(i,s,a){return 40&i.type?gr(i,a):null};function Zp(i,s,a,l){const c=zp(i,l,s),p=s[11],w=v0(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)_0(p,c,a[I],w,!1);else _0(p,c,a,w,!1)}function md(i,s){if(null!==s){const a=s.type;if(3&a)return gr(s,i);if(4&a)return Fy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return md(i,l);{const c=i[s.index];return si(c)?Fy(-1,c):nn(c)}}if(32&a)return Ye(s,i)()||nn(i[s.index]);{const l=I0(i,s);return null!==l?Array.isArray(l)?l[0]:md(bn(i[16]),l):md(i,s.next)}}return null}function I0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Fy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return md(l,c)}return s[7]}function Vy(i,s,a,l,c,p,_){for(;null!=a;){const w=l[a.index],I=a.type;if(_&&0===s&&(w&&Or(nn(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)Vy(i,s,a.child,l,c,p,!1),Qo(s,i,c,w,p);else if(32&I){const T=Ye(a,l);let x;for(;x=T();)Qo(s,i,c,x,p);Qo(s,i,c,w,p)}else 16&I?b0(i,s,l,a,c,p):Qo(s,i,c,w,p);a=_?a.projectionNext:a.next}}function Wp(i,s,a,l,c,p){Vy(a,l,i.firstChild,s,c,p,!1)}function b0(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Qo(s,i,c,I[T],p);else Vy(i,s,I,_[3],c,p,!0)}function C0(i,s,a){hn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function By(i,s,a){hn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function D0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const T0="ng-template";function cb(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==D0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function A0(i){return 4===i.type&&i.value!==T0}function db(i,s,a){return s===(4!==i.type||a?i.value:T0)}function hb(i,s,a){let l=4;const c=i.attrs||[],p=function x0(i){for(let s=0;s<i.length;s++)if(lr(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!db(i,I,a)||""===I&&1===s.length){if(qi(l))return!1;_=!0}}else{const T=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!cb(i.attrs,T,a)){if(qi(l))return!1;_=!0}continue}const P=fb(8&l?"class":I,c,A0(i),a);if(-1===P){if(qi(l))return!1;_=!0;continue}if(""!==T){let U;U=P>p?"":c[P+1].toLowerCase();const W=8&l?U:null;if(W&&-1!==D0(W,T,0)||2&l&&T!==U){if(qi(l))return!1;_=!0}}}}else{if(!_&&!qi(l)&&!qi(I))return!1;if(_&&qi(I))continue;_=!1,l=I|1&l}}return qi(l)||_}function qi(i){return 0==(1&i)}function fb(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function M0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function S0(i,s,a=!1){for(let l=0;l<s.length;l++)if(hb(i,s[l],a))return!0;return!1}function jy(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let c=0;c<i.length;c++)if(i[c]!==l[c])continue e;return!0}}return!1}function br(i,s){return i?":not("+s.trim()+")":s}function Io(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!qi(_)&&(s+=br(p,c),c=""),l=_,p=p||!qi(l);a++}return""!==c&&(s+=br(p,c)),s}const At={};function gb(i){R0(Ot(),be(),yr()+i,uu())}function R0(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&_a(s,p,a)}else{const p=i.preOrderHooks;null!==p&&hu(s,p,0,a)}$s(a)}function $y(i,s){return i<<17|s<<2}function Jo(i){return i>>17&32767}function O0(i){return 2|i}function Du(i){return(131068&i)>>2}function P0(i,s){return-131069&i|s<<2}function F0(i){return 1|i}function eg(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];al(c),_.contentQueries(2,s[p],p)}}}function _d(i,s,a,l,c,p,_,w,I,T){const x=s.blueprint.slice();return x[0]=c,x[2]=140|l,Ls(x),x[3]=x[15]=i,x[8]=a,x[10]=_||i&&i[10],x[11]=w||i&&i[11],x[12]=I||i&&i[12]||null,x[9]=T||i&&i[9]||null,x[6]=p,x[16]=2==s.type?i[16]:x,x}function ta(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Qy(i,s,a,l,c){const p=Fo(),_=tl(),I=i.data[s]=function Db(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function il(){return dt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Lo(){const i=dt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Kr(p,!0),p}function Su(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function vd(i,s,a){uo(s);try{const l=i.viewQuery;null!==l&&ow(1,l,a);const c=i.template;null!==c&&Xy(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&eg(i,s),i.staticViewQueries&&ow(2,i.viewQuery,a);const p=i.components;null!==p&&function Yy(i,s){for(let a=0;a<s.length;a++)l_(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,co()}}function wd(i,s,a,l){const c=s[2];if(256==(256&c))return;uo(s);const p=uu();try{Ls(s),function lu(i){return dt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Xy(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&_a(s,T,null)}else{const T=i.preOrderHooks;null!==T&&hu(s,T,0,null),Fn(s,0)}if(function rw(i){for(let s=bu(i);null!==s;s=Cu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Vs(p,1),c[2]|=1024}}}(s),function Rb(i){for(let s=bu(i);null!==s;s=Cu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];os(l)&&wd(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&eg(i,s),!p)if(_){const T=i.contentCheckHooks;null!==T&&_a(s,T)}else{const T=i.contentHooks;null!==T&&hu(s,T,1),Fn(s,1)}!function G0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)$s(~c);else{const p=c,_=a[++l],w=a[++l];du(_,p),w(2,s[p])}}}finally{$s(-1)}}(i,s);const w=i.components;null!==w&&function q0(i,s){for(let a=0;a<s.length;a++)Nb(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&ow(2,I,l),!p)if(_){const T=i.viewCheckHooks;null!==T&&_a(s,T)}else{const T=i.viewHooks;null!==T&&hu(s,T,2),Fn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Vs(s[3],-1))}finally{co()}}function Jy(i,s,a,l){const c=s[10],p=!uu(),_=Fs(s);try{p&&!_&&c.begin&&c.begin(),_&&vd(i,s,l),wd(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function Xy(i,s,a,l,c){const p=yr(),_=2&l;try{$s(-1),_&&s.length>20&&R0(i,s,20,uu()),a(l,c)}finally{$s(p)}}function e_(i,s,a){if(xc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function af(i,s,a){!au()||(function Y0(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||kn(a,s),Or(l,s);const _=a.initialInputs;for(let w=c;w<p;w++){const I=i.data[w],T=qr(I);T&&tw(s,a,I);const x=Ii(s,i,w,a);Or(x,s),null!==_&&dA(0,w-c,x,I,0,_),T&&(mr(a.index,s)[8]=x)}}(i,s,a,gr(a,s)),128==(128&a.flags)&&function s_(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function sl(){return dt.lFrame.currentDirectiveIndex}();try{$s(_);for(let I=l;I<c;I++){const T=i.data[I],x=s[I];ma(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Q0(T,x)}}finally{$s(-1),ma(w)}}(i,s,a))}function t_(i,s,a=gr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function z0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=tg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function tg(i,s,a,l,c,p,_,w,I,T){const x=20+l,P=x+c,U=function ng(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:At);return a}(x,P),W="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:s,data:U.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function n_(i,s,a,l){const c=Pb(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Fb(i).push(l,c.length-1))}function r_(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function i_(i,s,a,l){let c=!1;if(au()){const p=function Mb(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];S0(a,_.selectors,!1)&&(c||(c=[]),Hs(kn(a,s),i,_.type),qr(_)?(J0(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,o_(a,i.data.length,p.length);for(let x=0;x<p.length;x++){const P=p[x];P.providersResolver&&P.providersResolver(P)}let w=!1,I=!1,T=Su(i,s,p.length,null);for(let x=0;x<p.length;x++){const P=p[x];a.mergedAttrs=Rr(a.mergedAttrs,P.hostAttrs),a_(i,a,s,T,P),ew(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const U=P.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function sg(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let w=null,I=null;for(let T=s.directiveStart;T<l;T++){const x=c[T],P=x.inputs,U=null===p||A0(s)?null:hA(P,p);_.push(U),w=r_(P,T,w),I=r_(x.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=I}(i,a)}_&&function X0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new ke(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=Rr(a.mergedAttrs,a.attrs),c}function uf(i,s,a,l,c,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function K0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,_)}}function Q0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function J0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function ew(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;qr(s)&&(a[""]=i)}}function o_(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function a_(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=zr(c.type)),_=new Vo(p,qr(c),null);i.blueprint[l]=_,a[l]=_,uf(i,s,0,l,Su(i,a,c.hostVars,At),c)}function tw(i,s,a){const l=gr(s,i),c=z0(a),p=i[10],_=d_(i,_d(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function xa(i,s,a,l,c,p){const _=gr(i,s);!function u_(i,s,a,l,c,p,_){if(null==p)hn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?pe(p):_(p,l||"",c);hn(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,p,i.value,a,l,c)}function dA(i,s,a,l,c,p){const _=p[s];if(null!==_){const w=l.setInput;for(let I=0;I<_.length;){const T=_[I++],x=_[I++],P=_[I++];null!==w?l.setInput(a,P,T,x):a[x]=P}}}function hA(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function kb(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Nb(i,s){const a=mr(s,i);if(os(a)){const l=a[1];80&a[2]?wd(l,a,l.template,a[8]):a[5]>0&&og(a)}}function og(i){for(let l=bu(i);null!==l;l=Cu(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];wd(_,p,_.template,p[8])}else p[5]>0&&og(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=mr(a[l],i);os(c)&&c[5]>0&&og(c)}}function l_(i,s){const a=mr(s,i),l=a[1];(function c_(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),vd(l,a,a[8])}function d_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function lf(i){for(;i;){i[2]|=64;const s=bn(i);if(Dh(i)&&!s)return i;i=s}return null}function iw(i,s,a){const l=s[10];l.begin&&l.begin();try{wd(i,s,i.template,a)}catch(c){throw Vb(s,c),c}finally{l.end&&l.end()}}function sw(i){!function h_(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Wh(a),c=l[1];Jy(c,l,c.template,a)}}(i[8])}function ow(i,s,a){al(0),s(i,a)}const mA=(()=>Promise.resolve(null))();function Pb(i){return i[7]||(i[7]=[])}function Fb(i){return i.cleanup||(i.cleanup=[])}function Vb(i,s){const a=i[9],l=a?a.get(Ir,null):null;l&&l.handleError(s)}function cf(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],I=s[_],T=i.data[_];null!==T.setInput?T.setInput(I,c,l,w):I[w]=c}}function Ma(i,s,a){const l=ao(s,i);!function fd(i,s,a){hn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function df(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?c=le(c,w):2==p&&(l=le(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const ag=new En("INJECTOR",-1);class f_{get(s,a=go){if(a===go){const l=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw l.name="NullInjectorError",l}return a}}const ug=new En("Set Injector scope."),Co={},Bb={};let hf;function lw(){return void 0===hf&&(hf=new f_),hf}function cw(i,s=null,a=null,l){const c=jb(i,s,a,l);return c._resolveInjectorDefTypes(),c}function jb(i,s=null,a=null,l){return new $b(i,a,s||lw(),l)}class $b{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ci(a,w=>this.processProvider(w,s,a)),ci([s],w=>this.processInjectorType(w,[],p)),this.records.set(ag,vt(void 0,this));const _=this.records.get(ug);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:he(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=go,l=at.Default){this.assertNotDestroyed();const c=Se(this),p=jn(void 0);try{if(!(l&at.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function qb(i){return"function"==typeof i||"object"==typeof i&&i instanceof En}(s)&&jt(s);w=I&&this.injectableDefInScope(I)?vt(p_(s),Co):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&at.Self?lw():this.parent).get(s,a=l&at.Optional&&a===go?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[yu]=_[yu]||[]).unshift(he(s)),c)throw _;return function zo(i,s,a,l){const c=i[yu];throw s[F]&&c.unshift(s[F]),i.message=function mo(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=he(s);if(Array.isArray(s))c=s.map(he).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):he(w)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[yu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{jn(p),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(he(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let c=Mr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(c=Mr(p)),null==c)return!1;if(null!=c.imports&&!w){let x;l.push(_);try{ci(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:U,providers:W}=x[P];ci(W,_e=>this.processProvider(_e,U,W||lt))}}this.injectorDefTypes.add(_);const I=zr(_)||(()=>new _);this.records.set(_,vt(I,Co));const T=c.providers;if(null!=T&&!w){const x=s;ci(T,P=>this.processProvider(P,x,T))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=Ed(s=Q(s))?s:Q(s&&s.provide);const p=function et(i,s,a){return ff(i)?vt(void 0,i.useValue):vt(lg(i),Co)}(s);if(Ed(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=vt(void 0,Co,!0),_.factory=()=>It(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===Co&&(a.value=Bb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Gb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function p_(i){const s=jt(i),a=null!==s?s.factory:zr(i);if(null!==a)return a;if(i instanceof En)throw new ke(204,!1);if(i instanceof Function)return function ka(i){const s=i.length;if(s>0)throw Di(s,"?"),new ke(204,!1);const a=function ni(i){const s=i&&(i[Ni]||i[Xi]);if(s){const a=function Ds(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function lg(i,s,a){let l;if(Ed(i)){const c=Q(i);return zr(c)||p_(c)}if(ff(i))l=()=>Q(i.useValue);else if(function pf(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...It(i.deps||[]));else if(function g_(i){return!(!i||!i.useExisting)}(i))l=()=>We(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function Hb(i){return!!i.deps}(i))return zr(c)||p_(c);l=()=>new c(...It(i.deps))}return l}function vt(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ff(i){return null!==i&&"object"==typeof i&&Z in i}function Ed(i){return"function"==typeof i}let gn=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return cw({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return cw({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=go,i.NULL=new f_,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>We(ag)}),i.__NG_ELEMENT_ID__=-1,i})();function mw(i,s){as(Wh(i)[1],pn())}function bd(i){let s=function C_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(qr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ke(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=gf(i.inputs),_.declaredInputs=gf(i.declaredInputs),_.outputs=gf(i.outputs);const w=c.hostBindings;w&&Yb(i,w);const I=c.viewQuery,T=c.contentQueries;if(I&&T_(i,I),T&&Kb(i,T),ae(i.inputs,c.inputs),ae(i.declaredInputs,c.declaredInputs),ae(i.outputs,c.outputs),qr(c)&&c.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===bd&&(a=!1)}}s=Object.getPrototypeOf(s)}!function D_(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Rr(c.hostAttrs,a=Rr(a,c.hostAttrs))}}(l)}function gf(i){return i===rr?{}:i===lt?[]:i}function T_(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Kb(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function Yb(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let fg=null;function Yn(){if(!fg){const i=Ut.Symbol;if(i&&i.iterator)fg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(fg=l)}}}return fg}function yf(i){return!!S_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Yn()in i)}function S_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ys(i,s,a){return i[s]=a}function Lr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Na(i,s,a,l){const c=Lr(i,s,a);return Lr(i,s+1,l)||c}function pg(i,s,a,l){const c=be();return Lr(c,Bs(),s)&&(Ot(),xa(wn(),c,i,s,a,l)),pg}function $l(i,s,a,l,c,p){const w=Na(i,function ai(){return dt.lFrame.bindingIndex}(),a,c);return wi(2),w?s+pe(a)+l+pe(c)+p:At}function yg(i,s,a,l,c,p,_,w){const I=be(),T=Ot(),x=i+20,P=T.firstCreatePass?function Xb(i,s,a,l,c,p,_,w,I){const T=s.consts,x=ta(s,i,4,_||null,Wr(T,w));i_(s,a,x,Wr(T,I)),as(s,x);const P=x.tViews=tg(2,x,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),P.queries=s.queries.embeddedTView(x)),x}(x,T,I,s,a,l,c,p,_):T.data[x];Kr(P,!1);const U=I[11].createComment("");Zp(T,I,U,P),Or(U,I),d_(I,I[x]=kb(U,I,U,P)),Wa(P)&&af(T,I,P),null!=_&&t_(I,P,w)}function Ew(i){return vi(function rl(){return dt.lFrame.contextLView}(),20+i)}function zl(i,s=at.Default){const a=be();return null===a?We(i,s):Gs(pn(),a,Q(i),s)}function L_(){throw new Error("invalid")}function Tg(i,s,a){const l=be();return Lr(l,Bs(),s)&&function gs(i,s,a,l,c,p,_,w){const I=gr(s,a);let x,T=s.inputs;!w&&null!=T&&(x=T[l])?(cf(i,a,x,l,c),Ms(s)&&function Ab(i,s){const a=mr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Tb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,hn(p)?p.setProperty(I,l,c):Yr(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(Ot(),wn(),l,i,s,l[11],a,!1),Tg}function Ag(i,s,a,l,c){const _=c?"class":"style";cf(i,a,s.inputs[_],_,l)}function Nu(i,s,a,l){const c=be(),p=Ot(),_=20+i,w=c[11],I=c[_]=pd(w,s,function Xm(){return dt.lFrame.currentNamespace}()),T=p.firstCreatePass?function iC(i,s,a,l,c,p,_){const w=s.consts,T=ta(s,i,2,c,Wr(w,p));return i_(s,a,T,Wr(w,_)),null!==T.attrs&&df(T,T.attrs,!1),null!==T.mergedAttrs&&df(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,p,c,0,s,a,l):p.data[_];Kr(T,!0);const x=T.mergedAttrs;null!==x&&pt(w,I,x);const P=T.classes;null!==P&&By(w,I,P);const U=T.styles;return null!==U&&C0(w,I,U),64!=(64&T.flags)&&Zp(p,c,I,T),0===function ga(){return dt.lFrame.elementDepthCount}()&&Or(I,c),function su(){dt.lFrame.elementDepthCount++}(),Wa(T)&&(af(p,c,T),e_(p,T,c)),null!==l&&t_(c,T),Nu}function Af(){let i=pn();tl()?nl():(i=i.parent,Kr(i,!1));const s=i;!function ou(){dt.lFrame.elementDepthCount--}();const a=Ot();return a.firstCreatePass&&(as(a,i),xc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Sh(i){return 0!=(16&i.flags)}(s)&&Ag(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tp(i){return 0!=(32&i.flags)}(s)&&Ag(a,s,be(),s.stylesWithoutHost,!1),Af}function xd(i,s,a,l){return Nu(i,s,a,l),Af(),xd}function Md(i,s,a){const l=be(),c=Ot(),p=i+20,_=c.firstCreatePass?function Zl(i,s,a,l,c){const p=s.consts,_=Wr(p,l),w=ta(s,i,8,"ng-container",_);return null!==_&&df(w,_,!0),i_(s,a,w,Wr(p,c)),null!==s.queries&&s.queries.elementStart(s,w),w}(p,c,l,s,a):c.data[p];Kr(_,!0);const w=l[p]=l[11].createComment("");return Zp(c,l,w,_),Or(w,l),Wa(_)&&(af(c,l,_),e_(c,_,l)),null!=a&&t_(l,_),Md}function xg(){let i=pn();const s=Ot();return tl()?nl():(i=i.parent,Kr(i,!1)),s.firstCreatePass&&(as(s,i),xc(i)&&s.queries.elementEnd(i)),xg}function Wl(){return be()}function Sf(i){return!!i&&"function"==typeof i.then}function Ou(i){return!!i&&"function"==typeof i.subscribe}const V_=Ou;function U_(i,s,a,l){const c=be(),p=Ot(),_=pn();return function xf(i,s,a,l,c,p,_,w){const I=Wa(l),x=i.firstCreatePass&&Fb(i),P=s[8],U=Pb(s);let W=!0;if(3&l.type||w){const $e=gr(l,s),Qe=w?w($e):$e,Ie=U.length,ut=w?Gt=>w(nn(Gt[l.index])):l.index;if(hn(a)){let Gt=null;if(!w&&I&&(Gt=function Pa(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const w=s[7],I=c[p+2];return w.length>I?w[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=p,Gt.__ngLastListenerFn__=p,W=!1;else{p=kd(l,s,P,p,!1);const Zt=a.listen(Qe,c,p);U.push(p,Zt),x&&x.push(c,ut,Ie,Ie+1)}}else p=kd(l,s,P,p,!0),Qe.addEventListener(c,p,_),U.push(p),x&&x.push(c,ut,Ie,_)}else p=kd(l,s,P,p,!1);const _e=l.outputs;let Ne;if(W&&null!==_e&&(Ne=_e[c])){const $e=Ne.length;if($e)for(let Qe=0;Qe<$e;Qe+=2){const ki=s[Ne[Qe]][Ne[Qe+1]].subscribe(p),Cc=U.length;U.push(p,ki),x&&x.push(c,l.index,Cc,-(Cc+1))}}}(p,c,c[11],_,i,s,!!a,l),U_}function Mf(i,s,a,l){try{return!1!==a(l)}catch(c){return Vb(i,c),!1}}function kd(i,s,a,l,c){return function p(_){if(_===Function)return l;const w=2&i.flags?mr(i.index,s):s;0==(32&s[2])&&lf(w);let I=Mf(s,0,l,_),T=p.__ngNextListenerFn__;for(;T;)I=Mf(s,0,T,_)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function B_(i=1){return function js(i){return(dt.lFrame.contextLView=function ll(i,s){for(;i>0;)s=s[15],i--;return s}(i,dt.lFrame.contextLView))[8]}(i)}function Nn(i,s){let a=null;const l=function pb(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let c=0;c<s.length;c++){const p=s[c];if("*"!==p){if(null===l?S0(i,p,!0):jy(l,p))return c}else a=c}return a}function kf(i){const s=be()[16][6];if(!s.projection){const l=s.projection=Di(i?i.length:1,null),c=l.slice();let p=s.child;for(;null!==p;){const _=i?Nn(p,i):0;null!==_&&(c[_]?c[_].projectionNext=p:l[_]=p,c[_]=p),p=p.next}}}function Rw(i,s=0,a){const l=be(),c=Ot(),p=ta(c,20+i,16,null,a||null);null===p.projection&&(p.projection=s),nl(),64!=(64&p.flags)&&function ub(i,s,a){b0(s[11],0,s,a,zp(i,a,s),v0(a.parent||s[6],a,s))}(c,l,p)}function $_(i,s,a,l,c){const p=i[a+1],_=null===s;let w=l?Jo(p):Du(p),I=!1;for(;0!==w&&(!1===I||_);){const x=i[w+1];Od(i[w],s)&&(I=!0,i[w+1]=l?F0(x):O0(x)),w=l?Jo(x):Du(x)}I&&(i[a+1]=l?O0(p):F0(p))}function Od(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ks(i,s)>=0}function Fd(i,s){return function Do(i,s,a,l){const c=be(),p=Ot(),_=wi(2);p.firstUpdatePass&&function Ww(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[yr()],_=function z_(i,s){return s>=i.expandoStartIndex}(i,a);(function K_(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function aC(i,s,a,l){const c=function ya(i){const s=dt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Ld(a=Ng(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Ng(c,i,s,a,l),null===p){let I=function uC(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Du(l))return i[Jo(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Ng(null,i,s,I[1],l),I=Ld(I,s.attrs,l),function lC(i,s,a,l){i[Jo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function Kw(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Ld(l,i[p].hostAttrs,a);return Ld(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function Uw(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,w=Jo(_),I=Du(_);i[l]=a;let x,T=!1;if(Array.isArray(a)){const P=a;x=P[1],(null===x||Ks(P,x)>0)&&(T=!0)}else x=a;if(c)if(0!==I){const U=Jo(i[w+1]);i[l+1]=$y(U,w),0!==U&&(i[U+1]=P0(i[U+1],l)),i[w+1]=function mb(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=$y(w,0),0!==w&&(i[w+1]=P0(i[w+1],l)),w=l;else i[l+1]=$y(I,0),0===w?w=l:i[I+1]=P0(i[I+1],l),I=l;T&&(i[l+1]=O0(i[l+1])),$_(i,x,l,!0),$_(i,x,l,!1),function Bw(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Ks(p,s)>=0&&(a[l+1]=F0(a[l+1]))}(s,x,i,l,p),_=$y(w,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==At&&Lr(c,_,s)&&function W_(i,s,a,l,c,p,_,w){if(!(3&s.type))return;const I=i.data,T=I[w+1];Vd(function yb(i){return 1==(1&i)}(T)?Yw(I,s,a,c,Du(T),_):void 0)||(Vd(p)||function N0(i){return 2==(2&i)}(T)&&(p=Yw(I,null,a,c,w,_)),function Uy(i,s,a,l,c){const p=hn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:se.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=se.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,ao(yr(),a),c,p))}(p,p.data[yr()],c,c[11],i,c[_+1]=function Nf(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=he(Ys(i)))),i}(s,a),l,_)}(i,s,null,!0),Fd}function Ng(i,s,a,l,c){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=Ld(l,p.hostAttrs,c),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Ld(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hn(i,_,!!a||s[++p]))}return void 0===i?null:i}function Yw(i,s,a,l,c,p){const _=null===s;let w;for(;c>0;){const I=i[c],T=Array.isArray(I),x=T?I[1]:I,P=null===x;let U=a[c+1];U===At&&(U=P?lt:void 0);let W=P?bl(U,l):x===l?U:void 0;if(T&&!Vd(W)&&(W=bl(I,l)),Vd(W)&&(w=W,_))return w;const _e=i[c+1];c=_?Jo(_e):Du(_e)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(w=bl(I,l))}return w}function Vd(i){return void 0!==i}function Pg(i,s=""){const a=be(),l=Ot(),c=i+20,p=l.firstCreatePass?ta(l,c,1,s,null):l.data[c],_=a[c]=function hd(i,s){return hn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Zp(l,a,_,p),Kr(p,!1)}function Ud(i){return Of("",i,""),Ud}function Of(i,s,a){const l=be(),c=function Dd(i,s,a,l){return Lr(i,Bs(),a)?s+pe(a)+l:At}(l,i,s,a);return c!==At&&Ma(l,yr(),c),Of}function Pf(i,s,a,l,c){const p=be(),_=$l(p,i,s,a,l,c);return _!==At&&Ma(p,yr(),_),Pf}const ec=void 0;var cr=["en",[["a","p"],["AM","PM"],ec],[["AM","PM"],ec,ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ec,"{1} 'at' {0}",ec],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Pe(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let na={};function tt(i){const s=function Br(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Ge(s);if(a)return a;const l=s.split("-")[0];if(a=Ge(l),a)return a;if("en"===l)return cr;throw new Error(`Missing locale data for the locale "${i}".`)}function hE(i){return tt(i)[ee.PluralCase]}function Ge(i){return i in na||(na[i]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[i]),na[i]}var ee=(()=>((ee=ee||{})[ee.LocaleId=0]="LocaleId",ee[ee.DayPeriodsFormat=1]="DayPeriodsFormat",ee[ee.DayPeriodsStandalone=2]="DayPeriodsStandalone",ee[ee.DaysFormat=3]="DaysFormat",ee[ee.DaysStandalone=4]="DaysStandalone",ee[ee.MonthsFormat=5]="MonthsFormat",ee[ee.MonthsStandalone=6]="MonthsStandalone",ee[ee.Eras=7]="Eras",ee[ee.FirstDayOfWeek=8]="FirstDayOfWeek",ee[ee.WeekendRange=9]="WeekendRange",ee[ee.DateFormat=10]="DateFormat",ee[ee.TimeFormat=11]="TimeFormat",ee[ee.DateTimeFormat=12]="DateTimeFormat",ee[ee.NumberSymbols=13]="NumberSymbols",ee[ee.NumberFormats=14]="NumberFormats",ee[ee.CurrencyCode=15]="CurrencyCode",ee[ee.CurrencySymbol=16]="CurrencySymbol",ee[ee.CurrencyName=17]="CurrencyName",ee[ee.Currencies=18]="Currencies",ee[ee.Directionality=19]="Directionality",ee[ee.PluralCase=20]="PluralCase",ee[ee.ExtraData=21]="ExtraData",ee))();const Bg="en-US";let pC=Bg;function Kg(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let p=0;p<i.length;p++)Kg(i[p],s,a,l,c);else{const p=Ot(),_=be();let w=Ed(i)?i:Q(i.provide),I=lg(i);const T=pn(),x=1048575&T.providerIndexes,P=T.directiveStart,U=T.providerIndexes>>20;if(Ed(i)||!i.multi){const W=new Vo(I,c,zl),_e=Uu(w,s,c?x:x+U,P);-1===_e?(Hs(kn(T,_),p,w),So(p,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(W),_.push(W)):(a[_e]=W,_[_e]=W)}else{const W=Uu(w,s,x+U,P),_e=Uu(w,s,x,x+U),Ne=W>=0&&a[W],$e=_e>=0&&a[_e];if(c&&!$e||!c&&!Ne){Hs(kn(T,_),p,w);const Qe=function cv(i,s,a,l,c){const p=new Vo(i,a,zl);return p.multi=[],p.index=s,p.componentProviders=0,lv(p,c,l&&!a),p}(c?Qg:Yg,a.length,c,l,I);!c&&$e&&(a[_e].providerFactory=Qe),So(p,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else So(p,i,W>-1?W:_e,lv(a[c?_e:W],I,!c&&l));!c&&l&&$e&&a[_e].componentProviders++}}}function So(i,s,a,l){const c=Ed(s),p=function m_(i){return!!i.useClass}(s);if(c||p){const I=(p?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[l,I]):T[x+1].push(l,I)}else T.push(a,I)}}}function lv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Uu(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Yg(i,s,a,l){return zf(this.multi,[])}function Qg(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Ii(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),zf(c,p);for(let I=_;I<w.length;I++)p.push(w[I])}else p=[],zf(c,p);return p}function zf(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Jg(i,s=[]){return a=>{a.providersResolver=(l,c)=>function ME(i,s,a){const l=Ot();if(l.firstCreatePass){const c=qr(i);Kg(a,l.data,l.blueprint,c,!0),Kg(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class ws{}class dv{resolveComponentFactory(s){throw function kE(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Yd=(()=>{class i{}return i.NULL=new dv,i})();function RE(){return uc(pn(),be())}function uc(i,s){return new Zf(gr(i,s))}let Zf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=RE,i})();function NE(i){return i instanceof Zf?i.nativeElement:i}class hv{}let Xg=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function xC(){const i=be(),a=mr(pn().index,i);return function SC(i){return i[11]}(_i(a)?a:i)}(),i})(),OE=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class lc{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Bu=new lc("13.3.1"),em={};function ra(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(nn(p)),si(p))for(let w=10;w<p.length;w++){const I=p[w],T=I[1].firstChild;null!==T&&ra(I[1],I,T,l)}const _=a.type;if(8&_)ra(i,s,a.child,l);else if(32&_){const w=Ye(a,s);let I;for(;I=w();)l.push(I)}else if(16&_){const w=I0(s,a);if(Array.isArray(w))l.push(...w);else{const I=bn(s[16]);ra(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class Qd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ra(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(si(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(My(s,l),hs(a,l))}this._attachedToViewContainer=!1}ky(this._lView[1],this._lView)}onDestroy(s){n_(this._lView[1],this._lView,null,s)}markForCheck(){lf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){iw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Ob(i,s,a){Us(!0);try{iw(i,s,a)}finally{Us(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qp(i,s){Wp(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=s}}class Jd extends Qd{constructor(s){super(s),this._view=s}detectChanges(){sw(this._view)}checkNoChanges(){!function pA(i){Us(!0);try{sw(i)}finally{Us(!1)}}(this._view)}get context(){return null}}class fv extends Yd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ht(s);return new gv(a,this.ngModule)}}function pv(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class gv extends ws{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function k0(i){return i.map(Io).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return pv(this.componentDef.inputs)}get outputs(){return pv(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function MC(i,s){return{get:(a,l,c)=>{const p=i.get(a,em,c);return p!==em||l===em?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(hv,Po),w=p.get(OE,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function ig(i,s,a){if(hn(i))return i.selectRootElement(s,a===$t.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):pd(_.createRenderer(null,this.componentDef),T,function Wf(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),P=this.componentDef.onPush?576:528,U=function hg(i,s){return{components:[],scheduler:i||Dy,clean:mA,playerHandler:s||null,flags:0}}(),W=tg(0,null,null,1,0,null,null,null,null,null),_e=_d(null,W,U,P,null,null,_,I,w,p);let Ne,$e;uo(_e);try{const Qe=function Bl(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=ta(_,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(df(I,T,!0),null!==i&&(pt(c,i,T),null!==I.classes&&By(c,i,I.classes),null!==I.styles&&C0(c,i,I.styles)));const x=l.createRenderer(i,s),P=_d(a,z0(s),null,s.onPush?64:16,a[20],I,l,x,p||null,null);return _.firstCreatePass&&(Hs(kn(I,a),_,s.type),J0(_,I),o_(I,a.length,1)),d_(a,P),a[20]=P}(x,this.componentDef,_e,_,I);if(x)if(l)pt(I,x,["ng-version",Bu.full]);else{const{attrs:Ie,classes:ut}=function Kp(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!qi(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&pt(I,x,Ie),ut&&ut.length>0&&By(I,x,ut.join(" "))}if($e=pa(W,20),void 0!==a){const Ie=$e.projection=[];for(let ut=0;ut<this.ngContentSelectors.length;ut++){const Gt=a[ut];Ie.push(null!=Gt?Array.from(Gt):null)}}Ne=function b_(i,s,a,l,c){const p=a[1],_=function xb(i,s,a){const l=pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),a_(i,l,s,Su(i,s,1,null),a));const c=Ii(s,i,l.directiveStart,l);Or(c,s);const p=gr(l,s);return p&&Or(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=pn();s.contentQueries(1,_,I.directiveStart)}const w=pn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||($s(w.index),uf(a[1],w,0,w.directiveStart,w.directiveEnd,s),Q0(s,_)),_}(Qe,this.componentDef,_e,U,[mw]),vd(W,_e,null)}finally{co()}return new tm(this.componentType,Ne,uc($e,_e),_e,$e)}}class tm extends class Wd{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Jd(c),this.componentType=s}get injector(){return new bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ju{}class PE{}const cc=new Map;class eh extends ju{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fv(this);const l=an(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=jb(s,a,[{provide:ju,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver}],he(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=gn.THROW_IF_NOT_FOUND,l=at.Default){return s===gn||s===ju||s===ag?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Kf extends PE{constructor(s){super(),this.moduleType=s,null!==an(s)&&function dc(i){const s=new Set;!function a(l){const c=an(l,!0),p=c.id;null!==p&&(function Xd(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${he(s)} vs ${he(s.name)}`)}(p,cc.get(p),l),cc.set(p,l));const _=g(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new eh(this.moduleType,s)}}function Jn(i,s,a,l){return hc(be(),ur(),i,s,a,l)}function zt(i,s,a,l,c){return function VE(i,s,a,l,c,p,_){const w=s+a;return Na(i,w,c,p)?ys(i,w+2,_?l.call(_,c,p):l(c,p)):th(i,w+2)}(be(),ur(),i,s,a,l,c)}function th(i,s){const a=i[s];return a===At?void 0:a}function hc(i,s,a,l,c,p){const _=s+a;return Lr(i,_,c)?ys(i,_+1,p?l.call(p,c):l(c)):th(i,_+1)}function nh(i,s){const a=Ot();let l;const c=i+20;a.firstCreatePass?(l=function FC(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[c]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(c,l.onDestroy)):l=a.data[c];const p=l.factory||(l.factory=zr(l.type)),_=jn(zl);try{const w=ui(!1),I=p();return ui(w),function M_(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,be(),c,I),I}finally{jn(_)}}function BE(i,s,a){const l=i+20,c=be(),p=vi(c,l);return function ja(i,s){return i[1].data[s].pure}(c,l)?hc(c,ur(),s,p.transform,a,p):p.transform(a)}function om(i){return s=>{setTimeout(i,void 0,s)}}const xo=class sm extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let w=s,I=a||(()=>null),T=l;if(s&&"object"==typeof s){const P=s;w=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(p=P.error)||void 0===p?void 0:p.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=om(I),w&&(w=om(w)),T&&(T=om(T)));const x=super.subscribe({next:w,error:I,complete:T});return s instanceof K.w0&&s.add(x),x}};function jE(){return this._results[Yn()]()}class am{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Yn(),l=am.prototype;l[a]||(l[a]=jE)}get changes(){return this._changes||(this._changes=new xo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=wr(s);(this._changesDetected=!function _l(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let rh=(()=>{class i{}return i.__NG_ELEMENT_ID__=UC,i})();const $E=rh,VC=class extends $E{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=_d(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),vd(a,l,s),new Qd(l)}};function UC(){return um(pn(),be())}function um(i,s){return 4&i.type?new VC(s,i,uc(i,s)):null}let Hu=(()=>{class i{}return i.__NG_ELEMENT_ID__=HE,i})();function HE(){return ih(pn(),be())}const BC=Hu,Sr=class extends BC{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return uc(this._hostTNode,this._hostLView)}get injector(){return new bi(this._hostTNode,this._hostLView)}get parentInjector(){const s=li(this._hostTNode,this._hostLView);if(zc(s)){const a=Ei(s,this._hostLView),l=ln(s);return new bi(a[1].data[l+8],a)}return new bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=lm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function Go(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,c=P.projectableNodes,p=P.ngModuleRef}const I=_?s:new gv(Ht(s)),T=l||this.parentInjector;if(!p&&null==I.ngModule){const U=(_?T:this.parentInjector).get(ju,null);U&&(p=U)}const x=I.create(T,c,void 0,p);return this.insert(x.hostView,w),x}insert(s,a){const l=s._lView,c=l[1];if(function ru(i){return si(i[3])}(l)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const P=l[3],U=new Sr(P,P[6],P[3]);U.detach(U.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function xy(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],vl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function gd(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,p);const w=Fy(p,_),I=l[11],T=of(I,_[7]);return null!==T&&function sf(i,s,a,l,c,p){l[0]=c,l[6]=s,Wp(i,l,a,1,c,p)}(c,_[6],I,l,T,w),s.attachToViewContainerRef(),vl(cm(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=lm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=My(this._lContainer,a);l&&(hs(cm(this._lContainer),a),ky(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=My(this._lContainer,a);return l&&null!=hs(cm(this._lContainer),a)?new Qd(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function lm(i){return i[8]}function cm(i){return i[8]||(i[8]=[])}function ih(i,s){let a;const l=s[i.index];if(si(l))a=l;else{let c;if(8&i.type)c=nn(l);else{const p=s[11];c=p.createComment("");const _=gr(i,s);ps(p,of(p,_),c,function ab(i,s){return hn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=kb(l,s,c,i),d_(s,a)}return new Sr(a,i,s)}class fc{constructor(s){this.queryList=s,this.matches=null}clone(){return new fc(this.queryList)}setDirty(){this.queryList.setDirty()}}class dm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new dm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==qE(s,a).matches&&this.queries[a].setDirty()}}class vv{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class hm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new hm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class wv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new wv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,$C(a,p)),this.matchTNodeWithReadOption(s,a,jo(a,s,p,!1,!1))}else l===rh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,jo(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Zf||c===Hu||c===rh&&4&a.type)this.addMatch(a.index,-2);else{const p=jo(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function $C(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Ev(i,s,a,l){return-1===a?function Qf(i,s){return 11&i.type?uc(i,s):4&i.type?um(i,s):null}(s,i):-2===a?function HC(i,s,a){return a===Zf?uc(s,i):a===rh?um(s,i):a===Hu?ih(s,i):void 0}(i,s,l):Ii(i,i[1],a,s)}function Iv(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,w=[];for(let I=0;I<_.length;I+=2){const T=_[I];w.push(T<0?null:Ev(s,p[T],_[I+1],a.metadata.read))}c.matches=w}return c.matches}function fm(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=Iv(i,s,c,a);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(_[w/2]);else{const T=p[w+1],x=s[-I];for(let P=10;P<x.length;P++){const U=x[P];U[17]===U[3]&&fm(U[1],U,T,l)}if(null!==x[9]){const P=x[9];for(let U=0;U<P.length;U++){const W=P[U];fm(W[1],W,T,l)}}}}}return l}function bv(i){const s=be(),a=Ot(),l=ol();al(l+1);const c=qE(a,l);if(i.dirty&&Fs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?fm(a,s,l,[]):Iv(a,s,c,l);i.reset(p,NE),i.notifyOnChanges()}return!0}return!1}function Cv(i,s,a,l){const c=Ot();if(c.firstCreatePass){const p=pn();(function gc(i,s,a){null===i.queries&&(i.queries=new hm),i.queries.track(new wv(s,a))})(c,new vv(s,a,l),p.index),function zC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function pc(i,s,a){const l=new am(4==(4&a));n_(i,s,l,l.destroy),null===s[19]&&(s[19]=new dm),s[19].queries.push(new fc(l))}(c,be(),a)}function GE(){return function qC(i,s){return i[19].queries[s].queryList}(be(),ol())}function qE(i,s){return i.queries.getByIndex(s)}function zE(i,s){return um(i,s)}function lh(...i){}const Nv=new En("Application Initializer");let Ov=(()=>{class i{constructor(a){this.appInits=a,this.resolve=lh,this.reject=lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Sf(p))a.push(p);else if(V_(p)){const _=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(We(Nv,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Pv=new En("AppId",{providedIn:"root",factory:function Fv(){return`${_c()}${_c()}${_c()}`}});function _c(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vc=new En("Platform Initializer"),aI=new En("Platform ID"),Lv=new En("appBootstrapListener");let uI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const ch=new En("LocaleId",{providedIn:"root",factory:()=>Tt(ch,at.Optional|at.SkipSelf)||function tD(){return"undefined"!=typeof $localize&&$localize.locale||Bg}()}),qu=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class rD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Vv=(()=>{class i{compileModuleSync(a){return new Kf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(an(a).declarations).reduce((_,w)=>{const I=Ht(w);return I&&_.push(new gv(I)),_},[]);return new rD(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lI=(()=>Promise.resolve(0))();function wc(i){"undefined"==typeof Zone?lI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Yi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xo(!1),this.onMicrotaskEmpty=new xo(!1),this.onStable=new xo(!1),this.onError=new xo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function bm(){let i=Ut.requestAnimationFrame,s=Ut.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Cm(i){const s=()=>{!function dI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ut,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ep(i),i.isCheckStableRunning=!0,mi(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ep(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,w)=>{try{return Uv(i),a.invokeTask(c,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),$a(i)}},onInvoke:(a,l,c,p,_,w,I)=>{try{return Uv(i),a.invoke(c,p,_,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),$a(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,ep(i),mi(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,cI,lh,lh);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const cI={};function mi(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ep(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Uv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function $a(i){i._nesting--,mi(i)}class hh{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xo,this.onMicrotaskEmpty=new xo,this.onStable=new xo,this.onError=new xo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Bv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yi.assertNotInAngularZone(),wc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wc(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(We(Yi))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),zu=(()=>{class i{constructor(){this._applications=new Map,Dm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Dm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class iD{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function fh(i){Dm=i}let jr,Dm=new iD;const pI=new En("AllowMultipleToken");class sD{constructor(s,a){this.name=s,this.token=a}}function gI(i,s,a=[]){const l=`Platform: ${s}`,c=new En(l);return(p=[])=>{let _=mI();if(!_||_.injector.get(pI,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const w=a.concat(p).concat({provide:c,useValue:!0},{provide:ug,useValue:"platform"});!function oD(i){if(jr&&!jr.destroyed&&!jr.injector.get(pI,!1))throw new ke(400,"");jr=i.get(yI);const s=i.get(vc,null);s&&s.forEach(a=>a())}(gn.create({providers:w,name:l}))}return function Tm(i){const s=mI();if(!s)throw new ke(401,"");return s}()}}function mI(){return jr&&!jr.destroyed?jr:null}let yI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function _I(i,s){let a;return a="noop"===i?new hh:("zone.js"===i?void 0:i)||new Yi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Yi,useValue:w}];return w.run(()=>{const T=gn.create({providers:I,parent:this.injector,name:a.moduleType.name}),x=a.create(T),P=x.injector.get(Ir,null);if(!P)throw new ke(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:W=>{P.handleError(W)}});x.onDestroy(()=>{Sm(this._modules,x),U.unsubscribe()})}),function Ic(i,s,a){try{const l=a();return Sf(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const U=x.injector.get(Ov);return U.runInitializers(),U.donePromise.then(()=>(function vs(i){ot(i,"Expected localeId to be defined"),"string"==typeof i&&(pC=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(ch,Bg)||Bg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const c=ph({},l);return function Ec(i,s,a){const l=new Kf(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Am);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(We(gn))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function ph(i,s){return Array.isArray(s)?s.reduce(ph,i):Object.assign(Object.assign({},i),s)}let Am=(()=>{class i{constructor(a,l,c,p,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),I=new O.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Yi.assertNotInAngularZone(),wc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),P.unsubscribe()}});this.isStable=(0,oe.T)(w,I.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let c;c=a instanceof ws?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function fI(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ju),w=c.create(gn.NULL,[],l||c.selector,p),I=w.location.nativeElement,T=w.injector.get(Bv,null),x=T&&w.injector.get(zu);return T&&x&&x.registerApplication(I,T),w.onDestroy(()=>{this.detachView(w.hostView),Sm(this.components,w),x&&x.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Sm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Lv,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(We(Yi),We(gn),We(Ir),We(Yd),We(Ov))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let xm=!0,Mm=!1;function tp(){return Mm=!0,xm}function km(){if(Mm)throw new Error("Cannot enable prod mode after platform setup.");xm=!1}let II=(()=>{class i{}return i.__NG_ELEMENT_ID__=uD,i})();function uD(i){return function bI(i,s,a){if(Ms(i)&&!a){const l=mr(i.index,s);return new Qd(l,l)}return 47&i.type?new Qd(s[16],s):null}(pn(),be(),16==(16&i))}class AI{constructor(){}supports(s){return yf(s)}create(s){return new fD(s)}}const hD=(i,s)=>s;class fD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Lm(l,c,p)?a:l,w=Lm(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const T=w-c,x=I-c;if(T!=x){for(let U=0;U<T;U++){const W=U<p.length?p[U]:p[U]=0,_e=W+U;x<=_e&&_e<T&&(p[U]=W+1)}p[_.previousIndex]=x-T}}w!==I&&s(_,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!yf(s))throw new ke(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else c=0,function Jb(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Yn()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new pD(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new SI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class pD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class SI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new gD,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lm(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Hv{constructor(){}supports(s){return s instanceof Map||S_(s)}create(){return new xI}}class xI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||S_(s)))throw new ke(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new Gv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Gv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rp(){return new bc([new AI])}let bc=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||rp()),deps:[[i,new yo,new hi]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:rp}),i})();function Vm(){return new ip([new Hv])}let ip=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Vm()),deps:[[i,new yo,new hi]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Vm}),i})();const yD=gI(null,"core",[{provide:aI,useValue:"unknown"},{provide:yI,deps:[gn]},{provide:zu,deps:[]},{provide:uI,deps:[]}]);let _D=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(We(Am))},i.\u0275mod=Y({type:i}),i.\u0275inj=Kt({}),i})()},3942:(rt,Ce,N)=>{N.d(Ce,{Z:()=>ke});var d=N(2090),K=N(4859),O=N(9681),oe=N(1877);class J{constructor(pe,Ee){this._delegate=pe,this.firebase=Ee,(0,O._addComponent)(pe,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Ee=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(pe);return!ze.isInitialized()&&"EXPLICIT"===(null===(Xe=ze.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:Ee})}_removeServiceInstance(pe,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ee)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function le(){const Fe=function he(Fe){const pe={},Ee={__esModule:!0,initializeApp:function De(Be,te={}){const z=O.initializeApp(Be,te);if((0,d.r3)(pe,z.name))return pe[z.name];const ne=new Fe(z,Ee);return pe[z.name]=ne,ne},app:ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(Be){const te=Be.name,z=te.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const ne=(me=ze())=>{if("function"!=typeof me[z])throw ae.create("invalid-app-argument",{appName:te});return me[z]()};void 0!==Be.serviceProps&&(0,d.ZB)(ne,Be.serviceProps),Ee[z]=ne,Fe.prototype[z]=function(...me){return this._getService.bind(this,te).apply(this,Be.multipleInstances?me:[])}}return"PUBLIC"===Be.type?Ee[z]:null},removeApp:function Xe(Be){delete pe[Be]},useAsService:function He(Be,te){return"serverAuth"===te?null:te},modularAPIs:O}};function ze(Be){if(!(0,d.r3)(pe,Be=Be||O._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Be});return pe[Be]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function ve(){return Object.keys(pe).map(Be=>pe[Be])}}),ze.App=Fe,Ee}(J);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function pe(Ee){(0,d.ZB)(Fe,Ee)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Fe}(),$=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=j;!function Ae(Fe){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Fe)}()},9681:(rt,Ce,N)=>{N.r(Ce),N.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>Tn,_addComponent:()=>on,_addOrOverwriteComponent:()=>yi,_apps:()=>ht,_clearComponents:()=>jt,_components:()=>sn,_getProvider:()=>Ji,_registerComponent:()=>Xt,_removeServiceInstance:()=>Kt,deleteApp:()=>es,getApp:()=>kr,getApps:()=>Xi,initializeApp:()=>Ni,onLog:()=>Zn,registerVersion:()=>Gr,setLogLevel:()=>jn});var d=N(5861),K=N(4859),O=N(1877),oe=N(2090);class J{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function ge(Ze){const Te=Ze.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(Ke)){const ct=Ke.getImmediate();return`${ct.library}/${ct.version}`}return null}).filter(Ke=>Ke).join(" ")}}const ae="@firebase/app",le=new O.Yd("@firebase/app"),Tn="[DEFAULT]",ot={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,sn=new Map;function on(Ze,Te){try{Ze.container.addComponent(Te)}catch(Ke){le.debug(`Component ${Te.name} failed to register with FirebaseApp ${Ze.name}`,Ke)}}function yi(Ze,Te){Ze.container.addOrOverwriteComponent(Te)}function Xt(Ze){const Te=Ze.name;if(sn.has(Te))return le.debug(`There were multiple attempts to register component ${Te}.`),!1;sn.set(Te,Ze);for(const Ke of ht.values())on(Ke,Ze);return!0}function Ji(Ze,Te){const Ke=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),Ze.container.getProvider(Te)}function Kt(Ze,Te,Ke=Tn){Ji(Ze,Te).clearInstance(Ke)}function jt(){sn.clear()}const ni=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ds{constructor(Te,Ke,ct){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=ct,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const Mr="9.6.10";function Ni(Ze,Te={}){"object"!=typeof Te&&(Te={name:Te});const Ke=Object.assign({name:Tn,automaticDataCollectionEnabled:!1},Te),ct=Ke.name;if("string"!=typeof ct||!ct)throw ni.create("bad-app-name",{appName:String(ct)});const Lt=ht.get(ct);if(Lt){if((0,oe.vZ)(Ze,Lt.options)&&(0,oe.vZ)(Ke,Lt.config))return Lt;throw ni.create("duplicate-app",{appName:ct})}const Nt=new K.H0(ct);for(const L of sn.values())Nt.addComponent(L);const B=new Ds(Ze,Ke,Nt);return ht.set(ct,B),B}function kr(Ze=Tn){const Te=ht.get(Ze);if(!Te)throw ni.create("no-app",{appName:Ze});return Te}function Xi(){return Array.from(ht.values())}function es(Ze){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(Ze){const Te=Ze.name;ht.has(Te)&&(ht.delete(Te),yield Promise.all(Ze.container.getProviders().map(Ke=>Ke.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function Gr(Ze,Te,Ke){var ct;let Lt=null!==(ct=ot[Ze])&&void 0!==ct?ct:Ze;Ke&&(Lt+=`-${Ke}`);const Nt=Lt.match(/\s|\//),B=Te.match(/\s|\//);if(Nt||B){const L=[`Unable to register library "${Lt}" with version "${Te}":`];return Nt&&L.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),Nt&&B&&L.push("and"),B&&L.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void le.warn(L.join(" "))}Xt(new K.wA(`${Lt}-version`,()=>({library:Lt,version:Te}),"VERSION"))}function Zn(Ze,Te){if(null!==Ze&&"function"!=typeof Ze)throw ni.create("invalid-log-argument");(0,O.Am)(Ze,Te)}function jn(Ze){(0,O.Ub)(Ze)}const fn="firebase-heartbeat-store";let Wn=null;function Ts(){return Wn||(Wn=(0,oe.X3)("firebase-heartbeat-database",1,(Ze,Te)=>{0===Te&&Ze.createObjectStore(fn)}).catch(Ze=>{throw ni.create("storage-open",{originalErrorMessage:Ze.message})})),Wn}function $t(){return($t=(0,d.Z)(function*(Ze){try{return(yield Ts()).transaction(fn).objectStore(fn).get(nr(Ze))}catch(Te){throw ni.create("storage-get",{originalErrorMessage:Te.message})}})).apply(this,arguments)}function nt(Ze,Te){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(Ze,Te){try{const ct=(yield Ts()).transaction(fn,"readwrite");return yield ct.objectStore(fn).put(Te,nr(Ze)),ct.complete}catch(Ke){throw ni.create("storage-set",{originalErrorMessage:Ke.message})}})).apply(this,arguments)}function nr(Ze){return`${Ze.name}!${Ze.options.appId}`}class no{constructor(Te){this.container=Te,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new lt(Ke),this._heartbeatsCachePromise=this._storage.read().then(ct=>(this._heartbeatsCache=ct,ct))}triggerHeartbeat(){var Te=this;return(0,d.Z)(function*(){const ct=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=hr();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!Te._heartbeatsCache.heartbeats.some(Nt=>Nt.date===Lt))return Te._heartbeatsCache.heartbeats.push({date:Lt,agent:ct}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Nt=>{const B=new Date(Nt.date).valueOf();return Date.now()-B<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,d.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const Ke=hr(),{heartbeatsToSend:ct,unsentEntries:Lt}=function rr(Ze,Te=1024){const Ke=[];let ct=Ze.slice();for(const Lt of Ze){const Nt=Ke.find(B=>B.agent===Lt.agent);if(Nt){if(Nt.dates.push(Lt.date),fr(Ke)>Te){Nt.dates.pop();break}}else if(Ke.push({agent:Lt.agent,dates:[Lt.date]}),fr(Ke)>Te){Ke.pop();break}ct=ct.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:ct}}(Te._heartbeatsCache.heartbeats),Nt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ct}));return Te._heartbeatsCache.lastSentHeartbeatDate=Ke,Lt.length>0?(Te._heartbeatsCache.heartbeats=Lt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Nt})()}}function hr(){return(new Date).toISOString().substring(0,10)}class lt{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,d.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function ua(Ze){return $t.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var Ke=this;return(0,d.Z)(function*(){var ct;if(yield Ke._canUseIndexedDBPromise){const Nt=yield Ke.read();return nt(Ke.app,{lastSentHeartbeatDate:null!==(ct=Te.lastSentHeartbeatDate)&&void 0!==ct?ct:Nt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var Ke=this;return(0,d.Z)(function*(){var ct;if(yield Ke._canUseIndexedDBPromise){const Nt=yield Ke.read();return nt(Ke.app,{lastSentHeartbeatDate:null!==(ct=Te.lastSentHeartbeatDate)&&void 0!==ct?ct:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...Te.heartbeats]})}})()}}function fr(Ze){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Ft(Ze){Xt(new K.wA("platform-logger",Te=>new J(Te),"PRIVATE")),Xt(new K.wA("heartbeat",Te=>new no(Te),"PRIVATE")),Gr(ae,"0.7.20",Ze),Gr(ae,"0.7.20","esm2017"),Gr("fire-js","")}("")},4859:(rt,Ce,N)=>{N.d(Ce,{H0:()=>he,wA:()=>O});var d=N(5861),K=N(2090);class O{constructor(j,$,Q){this.name=j,this.instanceFactory=$,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class J{constructor(j,$){this.name=j,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const $=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has($)){const Q=new K.BH;if(this.instancesDeferred.set($,Q),this.isInitialized($)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:$});qe&&Q.resolve(qe)}catch(qe){}}return this.instancesDeferred.get($).promise}getImmediate(j){var $;const Q=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),qe=null!==($=null==j?void 0:j.optional)&&void 0!==$&&$;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if(qe)return null;throw Ae}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ae(le){return"EAGER"===le.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch($){}for(const[$,Q]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier($);try{const Ae=this.getOrInitializeService({instanceIdentifier:qe});Q.resolve(Ae)}catch(Ae){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,d.Z)(function*(){const $=Array.from(j.instances.values());yield Promise.all([...$.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...$.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:$={}}=j,Q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:Q,options:$});for(const[Ae,ke]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&ke.resolve(qe);return qe}onInit(j,$){var Q;const qe=this.normalizeInstanceIdentifier($),Ae=null!==(Q=this.onInitCallbacks.get(qe))&&void 0!==Q?Q:new Set;Ae.add(j),this.onInitCallbacks.set(qe,Ae);const ke=this.instances.get(qe);return ke&&j(ke,qe),()=>{Ae.delete(j)}}invokeOnInitCallbacks(j,$){const Q=this.onInitCallbacks.get($);if(Q)for(const qe of Q)try{qe(j,$)}catch(Ae){}}getOrInitializeService({instanceIdentifier:j,options:$={}}){let Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(le=j,le===oe?void 0:le),options:$}),this.instances.set(j,Q),this.instancesOptions.set(j,$),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(qe){}var le;return Q||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const $=this.getProvider(j.name);if($.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);$.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const $=new J(j,this);return this.providers.set(j,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,Ce,N)=>{N.d(Ce,{Am:()=>le,Ub:()=>he,Yd:()=>ae,in:()=>K});const d=[];var K=(()=>{return(j=K||(K={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",K;var j})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,J={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},ge=(j,$,...Q)=>{if($<j.logLevel)return;const qe=(new Date).toISOString(),Ae=J[$];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ae](`[${qe}]  ${j.name}:`,...Q)};class ae{constructor($){this.name=$,this._logLevel=oe,this._logHandler=ge,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in K))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...$),this._logHandler(this,K.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...$),this._logHandler(this,K.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,K.INFO,...$),this._logHandler(this,K.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,K.WARN,...$),this._logHandler(this,K.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...$),this._logHandler(this,K.ERROR,...$)}}function he(j){d.forEach($=>{$.setLogLevel(j)})}function le(j,$){for(const Q of d){let qe=null;$&&$.level&&(qe=O[$.level]),Q.userLogHandler=null===j?null:(Ae,ke,...Fe)=>{const pe=Fe.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Xe){return null}}).filter(Ee=>Ee).join(" ");ke>=(null!=qe?qe:Ae.logLevel)&&j({level:K[ke].toLowerCase(),message:pe,args:Fe,type:Ae.name})}}}},5861:(rt,Ce,N)=>{function d(O,oe,J,ge,ae,he,le){try{var j=O[he](le),$=j.value}catch(Q){return void J(Q)}j.done?oe($):Promise.resolve($).then(ge,ae)}function K(O){return function(){var oe=this,J=arguments;return new Promise(function(ge,ae){var he=O.apply(oe,J);function le($){d(he,ge,ae,le,j,"next",$)}function j($){d(he,ge,ae,le,j,"throw",$)}le(void 0)})}}N.d(Ce,{Z:()=>K})}},rt=>{rt(rt.s=9559)}]);